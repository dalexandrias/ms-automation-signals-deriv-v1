# üìñ MANUAL DE USO - SISTEMA DIN√ÇMICO DE INDICADORES

## üéØ INTRODU√á√ÉO

Este manual explica como usar o **Sistema Din√¢mico de Indicadores T√©cnicos** para trading automatizado na plataforma Deriv. O sistema analisa m√∫ltiplos indicadores em tempo real e gera sinais de compra (RISE) ou venda (FALL) quando h√° consenso entre os indicadores.

---

## üöÄ INSTALA√á√ÉO E CONFIGURA√á√ÉO INICIAL

### 1. **Pr√©-requisitos**
- Python 3.9 ou superior
- MongoDB (opcional, para persist√™ncia)
- Token da API Deriv
- Bot do Telegram configurado

### 2. **Instala√ß√£o das Depend√™ncias**
```bash
cd "c:\Users\dalex\Documents\Linguagem Python\workspace_python\script_deriv"
pip install -r requirements.txt
```

### 3. **Configura√ß√£o de Vari√°veis de Ambiente**
Crie um arquivo `.env` na raiz do projeto com:

```env
# === API DERIV ===
DERIV_TOKEN=seu_token_aqui

# === TELEGRAM ===
TELEGRAM_BOT_TOKEN=seu_bot_token_aqui
TELEGRAM_CHAT_ID=seu_chat_id_aqui

# === CONFIGURA√á√ïES DE TRADING ===
GRANULARITY=60                    # Timeframe em segundos (60 = 1 minuto)
MAX_CANDLES=200                   # Quantidade de candles para an√°lise
MIN_CONFIDENCE_TO_SEND=70         # Confian√ßa m√≠nima para enviar sinal (%)
SIGNAL_COOLDOWN=300               # Tempo entre sinais em segundos
VALIDATE_SIGNAL_COOLDOWN=10       # Tempo para valida√ß√£o em segundos

# === INDICADORES ===
BOLLINGER_THRESHOLD=0.001         # Sensibilidade das Bandas de Bollinger

# === MONGODB (OPCIONAL) ===
MONGODB_CONNECTION_STRING=mongodb://localhost:27018/trading_signals
```

---

## ‚öôÔ∏è CONFIGURA√á√ïES DETALHADAS

### üéØ **CONFIGURA√á√ïES PRINCIPAIS**

#### **GRANULARITY** (Timeframe)
- **Descri√ß√£o**: Intervalo de tempo de cada candle em segundos
- **Valores aceitos**: 60, 120, 180, 300, 600, 900, 1800, 3600, 14400, 86400
- **Exemplo**: `GRANULARITY=60` (candles de 1 minuto)

| Valor | Timeframe | Uso Recomendado |
|-------|-----------|-----------------|
| 60    | 1 minuto  | Scalping, alta frequ√™ncia |
| 300   | 5 minutos | Day trading |
| 900   | 15 minutos| Swing trading |
| 3600  | 1 hora    | Posi√ß√µes de m√©dio prazo |

#### **MAX_CANDLES** (Hist√≥rico de An√°lise)
- **Descri√ß√£o**: Quantidade de candles usados para calcular indicadores
- **M√≠nimo**: 100 (para HMA funcionar)
- **Recomendado**: 200-500
- **M√°ximo**: 1000 (pode impactar performance)

#### **MIN_CONFIDENCE_TO_SEND** (Filtro de Qualidade)
- **Descri√ß√£o**: Confian√ßa m√≠nima necess√°ria para enviar um sinal
- **Faixa**: 10-100%
- **C√°lculo**: Baseado no consenso entre indicadores v√°lidos

#### **SIGNAL_COOLDOWN** (Controle de Frequ√™ncia)
- **Descri√ß√£o**: Tempo m√≠nimo entre sinais consecutivos
- **Prop√≥sito**: Evitar spam de sinais
- **Recomendado**: 120-600 segundos

#### **BOLLINGER_THRESHOLD** (Sensibilidade)
- **Descri√ß√£o**: Limiar para considerar rompimento das Bandas de Bollinger
- **Menor valor**: Mais sinais (mais sens√≠vel)
- **Maior valor**: Menos sinais (mais conservador)

---

## üéöÔ∏è CONFIGURA√á√ïES POR PERFIL DE RISCO

### üî¥ **PERFIL ALTO RISCO - ALTA FREQU√äNCIA**
*Para traders experientes que buscam muitas oportunidades*

```env
# Configura√ß√£o Alto Risco
GRANULARITY=60                    # 1 minuto - muitas oportunidades
MAX_CANDLES=150                   # An√°lise mais r√°pida
MIN_CONFIDENCE_TO_SEND=50         # Aceita sinais com menor consenso
SIGNAL_COOLDOWN=120               # 2 minutos entre sinais
BOLLINGER_THRESHOLD=0.0005        # Muito sens√≠vel a movimentos
VALIDATE_SIGNAL_COOLDOWN=5        # Valida√ß√£o r√°pida
```

**Caracter√≠sticas:**
- ‚úÖ **Vantagens**: Muitos sinais, oportunidades frequentes
- ‚ö†Ô∏è **Riscos**: Mais falsos positivos, requer acompanhamento constante
- üìä **Sinais esperados**: 10-20 por dia
- üí∞ **Gest√£o**: Use apenas 1-2% do capital por opera√ß√£o

---

### üü° **PERFIL M√âDIO RISCO - EQUILIBRADO**
*Para traders com experi√™ncia moderada*

```env
# Configura√ß√£o M√©dio Risco (RECOMENDADA)
GRANULARITY=300                   # 5 minutos - equil√≠brio
MAX_CANDLES=200                   # An√°lise balanceada
MIN_CONFIDENCE_TO_SEND=70         # Boa qualidade de sinais
SIGNAL_COOLDOWN=300               # 5 minutos entre sinais
BOLLINGER_THRESHOLD=0.001         # Sensibilidade padr√£o
VALIDATE_SIGNAL_COOLDOWN=10       # Valida√ß√£o padr√£o
```

**Caracter√≠sticas:**
- ‚úÖ **Vantagens**: Equil√≠brio entre frequ√™ncia e qualidade
- ‚ö†Ô∏è **Riscos**: Moderado, boa rela√ß√£o risco/retorno
- üìä **Sinais esperados**: 5-10 por dia
- üí∞ **Gest√£o**: Use 2-3% do capital por opera√ß√£o

---

### üü¢ **PERFIL BAIXO RISCO - CONSERVADOR**
*Para iniciantes ou trading com capital significativo*

```env
# Configura√ß√£o Baixo Risco
GRANULARITY=900                   # 15 minutos - movimentos s√≥lidos
MAX_CANDLES=300                   # An√°lise mais robusta
MIN_CONFIDENCE_TO_SEND=85         # Apenas sinais de alta qualidade
SIGNAL_COOLDOWN=600               # 10 minutos entre sinais
BOLLINGER_THRESHOLD=0.002         # Menos sens√≠vel, mais conservador
VALIDATE_SIGNAL_COOLDOWN=15       # Valida√ß√£o mais cuidadosa
```

**Caracter√≠sticas:**
- ‚úÖ **Vantagens**: Alta precis√£o, poucos falsos positivos
- ‚ö†Ô∏è **Limita√ß√µes**: Menos oportunidades, movimentos maiores necess√°rios
- üìä **Sinais esperados**: 2-5 por dia
- üí∞ **Gest√£o**: Use 3-5% do capital por opera√ß√£o

---

## üîß CONFIGURA√á√ïES AVAN√áADAS DOS INDICADORES

### üìä **Personaliza√ß√£o em `app/config/indicators.py`**

```python
INDICATOR_CONFIG = {
    'BB': {  # Bandas de Bollinger
        'enabled': True,                    # Ativar/desativar indicador
        'period': 20,                       # Per√≠odo para c√°lculo (padr√£o: 20)
        'std_dev': 2,                       # Desvios padr√£o (padr√£o: 2)
        'min_confidence': 0.6,              # Confian√ßa m√≠nima (60%)
        'weight_formula': 'strength * confidence',  # F√≥rmula de peso
        'validation_rules': {
            'min_data_points': 20,          # M√≠nimo de dados necess√°rios
            'volatility_threshold': 0.1     # Limite de volatilidade
        }
    },
    
    'EMA': {  # Exponential Moving Average
        'enabled': True,
        'short_period': 12,                 # EMA curta (padr√£o: 12)
        'long_period': 26,                  # EMA longa (padr√£o: 26)
        'min_confidence': 0.5,
        'weight_formula': 'strength * 0.8'  # Peso menor que BB
    },
    
    'HMA': {  # Hull Moving Average
        'enabled': True,
        'period': 100,                      # Per√≠odo HMA (padr√£o: 100)
        'min_confidence': 0.6,
        'weight_formula': 'strength * confidence * 1.1'  # Peso maior
    },
    
    'MICRO': {  # Micro Trend
        'enabled': True,
        'lookback_period': 10,              # Per√≠odo de an√°lise
        'min_confidence': 0.4,
        'weight_formula': 'strength * 0.7'
    }
}

# Configura√ß√µes de Consenso
CONSENSUS_CONFIG = {
    'min_indicators': 2,                    # M√≠nimo de indicadores concordantes
    'consensus_threshold': 0.6,             # Limiar para consenso (60%)
    'unanimous_bonus': 0.2,                 # B√¥nus para unanimidade
    'partial_consensus_penalty': 0.1       # Penalidade para consenso parcial
}
```

---

## üéÆ COMO USAR O SISTEMA

### 1. **Inicializa√ß√£o**
```bash
# Execute sempre do diret√≥rio raiz:
cd "c:\Users\dalex\Documents\Linguagem Python\workspace_python\script_deriv"
python -m app.rise_fall_deriv
```

### 2. **Monitoramento dos Logs**
O sistema gera logs detalhados mostrando:
- ‚úÖ Conex√£o com Deriv API
- üìä An√°lise de cada indicador
- ü§ñ Resultado do consenso
- üéØ Gera√ß√£o de sinais
- ‚úâÔ∏è Envio para Telegram

### 3. **Interpreta√ß√£o dos Sinais**
```
üö® SINAL DETECTADO: FALL | ID: ABC123XY | Confian√ßa: 85.0%
üìà Consenso: FALL
üî¢ Indicadores: 3/4
üíØ Confian√ßa: 85.0%
üìä Indicadores: Bollinger Bands=FALL, Hull MA=FALL, EMA=FALL
```

### 4. **Notifica√ß√µes no Telegram**
```
üîñ ID: ABC123XY
üîî Proje√ß√£o de pr√≥ximo candle!
üéØ Proje√ß√£o: FALL
üïí An√°lise: 2025-07-11 18:30:00 (Bras√≠lia)
üìà √öltimo pre√ßo: 2794.50
üéØ Confian√ßa: 85%
üïí Entrada no candle: 18:31:00 (Bras√≠lia)
```

---

## üìä INTERPRETA√á√ÉO DOS INDICADORES

### üéØ **Status dos Indicadores**

| Status | Significado | A√ß√£o |
|--------|-------------|------|
| ‚úÖ **RISE** | Tend√™ncia de alta detectada | Considerar compra |
| ‚ùå **FALL** | Tend√™ncia de baixa detectada | Considerar venda |
| ‚ö†Ô∏è **SIDEWAYS** | Lateral/indeciso | Aguardar defini√ß√£o |

### üî¢ **N√≠veis de Confian√ßa**

| Confian√ßa | Qualidade | Recomenda√ß√£o |
|-----------|-----------|--------------|
| 90-100% | Excelente | Sinal muito forte, baixo risco |
| 80-89% | Muito Boa | Sinal confi√°vel, risco baixo |
| 70-79% | Boa | Sinal v√°lido, risco moderado |
| 60-69% | Regular | Sinal aceit√°vel, risco elevado |
| < 60% | Baixa | Evitar, aguardar melhor oportunidade |

### ‚öñÔ∏è **Consenso Entre Indicadores**

| Concord√¢ncia | For√ßa do Sinal | A√ß√£o Recomendada |
|--------------|----------------|-------------------|
| 4/4 indicadores | üî• Muito Forte | Entrada com confian√ßa |
| 3/4 indicadores | üí™ Forte | Entrada recomendada |
| 2/4 indicadores | ‚ö° Moderado | Entrada com cautela |
| 1/4 indicadores | ‚ö†Ô∏è Fraco | Aguardar confirma√ß√£o |

---

## üõ°Ô∏è GEST√ÉO DE RISCO

### üí∞ **Recomenda√ß√µes de Capital**

#### **Por Perfil de Risco:**
- **Alto Risco**: 1-2% do capital por opera√ß√£o
- **M√©dio Risco**: 2-3% do capital por opera√ß√£o  
- **Baixo Risco**: 3-5% do capital por opera√ß√£o

#### **Por N√≠vel de Confian√ßa:**
- **90-100%**: At√© o m√°ximo do seu perfil
- **80-89%**: 75% do m√°ximo do seu perfil
- **70-79%**: 50% do m√°ximo do seu perfil
- **60-69%**: 25% do m√°ximo do seu perfil

### üéØ **Estrat√©gia de Gale (Martingale)**
O sistema suporta automaticamente estrat√©gia de gale:
- **G1**: Se perder, dobra o valor na pr√≥xima
- **G2**: Se G1 perder, dobra novamente
- **Stop**: Ap√≥s G2, para e aguarda novo sinal

### ‚è∞ **Hor√°rios Recomendados**
- **Melhor liquidez**: 08:00 - 18:00 (hor√°rio de Londres)
- **Evitar**: Finais de semana e feriados
- **Cuidado**: Hor√°rios de not√≠cias econ√¥micas importantes

---

## üìà OTIMIZA√á√ÉO E AJUSTES

### üîç **An√°lise de Performance**
Monitore regularmente:
- **Taxa de acertos**: Meta > 65%
- **Frequ√™ncia de sinais**: Ajuste conforme necess√°rio
- **Drawdown m√°ximo**: N√£o deve exceder 20% do capital
- **Profit factor**: Meta > 1.3

### ‚öôÔ∏è **Ajustes Finos**

#### **Se muitos sinais falsos:**
- ‚¨ÜÔ∏è Aumentar `MIN_CONFIDENCE_TO_SEND`
- ‚¨ÜÔ∏è Aumentar `BOLLINGER_THRESHOLD`
- ‚¨ÜÔ∏è Aumentar `GRANULARITY`

#### **Se poucos sinais:**
- ‚¨áÔ∏è Diminuir `MIN_CONFIDENCE_TO_SEND`
- ‚¨áÔ∏è Diminuir `BOLLINGER_THRESHOLD`
- ‚¨áÔ∏è Diminuir `GRANULARITY`

#### **Para melhor estabilidade:**
- ‚¨ÜÔ∏è Aumentar `MAX_CANDLES`
- ‚¨ÜÔ∏è Aumentar `SIGNAL_COOLDOWN`
- üîß Ativar mais indicadores

---

## üîß SOLU√á√ÉO DE PROBLEMAS

### ‚ùå **Problemas Comuns**

#### **Sistema n√£o gera sinais:**
- ‚úÖ Verifique conex√£o com internet
- ‚úÖ Confirme token Deriv v√°lido
- ‚úÖ Reduza `MIN_CONFIDENCE_TO_SEND`
- ‚úÖ Verifique se indicadores est√£o habilitados

#### **Muitos sinais falsos:**
- ‚úÖ Aumente confian√ßa m√≠nima
- ‚úÖ Use timeframe maior
- ‚úÖ Aumente cooldown entre sinais

#### **Erro de conex√£o MongoDB:**
- ‚úÖ Verifique se MongoDB est√° rodando
- ‚úÖ Confirme string de conex√£o
- ‚úÖ Sistema funciona sem MongoDB (apenas logs)

#### **N√£o recebe notifica√ß√µes Telegram:**
- ‚úÖ Verifique token do bot
- ‚úÖ Confirme chat_id correto
- ‚úÖ Bot deve estar ativo no chat

### üìû **Logs para Debug**
Monitore os arquivos de log:
- `logs/app.log`: Logs gerais do sistema
- `logs/signals.log`: Logs espec√≠ficos de sinais

---

## üéØ EXEMPLOS PR√ÅTICOS

### üü¢ **Configura√ß√£o Conservadora - Iniciante**
```env
GRANULARITY=900
MAX_CANDLES=300
MIN_CONFIDENCE_TO_SEND=90
SIGNAL_COOLDOWN=1800
BOLLINGER_THRESHOLD=0.003
```

### üü° **Configura√ß√£o Balanceada - Intermedi√°rio**
```env
GRANULARITY=300
MAX_CANDLES=200
MIN_CONFIDENCE_TO_SEND=75
SIGNAL_COOLDOWN=600
BOLLINGER_THRESHOLD=0.0015
```

### üî¥ **Configura√ß√£o Agressiva - Avan√ßado**
```env
GRANULARITY=60
MAX_CANDLES=150
MIN_CONFIDENCE_TO_SEND=55
SIGNAL_COOLDOWN=180
BOLLINGER_THRESHOLD=0.0008
```

---

## üìö RECURSOS ADICIONAIS

### üîó **Links √öteis**
- [Documenta√ß√£o API Deriv](https://developers.deriv.com/)
- [Guia Bandas de Bollinger](https://www.investopedia.com/bollinger-bands/)
- [Estrat√©gias de Moving Average](https://www.investopedia.com/moving-averages/)

### üìñ **Documenta√ß√£o T√©cnica**
- `DOCUMENTACAO_INDICADORES_DINAMICOS.md`: Documenta√ß√£o completa do sistema
- `test_phase2.py` e `test_phase3.py`: Exemplos de testes
- `app/config/indicators.py`: Configura√ß√µes detalhadas

---

## ‚ö†Ô∏è DISCLAIMER

**AVISO IMPORTANTE**: Este sistema √© uma ferramenta de aux√≠lio para an√°lise t√©cnica. N√£o garante lucros e todo trading envolve risco de perda. Sempre:

- üìö Estude e entenda o mercado
- üí∞ Use apenas capital que pode perder
- üß™ Teste em conta demo primeiro
- üìä Monitore e ajuste constantemente
- üõ°Ô∏è Mantenha gest√£o de risco rigorosa

**O sistema √© fornecido "como est√°" sem garantias. O usu√°rio √© totalmente respons√°vel por suas decis√µes de trading.**

---

**üéâ BOA SORTE E BOM TRADING! üéâ**
