2025-07-09 21:00:09,538 INFO: 🔔 Novo candle detectado em 2025-07-10 00:00:00 UTC
2025-07-09 21:00:09,544 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:00:09,564 INFO: Buscando candle com filtro: {'epoch': 1752105600}
2025-07-09 21:00:09,569 INFO: Candle não encontrado
2025-07-09 21:00:09,596 INFO: Tendência HMA: FALL (HMA21=2758.30, HMA100=2759.67)
2025-07-09 21:00:09,597 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:00:09,597 INFO: 📈 Análise: EMA9=2758.79, EMA21=2759.15, trend_ema=FALL, trend_final=FALL, RSI=31.21, MACD=-0.36/-0.30, ATR=1.44, body=0.00, confidence=60
2025-07-09 21:00:09,598 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:00:09,598 INFO: Inserindo candle: Candle(2025-07-10 00:00:00, DOJI, O:2758.62, H:2758.62, L:2758.62, C:2758.62)
2025-07-09 21:00:09,601 INFO: Candle inserido com ID: 686f0289f1cba707790bc1f7
2025-07-09 21:00:10,420 INFO: Atualizando candle com filtro: {'signal.signal_id': '2M7FHKR7'}, update: {'$set': {'signal': {'signal_id': '2M7FHKR7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 0, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 1), 'open_candle_timestamp': 1752105600, 'message_id': 9836, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:00:10,423 INFO: Número de candles atualizados: 1
2025-07-09 21:00:10,424 INFO: ✅ Mensagem enviada ao Telegram (ID: 2M7FHKR7).
2025-07-09 21:01:09,479 INFO: 🔔 Novo candle detectado em 2025-07-10 00:01:00 UTC
2025-07-09 21:01:09,480 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:01:09,482 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:01:09,483 INFO: 🔔 Candle 1752105660 é menor que o entry_time 2025-07-09 21:01:00
2025-07-09 21:01:09,483 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:01:09,483 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:01:09,486 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:01:09,487 INFO: 🔄 Candle 1752105600 já existe no banco, atualizando...
2025-07-09 21:01:09,487 INFO: 🔄 Candle 1752105600 não tem gale_items
2025-07-09 21:01:09,487 INFO: Atualizando candle com filtro: {'epoch': 1752105600}, update: {'$set': {'epoch': 1752105600, 'open': 2758.616, 'high': 2759.54, 'low': 2758.171, 'close': 2759.177, 'time': datetime.datetime(2025, 7, 10, 0, 0), 'signal': {'signal_id': '2M7FHKR7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 0), 'entry_time': datetime.datetime(2025, 7, 9, 21, 1), 'open_candle_timestamp': 1752105600, 'message_id': 9836, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 21:01:09,490 INFO: Número de candles atualizados: 1
2025-07-09 21:01:09,491 INFO: ✅ Candle 1752105600 atualizado com sucesso
2025-07-09 21:01:09,491 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:01:09,491 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:01:09,492 INFO: Funcao validate_signals_for_candle iniciada para o sinal 2M7FHKR7
2025-07-09 21:01:09,492 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:01:09,494 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:01:09,495 INFO: Funcao validate_signal iniciada para o signal 2M7FHKR7
2025-07-09 21:03:35,855 INFO: Funcao validate_signal finalizada para o signal 2M7FHKR7
2025-07-09 21:03:35,856 INFO: Validando sinal 2M7FHKR7 sem gale items
2025-07-09 21:03:35,856 INFO: Sinal 2M7FHKR7 adicionado à fila para G1
2025-07-09 21:03:35,857 INFO: Atualizando candle com filtro: {'epoch': 1752105600}, update: {'$set': {'epoch': 1752105600, 'open': 2758.616, 'high': 2759.54, 'low': 2758.171, 'close': 2759.177, 'time': datetime.datetime(2025, 7, 10, 0, 0), 'signal': {'signal_id': '2M7FHKR7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 0), 'entry_time': datetime.datetime(2025, 7, 9, 21, 1), 'open_candle_timestamp': 1752105600, 'message_id': 9836, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105660, 'open_price': 2759.169, 'high': 2759.169, 'low': 2759.169, 'close_price': 2759.169, 'time': datetime.datetime(2025, 7, 9, 21, 3, 35, 856055), 'result': None}]}}
2025-07-09 21:03:35,860 INFO: Número de candles atualizados: 1
2025-07-09 21:03:35,861 INFO: Candle completo com gales atualizado para 2M7FHKR7
2025-07-09 21:03:35,861 INFO: Sinal 2M7FHKR7 validado como LOSS e notificação enviada
2025-07-09 21:03:35,862 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 2M7FHKR7
2025-07-09 21:03:35,862 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 21:03:35,885 INFO: 🔔 Novo candle detectado em 2025-07-10 00:02:00 UTC
2025-07-09 21:03:35,885 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:03:35,888 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:03:35,888 INFO: 🔔 Candle 1752105720 é menor que o entry_time 2025-07-09 21:01:00
2025-07-09 21:03:35,889 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:03:35,889 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:03:35,892 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:03:35,892 INFO: 🔄 Candle 1752105660 já existe no banco, atualizando...
2025-07-09 21:03:35,893 INFO: 🔄 Atualizando último gale item do candle 1752105660
2025-07-09 21:03:35,893 INFO: Atualizando candle com filtro: {'epoch': 1752105600}, update: {'$set': {'epoch': 1752105600, 'open': 2758.616, 'high': 2759.54, 'low': 2758.171, 'close': 2759.177, 'time': datetime.datetime(2025, 7, 10, 0, 0), 'signal': {'signal_id': '2M7FHKR7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 0), 'entry_time': datetime.datetime(2025, 7, 9, 21, 1), 'open_candle_timestamp': 1752105600, 'message_id': 9836, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105660, 'open_price': 2759.169, 'high': 2759.718, 'low': 2758.043, 'close_price': 2758.392, 'time': datetime.datetime(2025, 7, 9, 21, 3, 35, 856000), 'result': None}]}}
2025-07-09 21:03:35,895 INFO: Número de candles atualizados: 1
2025-07-09 21:03:35,896 INFO: ✅ Candle 1752105600 atualizado com sucesso
2025-07-09 21:03:35,896 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:03:35,896 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:03:35,897 INFO: Funcao validate_signals_for_candle iniciada para o sinal 2M7FHKR7
2025-07-09 21:03:35,897 INFO: Buscando candle com signal_id: 2M7FHKR7
2025-07-09 21:03:35,900 INFO: Candle encontrado para o signal_id: 2M7FHKR7
2025-07-09 21:03:35,900 INFO: Funcao validate_signal iniciada para o signal 2M7FHKR7
2025-07-09 21:03:36,533 INFO: Validando sinal 2M7FHKR7 com gale items
2025-07-09 21:03:36,534 INFO: Atualizando candle com filtro: {'epoch': 1752105600}, update: {'$set': {'epoch': 1752105600, 'open': 2758.616, 'high': 2759.54, 'low': 2758.171, 'close': 2759.177, 'time': datetime.datetime(2025, 7, 10, 0, 0), 'signal': {'signal_id': '2M7FHKR7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 0), 'entry_time': datetime.datetime(2025, 7, 9, 21, 1), 'open_candle_timestamp': 1752105600, 'message_id': 9836, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105660, 'open_price': 2759.169, 'high': 2759.718, 'low': 2758.043, 'close_price': 2758.392, 'time': datetime.datetime(2025, 7, 9, 21, 3, 35, 856000), 'result': 'WIN'}]}}
2025-07-09 21:03:36,536 INFO: Número de candles atualizados: 1
2025-07-09 21:03:36,537 INFO: Candle completo com gales atualizado para 2M7FHKR7
2025-07-09 21:03:36,537 INFO: Sinal 2M7FHKR7 validado como LOSS e notificação enviada
2025-07-09 21:03:36,537 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 2M7FHKR7
2025-07-09 21:03:36,538 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 21:03:36,560 INFO: 🔔 Novo candle detectado em 2025-07-10 00:03:00 UTC
2025-07-09 21:03:36,560 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:03:36,583 INFO: Buscando candle com filtro: {'epoch': 1752105780}
2025-07-09 21:03:36,586 INFO: Candle não encontrado
2025-07-09 21:03:36,618 INFO: Tendência HMA: FALL (HMA21=2758.45, HMA100=2758.32)
2025-07-09 21:03:36,619 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:03:36,619 INFO: 📈 Análise: EMA9=2758.43, EMA21=2758.48, trend_ema=FALL, trend_final=FALL, RSI=43.16, MACD=-0.06/-0.05, ATR=0.66, body=0.00, confidence=60
2025-07-09 21:03:36,620 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:03:36,620 INFO: Inserindo candle: Candle(2025-07-10 00:03:00, DOJI, O:2758.21, H:2758.21, L:2758.21, C:2758.21)
2025-07-09 21:03:36,623 INFO: Candle inserido com ID: 686f0358f1cba707790bc1f8
2025-07-09 21:03:37,431 INFO: Atualizando candle com filtro: {'signal.signal_id': 'BPOHG3HS'}, update: {'$set': {'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 3, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:03:37,435 INFO: Número de candles atualizados: 1
2025-07-09 21:03:37,435 INFO: ✅ Mensagem enviada ao Telegram (ID: BPOHG3HS).
2025-07-09 21:04:09,483 INFO: 🔔 Novo candle detectado em 2025-07-10 00:04:00 UTC
2025-07-09 21:04:09,484 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:04:09,487 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:04:09,487 INFO: 🔔 Candle 1752105840 é menor que o entry_time 2025-07-09 21:04:00
2025-07-09 21:04:09,488 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:04:09,488 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:04:09,491 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:04:09,491 INFO: 🔄 Candle 1752105780 já existe no banco, atualizando...
2025-07-09 21:04:09,492 INFO: 🔄 Candle 1752105780 não tem gale_items
2025-07-09 21:04:09,492 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 21:04:09,495 INFO: Número de candles atualizados: 1
2025-07-09 21:04:09,495 INFO: ✅ Candle 1752105780 atualizado com sucesso
2025-07-09 21:04:09,496 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:04:09,496 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:04:09,496 INFO: Funcao validate_signals_for_candle iniciada para o sinal BPOHG3HS
2025-07-09 21:04:09,497 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:04:09,500 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:04:09,500 INFO: Funcao validate_signal iniciada para o signal BPOHG3HS
2025-07-09 21:04:16,132 INFO: Funcao validate_signal finalizada para o signal BPOHG3HS
2025-07-09 21:04:16,132 INFO: Validando sinal BPOHG3HS sem gale items
2025-07-09 21:04:16,133 INFO: Sinal BPOHG3HS adicionado à fila para G1
2025-07-09 21:04:16,133 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105840, 'open_price': 2759.675, 'high': 2759.675, 'low': 2759.675, 'close_price': 2759.675, 'time': datetime.datetime(2025, 7, 9, 21, 4, 16, 133001), 'result': None}]}}
2025-07-09 21:04:16,136 INFO: Número de candles atualizados: 1
2025-07-09 21:04:16,136 INFO: Candle completo com gales atualizado para BPOHG3HS
2025-07-09 21:04:16,136 INFO: Sinal BPOHG3HS validado como LOSS e notificação enviada
2025-07-09 21:04:16,137 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal BPOHG3HS
2025-07-09 21:04:16,137 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 21:05:09,476 INFO: 🔔 Novo candle detectado em 2025-07-10 00:05:00 UTC
2025-07-09 21:05:09,477 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:05:09,480 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:05:09,480 INFO: 🔔 Candle 1752105900 é menor que o entry_time 2025-07-09 21:04:00
2025-07-09 21:05:09,481 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:05:09,481 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:05:09,484 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:05:09,484 INFO: 🔄 Candle 1752105840 já existe no banco, atualizando...
2025-07-09 21:05:09,485 INFO: 🔄 Atualizando último gale item do candle 1752105840
2025-07-09 21:05:09,485 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105840, 'open_price': 2759.675, 'high': 2761.455, 'low': 2759.675, 'close_price': 2761.455, 'time': datetime.datetime(2025, 7, 9, 21, 4, 16, 133000), 'result': None}]}}
2025-07-09 21:05:09,488 INFO: Número de candles atualizados: 1
2025-07-09 21:05:09,489 INFO: ✅ Candle 1752105780 atualizado com sucesso
2025-07-09 21:05:09,489 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:05:09,489 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:05:09,490 INFO: Funcao validate_signals_for_candle iniciada para o sinal BPOHG3HS
2025-07-09 21:05:09,490 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:05:09,492 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:05:09,492 INFO: Funcao validate_signal iniciada para o signal BPOHG3HS
2025-07-09 21:07:48,904 INFO: Validando sinal BPOHG3HS com gale items
2025-07-09 21:07:48,905 INFO: Gale G1 para o sinal BPOHG3HS resultou em LOSS
2025-07-09 21:07:48,905 INFO: Sinal BPOHG3HS adicionado à fila para G2
2025-07-09 21:07:48,906 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105840, 'open_price': 2759.675, 'high': 2761.455, 'low': 2759.675, 'close_price': 2761.455, 'time': datetime.datetime(2025, 7, 9, 21, 4, 16, 133000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752105900, 'open_price': 2761.601, 'high': 2761.601, 'low': 2761.601, 'close_price': 2761.601, 'time': datetime.datetime(2025, 7, 9, 21, 7, 48, 905448), 'result': None}]}}
2025-07-09 21:07:48,909 INFO: Número de candles atualizados: 1
2025-07-09 21:07:48,909 INFO: Candle completo com gales atualizado para BPOHG3HS
2025-07-09 21:07:48,910 INFO: Sinal BPOHG3HS validado como LOSS e notificação enviada
2025-07-09 21:07:48,910 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal BPOHG3HS
2025-07-09 21:07:48,910 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 21:07:48,932 INFO: 🔔 Novo candle detectado em 2025-07-10 00:06:00 UTC
2025-07-09 21:07:48,933 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:07:48,936 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:07:48,936 INFO: 🔔 Candle 1752105960 é menor que o entry_time 2025-07-09 21:04:00
2025-07-09 21:07:48,937 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:07:48,937 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:07:48,940 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:07:48,941 INFO: 🔄 Candle 1752105900 já existe no banco, atualizando...
2025-07-09 21:07:48,941 INFO: 🔄 Atualizando último gale item do candle 1752105900
2025-07-09 21:07:48,941 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105840, 'open_price': 2759.675, 'high': 2761.455, 'low': 2759.675, 'close_price': 2761.455, 'time': datetime.datetime(2025, 7, 9, 21, 4, 16, 133000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752105900, 'open_price': 2761.601, 'high': 2762.157, 'low': 2761.067, 'close_price': 2762.157, 'time': datetime.datetime(2025, 7, 9, 21, 7, 48, 905000), 'result': None}]}}
2025-07-09 21:07:48,944 INFO: Número de candles atualizados: 1
2025-07-09 21:07:48,944 INFO: ✅ Candle 1752105780 atualizado com sucesso
2025-07-09 21:07:48,945 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:07:48,945 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:07:48,945 INFO: Funcao validate_signals_for_candle iniciada para o sinal BPOHG3HS
2025-07-09 21:07:48,946 INFO: Buscando candle com signal_id: BPOHG3HS
2025-07-09 21:07:48,948 INFO: Candle encontrado para o signal_id: BPOHG3HS
2025-07-09 21:07:48,948 INFO: Funcao validate_signal iniciada para o signal BPOHG3HS
2025-07-09 21:07:51,238 INFO: Validando sinal BPOHG3HS com gale items
2025-07-09 21:07:51,238 INFO: Gale G2 para o sinal BPOHG3HS resultou em LOSS
2025-07-09 21:07:51,239 INFO: Atualizando candle com filtro: {'epoch': 1752105780}, update: {'$set': {'epoch': 1752105780, 'open': 2758.207, 'high': 2759.554, 'low': 2758.081, 'close': 2759.545, 'time': datetime.datetime(2025, 7, 10, 0, 3), 'signal': {'signal_id': 'BPOHG3HS', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 3), 'entry_time': datetime.datetime(2025, 7, 9, 21, 4), 'open_candle_timestamp': 1752105780, 'message_id': 9839, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752105840, 'open_price': 2759.675, 'high': 2761.455, 'low': 2759.675, 'close_price': 2761.455, 'time': datetime.datetime(2025, 7, 9, 21, 4, 16, 133000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752105900, 'open_price': 2761.601, 'high': 2762.157, 'low': 2761.067, 'close_price': 2762.157, 'time': datetime.datetime(2025, 7, 9, 21, 7, 48, 905000), 'result': 'LOSS'}]}}
2025-07-09 21:07:51,242 INFO: Número de candles atualizados: 1
2025-07-09 21:07:51,243 INFO: Candle completo com gales atualizado para BPOHG3HS
2025-07-09 21:07:52,111 INFO: ✅ Resposta de resultado enviada para o sinal BPOHG3HS
2025-07-09 21:07:52,112 INFO: Sinal BPOHG3HS validado como LOSS e notificação enviada
2025-07-09 21:07:52,112 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal BPOHG3HS
2025-07-09 21:07:52,112 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 21:07:52,138 INFO: 🔔 Novo candle detectado em 2025-07-10 00:07:00 UTC
2025-07-09 21:07:52,139 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:07:52,165 INFO: Buscando candle com filtro: {'epoch': 1752106020}
2025-07-09 21:07:52,170 INFO: Candle não encontrado
2025-07-09 21:07:52,202 INFO: Tendência HMA: FALL (HMA21=2764.33, HMA100=2763.80)
2025-07-09 21:07:52,203 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:07:52,203 INFO: 📈 Análise: EMA9=2764.01, EMA21=2763.62, trend_ema=RISE, trend_final=FALL, RSI=68.93, MACD=0.44/0.43, ATR=1.30, body=0.00, confidence=60
2025-07-09 21:07:52,204 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:07:52,204 INFO: Inserindo candle: Candle(2025-07-10 00:07:00, DOJI, O:2764.28, H:2764.28, L:2764.28, C:2764.28)
2025-07-09 21:07:52,208 INFO: Candle inserido com ID: 686f0458f1cba707790bc1f9
2025-07-09 21:07:53,025 INFO: Atualizando candle com filtro: {'signal.signal_id': 'TI7WI3FN'}, update: {'$set': {'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 7, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:07:53,028 INFO: Número de candles atualizados: 1
2025-07-09 21:07:53,029 INFO: ✅ Mensagem enviada ao Telegram (ID: TI7WI3FN).
2025-07-09 21:08:09,524 INFO: 🔔 Novo candle detectado em 2025-07-10 00:08:00 UTC
2025-07-09 21:08:09,524 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:08:09,527 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:08:09,528 INFO: 🔔 Candle 1752106080 é menor que o entry_time 2025-07-09 21:08:00
2025-07-09 21:08:09,528 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:08:09,529 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:08:09,531 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:08:09,531 INFO: 🔄 Candle 1752106020 já existe no banco, atualizando...
2025-07-09 21:08:09,532 INFO: 🔄 Candle 1752106020 não tem gale_items
2025-07-09 21:08:09,532 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 21:08:09,536 INFO: Número de candles atualizados: 1
2025-07-09 21:08:09,536 INFO: ✅ Candle 1752106020 atualizado com sucesso
2025-07-09 21:08:09,536 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:08:09,537 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:08:09,537 INFO: Funcao validate_signals_for_candle iniciada para o sinal TI7WI3FN
2025-07-09 21:08:09,537 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:08:09,540 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:08:09,541 INFO: Funcao validate_signal iniciada para o signal TI7WI3FN
2025-07-09 21:08:14,287 INFO: Funcao validate_signal finalizada para o signal TI7WI3FN
2025-07-09 21:08:14,288 INFO: Validando sinal TI7WI3FN sem gale items
2025-07-09 21:08:14,288 INFO: Sinal TI7WI3FN adicionado à fila para G1
2025-07-09 21:08:14,288 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752106080, 'open_price': 2764.357, 'high': 2764.357, 'low': 2764.357, 'close_price': 2764.357, 'time': datetime.datetime(2025, 7, 9, 21, 8, 14, 288494), 'result': None}]}}
2025-07-09 21:08:14,292 INFO: Número de candles atualizados: 1
2025-07-09 21:08:14,292 INFO: Candle completo com gales atualizado para TI7WI3FN
2025-07-09 21:08:14,293 INFO: Sinal TI7WI3FN validado como LOSS e notificação enviada
2025-07-09 21:08:14,293 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TI7WI3FN
2025-07-09 21:08:14,294 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 21:09:09,486 INFO: 🔔 Novo candle detectado em 2025-07-10 00:09:00 UTC
2025-07-09 21:09:09,486 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:09:09,490 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:09:09,491 INFO: 🔔 Candle 1752106140 é menor que o entry_time 2025-07-09 21:08:00
2025-07-09 21:09:09,491 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:09:09,492 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:09:09,494 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:09:09,495 INFO: 🔄 Candle 1752106080 já existe no banco, atualizando...
2025-07-09 21:09:09,495 INFO: 🔄 Atualizando último gale item do candle 1752106080
2025-07-09 21:09:09,495 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752106080, 'open_price': 2764.357, 'high': 2765.299, 'low': 2764.047, 'close_price': 2765.299, 'time': datetime.datetime(2025, 7, 9, 21, 8, 14, 288000), 'result': None}]}}
2025-07-09 21:09:09,499 INFO: Número de candles atualizados: 1
2025-07-09 21:09:09,499 INFO: ✅ Candle 1752106020 atualizado com sucesso
2025-07-09 21:09:09,499 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:09:09,500 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:09:09,500 INFO: Funcao validate_signals_for_candle iniciada para o sinal TI7WI3FN
2025-07-09 21:09:09,500 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:09:09,504 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:09:09,504 INFO: Funcao validate_signal iniciada para o signal TI7WI3FN
2025-07-09 21:09:24,975 INFO: Validando sinal TI7WI3FN com gale items
2025-07-09 21:09:24,975 INFO: Gale G1 para o sinal TI7WI3FN resultou em LOSS
2025-07-09 21:09:24,976 INFO: Sinal TI7WI3FN adicionado à fila para G2
2025-07-09 21:09:24,976 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752106080, 'open_price': 2764.357, 'high': 2765.299, 'low': 2764.047, 'close_price': 2765.299, 'time': datetime.datetime(2025, 7, 9, 21, 8, 14, 288000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752106140, 'open_price': 2765.398, 'high': 2765.398, 'low': 2765.398, 'close_price': 2765.398, 'time': datetime.datetime(2025, 7, 9, 21, 9, 24, 976408), 'result': None}]}}
2025-07-09 21:09:24,981 INFO: Número de candles atualizados: 1
2025-07-09 21:09:24,981 INFO: Candle completo com gales atualizado para TI7WI3FN
2025-07-09 21:09:24,982 INFO: Sinal TI7WI3FN validado como LOSS e notificação enviada
2025-07-09 21:09:24,983 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TI7WI3FN
2025-07-09 21:09:24,983 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 21:10:09,508 INFO: 🔔 Novo candle detectado em 2025-07-10 00:10:00 UTC
2025-07-09 21:10:09,509 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:10:09,513 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:12:30,960 INFO: 🔔 Candle 1752106200 é menor que o entry_time 2025-07-09 21:08:00
2025-07-09 21:12:30,961 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:12:30,961 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:12:30,964 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:12:30,964 INFO: 🔄 Candle 1752106140 já existe no banco, atualizando...
2025-07-09 21:12:30,965 INFO: 🔄 Atualizando último gale item do candle 1752106140
2025-07-09 21:12:30,965 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752106080, 'open_price': 2764.357, 'high': 2765.299, 'low': 2764.047, 'close_price': 2765.299, 'time': datetime.datetime(2025, 7, 9, 21, 8, 14, 288000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752106140, 'open_price': 2765.398, 'high': 2766.795, 'low': 2764.876, 'close_price': 2766.678, 'time': datetime.datetime(2025, 7, 9, 21, 9, 24, 976000), 'result': None}]}}
2025-07-09 21:12:30,969 INFO: Número de candles atualizados: 1
2025-07-09 21:12:30,969 INFO: ✅ Candle 1752106020 atualizado com sucesso
2025-07-09 21:12:30,970 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:12:30,970 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:12:30,970 INFO: Funcao validate_signals_for_candle iniciada para o sinal TI7WI3FN
2025-07-09 21:12:30,971 INFO: Buscando candle com signal_id: TI7WI3FN
2025-07-09 21:12:30,973 INFO: Candle encontrado para o signal_id: TI7WI3FN
2025-07-09 21:12:30,974 INFO: Funcao validate_signal iniciada para o signal TI7WI3FN
2025-07-09 21:12:31,827 INFO: Validando sinal TI7WI3FN com gale items
2025-07-09 21:12:31,827 INFO: Gale G2 para o sinal TI7WI3FN resultou em LOSS
2025-07-09 21:12:31,828 INFO: Atualizando candle com filtro: {'epoch': 1752106020}, update: {'$set': {'epoch': 1752106020, 'open': 2764.281, 'high': 2765.283, 'low': 2764.281, 'close': 2764.481, 'time': datetime.datetime(2025, 7, 10, 0, 7), 'signal': {'signal_id': 'TI7WI3FN', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 7), 'entry_time': datetime.datetime(2025, 7, 9, 21, 8), 'open_candle_timestamp': 1752106020, 'message_id': 9841, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752106080, 'open_price': 2764.357, 'high': 2765.299, 'low': 2764.047, 'close_price': 2765.299, 'time': datetime.datetime(2025, 7, 9, 21, 8, 14, 288000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752106140, 'open_price': 2765.398, 'high': 2766.795, 'low': 2764.876, 'close_price': 2766.678, 'time': datetime.datetime(2025, 7, 9, 21, 9, 24, 976000), 'result': 'LOSS'}]}}
2025-07-09 21:12:31,832 INFO: Número de candles atualizados: 1
2025-07-09 21:12:31,832 INFO: Candle completo com gales atualizado para TI7WI3FN
2025-07-09 21:29:08,089 INFO: === Logging ROOT inicializado ===
2025-07-09 21:29:08,090 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 21:29:08,091 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 21:29:08,091 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 21:29:08,091 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 21:29:08,092 INFO: 🎯 Confiança mínima: 20%
2025-07-09 21:29:08,092 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 21:29:08,094 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 21:29:08,538 INFO: Websocket connected
2025-07-09 21:29:08,865 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 21:29:08,865 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 21:29:08,866 INFO: ✅ Token autorizado às 2025-07-10 00:29:08.866121 UTC
2025-07-09 21:29:09,264 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 21:29:09,264 INFO: Estrutura do primeiro candle: {'close': 2734.172, 'epoch': 1752095340, 'high': 2736.037, 'low': 2734.172, 'open': 2735.817}
2025-07-09 21:29:09,265 INFO: 📥 Histórico inicial recebido às 2025-07-10 00:29:09.265016 UTC. Total de candles: 200
2025-07-09 21:29:09,508 INFO: 🔔 Primeiro candle recebido em 2025-07-10 00:29:00 UTC
2025-07-09 21:30:09,514 INFO: 🔔 Novo candle detectado em 2025-07-10 00:30:00 UTC
2025-07-09 21:30:09,514 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:30:09,550 INFO: Inicializando conexão com o MongoDB.
2025-07-09 21:30:09,576 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 21:30:09,576 INFO: Buscando candle com filtro: {'epoch': 1752107400}
2025-07-09 21:30:09,617 INFO: Candle não encontrado
2025-07-09 21:30:09,649 INFO: Tendência HMA: FALL (HMA21=2765.17, HMA100=2767.64)
2025-07-09 21:30:09,650 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:30:09,650 INFO: 📈 Análise: EMA9=2765.22, EMA21=2765.30, trend_ema=FALL, trend_final=FALL, RSI=45.40, MACD=0.01/0.09, ATR=0.75, body=0.00, confidence=60
2025-07-09 21:30:09,651 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:30:09,651 INFO: Inserindo candle: Candle(2025-07-10 00:30:00, DOJI, O:2764.96, H:2764.96, L:2764.96, C:2764.96)
2025-07-09 21:30:09,655 INFO: Candle inserido com ID: 686f09916d8fb37b3ae85bb5
2025-07-09 21:30:10,601 INFO: Atualizando candle com filtro: {'signal.signal_id': '2U9UCKV0'}, update: {'$set': {'signal': {'signal_id': '2U9UCKV0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 30, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 31), 'open_candle_timestamp': 1752107400, 'message_id': 9848, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:30:10,605 INFO: Número de candles atualizados: 1
2025-07-09 21:30:10,606 INFO: ✅ Mensagem enviada ao Telegram (ID: 2U9UCKV0).
2025-07-09 21:31:09,503 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:00 UTC
2025-07-09 21:31:09,503 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:09,507 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:25,115 INFO: 🔔 Candle 1752107460 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:26,299 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:02 UTC
2025-07-09 21:31:26,300 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:26,303 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:31,397 INFO: 🔔 Candle 1752107462 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:31,399 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:04 UTC
2025-07-09 21:31:31,399 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:31,403 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:32,021 INFO: 🔔 Candle 1752107464 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:32,022 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:06 UTC
2025-07-09 21:31:32,022 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:32,026 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:32,563 INFO: 🔔 Candle 1752107466 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:32,564 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:08 UTC
2025-07-09 21:31:32,565 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:32,568 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:33,120 INFO: 🔔 Candle 1752107468 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:33,121 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:10 UTC
2025-07-09 21:31:33,122 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:33,125 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:33,833 INFO: 🔔 Candle 1752107470 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:33,834 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:12 UTC
2025-07-09 21:31:33,835 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:33,838 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:34,475 INFO: 🔔 Candle 1752107472 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:34,476 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:14 UTC
2025-07-09 21:31:34,476 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:34,479 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:35,053 INFO: 🔔 Candle 1752107474 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:35,054 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:16 UTC
2025-07-09 21:31:35,054 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:35,057 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:35,685 INFO: 🔔 Candle 1752107476 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:35,687 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:18 UTC
2025-07-09 21:31:35,687 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:35,690 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:36,215 INFO: 🔔 Candle 1752107478 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:36,217 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:20 UTC
2025-07-09 21:31:36,217 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:36,221 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:36,913 INFO: 🔔 Candle 1752107480 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:36,914 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:22 UTC
2025-07-09 21:31:36,916 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:36,918 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:37,724 INFO: 🔔 Candle 1752107482 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:37,726 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:24 UTC
2025-07-09 21:31:37,727 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:37,731 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:49,106 INFO: 🔔 Candle 1752107484 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:31:55,898 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:26 UTC
2025-07-09 21:31:55,898 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:31:55,903 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:31:59,427 INFO: 🔔 Candle 1752107486 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:32:13,404 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:28 UTC
2025-07-09 21:32:13,405 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:32:13,408 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:32:29,287 INFO: 🔔 Candle 1752107488 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:32:29,288 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:30 UTC
2025-07-09 21:32:29,289 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:32:29,291 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:32:29,741 INFO: 🔔 Candle 1752107490 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:32:29,744 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:32 UTC
2025-07-09 21:32:29,744 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:32:29,747 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:32:30,329 INFO: 🔔 Candle 1752107492 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:32:30,330 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:34 UTC
2025-07-09 21:32:30,331 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:32:30,333 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:32:30,832 INFO: 🔔 Candle 1752107494 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:32:30,833 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:36 UTC
2025-07-09 21:32:30,834 INFO: Buscando candle com signal_id: 2U9UCKV0
2025-07-09 21:32:30,837 INFO: Candle encontrado para o signal_id: 2U9UCKV0
2025-07-09 21:33:07,657 INFO: 🔔 Candle 1752107496 é menor ou igual ao entry_time 2025-07-09 21:31:00
2025-07-09 21:33:27,315 INFO: 🔔 Novo candle detectado em 2025-07-10 00:31:38 UTC
2025-07-09 21:34:14,906 INFO: === Logging ROOT inicializado ===
2025-07-09 21:34:14,908 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 21:34:14,909 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 21:34:14,909 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 21:34:14,909 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 21:34:14,910 INFO: 🎯 Confiança mínima: 20%
2025-07-09 21:34:14,910 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 21:34:14,912 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 21:34:15,509 INFO: Websocket connected
2025-07-09 21:34:15,783 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 21:34:15,784 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 21:34:15,784 INFO: ✅ Token autorizado às 2025-07-10 00:34:15.784538 UTC
2025-07-09 21:34:16,074 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 21:34:16,074 INFO: Estrutura do primeiro candle: {'close': 2735.624, 'epoch': 1752095700, 'high': 2735.752, 'low': 2735.142, 'open': 2735.382}
2025-07-09 21:34:16,075 INFO: 📥 Histórico inicial recebido às 2025-07-10 00:34:16.075491 UTC. Total de candles: 200
2025-07-09 21:34:17,447 INFO: 🔔 Primeiro candle recebido em 2025-07-10 00:34:08 UTC
2025-07-09 21:35:09,508 INFO: 🔔 Novo candle detectado em 2025-07-10 00:35:00 UTC
2025-07-09 21:35:09,509 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:35:09,544 INFO: Inicializando conexão com o MongoDB.
2025-07-09 21:35:09,568 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 21:35:09,569 INFO: Buscando candle com filtro: {'epoch': 1752107700}
2025-07-09 21:35:09,600 INFO: Candle não encontrado
2025-07-09 21:35:09,630 INFO: Tendência HMA: FALL (HMA21=2762.81, HMA100=2765.07)
2025-07-09 21:35:09,631 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:35:09,632 INFO: 📈 Análise: EMA9=2762.96, EMA21=2763.22, trend_ema=FALL, trend_final=FALL, RSI=40.01, MACD=-0.26/-0.24, ATR=0.76, body=0.00, confidence=60
2025-07-09 21:35:09,632 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:35:09,632 INFO: Inserindo candle: Candle(2025-07-10 00:35:00, DOJI, O:2762.79, H:2762.79, L:2762.79, C:2762.79)
2025-07-09 21:35:09,637 INFO: Candle inserido com ID: 686f0abd9ee39f3a8ac13a45
2025-07-09 21:35:10,538 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KKIUXHCD'}, update: {'$set': {'signal': {'signal_id': 'KKIUXHCD', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 35, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 36), 'open_candle_timestamp': 1752107700, 'message_id': 9849, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:35:10,541 INFO: Número de candles atualizados: 1
2025-07-09 21:35:10,542 INFO: ✅ Mensagem enviada ao Telegram (ID: KKIUXHCD).
2025-07-09 21:36:09,430 INFO: 🔔 Novo candle detectado em 2025-07-10 00:36:00 UTC
2025-07-09 21:36:09,430 INFO: Buscando candle com signal_id: KKIUXHCD
2025-07-09 21:36:09,433 INFO: Candle encontrado para o signal_id: KKIUXHCD
2025-07-09 21:37:54,872 INFO: 🔔 Candle 1752107760 é menor ou igual ao entry_time 2025-07-09 21:36:00
2025-07-09 21:37:57,775 INFO: 🔔 Novo candle detectado em 2025-07-10 00:37:00 UTC
2025-07-09 21:37:57,775 INFO: Buscando candle com signal_id: KKIUXHCD
2025-07-09 21:37:57,779 INFO: Candle encontrado para o signal_id: KKIUXHCD
2025-07-09 21:37:58,499 INFO: 🔔 Candle 1752107820 é menor ou igual ao entry_time 2025-07-09 21:36:00
2025-07-09 21:38:09,419 INFO: 🔔 Novo candle detectado em 2025-07-10 00:38:00 UTC
2025-07-09 21:38:09,420 INFO: Buscando candle com signal_id: KKIUXHCD
2025-07-09 21:38:09,422 INFO: Candle encontrado para o signal_id: KKIUXHCD
2025-07-09 21:38:13,170 INFO: 🔔 Candle 1752107880 é menor ou igual ao entry_time 2025-07-09 21:36:00
2025-07-09 21:39:09,434 INFO: 🔔 Novo candle detectado em 2025-07-10 00:39:00 UTC
2025-07-09 21:39:09,434 INFO: Buscando candle com signal_id: KKIUXHCD
2025-07-09 21:39:09,437 INFO: Candle encontrado para o signal_id: KKIUXHCD
2025-07-09 21:45:28,185 INFO: === Logging ROOT inicializado ===
2025-07-09 21:45:28,187 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 21:45:28,187 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 21:45:28,188 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 21:45:28,188 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 21:45:28,188 INFO: 🎯 Confiança mínima: 20%
2025-07-09 21:45:28,189 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 21:45:28,191 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 21:45:28,772 INFO: Websocket connected
2025-07-09 21:45:29,224 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 21:45:29,224 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 21:45:29,225 INFO: ✅ Token autorizado às 2025-07-10 00:45:29.225312 UTC
2025-07-09 21:45:29,794 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 21:45:29,794 INFO: Estrutura do primeiro candle: {'close': 2734.876, 'epoch': 1752096360, 'high': 2735.055, 'low': 2734.161, 'open': 2734.915}
2025-07-09 21:45:29,795 INFO: 📥 Histórico inicial recebido às 2025-07-10 00:45:29.795067 UTC. Total de candles: 200
2025-07-09 21:45:31,571 INFO: 🔔 Primeiro candle recebido em 2025-07-10 00:45:22 UTC
2025-07-09 21:46:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 00:46:00 UTC
2025-07-09 21:46:09,584 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:46:09,620 INFO: Inicializando conexão com o MongoDB.
2025-07-09 21:46:09,644 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 21:46:09,645 INFO: Buscando candle com filtro: {'epoch': 1752108360}
2025-07-09 21:46:09,689 INFO: Candle não encontrado
2025-07-09 21:46:09,716 INFO: Tendência HMA: FALL (HMA21=2763.86, HMA100=2765.50)
2025-07-09 21:46:09,718 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:46:09,718 INFO: 📈 Análise: EMA9=2763.99, EMA21=2764.12, trend_ema=FALL, trend_final=FALL, RSI=48.74, MACD=-0.10/-0.06, ATR=1.76, body=0.00, confidence=40
2025-07-09 21:46:09,719 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 21:46:09,720 INFO: Inserindo candle: Candle(2025-07-10 00:46:00, DOJI, O:2764.04, H:2764.04, L:2764.04, C:2764.04)
2025-07-09 21:46:09,723 INFO: Candle inserido com ID: 686f0d517873731c79393662
2025-07-09 21:46:10,687 INFO: Atualizando candle com filtro: {'signal.signal_id': '7J1VE443'}, update: {'$set': {'signal': {'signal_id': '7J1VE443', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 46, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 47), 'open_candle_timestamp': 1752108360, 'message_id': 9852, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:46:10,691 INFO: Número de candles atualizados: 1
2025-07-09 21:46:10,691 INFO: ✅ Mensagem enviada ao Telegram (ID: 7J1VE443).
2025-07-09 21:47:09,562 INFO: 🔔 Novo candle detectado em 2025-07-10 00:47:00 UTC
2025-07-09 21:47:09,563 INFO: Buscando candle com signal_id: 7J1VE443
2025-07-09 21:47:09,567 INFO: Candle encontrado para o signal_id: 7J1VE443
2025-07-09 21:52:45,045 INFO: === Logging ROOT inicializado ===
2025-07-09 21:52:45,046 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 21:52:45,047 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 21:52:45,047 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 21:52:45,047 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 21:52:45,047 INFO: 🎯 Confiança mínima: 20%
2025-07-09 21:52:45,047 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 21:52:45,050 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 21:52:45,562 INFO: Websocket connected
2025-07-09 21:52:45,807 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 21:52:45,807 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 21:52:45,808 INFO: ✅ Token autorizado às 2025-07-10 00:52:45.808153 UTC
2025-07-09 21:52:46,059 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 21:52:46,059 INFO: Estrutura do primeiro candle: {'close': 2734.845, 'epoch': 1752096780, 'high': 2735.362, 'low': 2734.546, 'open': 2734.685}
2025-07-09 21:52:46,060 INFO: 📥 Histórico inicial recebido às 2025-07-10 00:52:46.060968 UTC. Total de candles: 200
2025-07-09 21:52:47,527 INFO: 🔔 Primeiro candle recebido em 2025-07-10 00:52:38 UTC
2025-07-09 21:53:09,537 INFO: 🔔 Novo candle detectado em 2025-07-10 00:53:00 UTC
2025-07-09 21:53:09,537 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:53:09,573 INFO: Inicializando conexão com o MongoDB.
2025-07-09 21:53:09,599 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 21:53:09,601 INFO: Buscando candle com filtro: {'epoch': 1752108780}
2025-07-09 21:53:09,633 INFO: Candle não encontrado
2025-07-09 21:53:09,670 INFO: Tendência HMA: FALL (HMA21=2764.69, HMA100=2766.27)
2025-07-09 21:53:09,670 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:53:09,671 INFO: 📈 Análise: EMA9=2764.82, EMA21=2764.81, trend_ema=RISE, trend_final=FALL, RSI=51.00, MACD=0.05/0.08, ATR=1.17, body=0.00, confidence=20
2025-07-09 21:53:09,671 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 21:53:09,672 INFO: Inserindo candle: Candle(2025-07-10 00:53:00, DOJI, O:2764.87, H:2764.87, L:2764.87, C:2764.87)
2025-07-09 21:53:09,676 INFO: Candle inserido com ID: 686f0ef5e029ff405e36068d
2025-07-09 21:53:10,583 INFO: Atualizando candle com filtro: {'signal.signal_id': '4MGQQQB0'}, update: {'$set': {'signal': {'signal_id': '4MGQQQB0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 53, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 54), 'open_candle_timestamp': 1752108780, 'message_id': 9854, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:53:10,587 INFO: Número de candles atualizados: 1
2025-07-09 21:53:10,587 INFO: ✅ Mensagem enviada ao Telegram (ID: 4MGQQQB0).
2025-07-09 21:54:09,505 INFO: 🔔 Novo candle detectado em 2025-07-10 00:54:00 UTC
2025-07-09 21:54:09,506 INFO: Buscando candle com signal_id: 4MGQQQB0
2025-07-09 21:54:09,508 INFO: Candle encontrado para o signal_id: 4MGQQQB0
2025-07-09 21:59:16,700 INFO: 🔔 Candle 1752108840 é maior que o entry_time 2025-07-09 21:54:00
2025-07-09 21:59:16,700 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:59:16,701 INFO: Buscando candle com signal_id: 4MGQQQB0
2025-07-09 21:59:16,704 INFO: Candle encontrado para o signal_id: 4MGQQQB0
2025-07-09 21:59:16,705 INFO: 🔄 Candle 1752108780 já existe no banco, atualizando...
2025-07-09 21:59:16,705 INFO: 🔄 Candle 1752108780 não tem gale_items
2025-07-09 21:59:16,705 INFO: Atualizando candle com filtro: {'epoch': 1752108780}, update: {'$set': {'epoch': 1752108780, 'open': 2764.87, 'high': 2765.368, 'low': 2763.824, 'close': 2764.194, 'time': datetime.datetime(2025, 7, 10, 0, 53), 'signal': {'signal_id': '4MGQQQB0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 53), 'entry_time': datetime.datetime(2025, 7, 9, 21, 54), 'open_candle_timestamp': 1752108780, 'message_id': 9854, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 21:59:16,709 INFO: Número de candles atualizados: 1
2025-07-09 21:59:16,709 INFO: ✅ Candle 1752108780 atualizado com sucesso
2025-07-09 21:59:16,709 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:59:16,710 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:59:16,710 INFO: Funcao validate_signals_for_candle iniciada para o sinal 4MGQQQB0
2025-07-09 21:59:16,710 INFO: Buscando candle com signal_id: 4MGQQQB0
2025-07-09 21:59:16,713 INFO: Candle encontrado para o signal_id: 4MGQQQB0
2025-07-09 21:59:16,714 INFO: Funcao validate_signal iniciada para o signal 4MGQQQB0
2025-07-09 21:59:17,809 INFO: Funcao validate_signal finalizada para o signal 4MGQQQB0
2025-07-09 21:59:17,809 INFO: Validando sinal 4MGQQQB0 sem gale items
2025-07-09 21:59:17,810 INFO: Atualizando candle com filtro: {'signal.signal_id': '4MGQQQB0'}, update: {'$set': {'signal': {'signal_id': '4MGQQQB0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 53), 'entry_time': datetime.datetime(2025, 7, 9, 21, 54), 'open_candle_timestamp': 1752108780, 'message_id': 9854, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 21:59:17,813 INFO: Número de candles atualizados: 1
2025-07-09 21:59:17,813 INFO: Sinal atualizado no repositório para 4MGQQQB0
2025-07-09 21:59:18,659 INFO: ✅ Resposta de resultado enviada para o sinal 4MGQQQB0
2025-07-09 21:59:18,660 INFO: Sinal 4MGQQQB0 validado como WIN e notificação enviada
2025-07-09 21:59:18,661 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 4MGQQQB0
2025-07-09 21:59:18,661 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 21:59:18,692 INFO: 🔔 Novo candle detectado em 2025-07-10 00:55:00 UTC
2025-07-09 21:59:18,693 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 21:59:18,720 INFO: Buscando candle com filtro: {'epoch': 1752108900}
2025-07-09 21:59:18,725 INFO: Candle não encontrado
2025-07-09 21:59:18,774 INFO: Tendência HMA: FALL (HMA21=2764.16, HMA100=2764.43)
2025-07-09 21:59:18,774 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 21:59:18,775 INFO: 📈 Análise: EMA9=2764.34, EMA21=2764.46, trend_ema=FALL, trend_final=FALL, RSI=43.24, MACD=-0.09/-0.03, ATR=1.29, body=0.00, confidence=60
2025-07-09 21:59:18,775 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 21:59:18,775 INFO: Inserindo candle: Candle(2025-07-10 00:55:00, DOJI, O:2764.19, H:2764.19, L:2764.19, C:2764.19)
2025-07-09 21:59:18,779 INFO: Candle inserido com ID: 686f1066e029ff405e36068e
2025-07-09 21:59:19,584 INFO: Atualizando candle com filtro: {'signal.signal_id': '53RKCJBL'}, update: {'$set': {'signal': {'signal_id': '53RKCJBL', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 18, 55, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 21, 56), 'open_candle_timestamp': 1752108900, 'message_id': 9857, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 21:59:19,587 INFO: Número de candles atualizados: 1
2025-07-09 21:59:19,587 INFO: ✅ Mensagem enviada ao Telegram (ID: 53RKCJBL).
2025-07-09 21:59:19,617 INFO: 🔔 Novo candle detectado em 2025-07-10 00:56:00 UTC
2025-07-09 21:59:19,617 INFO: Buscando candle com signal_id: 53RKCJBL
2025-07-09 21:59:19,622 INFO: Candle encontrado para o signal_id: 53RKCJBL
2025-07-09 21:59:21,116 INFO: 🔔 Candle 1752108960 é maior que o entry_time 2025-07-09 21:56:00
2025-07-09 21:59:21,116 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 21:59:21,117 INFO: Buscando candle com signal_id: 53RKCJBL
2025-07-09 21:59:21,119 INFO: Candle encontrado para o signal_id: 53RKCJBL
2025-07-09 21:59:21,120 INFO: 🔄 Candle 1752108900 já existe no banco, atualizando...
2025-07-09 21:59:21,120 INFO: 🔄 Candle 1752108900 não tem gale_items
2025-07-09 21:59:21,120 INFO: Atualizando candle com filtro: {'epoch': 1752108900}, update: {'$set': {'epoch': 1752108900, 'open': 2764.19, 'high': 2764.261, 'low': 2763.089, 'close': 2763.179, 'time': datetime.datetime(2025, 7, 10, 0, 55), 'signal': {'signal_id': '53RKCJBL', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 55), 'entry_time': datetime.datetime(2025, 7, 9, 21, 56), 'open_candle_timestamp': 1752108900, 'message_id': 9857, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 21:59:21,123 INFO: Número de candles atualizados: 1
2025-07-09 21:59:21,124 INFO: ✅ Candle 1752108900 atualizado com sucesso
2025-07-09 21:59:21,124 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 21:59:21,124 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 21:59:21,124 INFO: Funcao validate_signals_for_candle iniciada para o sinal 53RKCJBL
2025-07-09 21:59:21,125 INFO: Buscando candle com signal_id: 53RKCJBL
2025-07-09 21:59:21,128 INFO: Candle encontrado para o signal_id: 53RKCJBL
2025-07-09 21:59:21,128 INFO: Funcao validate_signal iniciada para o signal 53RKCJBL
2025-07-09 21:59:21,938 INFO: Funcao validate_signal finalizada para o signal 53RKCJBL
2025-07-09 21:59:21,939 INFO: Validando sinal 53RKCJBL sem gale items
2025-07-09 21:59:21,939 INFO: Atualizando candle com filtro: {'signal.signal_id': '53RKCJBL'}, update: {'$set': {'signal': {'signal_id': '53RKCJBL', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 55), 'entry_time': datetime.datetime(2025, 7, 9, 21, 56), 'open_candle_timestamp': 1752108900, 'message_id': 9857, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 21:59:21,943 INFO: Número de candles atualizados: 1
2025-07-09 21:59:21,944 INFO: Sinal atualizado no repositório para 53RKCJBL
2025-07-09 21:59:22,768 INFO: ✅ Resposta de resultado enviada para o sinal 53RKCJBL
2025-07-09 21:59:22,769 INFO: Sinal 53RKCJBL validado como WIN e notificação enviada
2025-07-09 21:59:22,770 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 53RKCJBL
2025-07-09 21:59:22,771 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 21:59:22,810 INFO: 🔔 Novo candle detectado em 2025-07-10 00:57:00 UTC
2025-07-09 21:59:22,815 INFO: ⏳ Em cooldown (120s). Próximo sinal em 117s.
2025-07-09 21:59:22,863 INFO: 🔔 Novo candle detectado em 2025-07-10 00:58:00 UTC
2025-07-09 21:59:22,863 INFO: ⏳ Em cooldown (120s). Próximo sinal em 117s.
2025-07-09 21:59:22,892 INFO: 🔔 Novo candle detectado em 2025-07-10 00:59:00 UTC
2025-07-09 21:59:22,892 INFO: ⏳ Em cooldown (120s). Próximo sinal em 117s.
2025-07-09 22:00:09,547 INFO: 🔔 Novo candle detectado em 2025-07-10 01:00:00 UTC
2025-07-09 22:00:09,547 INFO: ⏳ Em cooldown (120s). Próximo sinal em 71s.
2025-07-09 22:01:09,540 INFO: 🔔 Novo candle detectado em 2025-07-10 01:01:00 UTC
2025-07-09 22:01:09,540 INFO: ⏳ Em cooldown (120s). Próximo sinal em 11s.
2025-07-09 22:02:09,507 INFO: 🔔 Novo candle detectado em 2025-07-10 01:02:00 UTC
2025-07-09 22:02:09,507 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:02:09,535 INFO: Buscando candle com filtro: {'epoch': 1752109320}
2025-07-09 22:02:09,540 INFO: Candle não encontrado
2025-07-09 22:02:09,566 INFO: Tendência HMA: FALL (HMA21=2763.40, HMA100=2763.79)
2025-07-09 22:02:09,567 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:02:09,567 INFO: 📈 Análise: EMA9=2763.53, EMA21=2763.64, trend_ema=FALL, trend_final=FALL, RSI=42.89, MACD=-0.05/0.03, ATR=0.76, body=0.00, confidence=60
2025-07-09 22:02:09,568 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 22:02:09,568 INFO: Inserindo candle: Candle(2025-07-10 01:02:00, DOJI, O:2763.34, H:2763.34, L:2763.34, C:2763.34)
2025-07-09 22:02:09,571 INFO: Candle inserido com ID: 686f1111e029ff405e36068f
2025-07-09 22:02:10,387 INFO: Atualizando candle com filtro: {'signal.signal_id': 'YILAOM43'}, update: {'$set': {'signal': {'signal_id': 'YILAOM43', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 2, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 3), 'open_candle_timestamp': 1752109320, 'message_id': 9859, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:02:10,391 INFO: Número de candles atualizados: 1
2025-07-09 22:02:10,391 INFO: ✅ Mensagem enviada ao Telegram (ID: YILAOM43).
2025-07-09 22:03:09,505 INFO: 🔔 Novo candle detectado em 2025-07-10 01:03:00 UTC
2025-07-09 22:03:09,506 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:03:09,509 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:28,510 INFO: 🔔 Candle 1752109380 é maior que o entry_time 2025-07-09 22:03:00
2025-07-09 22:04:28,510 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:04:28,511 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:04:28,515 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:28,515 INFO: 🔄 Candle 1752109320 já existe no banco, atualizando...
2025-07-09 22:04:28,516 INFO: 🔄 Candle 1752109320 não tem gale_items
2025-07-09 22:04:28,516 INFO: Atualizando candle com filtro: {'epoch': 1752109320}, update: {'$set': {'epoch': 1752109320, 'open': 2763.338, 'high': 2765.586, 'low': 2762.569, 'close': 2765.586, 'time': datetime.datetime(2025, 7, 10, 1, 2), 'signal': {'signal_id': 'YILAOM43', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 2), 'entry_time': datetime.datetime(2025, 7, 9, 22, 3), 'open_candle_timestamp': 1752109320, 'message_id': 9859, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:04:28,519 INFO: Número de candles atualizados: 1
2025-07-09 22:04:28,519 INFO: ✅ Candle 1752109320 atualizado com sucesso
2025-07-09 22:04:28,520 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:04:28,520 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:04:28,520 INFO: Funcao validate_signals_for_candle iniciada para o sinal YILAOM43
2025-07-09 22:04:28,520 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:04:28,523 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:28,523 INFO: Funcao validate_signal iniciada para o signal YILAOM43
2025-07-09 22:04:28,524 INFO: Funcao validate_signal finalizada para o signal YILAOM43
2025-07-09 22:04:28,524 INFO: Validando sinal YILAOM43 sem gale items
2025-07-09 22:04:28,525 INFO: Sinal YILAOM43 adicionado à fila para G1
2025-07-09 22:04:28,525 INFO: Atualizando candle com filtro: {'epoch': 1752109320}, update: {'$set': {'epoch': 1752109320, 'open': 2763.338, 'high': 2765.586, 'low': 2762.569, 'close': 2765.586, 'time': datetime.datetime(2025, 7, 10, 1, 2), 'signal': {'signal_id': 'YILAOM43', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 2), 'entry_time': datetime.datetime(2025, 7, 9, 22, 3), 'open_candle_timestamp': 1752109320, 'message_id': 9859, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752109380, 'open_price': 2765.683, 'high': 2765.683, 'low': 2765.683, 'close_price': 2765.683, 'time': datetime.datetime(2025, 7, 9, 22, 4, 28, 524567), 'result': None}]}}
2025-07-09 22:04:28,527 INFO: Número de candles atualizados: 1
2025-07-09 22:04:28,528 INFO: Candle completo com gales atualizado para YILAOM43
2025-07-09 22:04:28,528 INFO: Sinal YILAOM43 validado como LOSS e notificação enviada
2025-07-09 22:04:28,528 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal YILAOM43
2025-07-09 22:04:28,528 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:04:28,554 INFO: 🔔 Novo candle detectado em 2025-07-10 01:04:00 UTC
2025-07-09 22:04:28,556 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:04:28,559 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:37,822 INFO: 🔔 Candle 1752109440 é maior que o entry_time 2025-07-09 22:03:00
2025-07-09 22:04:37,823 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:04:37,823 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:04:37,826 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:37,826 INFO: 🔄 Candle 1752109380 já existe no banco, atualizando...
2025-07-09 22:04:37,826 INFO: 🔄 Atualizando último gale item do candle 1752109380
2025-07-09 22:04:37,827 INFO: Atualizando candle com filtro: {'epoch': 1752109320}, update: {'$set': {'epoch': 1752109320, 'open': 2763.338, 'high': 2765.586, 'low': 2762.569, 'close': 2765.586, 'time': datetime.datetime(2025, 7, 10, 1, 2), 'signal': {'signal_id': 'YILAOM43', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 2), 'entry_time': datetime.datetime(2025, 7, 9, 22, 3), 'open_candle_timestamp': 1752109320, 'message_id': 9859, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752109380, 'open_price': 2765.683, 'high': 2766.236, 'low': 2764.68, 'close_price': 2764.723, 'time': datetime.datetime(2025, 7, 9, 22, 4, 28, 524000), 'result': None}]}}
2025-07-09 22:04:37,830 INFO: Número de candles atualizados: 1
2025-07-09 22:04:37,831 INFO: ✅ Candle 1752109320 atualizado com sucesso
2025-07-09 22:04:37,831 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:04:37,831 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:04:37,832 INFO: Funcao validate_signals_for_candle iniciada para o sinal YILAOM43
2025-07-09 22:04:37,832 INFO: Buscando candle com signal_id: YILAOM43
2025-07-09 22:04:37,834 INFO: Candle encontrado para o signal_id: YILAOM43
2025-07-09 22:04:37,835 INFO: Funcao validate_signal iniciada para o signal YILAOM43
2025-07-09 22:04:37,835 INFO: Validando sinal YILAOM43 com gale items
2025-07-09 22:04:37,835 INFO: Atualizando candle com filtro: {'epoch': 1752109320}, update: {'$set': {'epoch': 1752109320, 'open': 2763.338, 'high': 2765.586, 'low': 2762.569, 'close': 2765.586, 'time': datetime.datetime(2025, 7, 10, 1, 2), 'signal': {'signal_id': 'YILAOM43', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 2), 'entry_time': datetime.datetime(2025, 7, 9, 22, 3), 'open_candle_timestamp': 1752109320, 'message_id': 9859, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752109380, 'open_price': 2765.683, 'high': 2766.236, 'low': 2764.68, 'close_price': 2764.723, 'time': datetime.datetime(2025, 7, 9, 22, 4, 28, 524000), 'result': 'WIN'}]}}
2025-07-09 22:04:37,838 INFO: Número de candles atualizados: 1
2025-07-09 22:04:37,839 INFO: Candle completo com gales atualizado para YILAOM43
2025-07-09 22:04:38,672 INFO: ✅ Resposta de resultado enviada para o sinal YILAOM43
2025-07-09 22:04:38,673 INFO: Sinal YILAOM43 validado como LOSS e notificação enviada
2025-07-09 22:04:38,673 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal YILAOM43
2025-07-09 22:04:38,674 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:05:09,514 INFO: 🔔 Novo candle detectado em 2025-07-10 01:05:00 UTC
2025-07-09 22:05:09,514 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:05:09,539 INFO: Buscando candle com filtro: {'epoch': 1752109500}
2025-07-09 22:05:09,542 INFO: Candle não encontrado
2025-07-09 22:05:09,569 INFO: Tendência HMA: FALL (HMA21=2763.07, HMA100=2764.12)
2025-07-09 22:05:09,570 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:05:09,570 INFO: 📈 Análise: EMA9=2763.50, EMA21=2763.88, trend_ema=FALL, trend_final=FALL, RSI=28.22, MACD=-0.39/-0.33, ATR=0.98, body=0.00, confidence=80
2025-07-09 22:05:09,571 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-09 22:05:09,571 INFO: Inserindo candle: Candle(2025-07-10 01:05:00, DOJI, O:2763.15, H:2763.15, L:2763.15, C:2763.15)
2025-07-09 22:05:09,574 INFO: Candle inserido com ID: 686f11c5e029ff405e360690
2025-07-09 22:05:10,447 INFO: Atualizando candle com filtro: {'signal.signal_id': '5D71Q6OD'}, update: {'$set': {'signal': {'signal_id': '5D71Q6OD', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 5, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 6), 'open_candle_timestamp': 1752109500, 'message_id': 9861, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:05:10,450 INFO: Número de candles atualizados: 1
2025-07-09 22:05:10,450 INFO: ✅ Mensagem enviada ao Telegram (ID: 5D71Q6OD).
2025-07-09 22:09:08,881 INFO: === Logging ROOT inicializado ===
2025-07-09 22:09:08,883 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 22:09:08,883 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 22:09:08,884 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 22:09:08,884 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 22:09:08,884 INFO: 🎯 Confiança mínima: 20%
2025-07-09 22:09:08,884 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 22:09:08,887 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 22:09:09,586 INFO: Websocket connected
2025-07-09 22:09:10,005 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 22:09:10,006 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 22:09:10,006 INFO: ✅ Token autorizado às 2025-07-10 01:09:10.006932 UTC
2025-07-09 22:09:10,526 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 22:09:10,526 INFO: Estrutura do primeiro candle: {'close': 2738.535, 'epoch': 1752097800, 'high': 2739.552, 'low': 2738.064, 'open': 2739.103}
2025-07-09 22:09:10,526 INFO: 📥 Histórico inicial recebido às 2025-07-10 01:09:10.526809 UTC. Total de candles: 200
2025-07-09 22:09:11,542 INFO: 🔔 Primeiro candle recebido em 2025-07-10 01:09:02 UTC
2025-07-09 22:10:09,554 INFO: 🔔 Novo candle detectado em 2025-07-10 01:10:00 UTC
2025-07-09 22:10:09,555 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:10:09,589 INFO: Inicializando conexão com o MongoDB.
2025-07-09 22:10:09,613 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 22:10:09,614 INFO: Buscando candle com filtro: {'epoch': 1752109800}
2025-07-09 22:10:09,644 INFO: Candle não encontrado
2025-07-09 22:10:09,676 INFO: Tendência HMA: FALL (HMA21=2760.60, HMA100=2760.28)
2025-07-09 22:10:09,677 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:10:09,677 INFO: 📈 Análise: EMA9=2760.75, EMA21=2760.99, trend_ema=FALL, trend_final=FALL, RSI=43.59, MACD=-0.35/-0.44, ATR=0.84, body=0.00, confidence=20
2025-07-09 22:10:09,678 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 22:10:09,678 INFO: Inserindo candle: Candle(2025-07-10 01:10:00, DOJI, O:2760.85, H:2760.85, L:2760.85, C:2760.85)
2025-07-09 22:10:09,682 INFO: Candle inserido com ID: 686f12f13df6c5d900ad6f44
2025-07-09 22:10:10,604 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Q8O2GKFU'}, update: {'$set': {'signal': {'signal_id': 'Q8O2GKFU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 10, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 11), 'open_candle_timestamp': 1752109800, 'message_id': 9862, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:10:10,608 INFO: Número de candles atualizados: 1
2025-07-09 22:10:10,609 INFO: ✅ Mensagem enviada ao Telegram (ID: Q8O2GKFU).
2025-07-09 22:11:09,542 INFO: 🔔 Novo candle detectado em 2025-07-10 01:11:00 UTC
2025-07-09 22:11:09,543 INFO: Buscando candle com signal_id: Q8O2GKFU
2025-07-09 22:11:09,545 INFO: Candle encontrado para o signal_id: Q8O2GKFU
2025-07-09 22:15:28,223 INFO: === Logging ROOT inicializado ===
2025-07-09 22:15:28,225 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 22:15:28,225 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 22:15:28,225 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 22:15:28,226 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 22:15:28,226 INFO: 🎯 Confiança mínima: 20%
2025-07-09 22:15:28,227 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 22:15:28,229 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 22:15:28,810 INFO: Websocket connected
2025-07-09 22:15:29,066 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 22:15:29,066 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 22:15:29,067 INFO: ✅ Token autorizado às 2025-07-10 01:15:29.067877 UTC
2025-07-09 22:15:29,458 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 22:15:29,458 INFO: Estrutura do primeiro candle: {'close': 2738.239, 'epoch': 1752098160, 'high': 2738.593, 'low': 2736.829, 'open': 2736.829}
2025-07-09 22:15:29,459 INFO: 📥 Histórico inicial recebido às 2025-07-10 01:15:29.459957 UTC. Total de candles: 200
2025-07-09 22:15:29,497 INFO: 🔔 Primeiro candle recebido em 2025-07-10 01:15:20 UTC
2025-07-09 22:16:09,492 INFO: 🔔 Novo candle detectado em 2025-07-10 01:16:00 UTC
2025-07-09 22:16:09,493 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:16:09,527 INFO: Inicializando conexão com o MongoDB.
2025-07-09 22:16:09,552 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 22:16:09,553 INFO: Buscando candle com filtro: {'epoch': 1752110160}
2025-07-09 22:16:09,582 INFO: Candle não encontrado
2025-07-09 22:16:09,609 INFO: Tendência HMA: FALL (HMA21=2756.32, HMA100=2755.95)
2025-07-09 22:16:09,610 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:16:09,611 INFO: 📈 Análise: EMA9=2756.30, EMA21=2756.84, trend_ema=FALL, trend_final=FALL, RSI=39.47, MACD=-0.93/-1.31, ATR=1.35, body=0.00, confidence=40
2025-07-09 22:16:09,611 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 22:16:09,612 INFO: Inserindo candle: Candle(2025-07-10 01:16:00, DOJI, O:2756.57, H:2756.57, L:2756.57, C:2756.57)
2025-07-09 22:16:09,616 INFO: Candle inserido com ID: 686f1459873bb1e47d5b178d
2025-07-09 22:16:10,512 INFO: Atualizando candle com filtro: {'signal.signal_id': 'PV3LU9FE'}, update: {'$set': {'signal': {'signal_id': 'PV3LU9FE', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 16, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 17), 'open_candle_timestamp': 1752110160, 'message_id': 9864, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:16:10,516 INFO: Número de candles atualizados: 1
2025-07-09 22:16:10,517 INFO: ✅ Mensagem enviada ao Telegram (ID: PV3LU9FE).
2025-07-09 22:17:09,492 INFO: 🔔 Novo candle detectado em 2025-07-10 01:17:00 UTC
2025-07-09 22:17:09,492 INFO: Buscando candle com signal_id: PV3LU9FE
2025-07-09 22:17:09,495 INFO: Candle encontrado para o signal_id: PV3LU9FE
2025-07-09 22:17:53,096 INFO: 🔔 Candle 1752110220 é menor ou igual ao entry_time 2025-07-09 22:17:00
2025-07-09 22:18:09,563 INFO: 🔔 Novo candle detectado em 2025-07-10 01:18:00 UTC
2025-07-09 22:18:09,563 INFO: Buscando candle com signal_id: PV3LU9FE
2025-07-09 22:18:09,567 INFO: Candle encontrado para o signal_id: PV3LU9FE
2025-07-09 22:18:14,936 INFO: 🔔 Candle 1752110280 é maior que o entry_time 2025-07-09 22:17:00
2025-07-09 22:18:14,936 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:18:14,937 INFO: Buscando candle com signal_id: PV3LU9FE
2025-07-09 22:18:14,940 INFO: Candle encontrado para o signal_id: PV3LU9FE
2025-07-09 22:18:14,941 INFO: 🔄 Candle 1752110160 já existe no banco, atualizando...
2025-07-09 22:18:14,941 INFO: 🔄 Candle 1752110160 não tem gale_items
2025-07-09 22:18:14,941 INFO: Atualizando candle com filtro: {'epoch': 1752110160}, update: {'$set': {'epoch': 1752110160, 'open': 2756.57, 'high': 2757.201, 'low': 2756.08, 'close': 2756.266, 'time': datetime.datetime(2025, 7, 10, 1, 16), 'signal': {'signal_id': 'PV3LU9FE', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 16), 'entry_time': datetime.datetime(2025, 7, 9, 22, 17), 'open_candle_timestamp': 1752110160, 'message_id': 9864, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:18:14,944 INFO: Número de candles atualizados: 1
2025-07-09 22:18:14,944 INFO: ✅ Candle 1752110160 atualizado com sucesso
2025-07-09 22:18:14,945 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:18:14,945 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:18:14,945 INFO: Funcao validate_signals_for_candle iniciada para o sinal PV3LU9FE
2025-07-09 22:18:14,946 INFO: Buscando candle com signal_id: PV3LU9FE
2025-07-09 22:18:14,948 INFO: Candle encontrado para o signal_id: PV3LU9FE
2025-07-09 22:18:14,949 INFO: Funcao validate_signal iniciada para o signal PV3LU9FE
2025-07-09 22:18:14,949 INFO: Funcao validate_signal finalizada para o signal PV3LU9FE
2025-07-09 22:18:14,949 INFO: Validando sinal PV3LU9FE sem gale items
2025-07-09 22:18:14,950 INFO: Atualizando candle com filtro: {'signal.signal_id': 'PV3LU9FE'}, update: {'$set': {'signal': {'signal_id': 'PV3LU9FE', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 16), 'entry_time': datetime.datetime(2025, 7, 9, 22, 17), 'open_candle_timestamp': 1752110160, 'message_id': 9864, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 22:18:14,953 INFO: Número de candles atualizados: 1
2025-07-09 22:18:14,953 INFO: Sinal atualizado no repositório para PV3LU9FE
2025-07-09 22:18:15,764 INFO: ✅ Resposta de resultado enviada para o sinal PV3LU9FE
2025-07-09 22:18:15,765 INFO: Sinal PV3LU9FE validado como WIN e notificação enviada
2025-07-09 22:18:15,766 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PV3LU9FE
2025-07-09 22:18:15,766 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:19:09,510 INFO: 🔔 Novo candle detectado em 2025-07-10 01:19:00 UTC
2025-07-09 22:19:09,510 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:19:09,531 INFO: Buscando candle com filtro: {'epoch': 1752110340}
2025-07-09 22:19:09,534 INFO: Candle não encontrado
2025-07-09 22:19:09,560 INFO: Tendência HMA: FALL (HMA21=2755.61, HMA100=2756.18)
2025-07-09 22:19:09,561 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:19:09,561 INFO: 📈 Análise: EMA9=2755.83, EMA21=2756.01, trend_ema=FALL, trend_final=FALL, RSI=42.14, MACD=-0.18/-0.15, ATR=1.16, body=0.00, confidence=40
2025-07-09 22:19:09,561 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 22:19:09,561 INFO: Inserindo candle: Candle(2025-07-10 01:19:00, DOJI, O:2755.76, H:2755.76, L:2755.76, C:2755.76)
2025-07-09 22:19:09,564 INFO: Candle inserido com ID: 686f150d873bb1e47d5b178e
2025-07-09 22:19:10,362 INFO: Atualizando candle com filtro: {'signal.signal_id': '5H5XEC1E'}, update: {'$set': {'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 19, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:19:10,365 INFO: Número de candles atualizados: 1
2025-07-09 22:19:10,365 INFO: ✅ Mensagem enviada ao Telegram (ID: 5H5XEC1E).
2025-07-09 22:20:09,515 INFO: 🔔 Novo candle detectado em 2025-07-10 01:20:00 UTC
2025-07-09 22:20:09,516 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:20:09,519 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:20:29,727 INFO: 🔔 Candle 1752110400 é menor ou igual ao entry_time 2025-07-09 22:20:00
2025-07-09 22:21:09,493 INFO: 🔔 Novo candle detectado em 2025-07-10 01:21:00 UTC
2025-07-09 22:21:09,494 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:21:09,497 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:21:15,352 INFO: 🔔 Candle 1752110460 é maior que o entry_time 2025-07-09 22:20:00
2025-07-09 22:21:15,353 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:21:15,353 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:21:15,356 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:21:15,357 INFO: 🔄 Candle 1752110340 já existe no banco, atualizando...
2025-07-09 22:21:15,357 INFO: 🔄 Candle 1752110340 não tem gale_items
2025-07-09 22:21:15,357 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:21:15,361 INFO: Número de candles atualizados: 1
2025-07-09 22:21:15,362 INFO: ✅ Candle 1752110340 atualizado com sucesso
2025-07-09 22:21:15,362 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:21:15,362 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:21:15,363 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5H5XEC1E
2025-07-09 22:21:15,363 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:21:15,365 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:21:15,366 INFO: Funcao validate_signal iniciada para o signal 5H5XEC1E
2025-07-09 22:21:15,366 INFO: Funcao validate_signal finalizada para o signal 5H5XEC1E
2025-07-09 22:21:15,366 INFO: Validando sinal 5H5XEC1E sem gale items
2025-07-09 22:21:15,367 INFO: Sinal 5H5XEC1E adicionado à fila para G1
2025-07-09 22:21:15,368 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110460, 'open_price': 2756.571, 'high': 2756.571, 'low': 2756.571, 'close_price': 2756.571, 'time': datetime.datetime(2025, 7, 9, 22, 21, 15, 367516), 'result': None}]}}
2025-07-09 22:21:15,371 INFO: Número de candles atualizados: 1
2025-07-09 22:21:15,372 INFO: Candle completo com gales atualizado para 5H5XEC1E
2025-07-09 22:21:15,372 INFO: Sinal 5H5XEC1E validado como LOSS e notificação enviada
2025-07-09 22:21:15,372 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5H5XEC1E
2025-07-09 22:21:15,372 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:22:09,486 INFO: 🔔 Novo candle detectado em 2025-07-10 01:22:00 UTC
2025-07-09 22:22:09,486 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:22:09,489 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:22:26,514 INFO: 🔔 Candle 1752110520 é maior que o entry_time 2025-07-09 22:20:00
2025-07-09 22:22:26,515 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:22:26,515 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:22:26,518 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:22:26,519 INFO: 🔄 Candle 1752110460 já existe no banco, atualizando...
2025-07-09 22:22:26,519 INFO: 🔄 Atualizando último gale item do candle 1752110460
2025-07-09 22:22:26,520 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110460, 'open_price': 2756.571, 'high': 2757.489, 'low': 2756.536, 'close_price': 2757.283, 'time': datetime.datetime(2025, 7, 9, 22, 21, 15, 367000), 'result': None}]}}
2025-07-09 22:22:26,523 INFO: Número de candles atualizados: 1
2025-07-09 22:22:26,523 INFO: ✅ Candle 1752110340 atualizado com sucesso
2025-07-09 22:22:26,523 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:22:26,524 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:22:26,524 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5H5XEC1E
2025-07-09 22:22:26,524 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:22:26,527 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:22:26,528 INFO: Funcao validate_signal iniciada para o signal 5H5XEC1E
2025-07-09 22:22:26,528 INFO: Validando sinal 5H5XEC1E com gale items
2025-07-09 22:22:26,528 INFO: Gale G1 para o sinal 5H5XEC1E resultou em LOSS
2025-07-09 22:22:26,528 INFO: Sinal 5H5XEC1E adicionado à fila para G2
2025-07-09 22:22:26,529 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110460, 'open_price': 2756.571, 'high': 2757.489, 'low': 2756.536, 'close_price': 2757.283, 'time': datetime.datetime(2025, 7, 9, 22, 21, 15, 367000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752110520, 'open_price': 2757.262, 'high': 2757.262, 'low': 2757.262, 'close_price': 2757.262, 'time': datetime.datetime(2025, 7, 9, 22, 22, 26, 528890), 'result': None}]}}
2025-07-09 22:22:26,532 INFO: Número de candles atualizados: 1
2025-07-09 22:22:26,532 INFO: Candle completo com gales atualizado para 5H5XEC1E
2025-07-09 22:22:26,532 INFO: Sinal 5H5XEC1E validado como LOSS e notificação enviada
2025-07-09 22:22:26,533 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5H5XEC1E
2025-07-09 22:22:26,533 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:23:09,481 INFO: 🔔 Novo candle detectado em 2025-07-10 01:23:00 UTC
2025-07-09 22:23:09,482 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:23:09,487 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:23:18,017 INFO: 🔔 Candle 1752110580 é maior que o entry_time 2025-07-09 22:20:00
2025-07-09 22:23:18,018 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:23:18,018 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:23:18,021 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:23:18,022 INFO: 🔄 Candle 1752110520 já existe no banco, atualizando...
2025-07-09 22:23:18,022 INFO: 🔄 Atualizando último gale item do candle 1752110520
2025-07-09 22:23:18,023 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110460, 'open_price': 2756.571, 'high': 2757.489, 'low': 2756.536, 'close_price': 2757.283, 'time': datetime.datetime(2025, 7, 9, 22, 21, 15, 367000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752110520, 'open_price': 2757.262, 'high': 2758.06, 'low': 2756.81, 'close_price': 2756.81, 'time': datetime.datetime(2025, 7, 9, 22, 22, 26, 528000), 'result': None}]}}
2025-07-09 22:23:18,025 INFO: Número de candles atualizados: 1
2025-07-09 22:23:18,026 INFO: ✅ Candle 1752110340 atualizado com sucesso
2025-07-09 22:23:18,026 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:23:18,026 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:23:18,027 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5H5XEC1E
2025-07-09 22:23:18,027 INFO: Buscando candle com signal_id: 5H5XEC1E
2025-07-09 22:23:18,029 INFO: Candle encontrado para o signal_id: 5H5XEC1E
2025-07-09 22:23:18,030 INFO: Funcao validate_signal iniciada para o signal 5H5XEC1E
2025-07-09 22:23:18,030 INFO: Validando sinal 5H5XEC1E com gale items
2025-07-09 22:23:18,030 INFO: Atualizando candle com filtro: {'epoch': 1752110340}, update: {'$set': {'epoch': 1752110340, 'open': 2755.762, 'high': 2757.342, 'low': 2755.671, 'close': 2756.398, 'time': datetime.datetime(2025, 7, 10, 1, 19), 'signal': {'signal_id': '5H5XEC1E', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19), 'entry_time': datetime.datetime(2025, 7, 9, 22, 20), 'open_candle_timestamp': 1752110340, 'message_id': 9867, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110460, 'open_price': 2756.571, 'high': 2757.489, 'low': 2756.536, 'close_price': 2757.283, 'time': datetime.datetime(2025, 7, 9, 22, 21, 15, 367000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752110520, 'open_price': 2757.262, 'high': 2758.06, 'low': 2756.81, 'close_price': 2756.81, 'time': datetime.datetime(2025, 7, 9, 22, 22, 26, 528000), 'result': 'WIN'}]}}
2025-07-09 22:23:18,033 INFO: Número de candles atualizados: 1
2025-07-09 22:23:18,033 INFO: Candle completo com gales atualizado para 5H5XEC1E
2025-07-09 22:24:11,606 INFO: ✅ Resposta de resultado enviada para o sinal 5H5XEC1E
2025-07-09 22:24:11,608 INFO: Sinal 5H5XEC1E validado como LOSS e notificação enviada
2025-07-09 22:24:11,608 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5H5XEC1E
2025-07-09 22:24:11,609 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:24:11,637 INFO: 🔔 Novo candle detectado em 2025-07-10 01:24:00 UTC
2025-07-09 22:24:11,638 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:24:11,681 INFO: Buscando candle com filtro: {'epoch': 1752110640}
2025-07-09 22:24:11,690 INFO: Candle não encontrado
2025-07-09 22:24:11,727 INFO: Tendência HMA: FALL (HMA21=2755.38, HMA100=2755.78)
2025-07-09 22:24:11,728 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:24:11,728 INFO: 📈 Análise: EMA9=2755.51, EMA21=2755.75, trend_ema=FALL, trend_final=FALL, RSI=34.60, MACD=-0.30/-0.33, ATR=1.09, body=0.00, confidence=60
2025-07-09 22:24:11,729 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 22:24:11,729 INFO: Inserindo candle: Candle(2025-07-10 01:24:00, DOJI, O:2755.33, H:2755.33, L:2755.33, C:2755.33)
2025-07-09 22:24:11,732 INFO: Candle inserido com ID: 686f163b873bb1e47d5b178f
2025-07-09 22:24:12,531 INFO: Atualizando candle com filtro: {'signal.signal_id': 'T2KALHE1'}, update: {'$set': {'signal': {'signal_id': 'T2KALHE1', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 24, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 25), 'open_candle_timestamp': 1752110640, 'message_id': 9869, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:24:12,535 INFO: Número de candles atualizados: 1
2025-07-09 22:24:12,536 INFO: ✅ Mensagem enviada ao Telegram (ID: T2KALHE1).
2025-07-09 22:25:09,495 INFO: 🔔 Novo candle detectado em 2025-07-10 01:25:00 UTC
2025-07-09 22:25:09,496 INFO: Buscando candle com signal_id: T2KALHE1
2025-07-09 22:25:09,499 INFO: Candle encontrado para o signal_id: T2KALHE1
2025-07-09 22:25:16,718 INFO: 🔔 Candle 1752110700 é menor ou igual ao entry_time 2025-07-09 22:25:00
2025-07-09 22:25:53,520 INFO: === Logging ROOT inicializado ===
2025-07-09 22:25:53,522 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 22:25:53,523 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 22:25:53,523 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 22:25:53,523 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 22:25:53,524 INFO: 🎯 Confiança mínima: 20%
2025-07-09 22:25:53,524 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 22:25:53,526 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 22:25:54,069 INFO: Websocket connected
2025-07-09 22:25:54,337 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 22:25:54,338 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 22:25:54,338 INFO: ✅ Token autorizado às 2025-07-10 01:25:54.338590 UTC
2025-07-09 22:25:55,072 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 22:25:55,073 INFO: Estrutura do primeiro candle: {'close': 2737.566, 'epoch': 1752098760, 'high': 2737.566, 'low': 2736.567, 'open': 2736.895}
2025-07-09 22:25:55,073 INFO: 📥 Histórico inicial recebido às 2025-07-10 01:25:55.073335 UTC. Total de candles: 200
2025-07-09 22:25:55,491 INFO: 🔔 Primeiro candle recebido em 2025-07-10 01:25:46 UTC
2025-07-09 22:26:09,528 INFO: 🔔 Novo candle detectado em 2025-07-10 01:26:00 UTC
2025-07-09 22:26:09,528 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:26:09,564 INFO: Inicializando conexão com o MongoDB.
2025-07-09 22:26:09,587 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 22:26:09,589 INFO: Buscando candle com filtro: {'epoch': 1752110760}
2025-07-09 22:26:09,618 INFO: Candle não encontrado
2025-07-09 22:26:09,648 INFO: Tendência HMA: FALL (HMA21=2756.44, HMA100=2756.96)
2025-07-09 22:26:09,648 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:26:09,649 INFO: 📈 Análise: EMA9=2756.68, EMA21=2757.37, trend_ema=FALL, trend_final=FALL, RSI=44.68, MACD=-1.07/-1.44, ATR=1.56, body=0.00, confidence=20
2025-07-09 22:26:09,649 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 22:26:09,650 INFO: Inserindo candle: Candle(2025-07-10 01:26:00, DOJI, O:2757.17, H:2757.17, L:2757.17, C:2757.17)
2025-07-09 22:26:09,654 INFO: Candle inserido com ID: 686f16b1292a5a882790425c
2025-07-09 22:26:10,559 INFO: Atualizando candle com filtro: {'signal.signal_id': 'LIQM8JTU'}, update: {'$set': {'signal': {'signal_id': 'LIQM8JTU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 26, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 27), 'open_candle_timestamp': 1752110760, 'message_id': 9870, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:26:10,563 INFO: Número de candles atualizados: 1
2025-07-09 22:26:10,564 INFO: ✅ Mensagem enviada ao Telegram (ID: LIQM8JTU).
2025-07-09 22:27:09,502 INFO: 🔔 Novo candle detectado em 2025-07-10 01:27:00 UTC
2025-07-09 22:27:09,503 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:27:09,506 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:27:20,928 INFO: 🔔 Candle 1752110820 é menor ou igual ao entry_time 2025-07-09 22:27:00
2025-07-09 22:28:09,520 INFO: 🔔 Novo candle detectado em 2025-07-10 01:28:00 UTC
2025-07-09 22:28:09,520 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:28:09,524 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:28:16,653 INFO: 🔔 Candle 1752110880 é maior que o entry_time 2025-07-09 22:27:00
2025-07-09 22:28:16,654 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:28:16,654 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:28:16,657 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:28:16,658 INFO: 🔄 Candle 1752110760 já existe no banco, atualizando...
2025-07-09 22:28:16,659 INFO: 🔄 Candle 1752110760 não tem gale_items
2025-07-09 22:28:16,659 INFO: Atualizando candle com filtro: {'epoch': 1752110760}, update: {'$set': {'epoch': 1752110760, 'open': 2757.169, 'high': 2758.497, 'low': 2757.16, 'close': 2757.811, 'time': datetime.datetime(2025, 7, 10, 1, 26), 'signal': {'signal_id': 'LIQM8JTU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 26), 'entry_time': datetime.datetime(2025, 7, 9, 22, 27), 'open_candle_timestamp': 1752110760, 'message_id': 9870, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:28:16,662 INFO: Número de candles atualizados: 1
2025-07-09 22:28:16,662 INFO: ✅ Candle 1752110760 atualizado com sucesso
2025-07-09 22:28:16,663 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:28:16,663 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:28:16,663 INFO: Funcao validate_signals_for_candle iniciada para o sinal LIQM8JTU
2025-07-09 22:28:16,663 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:28:16,666 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:28:16,666 INFO: Funcao validate_signal iniciada para o signal LIQM8JTU
2025-07-09 22:28:16,667 INFO: Funcao validate_signal finalizada para o signal LIQM8JTU
2025-07-09 22:28:16,667 INFO: Validando sinal LIQM8JTU sem gale items
2025-07-09 22:28:16,667 INFO: Sinal LIQM8JTU adicionado à fila para G1
2025-07-09 22:28:16,667 INFO: Atualizando candle com filtro: {'epoch': 1752110760}, update: {'$set': {'epoch': 1752110760, 'open': 2757.169, 'high': 2758.497, 'low': 2757.16, 'close': 2757.811, 'time': datetime.datetime(2025, 7, 10, 1, 26), 'signal': {'signal_id': 'LIQM8JTU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 26), 'entry_time': datetime.datetime(2025, 7, 9, 22, 27), 'open_candle_timestamp': 1752110760, 'message_id': 9870, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110880, 'open_price': 2759.096, 'high': 2759.096, 'low': 2759.096, 'close_price': 2759.096, 'time': datetime.datetime(2025, 7, 9, 22, 28, 16, 667615), 'result': None}]}}
2025-07-09 22:28:16,670 INFO: Número de candles atualizados: 1
2025-07-09 22:28:16,671 INFO: Candle completo com gales atualizado para LIQM8JTU
2025-07-09 22:28:25,904 INFO: ✅ Resposta de resultado enviada para o sinal LIQM8JTU
2025-07-09 22:28:25,906 INFO: Sinal LIQM8JTU validado como LOSS e notificação enviada
2025-07-09 22:28:25,906 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal LIQM8JTU
2025-07-09 22:28:25,906 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:29:09,490 INFO: 🔔 Novo candle detectado em 2025-07-10 01:29:00 UTC
2025-07-09 22:29:09,490 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:29:09,494 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:29:12,513 INFO: 🔔 Candle 1752110940 é maior que o entry_time 2025-07-09 22:27:00
2025-07-09 22:29:12,513 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:29:12,514 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:29:12,517 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:29:12,518 INFO: 🔄 Candle 1752110880 já existe no banco, atualizando...
2025-07-09 22:29:12,518 INFO: 🔄 Atualizando último gale item do candle 1752110880
2025-07-09 22:29:12,518 INFO: Atualizando candle com filtro: {'epoch': 1752110760}, update: {'$set': {'epoch': 1752110760, 'open': 2757.169, 'high': 2758.497, 'low': 2757.16, 'close': 2757.811, 'time': datetime.datetime(2025, 7, 10, 1, 26), 'signal': {'signal_id': 'LIQM8JTU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 26), 'entry_time': datetime.datetime(2025, 7, 9, 22, 27), 'open_candle_timestamp': 1752110760, 'message_id': 9870, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110880, 'open_price': 2759.096, 'high': 2759.272, 'low': 2758.041, 'close_price': 2758.727, 'time': datetime.datetime(2025, 7, 9, 22, 28, 16, 667000), 'result': None}]}}
2025-07-09 22:29:12,521 INFO: Número de candles atualizados: 1
2025-07-09 22:29:12,522 INFO: ✅ Candle 1752110760 atualizado com sucesso
2025-07-09 22:29:12,522 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:29:12,522 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:29:12,523 INFO: Funcao validate_signals_for_candle iniciada para o sinal LIQM8JTU
2025-07-09 22:29:12,523 INFO: Buscando candle com signal_id: LIQM8JTU
2025-07-09 22:29:12,525 INFO: Candle encontrado para o signal_id: LIQM8JTU
2025-07-09 22:29:12,526 INFO: Funcao validate_signal iniciada para o signal LIQM8JTU
2025-07-09 22:29:12,527 INFO: Validando sinal LIQM8JTU com gale items
2025-07-09 22:29:12,527 INFO: Atualizando candle com filtro: {'epoch': 1752110760}, update: {'$set': {'epoch': 1752110760, 'open': 2757.169, 'high': 2758.497, 'low': 2757.16, 'close': 2757.811, 'time': datetime.datetime(2025, 7, 10, 1, 26), 'signal': {'signal_id': 'LIQM8JTU', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 26), 'entry_time': datetime.datetime(2025, 7, 9, 22, 27), 'open_candle_timestamp': 1752110760, 'message_id': 9870, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752110880, 'open_price': 2759.096, 'high': 2759.272, 'low': 2758.041, 'close_price': 2758.727, 'time': datetime.datetime(2025, 7, 9, 22, 28, 16, 667000), 'result': 'WIN'}]}}
2025-07-09 22:29:12,529 INFO: Número de candles atualizados: 1
2025-07-09 22:29:12,530 INFO: Candle completo com gales atualizado para LIQM8JTU
2025-07-09 22:29:38,219 INFO: ✅ Resposta de resultado enviada para o sinal LIQM8JTU
2025-07-09 22:29:38,220 INFO: Sinal LIQM8JTU validado como LOSS e notificação enviada
2025-07-09 22:29:38,220 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal LIQM8JTU
2025-07-09 22:29:38,221 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:30:09,542 INFO: 🔔 Novo candle detectado em 2025-07-10 01:30:00 UTC
2025-07-09 22:30:09,543 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:30:09,572 INFO: Buscando candle com filtro: {'epoch': 1752111000}
2025-07-09 22:30:09,577 INFO: Candle não encontrado
2025-07-09 22:30:09,606 INFO: Tendência HMA: FALL (HMA21=2759.14, HMA100=2758.62)
2025-07-09 22:30:09,606 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:30:09,607 INFO: 📈 Análise: EMA9=2759.02, EMA21=2758.83, trend_ema=RISE, trend_final=FALL, RSI=68.20, MACD=0.14/0.03, ATR=0.99, body=0.00, confidence=60
2025-07-09 22:30:09,607 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 22:30:09,608 INFO: Inserindo candle: Candle(2025-07-10 01:30:00, DOJI, O:2759.57, H:2759.57, L:2759.57, C:2759.57)
2025-07-09 22:30:09,611 INFO: Candle inserido com ID: 686f17a1292a5a882790425d
2025-07-09 22:30:10,421 INFO: Atualizando candle com filtro: {'signal.signal_id': 'JX4XM25O'}, update: {'$set': {'signal': {'signal_id': 'JX4XM25O', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 30, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 31), 'open_candle_timestamp': 1752111000, 'message_id': 9873, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:30:10,446 INFO: Número de candles atualizados: 1
2025-07-09 22:30:10,447 INFO: ✅ Mensagem enviada ao Telegram (ID: JX4XM25O).
2025-07-09 22:31:09,515 INFO: 🔔 Novo candle detectado em 2025-07-10 01:31:00 UTC
2025-07-09 22:31:09,516 INFO: Buscando candle com signal_id: JX4XM25O
2025-07-09 22:31:09,521 INFO: Candle encontrado para o signal_id: JX4XM25O
2025-07-09 22:31:19,166 INFO: 🔔 Candle 1752111060 é menor ou igual ao entry_time 2025-07-09 22:31:00
2025-07-09 22:32:09,487 INFO: 🔔 Novo candle detectado em 2025-07-10 01:32:00 UTC
2025-07-09 22:32:09,487 INFO: Buscando candle com signal_id: JX4XM25O
2025-07-09 22:32:09,492 INFO: Candle encontrado para o signal_id: JX4XM25O
2025-07-09 22:32:09,492 INFO: 🔔 Candle 1752111120 é maior que o entry_time 2025-07-09 22:31:00
2025-07-09 22:32:09,493 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:32:09,493 INFO: Buscando candle com signal_id: JX4XM25O
2025-07-09 22:32:09,496 INFO: Candle encontrado para o signal_id: JX4XM25O
2025-07-09 22:32:09,496 INFO: 🔄 Candle 1752111000 já existe no banco, atualizando...
2025-07-09 22:32:09,497 INFO: 🔄 Candle 1752111000 não tem gale_items
2025-07-09 22:32:09,497 INFO: Atualizando candle com filtro: {'epoch': 1752111000}, update: {'$set': {'epoch': 1752111000, 'open': 2759.575, 'high': 2760.137, 'low': 2759.205, 'close': 2759.252, 'time': datetime.datetime(2025, 7, 10, 1, 30), 'signal': {'signal_id': 'JX4XM25O', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 30), 'entry_time': datetime.datetime(2025, 7, 9, 22, 31), 'open_candle_timestamp': 1752111000, 'message_id': 9873, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:32:09,500 INFO: Número de candles atualizados: 1
2025-07-09 22:32:09,500 INFO: ✅ Candle 1752111000 atualizado com sucesso
2025-07-09 22:32:09,501 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:32:09,501 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:32:09,502 INFO: Funcao validate_signals_for_candle iniciada para o sinal JX4XM25O
2025-07-09 22:32:09,502 INFO: Buscando candle com signal_id: JX4XM25O
2025-07-09 22:32:09,505 INFO: Candle encontrado para o signal_id: JX4XM25O
2025-07-09 22:32:09,505 INFO: Funcao validate_signal iniciada para o signal JX4XM25O
2025-07-09 22:32:09,505 INFO: Funcao validate_signal finalizada para o signal JX4XM25O
2025-07-09 22:32:09,506 INFO: Validando sinal JX4XM25O sem gale items
2025-07-09 22:32:09,506 INFO: Atualizando candle com filtro: {'signal.signal_id': 'JX4XM25O'}, update: {'$set': {'signal': {'signal_id': 'JX4XM25O', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 30), 'entry_time': datetime.datetime(2025, 7, 9, 22, 31), 'open_candle_timestamp': 1752111000, 'message_id': 9873, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 22:32:09,509 INFO: Número de candles atualizados: 1
2025-07-09 22:32:09,509 INFO: Sinal atualizado no repositório para JX4XM25O
2025-07-09 22:32:10,485 INFO: ✅ Resposta de resultado enviada para o sinal JX4XM25O
2025-07-09 22:32:10,486 INFO: Sinal JX4XM25O validado como WIN e notificação enviada
2025-07-09 22:32:10,487 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal JX4XM25O
2025-07-09 22:32:10,487 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:33:09,485 INFO: 🔔 Novo candle detectado em 2025-07-10 01:33:00 UTC
2025-07-09 22:33:09,486 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:33:09,514 INFO: Buscando candle com filtro: {'epoch': 1752111180}
2025-07-09 22:33:09,517 INFO: Candle não encontrado
2025-07-09 22:33:09,543 INFO: Tendência HMA: FALL (HMA21=2756.50, HMA100=2756.39)
2025-07-09 22:33:09,544 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:33:09,545 INFO: 📈 Análise: EMA9=2756.49, EMA21=2756.72, trend_ema=FALL, trend_final=FALL, RSI=35.21, MACD=-0.32/-0.38, ATR=1.82, body=0.00, confidence=60
2025-07-09 22:33:09,545 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 22:33:09,545 INFO: Inserindo candle: Candle(2025-07-10 01:33:00, DOJI, O:2756.41, H:2756.41, L:2756.41, C:2756.41)
2025-07-09 22:33:09,549 INFO: Candle inserido com ID: 686f1855292a5a882790425e
2025-07-09 22:33:10,470 INFO: Atualizando candle com filtro: {'signal.signal_id': 'T1ZL2RZJ'}, update: {'$set': {'signal': {'signal_id': 'T1ZL2RZJ', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 33, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 34), 'open_candle_timestamp': 1752111180, 'message_id': 9875, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:33:10,473 INFO: Número de candles atualizados: 1
2025-07-09 22:33:10,473 INFO: ✅ Mensagem enviada ao Telegram (ID: T1ZL2RZJ).
2025-07-09 22:34:09,485 INFO: 🔔 Novo candle detectado em 2025-07-10 01:34:00 UTC
2025-07-09 22:34:09,485 INFO: Buscando candle com signal_id: T1ZL2RZJ
2025-07-09 22:34:09,488 INFO: Candle encontrado para o signal_id: T1ZL2RZJ
2025-07-09 22:34:09,489 INFO: 🔔 Candle 1752111240 é menor ou igual ao entry_time 2025-07-09 22:34:00
2025-07-09 22:35:09,502 INFO: 🔔 Novo candle detectado em 2025-07-10 01:35:00 UTC
2025-07-09 22:35:09,502 INFO: Buscando candle com signal_id: T1ZL2RZJ
2025-07-09 22:35:09,505 INFO: Candle encontrado para o signal_id: T1ZL2RZJ
2025-07-09 22:35:09,506 INFO: 🔔 Candle 1752111300 é maior que o entry_time 2025-07-09 22:34:00
2025-07-09 22:35:09,506 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:35:09,507 INFO: Buscando candle com signal_id: T1ZL2RZJ
2025-07-09 22:35:09,509 INFO: Candle encontrado para o signal_id: T1ZL2RZJ
2025-07-09 22:35:09,510 INFO: 🔄 Candle 1752111180 já existe no banco, atualizando...
2025-07-09 22:35:09,510 INFO: 🔄 Candle 1752111180 não tem gale_items
2025-07-09 22:35:09,510 INFO: Atualizando candle com filtro: {'epoch': 1752111180}, update: {'$set': {'epoch': 1752111180, 'open': 2756.414, 'high': 2757.052, 'low': 2756.111, 'close': 2756.239, 'time': datetime.datetime(2025, 7, 10, 1, 33), 'signal': {'signal_id': 'T1ZL2RZJ', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 33), 'entry_time': datetime.datetime(2025, 7, 9, 22, 34), 'open_candle_timestamp': 1752111180, 'message_id': 9875, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:35:09,513 INFO: Número de candles atualizados: 1
2025-07-09 22:35:09,514 INFO: ✅ Candle 1752111180 atualizado com sucesso
2025-07-09 22:35:09,514 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:35:09,514 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:35:09,515 INFO: Funcao validate_signals_for_candle iniciada para o sinal T1ZL2RZJ
2025-07-09 22:35:09,515 INFO: Buscando candle com signal_id: T1ZL2RZJ
2025-07-09 22:35:09,517 INFO: Candle encontrado para o signal_id: T1ZL2RZJ
2025-07-09 22:35:09,518 INFO: Funcao validate_signal iniciada para o signal T1ZL2RZJ
2025-07-09 22:35:09,519 INFO: Funcao validate_signal finalizada para o signal T1ZL2RZJ
2025-07-09 22:35:09,519 INFO: Validando sinal T1ZL2RZJ sem gale items
2025-07-09 22:35:09,519 INFO: Atualizando candle com filtro: {'signal.signal_id': 'T1ZL2RZJ'}, update: {'$set': {'signal': {'signal_id': 'T1ZL2RZJ', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 33), 'entry_time': datetime.datetime(2025, 7, 9, 22, 34), 'open_candle_timestamp': 1752111180, 'message_id': 9875, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 22:35:09,522 INFO: Número de candles atualizados: 1
2025-07-09 22:35:09,522 INFO: Sinal atualizado no repositório para T1ZL2RZJ
2025-07-09 22:35:10,514 INFO: ✅ Resposta de resultado enviada para o sinal T1ZL2RZJ
2025-07-09 22:35:10,515 INFO: Sinal T1ZL2RZJ validado como WIN e notificação enviada
2025-07-09 22:35:10,515 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal T1ZL2RZJ
2025-07-09 22:35:10,516 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:36:09,542 INFO: 🔔 Novo candle detectado em 2025-07-10 01:36:00 UTC
2025-07-09 22:36:09,542 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:36:09,563 INFO: Buscando candle com filtro: {'epoch': 1752111360}
2025-07-09 22:36:09,566 INFO: Candle não encontrado
2025-07-09 22:36:09,592 INFO: Tendência HMA: FALL (HMA21=2755.78, HMA100=2755.81)
2025-07-09 22:36:09,592 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:36:09,593 INFO: 📈 Análise: EMA9=2755.91, EMA21=2755.94, trend_ema=FALL, trend_final=FALL, RSI=46.31, MACD=-0.02/0.00, ATR=0.86, body=0.00, confidence=40
2025-07-09 22:36:09,593 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 22:36:09,594 INFO: Inserindo candle: Candle(2025-07-10 01:36:00, DOJI, O:2755.81, H:2755.81, L:2755.81, C:2755.81)
2025-07-09 22:36:09,597 INFO: Candle inserido com ID: 686f1909292a5a882790425f
2025-07-09 22:36:10,492 INFO: Atualizando candle com filtro: {'signal.signal_id': 'TK8LFAP4'}, update: {'$set': {'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 36, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:36:10,495 INFO: Número de candles atualizados: 1
2025-07-09 22:36:10,495 INFO: ✅ Mensagem enviada ao Telegram (ID: TK8LFAP4).
2025-07-09 22:37:09,525 INFO: 🔔 Novo candle detectado em 2025-07-10 01:37:00 UTC
2025-07-09 22:37:09,526 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:37:09,529 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:37:09,529 INFO: 🔔 Candle 1752111420 é menor ou igual ao entry_time 2025-07-09 22:37:00
2025-07-09 22:38:09,523 INFO: 🔔 Novo candle detectado em 2025-07-10 01:38:00 UTC
2025-07-09 22:38:09,524 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:38:09,528 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:38:09,528 INFO: 🔔 Candle 1752111480 é maior que o entry_time 2025-07-09 22:37:00
2025-07-09 22:38:09,529 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:38:09,529 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:38:09,532 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:38:09,532 INFO: 🔄 Candle 1752111360 já existe no banco, atualizando...
2025-07-09 22:38:09,533 INFO: 🔄 Candle 1752111360 não tem gale_items
2025-07-09 22:38:09,533 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:38:09,537 INFO: Número de candles atualizados: 1
2025-07-09 22:38:09,537 INFO: ✅ Candle 1752111360 atualizado com sucesso
2025-07-09 22:38:09,537 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:38:09,538 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:38:09,538 INFO: Funcao validate_signals_for_candle iniciada para o sinal TK8LFAP4
2025-07-09 22:38:09,538 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:38:09,541 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:38:09,541 INFO: Funcao validate_signal iniciada para o signal TK8LFAP4
2025-07-09 22:38:09,541 INFO: Funcao validate_signal finalizada para o signal TK8LFAP4
2025-07-09 22:38:09,542 INFO: Validando sinal TK8LFAP4 sem gale items
2025-07-09 22:38:09,543 INFO: Sinal TK8LFAP4 adicionado à fila para G1
2025-07-09 22:38:09,543 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111480, 'open_price': 2755.011, 'high': 2755.011, 'low': 2755.011, 'close_price': 2755.011, 'time': datetime.datetime(2025, 7, 9, 22, 38, 9, 542490), 'result': None}]}}
2025-07-09 22:38:09,545 INFO: Número de candles atualizados: 1
2025-07-09 22:38:09,546 INFO: Candle completo com gales atualizado para TK8LFAP4
2025-07-09 22:38:10,404 INFO: ✅ Resposta de resultado enviada para o sinal TK8LFAP4
2025-07-09 22:38:10,405 INFO: Sinal TK8LFAP4 validado como LOSS e notificação enviada
2025-07-09 22:38:10,406 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TK8LFAP4
2025-07-09 22:38:10,406 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:39:09,507 INFO: 🔔 Novo candle detectado em 2025-07-10 01:39:00 UTC
2025-07-09 22:39:09,508 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:39:09,511 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:39:09,511 INFO: 🔔 Candle 1752111540 é maior que o entry_time 2025-07-09 22:37:00
2025-07-09 22:39:09,512 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:39:09,512 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:39:09,515 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:39:09,515 INFO: 🔄 Candle 1752111480 já existe no banco, atualizando...
2025-07-09 22:39:09,516 INFO: 🔄 Atualizando último gale item do candle 1752111480
2025-07-09 22:39:09,516 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111480, 'open_price': 2755.011, 'high': 2757.25, 'low': 2755.011, 'close_price': 2757.119, 'time': datetime.datetime(2025, 7, 9, 22, 38, 9, 542000), 'result': None}]}}
2025-07-09 22:39:09,520 INFO: Número de candles atualizados: 1
2025-07-09 22:39:09,520 INFO: ✅ Candle 1752111360 atualizado com sucesso
2025-07-09 22:39:09,520 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:39:09,521 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:39:09,521 INFO: Funcao validate_signals_for_candle iniciada para o sinal TK8LFAP4
2025-07-09 22:39:09,521 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:39:09,524 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:39:09,524 INFO: Funcao validate_signal iniciada para o signal TK8LFAP4
2025-07-09 22:40:53,259 INFO: Validando sinal TK8LFAP4 com gale items
2025-07-09 22:40:53,259 INFO: Gale G1 para o sinal TK8LFAP4 resultou em LOSS
2025-07-09 22:40:53,260 INFO: Sinal TK8LFAP4 adicionado à fila para G2
2025-07-09 22:40:53,260 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111480, 'open_price': 2755.011, 'high': 2757.25, 'low': 2755.011, 'close_price': 2757.119, 'time': datetime.datetime(2025, 7, 9, 22, 38, 9, 542000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111540, 'open_price': 2757.033, 'high': 2757.033, 'low': 2757.033, 'close_price': 2757.033, 'time': datetime.datetime(2025, 7, 9, 22, 40, 53, 260028), 'result': None}]}}
2025-07-09 22:40:53,263 INFO: Número de candles atualizados: 1
2025-07-09 22:40:53,264 INFO: Candle completo com gales atualizado para TK8LFAP4
2025-07-09 22:40:54,073 INFO: ✅ Resposta de resultado enviada para o sinal TK8LFAP4
2025-07-09 22:40:54,074 INFO: Sinal TK8LFAP4 validado como LOSS e notificação enviada
2025-07-09 22:40:54,074 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TK8LFAP4
2025-07-09 22:40:54,075 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:40:54,096 INFO: 🔔 Novo candle detectado em 2025-07-10 01:40:00 UTC
2025-07-09 22:40:54,097 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:40:54,100 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:40:54,100 INFO: 🔔 Candle 1752111600 é maior que o entry_time 2025-07-09 22:37:00
2025-07-09 22:40:54,101 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:40:54,101 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:40:54,105 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:40:54,105 INFO: 🔄 Candle 1752111540 já existe no banco, atualizando...
2025-07-09 22:40:54,105 INFO: 🔄 Atualizando último gale item do candle 1752111540
2025-07-09 22:40:54,106 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111480, 'open_price': 2755.011, 'high': 2757.25, 'low': 2755.011, 'close_price': 2757.119, 'time': datetime.datetime(2025, 7, 9, 22, 38, 9, 542000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111540, 'open_price': 2757.033, 'high': 2757.033, 'low': 2755.587, 'close_price': 2756.606, 'time': datetime.datetime(2025, 7, 9, 22, 40, 53, 260000), 'result': None}]}}
2025-07-09 22:40:54,109 INFO: Número de candles atualizados: 1
2025-07-09 22:40:54,109 INFO: ✅ Candle 1752111360 atualizado com sucesso
2025-07-09 22:40:54,110 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:40:54,110 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:40:54,110 INFO: Funcao validate_signals_for_candle iniciada para o sinal TK8LFAP4
2025-07-09 22:40:54,110 INFO: Buscando candle com signal_id: TK8LFAP4
2025-07-09 22:40:54,113 INFO: Candle encontrado para o signal_id: TK8LFAP4
2025-07-09 22:40:54,114 INFO: Funcao validate_signal iniciada para o signal TK8LFAP4
2025-07-09 22:40:55,711 INFO: Validando sinal TK8LFAP4 com gale items
2025-07-09 22:40:55,711 INFO: Atualizando candle com filtro: {'epoch': 1752111360}, update: {'$set': {'epoch': 1752111360, 'open': 2755.814, 'high': 2756.911, 'low': 2755.814, 'close': 2756.449, 'time': datetime.datetime(2025, 7, 10, 1, 36), 'signal': {'signal_id': 'TK8LFAP4', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36), 'entry_time': datetime.datetime(2025, 7, 9, 22, 37), 'open_candle_timestamp': 1752111360, 'message_id': 9879, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111480, 'open_price': 2755.011, 'high': 2757.25, 'low': 2755.011, 'close_price': 2757.119, 'time': datetime.datetime(2025, 7, 9, 22, 38, 9, 542000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111540, 'open_price': 2757.033, 'high': 2757.033, 'low': 2755.587, 'close_price': 2756.606, 'time': datetime.datetime(2025, 7, 9, 22, 40, 53, 260000), 'result': 'WIN'}]}}
2025-07-09 22:40:55,715 INFO: Número de candles atualizados: 1
2025-07-09 22:40:55,716 INFO: Candle completo com gales atualizado para TK8LFAP4
2025-07-09 22:40:56,525 INFO: ✅ Resposta de resultado enviada para o sinal TK8LFAP4
2025-07-09 22:40:56,526 INFO: Sinal TK8LFAP4 validado como LOSS e notificação enviada
2025-07-09 22:40:56,526 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TK8LFAP4
2025-07-09 22:40:56,526 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:41:09,486 INFO: 🔔 Novo candle detectado em 2025-07-10 01:41:00 UTC
2025-07-09 22:41:09,486 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:41:09,507 INFO: Buscando candle com filtro: {'epoch': 1752111660}
2025-07-09 22:41:09,510 INFO: Candle não encontrado
2025-07-09 22:41:09,536 INFO: Tendência HMA: FALL (HMA21=2758.77, HMA100=2757.71)
2025-07-09 22:41:09,536 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:41:09,537 INFO: 📈 Análise: EMA9=2758.53, EMA21=2758.04, trend_ema=RISE, trend_final=FALL, RSI=75.59, MACD=0.50/0.43, ATR=1.41, body=0.00, confidence=80
2025-07-09 22:41:09,538 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-09 22:41:09,538 INFO: Inserindo candle: Candle(2025-07-10 01:41:00, DOJI, O:2758.98, H:2758.98, L:2758.98, C:2758.98)
2025-07-09 22:41:09,541 INFO: Candle inserido com ID: 686f1a35292a5a8827904260
2025-07-09 22:41:10,344 INFO: Atualizando candle com filtro: {'signal.signal_id': 'ZSHYAHIK'}, update: {'$set': {'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 41, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:41:10,346 INFO: Número de candles atualizados: 1
2025-07-09 22:41:10,347 INFO: ✅ Mensagem enviada ao Telegram (ID: ZSHYAHIK).
2025-07-09 22:42:09,507 INFO: 🔔 Novo candle detectado em 2025-07-10 01:42:00 UTC
2025-07-09 22:42:09,508 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:42:09,511 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:42:09,512 INFO: 🔔 Candle 1752111720 é menor ou igual ao entry_time 2025-07-09 22:42:00
2025-07-09 22:43:09,535 INFO: 🔔 Novo candle detectado em 2025-07-10 01:43:00 UTC
2025-07-09 22:43:09,535 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:43:09,539 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:43:09,539 INFO: 🔔 Candle 1752111780 é maior que o entry_time 2025-07-09 22:42:00
2025-07-09 22:43:09,539 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:43:09,540 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:43:09,543 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:43:09,543 INFO: 🔄 Candle 1752111660 já existe no banco, atualizando...
2025-07-09 22:43:09,544 INFO: 🔄 Candle 1752111660 não tem gale_items
2025-07-09 22:43:09,544 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:43:09,547 INFO: Número de candles atualizados: 1
2025-07-09 22:43:09,547 INFO: ✅ Candle 1752111660 atualizado com sucesso
2025-07-09 22:43:09,548 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:43:09,548 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:43:09,548 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZSHYAHIK
2025-07-09 22:43:09,549 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:43:09,551 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:43:09,551 INFO: Funcao validate_signal iniciada para o signal ZSHYAHIK
2025-07-09 22:43:09,552 INFO: Funcao validate_signal finalizada para o signal ZSHYAHIK
2025-07-09 22:43:09,552 INFO: Validando sinal ZSHYAHIK sem gale items
2025-07-09 22:43:09,553 INFO: Sinal ZSHYAHIK adicionado à fila para G1
2025-07-09 22:43:09,553 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111780, 'open_price': 2760.262, 'high': 2760.262, 'low': 2760.262, 'close_price': 2760.262, 'time': datetime.datetime(2025, 7, 9, 22, 43, 9, 553017), 'result': None}]}}
2025-07-09 22:43:09,556 INFO: Número de candles atualizados: 1
2025-07-09 22:43:09,556 INFO: Candle completo com gales atualizado para ZSHYAHIK
2025-07-09 22:43:10,462 INFO: ✅ Resposta de resultado enviada para o sinal ZSHYAHIK
2025-07-09 22:43:10,462 INFO: Sinal ZSHYAHIK validado como LOSS e notificação enviada
2025-07-09 22:43:10,463 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZSHYAHIK
2025-07-09 22:43:10,463 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:44:09,493 INFO: 🔔 Novo candle detectado em 2025-07-10 01:44:00 UTC
2025-07-09 22:44:09,494 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:44:09,496 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:44:09,497 INFO: 🔔 Candle 1752111840 é maior que o entry_time 2025-07-09 22:42:00
2025-07-09 22:44:09,497 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:44:09,497 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:44:09,500 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:44:09,500 INFO: 🔄 Candle 1752111780 já existe no banco, atualizando...
2025-07-09 22:44:09,501 INFO: 🔄 Atualizando último gale item do candle 1752111780
2025-07-09 22:44:09,501 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111780, 'open_price': 2760.262, 'high': 2761.451, 'low': 2759.869, 'close_price': 2760.842, 'time': datetime.datetime(2025, 7, 9, 22, 43, 9, 553000), 'result': None}]}}
2025-07-09 22:44:09,504 INFO: Número de candles atualizados: 1
2025-07-09 22:44:09,505 INFO: ✅ Candle 1752111660 atualizado com sucesso
2025-07-09 22:44:09,505 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:44:09,505 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:44:09,506 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZSHYAHIK
2025-07-09 22:44:09,506 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:44:09,508 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:44:09,509 INFO: Funcao validate_signal iniciada para o signal ZSHYAHIK
2025-07-09 22:44:16,867 INFO: Validando sinal ZSHYAHIK com gale items
2025-07-09 22:44:16,867 INFO: Gale G1 para o sinal ZSHYAHIK resultou em LOSS
2025-07-09 22:44:16,867 INFO: Sinal ZSHYAHIK adicionado à fila para G2
2025-07-09 22:44:16,867 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111780, 'open_price': 2760.262, 'high': 2761.451, 'low': 2759.869, 'close_price': 2760.842, 'time': datetime.datetime(2025, 7, 9, 22, 43, 9, 553000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111840, 'open_price': 2760.991, 'high': 2760.991, 'low': 2760.991, 'close_price': 2760.991, 'time': datetime.datetime(2025, 7, 9, 22, 44, 16, 867748), 'result': None}]}}
2025-07-09 22:44:16,871 INFO: Número de candles atualizados: 1
2025-07-09 22:44:16,871 INFO: Candle completo com gales atualizado para ZSHYAHIK
2025-07-09 22:44:17,701 INFO: ✅ Resposta de resultado enviada para o sinal ZSHYAHIK
2025-07-09 22:44:17,702 INFO: Sinal ZSHYAHIK validado como LOSS e notificação enviada
2025-07-09 22:44:17,702 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZSHYAHIK
2025-07-09 22:44:17,703 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:45:09,493 INFO: 🔔 Novo candle detectado em 2025-07-10 01:45:00 UTC
2025-07-09 22:45:09,493 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:45:09,497 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:45:09,498 INFO: 🔔 Candle 1752111900 é maior que o entry_time 2025-07-09 22:42:00
2025-07-09 22:45:09,498 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:45:09,499 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:45:09,502 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:45:09,503 INFO: 🔄 Candle 1752111840 já existe no banco, atualizando...
2025-07-09 22:45:09,504 INFO: 🔄 Atualizando último gale item do candle 1752111840
2025-07-09 22:45:09,504 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111780, 'open_price': 2760.262, 'high': 2761.451, 'low': 2759.869, 'close_price': 2760.842, 'time': datetime.datetime(2025, 7, 9, 22, 43, 9, 553000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111840, 'open_price': 2760.991, 'high': 2761.198, 'low': 2759.744, 'close_price': 2759.744, 'time': datetime.datetime(2025, 7, 9, 22, 44, 16, 867000), 'result': None}]}}
2025-07-09 22:45:09,507 INFO: Número de candles atualizados: 1
2025-07-09 22:45:09,508 INFO: ✅ Candle 1752111660 atualizado com sucesso
2025-07-09 22:45:09,508 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:45:09,509 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:45:09,509 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZSHYAHIK
2025-07-09 22:45:09,510 INFO: Buscando candle com signal_id: ZSHYAHIK
2025-07-09 22:45:09,513 INFO: Candle encontrado para o signal_id: ZSHYAHIK
2025-07-09 22:45:09,513 INFO: Funcao validate_signal iniciada para o signal ZSHYAHIK
2025-07-09 22:45:16,390 INFO: Validando sinal ZSHYAHIK com gale items
2025-07-09 22:45:16,390 INFO: Atualizando candle com filtro: {'epoch': 1752111660}, update: {'$set': {'epoch': 1752111660, 'open': 2758.98, 'high': 2760.929, 'low': 2758.715, 'close': 2760.874, 'time': datetime.datetime(2025, 7, 10, 1, 41), 'signal': {'signal_id': 'ZSHYAHIK', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41), 'entry_time': datetime.datetime(2025, 7, 9, 22, 42), 'open_candle_timestamp': 1752111660, 'message_id': 9883, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752111780, 'open_price': 2760.262, 'high': 2761.451, 'low': 2759.869, 'close_price': 2760.842, 'time': datetime.datetime(2025, 7, 9, 22, 43, 9, 553000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752111840, 'open_price': 2760.991, 'high': 2761.198, 'low': 2759.744, 'close_price': 2759.744, 'time': datetime.datetime(2025, 7, 9, 22, 44, 16, 867000), 'result': 'WIN'}]}}
2025-07-09 22:45:16,394 INFO: Número de candles atualizados: 1
2025-07-09 22:45:16,394 INFO: Candle completo com gales atualizado para ZSHYAHIK
2025-07-09 22:45:17,213 INFO: ✅ Resposta de resultado enviada para o sinal ZSHYAHIK
2025-07-09 22:45:17,214 INFO: Sinal ZSHYAHIK validado como LOSS e notificação enviada
2025-07-09 22:45:17,214 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZSHYAHIK
2025-07-09 22:45:17,215 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:46:14,602 INFO: === Logging ROOT inicializado ===
2025-07-09 22:46:14,604 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 22:46:14,604 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 22:46:14,605 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 22:46:14,605 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 22:46:14,605 INFO: 🎯 Confiança mínima: 20%
2025-07-09 22:46:14,605 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 22:46:14,608 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 22:46:15,152 INFO: Websocket connected
2025-07-09 22:46:15,496 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 22:46:15,496 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 22:46:15,497 INFO: ✅ Token autorizado às 2025-07-10 01:46:15.497919 UTC
2025-07-09 22:46:15,888 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 22:46:15,888 INFO: Estrutura do primeiro candle: {'close': 2740.963, 'epoch': 1752100020, 'high': 2741.309, 'low': 2740.267, 'open': 2740.635}
2025-07-09 22:46:15,889 INFO: 📥 Histórico inicial recebido às 2025-07-10 01:46:15.889019 UTC. Total de candles: 200
2025-07-09 22:46:17,483 INFO: 🔔 Primeiro candle recebido em 2025-07-10 01:46:08 UTC
2025-07-09 22:47:09,545 INFO: 🔔 Novo candle detectado em 2025-07-10 01:47:00 UTC
2025-07-09 22:47:09,545 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:47:09,598 INFO: Inicializando conexão com o MongoDB.
2025-07-09 22:47:09,636 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 22:47:09,638 INFO: Buscando candle com filtro: {'epoch': 1752112020}
2025-07-09 22:47:09,674 INFO: Candle não encontrado
2025-07-09 22:47:09,712 INFO: Tendência HMA: FALL (HMA21=2758.94, HMA100=2758.37)
2025-07-09 22:47:09,713 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:47:09,713 INFO: 📈 Análise: EMA9=2758.96, EMA21=2758.97, trend_ema=FALL, trend_final=FALL, RSI=47.61, MACD=0.01/0.06, ATR=0.78, body=0.00, confidence=60
2025-07-09 22:47:09,714 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 22:47:09,714 INFO: Inserindo candle: Candle(2025-07-10 01:47:00, DOJI, O:2758.84, H:2758.84, L:2758.84, C:2758.84)
2025-07-09 22:47:09,718 INFO: Candle inserido com ID: 686f1b9df37da22923852d86
2025-07-09 22:47:10,608 INFO: Atualizando candle com filtro: {'signal.signal_id': '0X3HZMAP'}, update: {'$set': {'signal': {'signal_id': '0X3HZMAP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 47, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 48), 'open_candle_timestamp': 1752112020, 'message_id': 9887, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:47:10,611 INFO: Número de candles atualizados: 1
2025-07-09 22:47:10,612 INFO: ✅ Mensagem enviada ao Telegram (ID: 0X3HZMAP).
2025-07-09 22:48:09,479 INFO: 🔔 Novo candle detectado em 2025-07-10 01:48:00 UTC
2025-07-09 22:48:09,480 INFO: Buscando candle com signal_id: 0X3HZMAP
2025-07-09 22:48:09,484 INFO: Candle encontrado para o signal_id: 0X3HZMAP
2025-07-09 22:48:09,484 INFO: 🔔 Candle 1752112080 é menor ou igual ao entry_time 2025-07-09 22:48:00
2025-07-09 22:49:09,508 INFO: 🔔 Novo candle detectado em 2025-07-10 01:49:00 UTC
2025-07-09 22:49:09,509 INFO: Buscando candle com signal_id: 0X3HZMAP
2025-07-09 22:49:09,512 INFO: Candle encontrado para o signal_id: 0X3HZMAP
2025-07-09 22:49:09,513 INFO: 🔔 Candle 1752112140 é maior que o entry_time 2025-07-09 22:48:00
2025-07-09 22:49:09,513 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:49:09,514 INFO: Buscando candle com signal_id: 0X3HZMAP
2025-07-09 22:49:09,517 INFO: Candle encontrado para o signal_id: 0X3HZMAP
2025-07-09 22:49:09,517 INFO: 🔄 Candle 1752112020 já existe no banco, atualizando...
2025-07-09 22:49:09,517 INFO: 🔄 Candle 1752112020 não tem gale_items
2025-07-09 22:49:09,518 INFO: Atualizando candle com filtro: {'epoch': 1752112020}, update: {'$set': {'epoch': 1752112020, 'open': 2758.839, 'high': 2759.098, 'low': 2757.731, 'close': 2758.435, 'time': datetime.datetime(2025, 7, 10, 1, 47), 'signal': {'signal_id': '0X3HZMAP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 47), 'entry_time': datetime.datetime(2025, 7, 9, 22, 48), 'open_candle_timestamp': 1752112020, 'message_id': 9887, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:49:09,521 INFO: Número de candles atualizados: 1
2025-07-09 22:49:09,521 INFO: ✅ Candle 1752112020 atualizado com sucesso
2025-07-09 22:49:09,521 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:49:09,522 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:49:09,522 INFO: Funcao validate_signals_for_candle iniciada para o sinal 0X3HZMAP
2025-07-09 22:49:09,522 INFO: Buscando candle com signal_id: 0X3HZMAP
2025-07-09 22:49:09,525 INFO: Candle encontrado para o signal_id: 0X3HZMAP
2025-07-09 22:49:09,525 INFO: Funcao validate_signal iniciada para o signal 0X3HZMAP
2025-07-09 22:49:09,525 INFO: Funcao validate_signal finalizada para o signal 0X3HZMAP
2025-07-09 22:49:09,526 INFO: Validando sinal 0X3HZMAP sem gale items
2025-07-09 22:49:09,526 INFO: Atualizando candle com filtro: {'signal.signal_id': '0X3HZMAP'}, update: {'$set': {'signal': {'signal_id': '0X3HZMAP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 47), 'entry_time': datetime.datetime(2025, 7, 9, 22, 48), 'open_candle_timestamp': 1752112020, 'message_id': 9887, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 22:49:09,529 INFO: Número de candles atualizados: 1
2025-07-09 22:49:09,530 INFO: Sinal atualizado no repositório para 0X3HZMAP
2025-07-09 22:49:10,336 INFO: ✅ Resposta de resultado enviada para o sinal 0X3HZMAP
2025-07-09 22:49:10,337 INFO: Sinal 0X3HZMAP validado como WIN e notificação enviada
2025-07-09 22:49:10,337 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 0X3HZMAP
2025-07-09 22:49:10,338 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:50:09,773 INFO: 🔔 Novo candle detectado em 2025-07-10 01:50:00 UTC
2025-07-09 22:50:09,773 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:50:09,796 INFO: Buscando candle com filtro: {'epoch': 1752112200}
2025-07-09 22:50:09,799 INFO: Candle não encontrado
2025-07-09 22:50:09,826 INFO: Tendência HMA: FALL (HMA21=2758.54, HMA100=2758.38)
2025-07-09 22:50:09,827 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:50:09,827 INFO: 📈 Análise: EMA9=2758.55, EMA21=2758.50, trend_ema=RISE, trend_final=FALL, RSI=54.41, MACD=0.08/0.11, ATR=0.86, body=0.00, confidence=20
2025-07-09 22:50:09,827 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 22:50:09,828 INFO: Inserindo candle: Candle(2025-07-10 01:50:00, DOJI, O:2758.62, H:2758.62, L:2758.62, C:2758.62)
2025-07-09 22:50:09,831 INFO: Candle inserido com ID: 686f1c51f37da22923852d87
2025-07-09 22:50:10,632 INFO: Atualizando candle com filtro: {'signal.signal_id': 'M4YFE383'}, update: {'$set': {'signal': {'signal_id': 'M4YFE383', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 50, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 51), 'open_candle_timestamp': 1752112200, 'message_id': 9889, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:50:10,636 INFO: Número de candles atualizados: 1
2025-07-09 22:50:10,636 INFO: ✅ Mensagem enviada ao Telegram (ID: M4YFE383).
2025-07-09 22:51:09,537 INFO: 🔔 Novo candle detectado em 2025-07-10 01:51:00 UTC
2025-07-09 22:51:09,538 INFO: Buscando candle com signal_id: M4YFE383
2025-07-09 22:51:09,540 INFO: Candle encontrado para o signal_id: M4YFE383
2025-07-09 22:51:09,541 INFO: 🔔 Candle 1752112260 é menor ou igual ao entry_time 2025-07-09 22:51:00
2025-07-09 22:52:09,515 INFO: 🔔 Novo candle detectado em 2025-07-10 01:52:00 UTC
2025-07-09 22:52:09,516 INFO: Buscando candle com signal_id: M4YFE383
2025-07-09 22:52:09,519 INFO: Candle encontrado para o signal_id: M4YFE383
2025-07-09 22:52:09,519 INFO: 🔔 Candle 1752112320 é maior que o entry_time 2025-07-09 22:51:00
2025-07-09 22:52:09,520 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:52:09,521 INFO: Buscando candle com signal_id: M4YFE383
2025-07-09 22:52:09,523 INFO: Candle encontrado para o signal_id: M4YFE383
2025-07-09 22:52:09,523 INFO: 🔄 Candle 1752112200 já existe no banco, atualizando...
2025-07-09 22:52:09,523 INFO: 🔄 Candle 1752112200 não tem gale_items
2025-07-09 22:52:09,524 INFO: Atualizando candle com filtro: {'epoch': 1752112200}, update: {'$set': {'epoch': 1752112200, 'open': 2758.62, 'high': 2758.659, 'low': 2755.673, 'close': 2756.034, 'time': datetime.datetime(2025, 7, 10, 1, 50), 'signal': {'signal_id': 'M4YFE383', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 50), 'entry_time': datetime.datetime(2025, 7, 9, 22, 51), 'open_candle_timestamp': 1752112200, 'message_id': 9889, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:52:09,527 INFO: Número de candles atualizados: 1
2025-07-09 22:52:09,527 INFO: ✅ Candle 1752112200 atualizado com sucesso
2025-07-09 22:52:09,528 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:52:09,528 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:52:09,528 INFO: Funcao validate_signals_for_candle iniciada para o sinal M4YFE383
2025-07-09 22:52:09,528 INFO: Buscando candle com signal_id: M4YFE383
2025-07-09 22:52:09,531 INFO: Candle encontrado para o signal_id: M4YFE383
2025-07-09 22:52:09,532 INFO: Funcao validate_signal iniciada para o signal M4YFE383
2025-07-09 22:52:09,532 INFO: Funcao validate_signal finalizada para o signal M4YFE383
2025-07-09 22:52:09,532 INFO: Validando sinal M4YFE383 sem gale items
2025-07-09 22:52:09,533 INFO: Atualizando candle com filtro: {'signal.signal_id': 'M4YFE383'}, update: {'$set': {'signal': {'signal_id': 'M4YFE383', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 50), 'entry_time': datetime.datetime(2025, 7, 9, 22, 51), 'open_candle_timestamp': 1752112200, 'message_id': 9889, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 22:52:09,535 INFO: Número de candles atualizados: 1
2025-07-09 22:52:09,535 INFO: Sinal atualizado no repositório para M4YFE383
2025-07-09 22:52:10,346 INFO: ✅ Resposta de resultado enviada para o sinal M4YFE383
2025-07-09 22:52:10,347 INFO: Sinal M4YFE383 validado como WIN e notificação enviada
2025-07-09 22:52:10,347 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal M4YFE383
2025-07-09 22:52:10,348 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:53:09,511 INFO: 🔔 Novo candle detectado em 2025-07-10 01:53:00 UTC
2025-07-09 22:53:09,511 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:53:09,532 INFO: Buscando candle com filtro: {'epoch': 1752112380}
2025-07-09 22:53:09,535 INFO: Candle não encontrado
2025-07-09 22:53:09,562 INFO: Tendência HMA: FALL (HMA21=2755.92, HMA100=2756.20)
2025-07-09 22:53:09,563 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:53:09,563 INFO: 📈 Análise: EMA9=2756.10, EMA21=2756.23, trend_ema=FALL, trend_final=FALL, RSI=39.96, MACD=-0.09/-0.01, ATR=0.95, body=0.00, confidence=80
2025-07-09 22:53:09,563 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-09 22:53:09,563 INFO: Inserindo candle: Candle(2025-07-10 01:53:00, DOJI, O:2755.78, H:2755.78, L:2755.78, C:2755.78)
2025-07-09 22:53:09,567 INFO: Candle inserido com ID: 686f1d05f37da22923852d88
2025-07-09 22:53:10,384 INFO: Atualizando candle com filtro: {'signal.signal_id': 'SJP6DWTT'}, update: {'$set': {'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 53, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:53:10,388 INFO: Número de candles atualizados: 1
2025-07-09 22:53:10,388 INFO: ✅ Mensagem enviada ao Telegram (ID: SJP6DWTT).
2025-07-09 22:54:09,661 INFO: 🔔 Novo candle detectado em 2025-07-10 01:54:00 UTC
2025-07-09 22:54:09,662 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:54:09,667 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:54:09,668 INFO: 🔔 Candle 1752112440 é menor ou igual ao entry_time 2025-07-09 22:54:00
2025-07-09 22:55:09,499 INFO: 🔔 Novo candle detectado em 2025-07-10 01:55:00 UTC
2025-07-09 22:55:09,500 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:55:09,503 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:55:09,504 INFO: 🔔 Candle 1752112500 é maior que o entry_time 2025-07-09 22:54:00
2025-07-09 22:55:09,504 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:55:09,505 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:55:09,508 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:55:09,508 INFO: 🔄 Candle 1752112380 já existe no banco, atualizando...
2025-07-09 22:55:09,509 INFO: 🔄 Candle 1752112380 não tem gale_items
2025-07-09 22:55:09,509 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 22:55:09,513 INFO: Número de candles atualizados: 1
2025-07-09 22:55:09,513 INFO: ✅ Candle 1752112380 atualizado com sucesso
2025-07-09 22:55:09,514 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:55:09,514 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:55:09,514 INFO: Funcao validate_signals_for_candle iniciada para o sinal SJP6DWTT
2025-07-09 22:55:09,515 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:55:09,518 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:55:09,518 INFO: Funcao validate_signal iniciada para o signal SJP6DWTT
2025-07-09 22:55:24,699 INFO: Funcao validate_signal finalizada para o signal SJP6DWTT
2025-07-09 22:55:24,700 INFO: Validando sinal SJP6DWTT sem gale items
2025-07-09 22:55:24,700 INFO: Sinal SJP6DWTT adicionado à fila para G1
2025-07-09 22:55:24,700 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752112500, 'open_price': 2754.185, 'high': 2754.185, 'low': 2754.185, 'close_price': 2754.185, 'time': datetime.datetime(2025, 7, 9, 22, 55, 24, 700488), 'result': None}]}}
2025-07-09 22:55:24,704 INFO: Número de candles atualizados: 1
2025-07-09 22:55:24,705 INFO: Candle completo com gales atualizado para SJP6DWTT
2025-07-09 22:55:25,587 INFO: ✅ Resposta de resultado enviada para o sinal SJP6DWTT
2025-07-09 22:55:25,588 INFO: Sinal SJP6DWTT validado como LOSS e notificação enviada
2025-07-09 22:55:25,589 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal SJP6DWTT
2025-07-09 22:55:25,590 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:56:09,711 INFO: 🔔 Novo candle detectado em 2025-07-10 01:56:00 UTC
2025-07-09 22:56:09,711 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:56:09,714 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:56:09,715 INFO: 🔔 Candle 1752112560 é maior que o entry_time 2025-07-09 22:54:00
2025-07-09 22:56:09,715 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:56:09,716 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:56:09,718 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:56:09,719 INFO: 🔄 Candle 1752112500 já existe no banco, atualizando...
2025-07-09 22:56:09,719 INFO: 🔄 Atualizando último gale item do candle 1752112500
2025-07-09 22:56:09,719 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752112500, 'open_price': 2754.185, 'high': 2755.022, 'low': 2753.327, 'close_price': 2753.567, 'time': datetime.datetime(2025, 7, 9, 22, 55, 24, 700000), 'result': None}]}}
2025-07-09 22:56:09,722 INFO: Número de candles atualizados: 1
2025-07-09 22:56:09,723 INFO: ✅ Candle 1752112380 atualizado com sucesso
2025-07-09 22:56:09,723 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:56:09,723 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:56:09,724 INFO: Funcao validate_signals_for_candle iniciada para o sinal SJP6DWTT
2025-07-09 22:56:09,724 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:56:09,726 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:56:09,727 INFO: Funcao validate_signal iniciada para o signal SJP6DWTT
2025-07-09 22:56:43,389 INFO: Validando sinal SJP6DWTT com gale items
2025-07-09 22:56:43,390 INFO: Gale G1 para o sinal SJP6DWTT resultou em LOSS
2025-07-09 22:56:43,390 INFO: Sinal SJP6DWTT adicionado à fila para G2
2025-07-09 22:56:43,390 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752112500, 'open_price': 2754.185, 'high': 2755.022, 'low': 2753.327, 'close_price': 2753.567, 'time': datetime.datetime(2025, 7, 9, 22, 55, 24, 700000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752112560, 'open_price': 2753.683, 'high': 2753.683, 'low': 2753.683, 'close_price': 2753.683, 'time': datetime.datetime(2025, 7, 9, 22, 56, 43, 390003), 'result': None}]}}
2025-07-09 22:56:43,394 INFO: Número de candles atualizados: 1
2025-07-09 22:56:43,394 INFO: Candle completo com gales atualizado para SJP6DWTT
2025-07-09 22:56:44,198 INFO: ✅ Resposta de resultado enviada para o sinal SJP6DWTT
2025-07-09 22:56:44,199 INFO: Sinal SJP6DWTT validado como LOSS e notificação enviada
2025-07-09 22:56:44,199 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal SJP6DWTT
2025-07-09 22:56:44,200 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 22:57:09,559 INFO: 🔔 Novo candle detectado em 2025-07-10 01:57:00 UTC
2025-07-09 22:57:09,559 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:57:09,562 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:57:09,563 INFO: 🔔 Candle 1752112620 é maior que o entry_time 2025-07-09 22:54:00
2025-07-09 22:57:09,563 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 22:57:09,564 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:57:09,566 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:57:09,567 INFO: 🔄 Candle 1752112560 já existe no banco, atualizando...
2025-07-09 22:57:09,567 INFO: 🔄 Atualizando último gale item do candle 1752112560
2025-07-09 22:57:09,568 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752112500, 'open_price': 2754.185, 'high': 2755.022, 'low': 2753.327, 'close_price': 2753.567, 'time': datetime.datetime(2025, 7, 9, 22, 55, 24, 700000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752112560, 'open_price': 2753.683, 'high': 2755.286, 'low': 2753.683, 'close_price': 2754.907, 'time': datetime.datetime(2025, 7, 9, 22, 56, 43, 390000), 'result': None}]}}
2025-07-09 22:57:09,570 INFO: Número de candles atualizados: 1
2025-07-09 22:57:09,571 INFO: ✅ Candle 1752112380 atualizado com sucesso
2025-07-09 22:57:09,571 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 22:57:09,571 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 22:57:09,572 INFO: Funcao validate_signals_for_candle iniciada para o sinal SJP6DWTT
2025-07-09 22:57:09,572 INFO: Buscando candle com signal_id: SJP6DWTT
2025-07-09 22:57:09,575 INFO: Candle encontrado para o signal_id: SJP6DWTT
2025-07-09 22:57:09,575 INFO: Funcao validate_signal iniciada para o signal SJP6DWTT
2025-07-09 22:57:16,796 INFO: Validando sinal SJP6DWTT com gale items
2025-07-09 22:57:16,796 INFO: Gale G2 para o sinal SJP6DWTT resultou em LOSS
2025-07-09 22:57:16,796 INFO: Atualizando candle com filtro: {'epoch': 1752112380}, update: {'$set': {'epoch': 1752112380, 'open': 2755.781, 'high': 2755.799, 'low': 2753.992, 'close': 2755.209, 'time': datetime.datetime(2025, 7, 10, 1, 53), 'signal': {'signal_id': 'SJP6DWTT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 53), 'entry_time': datetime.datetime(2025, 7, 9, 22, 54), 'open_candle_timestamp': 1752112380, 'message_id': 9892, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752112500, 'open_price': 2754.185, 'high': 2755.022, 'low': 2753.327, 'close_price': 2753.567, 'time': datetime.datetime(2025, 7, 9, 22, 55, 24, 700000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752112560, 'open_price': 2753.683, 'high': 2755.286, 'low': 2753.683, 'close_price': 2754.907, 'time': datetime.datetime(2025, 7, 9, 22, 56, 43, 390000), 'result': 'LOSS'}]}}
2025-07-09 22:57:16,800 INFO: Número de candles atualizados: 1
2025-07-09 22:57:16,801 INFO: Candle completo com gales atualizado para SJP6DWTT
2025-07-09 22:57:17,586 INFO: ✅ Resposta de resultado enviada para o sinal SJP6DWTT
2025-07-09 22:57:17,587 INFO: Sinal SJP6DWTT validado como LOSS e notificação enviada
2025-07-09 22:57:17,587 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal SJP6DWTT
2025-07-09 22:57:17,587 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 22:58:09,498 INFO: 🔔 Novo candle detectado em 2025-07-10 01:58:00 UTC
2025-07-09 22:58:09,498 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 22:58:09,526 INFO: Buscando candle com filtro: {'epoch': 1752112680}
2025-07-09 22:58:09,530 INFO: Candle não encontrado
2025-07-09 22:58:09,557 INFO: Tendência HMA: FALL (HMA21=2754.91, HMA100=2754.86)
2025-07-09 22:58:09,558 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 22:58:09,558 INFO: 📈 Análise: EMA9=2754.79, EMA21=2754.75, trend_ema=RISE, trend_final=FALL, RSI=52.28, MACD=0.06/0.07, ATR=0.81, body=0.00, confidence=20
2025-07-09 22:58:09,559 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 22:58:09,559 INFO: Inserindo candle: Candle(2025-07-10 01:58:00, DOJI, O:2754.80, H:2754.80, L:2754.80, C:2754.80)
2025-07-09 22:58:09,563 INFO: Candle inserido com ID: 686f1e31f37da22923852d89
2025-07-09 22:58:10,374 INFO: Atualizando candle com filtro: {'signal.signal_id': 'SMH1CIHW'}, update: {'$set': {'signal': {'signal_id': 'SMH1CIHW', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 19, 58, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 22, 59), 'open_candle_timestamp': 1752112680, 'message_id': 9897, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 22:58:10,378 INFO: Número de candles atualizados: 1
2025-07-09 22:58:10,379 INFO: ✅ Mensagem enviada ao Telegram (ID: SMH1CIHW).
2025-07-09 22:59:09,523 INFO: 🔔 Novo candle detectado em 2025-07-10 01:59:00 UTC
2025-07-09 22:59:09,524 INFO: Buscando candle com signal_id: SMH1CIHW
2025-07-09 22:59:09,529 INFO: Candle encontrado para o signal_id: SMH1CIHW
2025-07-09 22:59:09,530 INFO: 🔔 Candle 1752112740 é menor ou igual ao entry_time 2025-07-09 22:59:00
2025-07-09 23:00:09,563 INFO: 🔔 Novo candle detectado em 2025-07-10 02:00:00 UTC
2025-07-09 23:00:09,563 INFO: Buscando candle com signal_id: SMH1CIHW
2025-07-09 23:00:09,567 INFO: Candle encontrado para o signal_id: SMH1CIHW
2025-07-09 23:00:09,567 INFO: 🔔 Candle 1752112800 é maior que o entry_time 2025-07-09 22:59:00
2025-07-09 23:00:09,568 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:00:09,568 INFO: Buscando candle com signal_id: SMH1CIHW
2025-07-09 23:00:09,571 INFO: Candle encontrado para o signal_id: SMH1CIHW
2025-07-09 23:00:09,571 INFO: 🔄 Candle 1752112680 já existe no banco, atualizando...
2025-07-09 23:00:09,572 INFO: 🔄 Candle 1752112680 não tem gale_items
2025-07-09 23:00:09,572 INFO: Atualizando candle com filtro: {'epoch': 1752112680}, update: {'$set': {'epoch': 1752112680, 'open': 2754.795, 'high': 2755.058, 'low': 2753.852, 'close': 2754.2, 'time': datetime.datetime(2025, 7, 10, 1, 58), 'signal': {'signal_id': 'SMH1CIHW', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 58), 'entry_time': datetime.datetime(2025, 7, 9, 22, 59), 'open_candle_timestamp': 1752112680, 'message_id': 9897, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:00:09,575 INFO: Número de candles atualizados: 1
2025-07-09 23:00:09,575 INFO: ✅ Candle 1752112680 atualizado com sucesso
2025-07-09 23:00:09,576 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:00:09,577 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:00:09,577 INFO: Funcao validate_signals_for_candle iniciada para o sinal SMH1CIHW
2025-07-09 23:00:09,577 INFO: Buscando candle com signal_id: SMH1CIHW
2025-07-09 23:00:09,580 INFO: Candle encontrado para o signal_id: SMH1CIHW
2025-07-09 23:00:09,580 INFO: Funcao validate_signal iniciada para o signal SMH1CIHW
2025-07-09 23:00:30,739 INFO: Funcao validate_signal finalizada para o signal SMH1CIHW
2025-07-09 23:00:30,740 INFO: Validando sinal SMH1CIHW sem gale items
2025-07-09 23:00:30,740 INFO: Atualizando candle com filtro: {'signal.signal_id': 'SMH1CIHW'}, update: {'$set': {'signal': {'signal_id': 'SMH1CIHW', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 58), 'entry_time': datetime.datetime(2025, 7, 9, 22, 59), 'open_candle_timestamp': 1752112680, 'message_id': 9897, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 23:00:30,743 INFO: Número de candles atualizados: 1
2025-07-09 23:00:30,743 INFO: Sinal atualizado no repositório para SMH1CIHW
2025-07-09 23:00:31,614 INFO: ✅ Resposta de resultado enviada para o sinal SMH1CIHW
2025-07-09 23:00:31,615 INFO: Sinal SMH1CIHW validado como WIN e notificação enviada
2025-07-09 23:00:31,616 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal SMH1CIHW
2025-07-09 23:00:31,616 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:01:09,511 INFO: 🔔 Novo candle detectado em 2025-07-10 02:01:00 UTC
2025-07-09 23:01:09,512 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:01:09,553 INFO: Buscando candle com filtro: {'epoch': 1752112860}
2025-07-09 23:01:09,557 INFO: Candle não encontrado
2025-07-09 23:01:09,587 INFO: Tendência HMA: FALL (HMA21=2755.12, HMA100=2754.94)
2025-07-09 23:01:09,588 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:01:09,589 INFO: 📈 Análise: EMA9=2755.11, EMA21=2754.98, trend_ema=RISE, trend_final=FALL, RSI=63.65, MACD=0.12/0.07, ATR=0.76, body=0.00, confidence=60
2025-07-09 23:01:09,589 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 23:01:09,589 INFO: Inserindo candle: Candle(2025-07-10 02:01:00, DOJI, O:2755.42, H:2755.42, L:2755.42, C:2755.42)
2025-07-09 23:01:09,592 INFO: Candle inserido com ID: 686f1ee5f37da22923852d8a
2025-07-09 23:01:10,398 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XV529C4Y'}, update: {'$set': {'signal': {'signal_id': 'XV529C4Y', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 1, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 2), 'open_candle_timestamp': 1752112860, 'message_id': 9899, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:01:10,402 INFO: Número de candles atualizados: 1
2025-07-09 23:01:10,402 INFO: ✅ Mensagem enviada ao Telegram (ID: XV529C4Y).
2025-07-09 23:02:09,501 INFO: 🔔 Novo candle detectado em 2025-07-10 02:02:00 UTC
2025-07-09 23:02:09,501 INFO: Buscando candle com signal_id: XV529C4Y
2025-07-09 23:02:09,505 INFO: Candle encontrado para o signal_id: XV529C4Y
2025-07-09 23:02:09,506 INFO: 🔔 Candle 1752112920 é menor ou igual ao entry_time 2025-07-09 23:02:00
2025-07-09 23:03:09,830 INFO: 🔔 Novo candle detectado em 2025-07-10 02:03:00 UTC
2025-07-09 23:03:09,831 INFO: Buscando candle com signal_id: XV529C4Y
2025-07-09 23:03:09,836 INFO: Candle encontrado para o signal_id: XV529C4Y
2025-07-09 23:03:09,837 INFO: 🔔 Candle 1752112980 é maior que o entry_time 2025-07-09 23:02:00
2025-07-09 23:03:09,837 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:03:09,837 INFO: Buscando candle com signal_id: XV529C4Y
2025-07-09 23:03:09,840 INFO: Candle encontrado para o signal_id: XV529C4Y
2025-07-09 23:03:09,841 INFO: 🔄 Candle 1752112860 já existe no banco, atualizando...
2025-07-09 23:03:09,841 INFO: 🔄 Candle 1752112860 não tem gale_items
2025-07-09 23:03:09,841 INFO: Atualizando candle com filtro: {'epoch': 1752112860}, update: {'$set': {'epoch': 1752112860, 'open': 2755.423, 'high': 2755.992, 'low': 2754.497, 'close': 2754.955, 'time': datetime.datetime(2025, 7, 10, 2, 1), 'signal': {'signal_id': 'XV529C4Y', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 1), 'entry_time': datetime.datetime(2025, 7, 9, 23, 2), 'open_candle_timestamp': 1752112860, 'message_id': 9899, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:03:09,845 INFO: Número de candles atualizados: 1
2025-07-09 23:03:09,845 INFO: ✅ Candle 1752112860 atualizado com sucesso
2025-07-09 23:03:09,845 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:03:09,846 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:03:09,846 INFO: Funcao validate_signals_for_candle iniciada para o sinal XV529C4Y
2025-07-09 23:03:09,846 INFO: Buscando candle com signal_id: XV529C4Y
2025-07-09 23:03:09,849 INFO: Candle encontrado para o signal_id: XV529C4Y
2025-07-09 23:03:09,849 INFO: Funcao validate_signal iniciada para o signal XV529C4Y
2025-07-09 23:05:49,989 INFO: === Logging ROOT inicializado ===
2025-07-09 23:05:49,991 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 23:05:49,991 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 23:05:49,991 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 23:05:49,992 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 23:05:49,992 INFO: 🎯 Confiança mínima: 20%
2025-07-09 23:05:49,992 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 23:05:49,995 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 23:05:50,597 INFO: Websocket connected
2025-07-09 23:05:51,000 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 23:05:51,001 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 23:05:51,001 INFO: ✅ Token autorizado às 2025-07-10 02:05:51.001397 UTC
2025-07-09 23:05:51,508 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 23:05:51,508 INFO: Estrutura do primeiro candle: {'close': 2744.096, 'epoch': 1752101160, 'high': 2744.325, 'low': 2743.381, 'open': 2744.08}
2025-07-09 23:05:51,509 INFO: 📥 Histórico inicial recebido às 2025-07-10 02:05:51.509441 UTC. Total de candles: 200
2025-07-09 23:05:51,639 INFO: 🔔 Primeiro candle recebido em 2025-07-10 02:05:42 UTC
2025-07-09 23:06:09,658 INFO: 🔔 Novo candle detectado em 2025-07-10 02:06:00 UTC
2025-07-09 23:06:09,658 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:06:09,691 INFO: Inicializando conexão com o MongoDB.
2025-07-09 23:06:09,715 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 23:06:09,716 INFO: Buscando candle com filtro: {'epoch': 1752113160}
2025-07-09 23:06:09,744 INFO: Candle não encontrado
2025-07-09 23:06:09,775 INFO: Tendência HMA: FALL (HMA21=2751.41, HMA100=2752.97)
2025-07-09 23:06:09,775 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:06:09,775 INFO: 📈 Análise: EMA9=2752.31, EMA21=2753.28, trend_ema=FALL, trend_final=FALL, RSI=35.54, MACD=-1.17/-1.26, ATR=1.59, body=0.00, confidence=40
2025-07-09 23:06:09,776 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 23:06:09,776 INFO: Inserindo candle: Candle(2025-07-10 02:06:00, DOJI, O:2752.22, H:2752.22, L:2752.22, C:2752.22)
2025-07-09 23:06:09,780 INFO: Candle inserido com ID: 686f20118f8352dcee635bcc
2025-07-09 23:06:10,752 INFO: Atualizando candle com filtro: {'signal.signal_id': 'IJJA2HYU'}, update: {'$set': {'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 6, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:06:10,756 INFO: Número de candles atualizados: 1
2025-07-09 23:06:10,756 INFO: ✅ Mensagem enviada ao Telegram (ID: IJJA2HYU).
2025-07-09 23:07:09,660 INFO: 🔔 Novo candle detectado em 2025-07-10 02:07:00 UTC
2025-07-09 23:07:09,661 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:07:09,664 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:07:09,664 INFO: 🔔 Candle 1752113220 é menor ou igual ao entry_time 2025-07-09 23:07:00
2025-07-09 23:08:09,621 INFO: 🔔 Novo candle detectado em 2025-07-10 02:08:00 UTC
2025-07-09 23:08:09,621 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:08:09,625 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:08:09,626 INFO: 🔔 Candle 1752113280 é maior que o entry_time 2025-07-09 23:07:00
2025-07-09 23:08:09,626 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:08:09,626 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:08:09,629 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:08:09,630 INFO: 🔄 Candle 1752113160 já existe no banco, atualizando...
2025-07-09 23:08:09,630 INFO: 🔄 Candle 1752113160 não tem gale_items
2025-07-09 23:08:09,630 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:08:09,633 INFO: Número de candles atualizados: 1
2025-07-09 23:08:09,633 INFO: ✅ Candle 1752113160 atualizado com sucesso
2025-07-09 23:08:09,633 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:08:09,634 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:08:09,634 INFO: Funcao validate_signals_for_candle iniciada para o sinal IJJA2HYU
2025-07-09 23:08:09,634 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:08:09,637 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:08:09,638 INFO: Funcao validate_signal iniciada para o signal IJJA2HYU
2025-07-09 23:08:15,652 INFO: Funcao validate_signal finalizada para o signal IJJA2HYU
2025-07-09 23:08:15,653 INFO: Validando sinal IJJA2HYU sem gale items
2025-07-09 23:08:15,653 INFO: Sinal IJJA2HYU adicionado à fila para G1
2025-07-09 23:08:15,653 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113280, 'open_price': 2752.888, 'high': 2752.888, 'low': 2752.888, 'close_price': 2752.888, 'time': datetime.datetime(2025, 7, 9, 23, 8, 15, 653282), 'result': None}]}}
2025-07-09 23:08:15,656 INFO: Número de candles atualizados: 1
2025-07-09 23:08:15,657 INFO: Candle completo com gales atualizado para IJJA2HYU
2025-07-09 23:08:16,467 INFO: ✅ Resposta de resultado enviada para o sinal IJJA2HYU
2025-07-09 23:08:16,468 INFO: Sinal IJJA2HYU validado como LOSS e notificação enviada
2025-07-09 23:08:16,468 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IJJA2HYU
2025-07-09 23:08:16,469 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:09:09,642 INFO: 🔔 Novo candle detectado em 2025-07-10 02:09:00 UTC
2025-07-09 23:09:09,643 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:09:09,646 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:09:09,646 INFO: 🔔 Candle 1752113340 é maior que o entry_time 2025-07-09 23:07:00
2025-07-09 23:09:09,647 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:09:09,647 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:09:09,650 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:09:09,650 INFO: 🔄 Candle 1752113280 já existe no banco, atualizando...
2025-07-09 23:09:09,651 INFO: 🔄 Atualizando último gale item do candle 1752113280
2025-07-09 23:09:09,651 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113280, 'open_price': 2752.888, 'high': 2753.938, 'low': 2752.454, 'close_price': 2753.769, 'time': datetime.datetime(2025, 7, 9, 23, 8, 15, 653000), 'result': None}]}}
2025-07-09 23:09:09,654 INFO: Número de candles atualizados: 1
2025-07-09 23:09:09,654 INFO: ✅ Candle 1752113160 atualizado com sucesso
2025-07-09 23:09:09,655 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:09:09,655 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:09:09,655 INFO: Funcao validate_signals_for_candle iniciada para o sinal IJJA2HYU
2025-07-09 23:09:09,656 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:09:09,658 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:09:09,658 INFO: Funcao validate_signal iniciada para o signal IJJA2HYU
2025-07-09 23:09:13,989 INFO: Validando sinal IJJA2HYU com gale items
2025-07-09 23:09:13,989 INFO: Gale G1 para o sinal IJJA2HYU resultou em LOSS
2025-07-09 23:09:13,989 INFO: Sinal IJJA2HYU adicionado à fila para G2
2025-07-09 23:09:13,990 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113280, 'open_price': 2752.888, 'high': 2753.938, 'low': 2752.454, 'close_price': 2753.769, 'time': datetime.datetime(2025, 7, 9, 23, 8, 15, 653000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113340, 'open_price': 2753.781, 'high': 2753.781, 'low': 2753.781, 'close_price': 2753.781, 'time': datetime.datetime(2025, 7, 9, 23, 9, 13, 989652), 'result': None}]}}
2025-07-09 23:09:13,993 INFO: Número de candles atualizados: 1
2025-07-09 23:09:13,994 INFO: Candle completo com gales atualizado para IJJA2HYU
2025-07-09 23:09:14,823 INFO: ✅ Resposta de resultado enviada para o sinal IJJA2HYU
2025-07-09 23:09:14,824 INFO: Sinal IJJA2HYU validado como LOSS e notificação enviada
2025-07-09 23:09:14,824 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IJJA2HYU
2025-07-09 23:09:14,824 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:10:09,642 INFO: 🔔 Novo candle detectado em 2025-07-10 02:10:00 UTC
2025-07-09 23:10:09,643 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:10:09,649 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:10:09,650 INFO: 🔔 Candle 1752113400 é maior que o entry_time 2025-07-09 23:07:00
2025-07-09 23:10:09,651 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:10:09,652 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:10:09,655 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:10:09,656 INFO: 🔄 Candle 1752113340 já existe no banco, atualizando...
2025-07-09 23:10:09,656 INFO: 🔄 Atualizando último gale item do candle 1752113340
2025-07-09 23:10:09,656 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113280, 'open_price': 2752.888, 'high': 2753.938, 'low': 2752.454, 'close_price': 2753.769, 'time': datetime.datetime(2025, 7, 9, 23, 8, 15, 653000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113340, 'open_price': 2753.781, 'high': 2754.4, 'low': 2753.403, 'close_price': 2753.403, 'time': datetime.datetime(2025, 7, 9, 23, 9, 13, 989000), 'result': None}]}}
2025-07-09 23:10:09,661 INFO: Número de candles atualizados: 1
2025-07-09 23:10:09,661 INFO: ✅ Candle 1752113160 atualizado com sucesso
2025-07-09 23:10:09,661 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:10:09,661 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:10:09,662 INFO: Funcao validate_signals_for_candle iniciada para o sinal IJJA2HYU
2025-07-09 23:10:09,662 INFO: Buscando candle com signal_id: IJJA2HYU
2025-07-09 23:10:09,665 INFO: Candle encontrado para o signal_id: IJJA2HYU
2025-07-09 23:10:09,666 INFO: Funcao validate_signal iniciada para o signal IJJA2HYU
2025-07-09 23:10:14,245 INFO: Validando sinal IJJA2HYU com gale items
2025-07-09 23:10:14,245 INFO: Atualizando candle com filtro: {'epoch': 1752113160}, update: {'$set': {'epoch': 1752113160, 'open': 2752.217, 'high': 2752.815, 'low': 2751.894, 'close': 2752.689, 'time': datetime.datetime(2025, 7, 10, 2, 6), 'signal': {'signal_id': 'IJJA2HYU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 6), 'entry_time': datetime.datetime(2025, 7, 9, 23, 7), 'open_candle_timestamp': 1752113160, 'message_id': 9900, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113280, 'open_price': 2752.888, 'high': 2753.938, 'low': 2752.454, 'close_price': 2753.769, 'time': datetime.datetime(2025, 7, 9, 23, 8, 15, 653000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113340, 'open_price': 2753.781, 'high': 2754.4, 'low': 2753.403, 'close_price': 2753.403, 'time': datetime.datetime(2025, 7, 9, 23, 9, 13, 989000), 'result': 'WIN'}]}}
2025-07-09 23:10:14,249 INFO: Número de candles atualizados: 1
2025-07-09 23:10:14,250 INFO: Candle completo com gales atualizado para IJJA2HYU
2025-07-09 23:10:15,056 INFO: ✅ Resposta de resultado enviada para o sinal IJJA2HYU
2025-07-09 23:10:15,057 INFO: Sinal IJJA2HYU validado como LOSS e notificação enviada
2025-07-09 23:10:15,057 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IJJA2HYU
2025-07-09 23:10:15,058 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:11:09,646 INFO: 🔔 Novo candle detectado em 2025-07-10 02:11:00 UTC
2025-07-09 23:11:09,647 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:11:09,674 INFO: Buscando candle com filtro: {'epoch': 1752113460}
2025-07-09 23:11:09,678 INFO: Candle não encontrado
2025-07-09 23:11:09,705 INFO: Tendência HMA: FALL (HMA21=2753.64, HMA100=2753.78)
2025-07-09 23:11:09,706 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:11:09,707 INFO: 📈 Análise: EMA9=2753.62, EMA21=2753.68, trend_ema=FALL, trend_final=FALL, RSI=42.57, MACD=-0.05/-0.02, ATR=0.67, body=0.00, confidence=60
2025-07-09 23:11:09,707 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-09 23:11:09,708 INFO: Inserindo candle: Candle(2025-07-10 02:11:00, DOJI, O:2753.48, H:2753.48, L:2753.48, C:2753.48)
2025-07-09 23:11:09,711 INFO: Candle inserido com ID: 686f213d8f8352dcee635bcd
2025-07-09 23:11:10,518 INFO: Atualizando candle com filtro: {'signal.signal_id': 'W48BAWPM'}, update: {'$set': {'signal': {'signal_id': 'W48BAWPM', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 11, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 12), 'open_candle_timestamp': 1752113460, 'message_id': 9904, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:11:10,523 INFO: Número de candles atualizados: 1
2025-07-09 23:11:10,524 INFO: ✅ Mensagem enviada ao Telegram (ID: W48BAWPM).
2025-07-09 23:12:09,664 INFO: 🔔 Novo candle detectado em 2025-07-10 02:12:00 UTC
2025-07-09 23:12:09,664 INFO: Buscando candle com signal_id: W48BAWPM
2025-07-09 23:12:09,667 INFO: Candle encontrado para o signal_id: W48BAWPM
2025-07-09 23:12:09,667 INFO: 🔔 Candle 1752113520 é menor ou igual ao entry_time 2025-07-09 23:12:00
2025-07-09 23:13:09,629 INFO: 🔔 Novo candle detectado em 2025-07-10 02:13:00 UTC
2025-07-09 23:13:09,630 INFO: Buscando candle com signal_id: W48BAWPM
2025-07-09 23:13:09,634 INFO: Candle encontrado para o signal_id: W48BAWPM
2025-07-09 23:13:09,635 INFO: 🔔 Candle 1752113580 é maior que o entry_time 2025-07-09 23:12:00
2025-07-09 23:13:09,635 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:13:09,636 INFO: Buscando candle com signal_id: W48BAWPM
2025-07-09 23:13:09,638 INFO: Candle encontrado para o signal_id: W48BAWPM
2025-07-09 23:13:09,639 INFO: 🔄 Candle 1752113460 já existe no banco, atualizando...
2025-07-09 23:13:09,640 INFO: 🔄 Candle 1752113460 não tem gale_items
2025-07-09 23:13:09,640 INFO: Atualizando candle com filtro: {'epoch': 1752113460}, update: {'$set': {'epoch': 1752113460, 'open': 2753.476, 'high': 2755.024, 'low': 2753.252, 'close': 2754.879, 'time': datetime.datetime(2025, 7, 10, 2, 11), 'signal': {'signal_id': 'W48BAWPM', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 11), 'entry_time': datetime.datetime(2025, 7, 9, 23, 12), 'open_candle_timestamp': 1752113460, 'message_id': 9904, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:13:09,643 INFO: Número de candles atualizados: 1
2025-07-09 23:13:09,644 INFO: ✅ Candle 1752113460 atualizado com sucesso
2025-07-09 23:13:09,644 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:13:09,644 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:13:09,645 INFO: Funcao validate_signals_for_candle iniciada para o sinal W48BAWPM
2025-07-09 23:13:09,645 INFO: Buscando candle com signal_id: W48BAWPM
2025-07-09 23:13:09,648 INFO: Candle encontrado para o signal_id: W48BAWPM
2025-07-09 23:13:09,648 INFO: Funcao validate_signal iniciada para o signal W48BAWPM
2025-07-09 23:13:12,950 INFO: Funcao validate_signal finalizada para o signal W48BAWPM
2025-07-09 23:13:12,951 INFO: Validando sinal W48BAWPM sem gale items
2025-07-09 23:13:12,951 INFO: Sinal W48BAWPM adicionado à fila para G1
2025-07-09 23:13:12,952 INFO: Atualizando candle com filtro: {'epoch': 1752113460}, update: {'$set': {'epoch': 1752113460, 'open': 2753.476, 'high': 2755.024, 'low': 2753.252, 'close': 2754.879, 'time': datetime.datetime(2025, 7, 10, 2, 11), 'signal': {'signal_id': 'W48BAWPM', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 11), 'entry_time': datetime.datetime(2025, 7, 9, 23, 12), 'open_candle_timestamp': 1752113460, 'message_id': 9904, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113580, 'open_price': 2753.39, 'high': 2753.39, 'low': 2753.39, 'close_price': 2753.39, 'time': datetime.datetime(2025, 7, 9, 23, 13, 12, 951034), 'result': None}]}}
2025-07-09 23:13:12,955 INFO: Número de candles atualizados: 1
2025-07-09 23:13:12,955 INFO: Candle completo com gales atualizado para W48BAWPM
2025-07-09 23:13:13,767 INFO: ✅ Resposta de resultado enviada para o sinal W48BAWPM
2025-07-09 23:13:13,768 INFO: Sinal W48BAWPM validado como LOSS e notificação enviada
2025-07-09 23:13:13,769 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal W48BAWPM
2025-07-09 23:13:13,769 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:13:47,710 INFO: === Logging ROOT inicializado ===
2025-07-09 23:13:47,711 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 23:13:47,712 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 23:13:47,712 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 23:13:47,712 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 23:13:47,713 INFO: 🎯 Confiança mínima: 20%
2025-07-09 23:13:47,713 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 23:13:47,715 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 23:13:48,101 INFO: Websocket connected
2025-07-09 23:13:48,394 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 23:13:48,394 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 23:13:48,395 INFO: ✅ Token autorizado às 2025-07-10 02:13:48.395735 UTC
2025-07-09 23:13:48,741 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 23:13:48,742 INFO: Estrutura do primeiro candle: {'close': 2744.821, 'epoch': 1752101640, 'high': 2745.471, 'low': 2744.441, 'open': 2744.927}
2025-07-09 23:13:48,742 INFO: 📥 Histórico inicial recebido às 2025-07-10 02:13:48.742506 UTC. Total de candles: 200
2025-07-09 23:13:49,563 INFO: 🔔 Primeiro candle recebido em 2025-07-10 02:13:40 UTC
2025-07-09 23:14:09,547 INFO: 🔔 Novo candle detectado em 2025-07-10 02:14:00 UTC
2025-07-09 23:14:09,547 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:14:09,581 INFO: Inicializando conexão com o MongoDB.
2025-07-09 23:14:09,605 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 23:14:09,606 INFO: Buscando candle com filtro: {'epoch': 1752113640}
2025-07-09 23:14:09,635 INFO: Candle não encontrado
2025-07-09 23:14:09,662 INFO: Tendência HMA: FALL (HMA21=2752.86, HMA100=2752.49)
2025-07-09 23:14:09,663 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:14:09,663 INFO: 📈 Análise: EMA9=2753.01, EMA21=2753.41, trend_ema=FALL, trend_final=FALL, RSI=42.28, MACD=-0.58/-0.71, ATR=1.11, body=0.00, confidence=20
2025-07-09 23:14:09,664 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:14:09,664 INFO: Inserindo candle: Candle(2025-07-10 02:14:00, DOJI, O:2752.93, H:2752.93, L:2752.93, C:2752.93)
2025-07-09 23:14:09,669 INFO: Candle inserido com ID: 686f21f146ebe18698e12dc4
2025-07-09 23:14:10,562 INFO: Atualizando candle com filtro: {'signal.signal_id': 'A1OA7YU2'}, update: {'$set': {'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 14, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:14:10,567 INFO: Número de candles atualizados: 1
2025-07-09 23:14:10,567 INFO: ✅ Mensagem enviada ao Telegram (ID: A1OA7YU2).
2025-07-09 23:15:09,560 INFO: 🔔 Novo candle detectado em 2025-07-10 02:15:00 UTC
2025-07-09 23:15:09,561 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:15:09,565 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:15:09,565 INFO: 🔔 Candle 1752113700 é menor ou igual ao entry_time 2025-07-09 23:15:00
2025-07-09 23:16:09,578 INFO: 🔔 Novo candle detectado em 2025-07-10 02:16:00 UTC
2025-07-09 23:16:09,578 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:16:09,581 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:16:09,582 INFO: 🔔 Candle 1752113760 é maior que o entry_time 2025-07-09 23:15:00
2025-07-09 23:16:09,582 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:16:09,582 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:16:09,586 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:16:09,586 INFO: 🔄 Candle 1752113640 já existe no banco, atualizando...
2025-07-09 23:16:09,587 INFO: 🔄 Candle 1752113640 não tem gale_items
2025-07-09 23:16:09,587 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:16:09,590 INFO: Número de candles atualizados: 1
2025-07-09 23:16:09,591 INFO: ✅ Candle 1752113640 atualizado com sucesso
2025-07-09 23:16:09,591 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:16:09,591 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:16:09,592 INFO: Funcao validate_signals_for_candle iniciada para o sinal A1OA7YU2
2025-07-09 23:16:09,592 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:16:09,595 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:16:09,595 INFO: Funcao validate_signal iniciada para o signal A1OA7YU2
2025-07-09 23:16:12,968 INFO: Funcao validate_signal finalizada para o signal A1OA7YU2
2025-07-09 23:16:12,969 INFO: Validando sinal A1OA7YU2 sem gale items
2025-07-09 23:16:12,969 INFO: Sinal A1OA7YU2 adicionado à fila para G1
2025-07-09 23:16:12,970 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113760, 'open_price': 2751.869, 'high': 2751.869, 'low': 2751.869, 'close_price': 2751.869, 'time': datetime.datetime(2025, 7, 9, 23, 16, 12, 969330), 'result': None}]}}
2025-07-09 23:16:12,973 INFO: Número de candles atualizados: 1
2025-07-09 23:16:12,973 INFO: Candle completo com gales atualizado para A1OA7YU2
2025-07-09 23:16:13,849 INFO: ✅ Resposta de resultado enviada para o sinal A1OA7YU2
2025-07-09 23:16:13,850 INFO: Sinal A1OA7YU2 validado como LOSS e notificação enviada
2025-07-09 23:16:13,850 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal A1OA7YU2
2025-07-09 23:16:13,850 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:17:09,567 INFO: 🔔 Novo candle detectado em 2025-07-10 02:17:00 UTC
2025-07-09 23:17:09,567 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:17:09,571 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:17:09,571 INFO: 🔔 Candle 1752113820 é maior que o entry_time 2025-07-09 23:15:00
2025-07-09 23:17:09,572 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:17:09,572 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:17:09,579 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:17:09,580 INFO: 🔄 Candle 1752113760 já existe no banco, atualizando...
2025-07-09 23:17:09,580 INFO: 🔄 Atualizando último gale item do candle 1752113760
2025-07-09 23:17:09,581 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113760, 'open_price': 2751.869, 'high': 2751.976, 'low': 2750.633, 'close_price': 2751.577, 'time': datetime.datetime(2025, 7, 9, 23, 16, 12, 969000), 'result': None}]}}
2025-07-09 23:17:09,584 INFO: Número de candles atualizados: 1
2025-07-09 23:17:09,585 INFO: ✅ Candle 1752113640 atualizado com sucesso
2025-07-09 23:17:09,585 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:17:09,586 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:17:09,586 INFO: Funcao validate_signals_for_candle iniciada para o sinal A1OA7YU2
2025-07-09 23:17:09,586 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:17:09,590 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:17:09,590 INFO: Funcao validate_signal iniciada para o signal A1OA7YU2
2025-07-09 23:17:31,641 INFO: Validando sinal A1OA7YU2 com gale items
2025-07-09 23:17:31,641 INFO: Gale G1 para o sinal A1OA7YU2 resultou em LOSS
2025-07-09 23:17:31,642 INFO: Sinal A1OA7YU2 adicionado à fila para G2
2025-07-09 23:17:31,642 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113760, 'open_price': 2751.869, 'high': 2751.976, 'low': 2750.633, 'close_price': 2751.577, 'time': datetime.datetime(2025, 7, 9, 23, 16, 12, 969000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113820, 'open_price': 2751.443, 'high': 2751.443, 'low': 2751.443, 'close_price': 2751.443, 'time': datetime.datetime(2025, 7, 9, 23, 17, 31, 642358), 'result': None}]}}
2025-07-09 23:17:31,645 INFO: Número de candles atualizados: 1
2025-07-09 23:17:31,646 INFO: Candle completo com gales atualizado para A1OA7YU2
2025-07-09 23:17:32,471 INFO: ✅ Resposta de resultado enviada para o sinal A1OA7YU2
2025-07-09 23:17:32,471 INFO: Sinal A1OA7YU2 validado como LOSS e notificação enviada
2025-07-09 23:17:32,471 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal A1OA7YU2
2025-07-09 23:17:32,473 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:18:09,569 INFO: 🔔 Novo candle detectado em 2025-07-10 02:18:00 UTC
2025-07-09 23:18:09,570 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:18:09,575 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:18:09,576 INFO: 🔔 Candle 1752113880 é maior que o entry_time 2025-07-09 23:15:00
2025-07-09 23:18:09,576 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:18:09,576 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:18:09,579 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:18:09,580 INFO: 🔄 Candle 1752113820 já existe no banco, atualizando...
2025-07-09 23:18:09,580 INFO: 🔄 Atualizando último gale item do candle 1752113820
2025-07-09 23:18:09,581 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113760, 'open_price': 2751.869, 'high': 2751.976, 'low': 2750.633, 'close_price': 2751.577, 'time': datetime.datetime(2025, 7, 9, 23, 16, 12, 969000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113820, 'open_price': 2751.443, 'high': 2751.991, 'low': 2750.463, 'close_price': 2750.531, 'time': datetime.datetime(2025, 7, 9, 23, 17, 31, 642000), 'result': None}]}}
2025-07-09 23:18:09,585 INFO: Número de candles atualizados: 1
2025-07-09 23:18:09,585 INFO: ✅ Candle 1752113640 atualizado com sucesso
2025-07-09 23:18:09,585 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:18:09,585 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:18:09,586 INFO: Funcao validate_signals_for_candle iniciada para o sinal A1OA7YU2
2025-07-09 23:18:09,586 INFO: Buscando candle com signal_id: A1OA7YU2
2025-07-09 23:18:09,588 INFO: Candle encontrado para o signal_id: A1OA7YU2
2025-07-09 23:18:09,589 INFO: Funcao validate_signal iniciada para o signal A1OA7YU2
2025-07-09 23:18:54,771 INFO: Validando sinal A1OA7YU2 com gale items
2025-07-09 23:18:54,771 INFO: Gale G2 para o sinal A1OA7YU2 resultou em LOSS
2025-07-09 23:18:54,771 INFO: Atualizando candle com filtro: {'epoch': 1752113640}, update: {'$set': {'epoch': 1752113640, 'open': 2752.928, 'high': 2753.963, 'low': 2752.445, 'close': 2753.794, 'time': datetime.datetime(2025, 7, 10, 2, 14), 'signal': {'signal_id': 'A1OA7YU2', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 14), 'entry_time': datetime.datetime(2025, 7, 9, 23, 15), 'open_candle_timestamp': 1752113640, 'message_id': 9906, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752113760, 'open_price': 2751.869, 'high': 2751.976, 'low': 2750.633, 'close_price': 2751.577, 'time': datetime.datetime(2025, 7, 9, 23, 16, 12, 969000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752113820, 'open_price': 2751.443, 'high': 2751.991, 'low': 2750.463, 'close_price': 2750.531, 'time': datetime.datetime(2025, 7, 9, 23, 17, 31, 642000), 'result': 'LOSS'}]}}
2025-07-09 23:18:54,775 INFO: Número de candles atualizados: 1
2025-07-09 23:18:54,776 INFO: Candle completo com gales atualizado para A1OA7YU2
2025-07-09 23:20:00,989 INFO: ✅ Resposta de resultado enviada para o sinal A1OA7YU2
2025-07-09 23:20:00,990 INFO: Sinal A1OA7YU2 validado como LOSS e notificação enviada
2025-07-09 23:20:00,991 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal A1OA7YU2
2025-07-09 23:20:00,991 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:20:01,030 INFO: 🔔 Novo candle detectado em 2025-07-10 02:19:00 UTC
2025-07-09 23:20:01,030 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:20:01,080 INFO: Buscando candle com filtro: {'epoch': 1752113940}
2025-07-09 23:20:01,082 INFO: Candle não encontrado
2025-07-09 23:20:01,117 INFO: Tendência HMA: FALL (HMA21=2751.55, HMA100=2750.97)
2025-07-09 23:20:01,118 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:20:01,119 INFO: 📈 Análise: EMA9=2751.41, EMA21=2751.30, trend_ema=RISE, trend_final=FALL, RSI=48.01, MACD=0.12/0.14, ATR=1.12, body=0.00, confidence=20
2025-07-09 23:20:01,119 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:20:01,119 INFO: Inserindo candle: Candle(2025-07-10 02:19:00, DOJI, O:2751.18, H:2751.18, L:2751.18, C:2751.18)
2025-07-09 23:20:01,123 INFO: Candle inserido com ID: 686f235146ebe18698e12dc5
2025-07-09 23:20:01,910 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HARLJ0FI'}, update: {'$set': {'signal': {'signal_id': 'HARLJ0FI', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 19, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 20), 'open_candle_timestamp': 1752113940, 'message_id': 9911, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:20:01,916 INFO: Número de candles atualizados: 1
2025-07-09 23:20:01,916 INFO: ✅ Mensagem enviada ao Telegram (ID: HARLJ0FI).
2025-07-09 23:34:53,522 INFO: === Logging ROOT inicializado ===
2025-07-09 23:34:53,523 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 23:34:53,523 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 23:34:53,523 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 23:34:53,523 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 23:34:53,523 INFO: 🎯 Confiança mínima: 20%
2025-07-09 23:34:53,523 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 23:34:53,525 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 23:34:54,058 INFO: Websocket connected
2025-07-09 23:34:54,312 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 23:34:54,312 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 23:34:54,313 INFO: ✅ Token autorizado às 2025-07-10 02:34:54.313749 UTC
2025-07-09 23:34:54,715 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 23:34:54,715 INFO: Estrutura do primeiro candle: {'close': 2749.689, 'epoch': 1752102900, 'high': 2749.728, 'low': 2748.768, 'open': 2749.282}
2025-07-09 23:34:54,715 INFO: 📥 Histórico inicial recebido às 2025-07-10 02:34:54.715983 UTC. Total de candles: 200
2025-07-09 23:34:55,552 INFO: 🔔 Primeiro candle recebido em 2025-07-10 02:34:46 UTC
2025-07-09 23:35:09,613 INFO: 🔔 Novo candle detectado em 2025-07-10 02:35:00 UTC
2025-07-09 23:35:09,613 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:35:09,626 INFO: Inicializando conexão com o MongoDB.
2025-07-09 23:35:09,638 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 23:35:09,639 INFO: Buscando candle com filtro: {'epoch': 1752114900}
2025-07-09 23:35:09,686 INFO: Candle não encontrado
2025-07-09 23:35:09,704 INFO: Tendência HMA: FALL (HMA21=2751.84, HMA100=2751.16)
2025-07-09 23:35:09,704 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:35:09,704 INFO: 📈 Análise: EMA9=2752.26, EMA21=2752.45, trend_ema=FALL, trend_final=FALL, RSI=49.52, MACD=-0.32/-0.43, ATR=1.15, body=0.00, confidence=20
2025-07-09 23:35:09,705 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:35:09,705 INFO: Inserindo candle: Candle(2025-07-10 02:35:00, DOJI, O:2752.56, H:2752.56, L:2752.56, C:2752.56)
2025-07-09 23:35:09,707 INFO: Candle inserido com ID: 686f26dd41e96cfcb6055a93
2025-07-09 23:35:10,580 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NGAD6ZC9'}, update: {'$set': {'signal': {'signal_id': 'NGAD6ZC9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 35, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 36), 'open_candle_timestamp': 1752114900, 'message_id': 9914, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:35:10,583 INFO: Número de candles atualizados: 1
2025-07-09 23:35:10,583 INFO: ✅ Mensagem enviada ao Telegram (ID: NGAD6ZC9).
2025-07-09 23:36:09,556 INFO: 🔔 Novo candle detectado em 2025-07-10 02:36:00 UTC
2025-07-09 23:36:09,556 INFO: Buscando candle com signal_id: NGAD6ZC9
2025-07-09 23:36:09,559 INFO: Candle encontrado para o signal_id: NGAD6ZC9
2025-07-09 23:36:09,560 INFO: 🔔 Candle 1752114960 é menor ou igual ao entry_time 2025-07-09 23:36:00
2025-07-09 23:37:09,552 INFO: 🔔 Novo candle detectado em 2025-07-10 02:37:00 UTC
2025-07-09 23:37:09,552 INFO: Buscando candle com signal_id: NGAD6ZC9
2025-07-09 23:37:09,556 INFO: Candle encontrado para o signal_id: NGAD6ZC9
2025-07-09 23:37:09,556 INFO: 🔔 Candle 1752115020 é maior que o entry_time 2025-07-09 23:36:00
2025-07-09 23:37:09,556 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:37:09,556 INFO: Buscando candle com signal_id: NGAD6ZC9
2025-07-09 23:37:09,558 INFO: Candle encontrado para o signal_id: NGAD6ZC9
2025-07-09 23:37:09,559 INFO: 🔄 Candle 1752114900 já existe no banco, atualizando...
2025-07-09 23:37:09,559 INFO: 🔄 Candle 1752114900 não tem gale_items
2025-07-09 23:37:09,560 INFO: Atualizando candle com filtro: {'epoch': 1752114900}, update: {'$set': {'epoch': 1752114900, 'open': 2752.564, 'high': 2752.603, 'low': 2750.786, 'close': 2750.887, 'time': datetime.datetime(2025, 7, 10, 2, 35), 'signal': {'signal_id': 'NGAD6ZC9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 35), 'entry_time': datetime.datetime(2025, 7, 9, 23, 36), 'open_candle_timestamp': 1752114900, 'message_id': 9914, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:37:09,562 INFO: Número de candles atualizados: 1
2025-07-09 23:37:09,562 INFO: ✅ Candle 1752114900 atualizado com sucesso
2025-07-09 23:37:09,562 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:37:09,562 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:37:09,563 INFO: Funcao validate_signals_for_candle iniciada para o sinal NGAD6ZC9
2025-07-09 23:37:09,563 INFO: Buscando candle com signal_id: NGAD6ZC9
2025-07-09 23:37:09,565 INFO: Candle encontrado para o signal_id: NGAD6ZC9
2025-07-09 23:37:09,566 INFO: Funcao validate_signal iniciada para o signal NGAD6ZC9
2025-07-09 23:37:09,566 INFO: Funcao validate_signal finalizada para o signal NGAD6ZC9
2025-07-09 23:37:09,566 INFO: Validando sinal NGAD6ZC9 sem gale items
2025-07-09 23:37:09,566 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NGAD6ZC9'}, update: {'$set': {'signal': {'signal_id': 'NGAD6ZC9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 35), 'entry_time': datetime.datetime(2025, 7, 9, 23, 36), 'open_candle_timestamp': 1752114900, 'message_id': 9914, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 23:37:09,569 INFO: Número de candles atualizados: 1
2025-07-09 23:37:09,569 INFO: Sinal atualizado no repositório para NGAD6ZC9
2025-07-09 23:37:10,386 INFO: ✅ Resposta de resultado enviada para o sinal NGAD6ZC9
2025-07-09 23:37:10,387 INFO: Sinal NGAD6ZC9 validado como WIN e notificação enviada
2025-07-09 23:37:10,387 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NGAD6ZC9
2025-07-09 23:37:10,387 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:38:09,559 INFO: 🔔 Novo candle detectado em 2025-07-10 02:38:00 UTC
2025-07-09 23:38:09,560 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:38:09,569 INFO: Buscando candle com filtro: {'epoch': 1752115080}
2025-07-09 23:38:09,572 INFO: Candle não encontrado
2025-07-09 23:38:09,588 INFO: Tendência HMA: FALL (HMA21=2751.90, HMA100=2751.63)
2025-07-09 23:38:09,588 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:38:09,589 INFO: 📈 Análise: EMA9=2751.83, EMA21=2751.73, trend_ema=RISE, trend_final=FALL, RSI=54.81, MACD=0.12/0.13, ATR=0.98, body=0.00, confidence=20
2025-07-09 23:38:09,589 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:38:09,589 INFO: Inserindo candle: Candle(2025-07-10 02:38:00, DOJI, O:2751.84, H:2751.84, L:2751.84, C:2751.84)
2025-07-09 23:38:09,592 INFO: Candle inserido com ID: 686f279141e96cfcb6055a94
2025-07-09 23:38:10,387 INFO: Atualizando candle com filtro: {'signal.signal_id': 'OVXUHPVP'}, update: {'$set': {'signal': {'signal_id': 'OVXUHPVP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 38, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 39), 'open_candle_timestamp': 1752115080, 'message_id': 9917, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:38:10,390 INFO: Número de candles atualizados: 1
2025-07-09 23:38:10,391 INFO: ✅ Mensagem enviada ao Telegram (ID: OVXUHPVP).
2025-07-09 23:39:09,554 INFO: 🔔 Novo candle detectado em 2025-07-10 02:39:00 UTC
2025-07-09 23:39:09,554 INFO: Buscando candle com signal_id: OVXUHPVP
2025-07-09 23:39:09,557 INFO: Candle encontrado para o signal_id: OVXUHPVP
2025-07-09 23:39:09,557 INFO: 🔔 Candle 1752115140 é menor ou igual ao entry_time 2025-07-09 23:39:00
2025-07-09 23:40:09,577 INFO: 🔔 Novo candle detectado em 2025-07-10 02:40:00 UTC
2025-07-09 23:40:09,578 INFO: Buscando candle com signal_id: OVXUHPVP
2025-07-09 23:40:09,581 INFO: Candle encontrado para o signal_id: OVXUHPVP
2025-07-09 23:40:09,582 INFO: 🔔 Candle 1752115200 é maior que o entry_time 2025-07-09 23:39:00
2025-07-09 23:40:09,582 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:40:09,582 INFO: Buscando candle com signal_id: OVXUHPVP
2025-07-09 23:40:09,585 INFO: Candle encontrado para o signal_id: OVXUHPVP
2025-07-09 23:40:09,585 INFO: 🔄 Candle 1752115080 já existe no banco, atualizando...
2025-07-09 23:40:09,585 INFO: 🔄 Candle 1752115080 não tem gale_items
2025-07-09 23:40:09,585 INFO: Atualizando candle com filtro: {'epoch': 1752115080}, update: {'$set': {'epoch': 1752115080, 'open': 2751.84, 'high': 2751.84, 'low': 2750.173, 'close': 2750.173, 'time': datetime.datetime(2025, 7, 10, 2, 38), 'signal': {'signal_id': 'OVXUHPVP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 38), 'entry_time': datetime.datetime(2025, 7, 9, 23, 39), 'open_candle_timestamp': 1752115080, 'message_id': 9917, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:40:09,588 INFO: Número de candles atualizados: 1
2025-07-09 23:40:09,588 INFO: ✅ Candle 1752115080 atualizado com sucesso
2025-07-09 23:40:09,589 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:40:09,589 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:40:09,589 INFO: Funcao validate_signals_for_candle iniciada para o sinal OVXUHPVP
2025-07-09 23:40:09,589 INFO: Buscando candle com signal_id: OVXUHPVP
2025-07-09 23:40:09,591 INFO: Candle encontrado para o signal_id: OVXUHPVP
2025-07-09 23:40:09,592 INFO: Funcao validate_signal iniciada para o signal OVXUHPVP
2025-07-09 23:40:09,592 INFO: Funcao validate_signal finalizada para o signal OVXUHPVP
2025-07-09 23:40:09,592 INFO: Validando sinal OVXUHPVP sem gale items
2025-07-09 23:40:09,592 INFO: Atualizando candle com filtro: {'signal.signal_id': 'OVXUHPVP'}, update: {'$set': {'signal': {'signal_id': 'OVXUHPVP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 38), 'entry_time': datetime.datetime(2025, 7, 9, 23, 39), 'open_candle_timestamp': 1752115080, 'message_id': 9917, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 23:40:09,594 INFO: Número de candles atualizados: 1
2025-07-09 23:40:09,595 INFO: Sinal atualizado no repositório para OVXUHPVP
2025-07-09 23:40:10,404 INFO: ✅ Resposta de resultado enviada para o sinal OVXUHPVP
2025-07-09 23:40:10,405 INFO: Sinal OVXUHPVP validado como WIN e notificação enviada
2025-07-09 23:40:10,405 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal OVXUHPVP
2025-07-09 23:40:10,406 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:41:09,554 INFO: 🔔 Novo candle detectado em 2025-07-10 02:41:00 UTC
2025-07-09 23:41:09,555 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:41:09,564 INFO: Buscando candle com filtro: {'epoch': 1752115260}
2025-07-09 23:41:09,567 INFO: Candle não encontrado
2025-07-09 23:41:09,583 INFO: Tendência HMA: FALL (HMA21=2752.41, HMA100=2752.12)
2025-07-09 23:41:09,584 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:41:09,584 INFO: 📈 Análise: EMA9=2752.29, EMA21=2752.07, trend_ema=RISE, trend_final=FALL, RSI=62.98, MACD=0.27/0.30, ATR=1.22, body=0.00, confidence=20
2025-07-09 23:41:09,585 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:41:09,585 INFO: Inserindo candle: Candle(2025-07-10 02:41:00, DOJI, O:2752.40, H:2752.40, L:2752.40, C:2752.40)
2025-07-09 23:41:09,588 INFO: Candle inserido com ID: 686f284541e96cfcb6055a95
2025-07-09 23:41:10,405 INFO: Atualizando candle com filtro: {'signal.signal_id': 'GX678PIC'}, update: {'$set': {'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 41, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:41:10,409 INFO: Número de candles atualizados: 1
2025-07-09 23:41:10,410 INFO: ✅ Mensagem enviada ao Telegram (ID: GX678PIC).
2025-07-09 23:42:09,559 INFO: 🔔 Novo candle detectado em 2025-07-10 02:42:00 UTC
2025-07-09 23:42:09,559 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:42:09,562 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:42:09,562 INFO: 🔔 Candle 1752115320 é menor ou igual ao entry_time 2025-07-09 23:42:00
2025-07-09 23:43:09,577 INFO: 🔔 Novo candle detectado em 2025-07-10 02:43:00 UTC
2025-07-09 23:43:09,578 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:43:09,580 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:43:09,581 INFO: 🔔 Candle 1752115380 é maior que o entry_time 2025-07-09 23:42:00
2025-07-09 23:43:09,581 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:43:09,582 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:43:09,584 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:43:09,585 INFO: 🔄 Candle 1752115260 já existe no banco, atualizando...
2025-07-09 23:43:09,585 INFO: 🔄 Candle 1752115260 não tem gale_items
2025-07-09 23:43:09,585 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:43:09,588 INFO: Número de candles atualizados: 1
2025-07-09 23:43:09,588 INFO: ✅ Candle 1752115260 atualizado com sucesso
2025-07-09 23:43:09,588 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:43:09,588 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:43:09,589 INFO: Funcao validate_signals_for_candle iniciada para o sinal GX678PIC
2025-07-09 23:43:09,589 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:43:09,592 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:43:09,592 INFO: Funcao validate_signal iniciada para o signal GX678PIC
2025-07-09 23:43:09,592 INFO: Funcao validate_signal finalizada para o signal GX678PIC
2025-07-09 23:43:09,592 INFO: Validando sinal GX678PIC sem gale items
2025-07-09 23:43:09,593 INFO: Sinal GX678PIC adicionado à fila para G1
2025-07-09 23:43:09,593 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115380, 'open_price': 2755.008, 'high': 2755.008, 'low': 2755.008, 'close_price': 2755.008, 'time': datetime.datetime(2025, 7, 9, 23, 43, 9, 592807), 'result': None}]}}
2025-07-09 23:43:09,595 INFO: Número de candles atualizados: 1
2025-07-09 23:43:09,595 INFO: Candle completo com gales atualizado para GX678PIC
2025-07-09 23:43:10,476 INFO: ✅ Resposta de resultado enviada para o sinal GX678PIC
2025-07-09 23:43:10,477 INFO: Sinal GX678PIC validado como LOSS e notificação enviada
2025-07-09 23:43:10,478 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal GX678PIC
2025-07-09 23:43:10,478 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:44:09,559 INFO: 🔔 Novo candle detectado em 2025-07-10 02:44:00 UTC
2025-07-09 23:44:09,559 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:44:09,562 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:44:09,563 INFO: 🔔 Candle 1752115440 é maior que o entry_time 2025-07-09 23:42:00
2025-07-09 23:44:09,563 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:44:09,564 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:44:09,565 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:44:09,566 INFO: 🔄 Candle 1752115380 já existe no banco, atualizando...
2025-07-09 23:44:09,566 INFO: 🔄 Atualizando último gale item do candle 1752115380
2025-07-09 23:44:09,567 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115380, 'open_price': 2755.008, 'high': 2757.368, 'low': 2754.552, 'close_price': 2756.962, 'time': datetime.datetime(2025, 7, 9, 23, 43, 9, 592000), 'result': None}]}}
2025-07-09 23:44:09,569 INFO: Número de candles atualizados: 1
2025-07-09 23:44:09,569 INFO: ✅ Candle 1752115260 atualizado com sucesso
2025-07-09 23:44:09,569 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:44:09,569 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:44:09,570 INFO: Funcao validate_signals_for_candle iniciada para o sinal GX678PIC
2025-07-09 23:44:09,570 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:44:09,572 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:44:09,572 INFO: Funcao validate_signal iniciada para o signal GX678PIC
2025-07-09 23:44:09,572 INFO: Validando sinal GX678PIC com gale items
2025-07-09 23:44:09,573 INFO: Gale G1 para o sinal GX678PIC resultou em LOSS
2025-07-09 23:44:09,573 INFO: Sinal GX678PIC adicionado à fila para G2
2025-07-09 23:44:09,573 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115380, 'open_price': 2755.008, 'high': 2757.368, 'low': 2754.552, 'close_price': 2756.962, 'time': datetime.datetime(2025, 7, 9, 23, 43, 9, 592000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752115440, 'open_price': 2757.131, 'high': 2757.131, 'low': 2757.131, 'close_price': 2757.131, 'time': datetime.datetime(2025, 7, 9, 23, 44, 9, 573061), 'result': None}]}}
2025-07-09 23:44:09,575 INFO: Número de candles atualizados: 1
2025-07-09 23:44:09,575 INFO: Candle completo com gales atualizado para GX678PIC
2025-07-09 23:44:10,400 INFO: ✅ Resposta de resultado enviada para o sinal GX678PIC
2025-07-09 23:44:10,401 INFO: Sinal GX678PIC validado como LOSS e notificação enviada
2025-07-09 23:44:10,401 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal GX678PIC
2025-07-09 23:44:10,401 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:45:09,564 INFO: 🔔 Novo candle detectado em 2025-07-10 02:45:00 UTC
2025-07-09 23:45:09,564 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:45:09,567 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:45:09,568 INFO: 🔔 Candle 1752115500 é maior que o entry_time 2025-07-09 23:42:00
2025-07-09 23:45:09,568 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:45:09,568 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:45:09,570 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:45:09,571 INFO: 🔄 Candle 1752115440 já existe no banco, atualizando...
2025-07-09 23:45:09,571 INFO: 🔄 Atualizando último gale item do candle 1752115440
2025-07-09 23:45:09,571 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115380, 'open_price': 2755.008, 'high': 2757.368, 'low': 2754.552, 'close_price': 2756.962, 'time': datetime.datetime(2025, 7, 9, 23, 43, 9, 592000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752115440, 'open_price': 2757.131, 'high': 2757.498, 'low': 2756.191, 'close_price': 2756.191, 'time': datetime.datetime(2025, 7, 9, 23, 44, 9, 573000), 'result': None}]}}
2025-07-09 23:45:09,573 INFO: Número de candles atualizados: 1
2025-07-09 23:45:09,573 INFO: ✅ Candle 1752115260 atualizado com sucesso
2025-07-09 23:45:09,573 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:45:09,573 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:45:09,573 INFO: Funcao validate_signals_for_candle iniciada para o sinal GX678PIC
2025-07-09 23:45:09,574 INFO: Buscando candle com signal_id: GX678PIC
2025-07-09 23:45:09,575 INFO: Candle encontrado para o signal_id: GX678PIC
2025-07-09 23:45:09,576 INFO: Funcao validate_signal iniciada para o signal GX678PIC
2025-07-09 23:45:09,576 INFO: Validando sinal GX678PIC com gale items
2025-07-09 23:45:09,577 INFO: Atualizando candle com filtro: {'epoch': 1752115260}, update: {'$set': {'epoch': 1752115260, 'open': 2752.402, 'high': 2754.434, 'low': 2752.28, 'close': 2754.434, 'time': datetime.datetime(2025, 7, 10, 2, 41), 'signal': {'signal_id': 'GX678PIC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 41), 'entry_time': datetime.datetime(2025, 7, 9, 23, 42), 'open_candle_timestamp': 1752115260, 'message_id': 9919, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115380, 'open_price': 2755.008, 'high': 2757.368, 'low': 2754.552, 'close_price': 2756.962, 'time': datetime.datetime(2025, 7, 9, 23, 43, 9, 592000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752115440, 'open_price': 2757.131, 'high': 2757.498, 'low': 2756.191, 'close_price': 2756.191, 'time': datetime.datetime(2025, 7, 9, 23, 44, 9, 573000), 'result': 'WIN'}]}}
2025-07-09 23:45:09,579 INFO: Número de candles atualizados: 1
2025-07-09 23:45:09,579 INFO: Candle completo com gales atualizado para GX678PIC
2025-07-09 23:45:10,385 INFO: ✅ Resposta de resultado enviada para o sinal GX678PIC
2025-07-09 23:45:10,386 INFO: Sinal GX678PIC validado como LOSS e notificação enviada
2025-07-09 23:45:10,386 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal GX678PIC
2025-07-09 23:45:10,386 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:45:41,943 INFO: === Logging ROOT inicializado ===
2025-07-09 23:45:41,945 INFO: Configurações carregadas: MAX_CANDLES=200, GRANULARITY=60, BOLLINGER_THRESHOLD=0.001, MIN_CONFIDENCE_TO_SEND=20, SIGNAL_COOLDOWN=120, VALIDATE_SIGNAL_COOLDOWN=70
2025-07-09 23:45:41,945 INFO: 🚀 Iniciando aplicação Deriv Signal...
2025-07-09 23:45:41,945 INFO: 🔧 Configurações: MAX_CANDLES=200, GRANULARITY=60s
2025-07-09 23:45:41,945 INFO: ⏱️ Cooldowns: SIGNAL=120s, VALIDATE=70s
2025-07-09 23:45:41,945 INFO: 🎯 Confiança mínima: 20%
2025-07-09 23:45:41,945 INFO: 🔗 Conectando ao WebSocket Deriv...
2025-07-09 23:45:41,946 INFO: ✅ Aplicação iniciada com sucesso! Pressione Ctrl+C para encerrar.
2025-07-09 23:45:42,316 INFO: Websocket connected
2025-07-09 23:45:42,631 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-09 23:45:42,632 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-09 23:45:42,632 INFO: ✅ Token autorizado às 2025-07-10 02:45:42.632738 UTC
2025-07-09 23:45:42,985 INFO: Recebendo histórico inicial com 200 candles
2025-07-09 23:45:42,987 INFO: Estrutura do primeiro candle: {'close': 2751.515, 'epoch': 1752103560, 'high': 2752.905, 'low': 2751.515, 'open': 2752.504}
2025-07-09 23:45:42,987 INFO: 📥 Histórico inicial recebido às 2025-07-10 02:45:42.987011 UTC. Total de candles: 200
2025-07-09 23:45:43,565 INFO: 🔔 Primeiro candle recebido em 2025-07-10 02:45:34 UTC
2025-07-09 23:46:09,574 INFO: 🔔 Novo candle detectado em 2025-07-10 02:46:00 UTC
2025-07-09 23:46:09,574 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:46:09,587 INFO: Inicializando conexão com o MongoDB.
2025-07-09 23:46:09,599 INFO: Conexão com o MongoDB estabelecida.
2025-07-09 23:46:09,599 INFO: Buscando candle com filtro: {'epoch': 1752115560}
2025-07-09 23:46:09,637 INFO: Candle não encontrado
2025-07-09 23:46:09,653 INFO: Tendência HMA: FALL (HMA21=2756.31, HMA100=2754.20)
2025-07-09 23:46:09,653 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:46:09,654 INFO: 📈 Análise: EMA9=2756.21, EMA21=2755.57, trend_ema=RISE, trend_final=FALL, RSI=60.29, MACD=0.74/0.80, ATR=0.92, body=0.00, confidence=40
2025-07-09 23:46:09,654 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-09 23:46:09,654 INFO: Inserindo candle: Candle(2025-07-10 02:46:00, DOJI, O:2756.38, H:2756.38, L:2756.38, C:2756.38)
2025-07-09 23:46:09,657 INFO: Candle inserido com ID: 686f29711d9c27c6b2f10c01
2025-07-09 23:46:10,569 INFO: Atualizando candle com filtro: {'signal.signal_id': 'PWCU9WWB'}, update: {'$set': {'signal': {'signal_id': 'PWCU9WWB', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 46, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 47), 'open_candle_timestamp': 1752115560, 'message_id': 9923, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:46:10,571 INFO: Número de candles atualizados: 1
2025-07-09 23:46:10,573 INFO: ✅ Mensagem enviada ao Telegram (ID: PWCU9WWB).
2025-07-09 23:47:09,566 INFO: 🔔 Novo candle detectado em 2025-07-10 02:47:00 UTC
2025-07-09 23:47:09,567 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:47:09,571 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:47:09,572 INFO: 🔔 Candle 1752115620 é menor ou igual ao entry_time 2025-07-09 23:47:00
2025-07-09 23:48:09,585 INFO: 🔔 Novo candle detectado em 2025-07-10 02:48:00 UTC
2025-07-09 23:48:09,585 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:48:09,588 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:48:09,589 INFO: 🔔 Candle 1752115680 é maior que o entry_time 2025-07-09 23:47:00
2025-07-09 23:48:09,589 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:48:09,589 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:48:09,592 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:48:09,592 INFO: 🔄 Candle 1752115560 já existe no banco, atualizando...
2025-07-09 23:48:09,592 INFO: 🔄 Candle 1752115560 não tem gale_items
2025-07-09 23:48:09,593 INFO: Atualizando candle com filtro: {'epoch': 1752115560}, update: {'$set': {'epoch': 1752115560, 'open': 2756.383, 'high': 2757.684, 'low': 2756.268, 'close': 2757.005, 'time': datetime.datetime(2025, 7, 10, 2, 46), 'signal': {'signal_id': 'PWCU9WWB', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 46), 'entry_time': datetime.datetime(2025, 7, 9, 23, 47), 'open_candle_timestamp': 1752115560, 'message_id': 9923, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:48:09,595 INFO: Número de candles atualizados: 1
2025-07-09 23:48:09,595 INFO: ✅ Candle 1752115560 atualizado com sucesso
2025-07-09 23:48:09,595 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:48:09,596 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:48:09,596 INFO: Funcao validate_signals_for_candle iniciada para o sinal PWCU9WWB
2025-07-09 23:48:09,596 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:48:09,599 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:48:09,599 INFO: Funcao validate_signal iniciada para o signal PWCU9WWB
2025-07-09 23:48:09,599 INFO: Funcao validate_signal finalizada para o signal PWCU9WWB
2025-07-09 23:48:09,599 INFO: Validando sinal PWCU9WWB sem gale items
2025-07-09 23:48:09,600 INFO: Sinal PWCU9WWB adicionado à fila para G1
2025-07-09 23:48:09,600 INFO: Atualizando candle com filtro: {'epoch': 1752115560}, update: {'$set': {'epoch': 1752115560, 'open': 2756.383, 'high': 2757.684, 'low': 2756.268, 'close': 2757.005, 'time': datetime.datetime(2025, 7, 10, 2, 46), 'signal': {'signal_id': 'PWCU9WWB', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 46), 'entry_time': datetime.datetime(2025, 7, 9, 23, 47), 'open_candle_timestamp': 1752115560, 'message_id': 9923, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115680, 'open_price': 2756.802, 'high': 2756.802, 'low': 2756.802, 'close_price': 2756.802, 'time': datetime.datetime(2025, 7, 9, 23, 48, 9, 600189), 'result': None}]}}
2025-07-09 23:48:09,602 INFO: Número de candles atualizados: 1
2025-07-09 23:48:09,602 INFO: Candle completo com gales atualizado para PWCU9WWB
2025-07-09 23:48:10,436 INFO: ✅ Resposta de resultado enviada para o sinal PWCU9WWB
2025-07-09 23:48:10,437 INFO: Sinal PWCU9WWB validado como LOSS e notificação enviada
2025-07-09 23:48:10,437 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PWCU9WWB
2025-07-09 23:48:10,437 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:49:09,589 INFO: 🔔 Novo candle detectado em 2025-07-10 02:49:00 UTC
2025-07-09 23:49:09,590 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:49:09,592 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:49:09,593 INFO: 🔔 Candle 1752115740 é maior que o entry_time 2025-07-09 23:47:00
2025-07-09 23:49:09,593 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:49:09,594 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:49:09,596 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:49:09,596 INFO: 🔄 Candle 1752115680 já existe no banco, atualizando...
2025-07-09 23:49:09,597 INFO: 🔄 Atualizando último gale item do candle 1752115680
2025-07-09 23:49:09,597 INFO: Atualizando candle com filtro: {'epoch': 1752115560}, update: {'$set': {'epoch': 1752115560, 'open': 2756.383, 'high': 2757.684, 'low': 2756.268, 'close': 2757.005, 'time': datetime.datetime(2025, 7, 10, 2, 46), 'signal': {'signal_id': 'PWCU9WWB', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 46), 'entry_time': datetime.datetime(2025, 7, 9, 23, 47), 'open_candle_timestamp': 1752115560, 'message_id': 9923, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115680, 'open_price': 2756.802, 'high': 2756.88, 'low': 2755.269, 'close_price': 2755.412, 'time': datetime.datetime(2025, 7, 9, 23, 48, 9, 600000), 'result': None}]}}
2025-07-09 23:49:09,599 INFO: Número de candles atualizados: 1
2025-07-09 23:49:09,600 INFO: ✅ Candle 1752115560 atualizado com sucesso
2025-07-09 23:49:09,600 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:49:09,600 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:49:09,600 INFO: Funcao validate_signals_for_candle iniciada para o sinal PWCU9WWB
2025-07-09 23:49:09,600 INFO: Buscando candle com signal_id: PWCU9WWB
2025-07-09 23:49:09,603 INFO: Candle encontrado para o signal_id: PWCU9WWB
2025-07-09 23:49:09,603 INFO: Funcao validate_signal iniciada para o signal PWCU9WWB
2025-07-09 23:49:09,603 INFO: Validando sinal PWCU9WWB com gale items
2025-07-09 23:49:09,604 INFO: Atualizando candle com filtro: {'epoch': 1752115560}, update: {'$set': {'epoch': 1752115560, 'open': 2756.383, 'high': 2757.684, 'low': 2756.268, 'close': 2757.005, 'time': datetime.datetime(2025, 7, 10, 2, 46), 'signal': {'signal_id': 'PWCU9WWB', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 46), 'entry_time': datetime.datetime(2025, 7, 9, 23, 47), 'open_candle_timestamp': 1752115560, 'message_id': 9923, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752115680, 'open_price': 2756.802, 'high': 2756.88, 'low': 2755.269, 'close_price': 2755.412, 'time': datetime.datetime(2025, 7, 9, 23, 48, 9, 600000), 'result': 'WIN'}]}}
2025-07-09 23:49:09,606 INFO: Número de candles atualizados: 1
2025-07-09 23:49:09,606 INFO: Candle completo com gales atualizado para PWCU9WWB
2025-07-09 23:49:10,404 INFO: ✅ Resposta de resultado enviada para o sinal PWCU9WWB
2025-07-09 23:49:10,405 INFO: Sinal PWCU9WWB validado como LOSS e notificação enviada
2025-07-09 23:49:10,406 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PWCU9WWB
2025-07-09 23:49:10,406 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:50:09,580 INFO: 🔔 Novo candle detectado em 2025-07-10 02:50:00 UTC
2025-07-09 23:50:09,581 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:50:09,590 INFO: Buscando candle com filtro: {'epoch': 1752115800}
2025-07-09 23:50:09,592 INFO: Candle não encontrado
2025-07-09 23:50:09,608 INFO: Tendência HMA: FALL (HMA21=2756.48, HMA100=2755.93)
2025-07-09 23:50:09,609 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:50:09,609 INFO: 📈 Análise: EMA9=2756.39, EMA21=2756.32, trend_ema=RISE, trend_final=FALL, RSI=46.70, MACD=0.09/0.11, ATR=1.02, body=0.00, confidence=20
2025-07-09 23:50:09,609 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:50:09,610 INFO: Inserindo candle: Candle(2025-07-10 02:50:00, DOJI, O:2756.17, H:2756.17, L:2756.17, C:2756.17)
2025-07-09 23:50:09,613 INFO: Candle inserido com ID: 686f2a611d9c27c6b2f10c02
2025-07-09 23:50:10,470 INFO: Atualizando candle com filtro: {'signal.signal_id': 'H5DA67FG'}, update: {'$set': {'signal': {'signal_id': 'H5DA67FG', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 50, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 51), 'open_candle_timestamp': 1752115800, 'message_id': 9926, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:50:10,473 INFO: Número de candles atualizados: 1
2025-07-09 23:50:10,474 INFO: ✅ Mensagem enviada ao Telegram (ID: H5DA67FG).
2025-07-09 23:51:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 02:51:00 UTC
2025-07-09 23:51:09,584 INFO: Buscando candle com signal_id: H5DA67FG
2025-07-09 23:51:09,587 INFO: Candle encontrado para o signal_id: H5DA67FG
2025-07-09 23:51:09,587 INFO: 🔔 Candle 1752115860 é menor ou igual ao entry_time 2025-07-09 23:51:00
2025-07-09 23:52:09,600 INFO: 🔔 Novo candle detectado em 2025-07-10 02:52:00 UTC
2025-07-09 23:52:09,600 INFO: Buscando candle com signal_id: H5DA67FG
2025-07-09 23:52:09,604 INFO: Candle encontrado para o signal_id: H5DA67FG
2025-07-09 23:52:09,604 INFO: 🔔 Candle 1752115920 é maior que o entry_time 2025-07-09 23:51:00
2025-07-09 23:52:09,604 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:52:09,604 INFO: Buscando candle com signal_id: H5DA67FG
2025-07-09 23:52:09,606 INFO: Candle encontrado para o signal_id: H5DA67FG
2025-07-09 23:52:09,607 INFO: 🔄 Candle 1752115800 já existe no banco, atualizando...
2025-07-09 23:52:09,607 INFO: 🔄 Candle 1752115800 não tem gale_items
2025-07-09 23:52:09,607 INFO: Atualizando candle com filtro: {'epoch': 1752115800}, update: {'$set': {'epoch': 1752115800, 'open': 2756.17, 'high': 2756.899, 'low': 2755.981, 'close': 2755.981, 'time': datetime.datetime(2025, 7, 10, 2, 50), 'signal': {'signal_id': 'H5DA67FG', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 50), 'entry_time': datetime.datetime(2025, 7, 9, 23, 51), 'open_candle_timestamp': 1752115800, 'message_id': 9926, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:52:09,610 INFO: Número de candles atualizados: 1
2025-07-09 23:52:09,610 INFO: ✅ Candle 1752115800 atualizado com sucesso
2025-07-09 23:52:09,611 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:52:09,611 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:52:09,611 INFO: Funcao validate_signals_for_candle iniciada para o sinal H5DA67FG
2025-07-09 23:52:09,611 INFO: Buscando candle com signal_id: H5DA67FG
2025-07-09 23:52:09,613 INFO: Candle encontrado para o signal_id: H5DA67FG
2025-07-09 23:52:09,614 INFO: Funcao validate_signal iniciada para o signal H5DA67FG
2025-07-09 23:52:09,614 INFO: Funcao validate_signal finalizada para o signal H5DA67FG
2025-07-09 23:52:09,614 INFO: Validando sinal H5DA67FG sem gale items
2025-07-09 23:52:09,614 INFO: Atualizando candle com filtro: {'signal.signal_id': 'H5DA67FG'}, update: {'$set': {'signal': {'signal_id': 'H5DA67FG', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 50), 'entry_time': datetime.datetime(2025, 7, 9, 23, 51), 'open_candle_timestamp': 1752115800, 'message_id': 9926, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 23:52:09,618 INFO: Número de candles atualizados: 1
2025-07-09 23:52:09,618 INFO: Sinal atualizado no repositório para H5DA67FG
2025-07-09 23:52:10,411 INFO: ✅ Resposta de resultado enviada para o sinal H5DA67FG
2025-07-09 23:52:10,411 INFO: Sinal H5DA67FG validado como WIN e notificação enviada
2025-07-09 23:52:10,411 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal H5DA67FG
2025-07-09 23:52:10,411 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:53:09,584 INFO: 🔔 Novo candle detectado em 2025-07-10 02:53:00 UTC
2025-07-09 23:53:09,584 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:53:09,594 INFO: Buscando candle com filtro: {'epoch': 1752115980}
2025-07-09 23:53:09,597 INFO: Candle não encontrado
2025-07-09 23:53:09,613 INFO: Tendência HMA: FALL (HMA21=2754.62, HMA100=2754.47)
2025-07-09 23:53:09,613 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:53:09,614 INFO: 📈 Análise: EMA9=2754.66, EMA21=2754.76, trend_ema=FALL, trend_final=FALL, RSI=48.50, MACD=-0.13/-0.15, ATR=0.70, body=0.00, confidence=20
2025-07-09 23:53:09,614 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-09 23:53:09,614 INFO: Inserindo candle: Candle(2025-07-10 02:53:00, DOJI, O:2754.76, H:2754.76, L:2754.76, C:2754.76)
2025-07-09 23:53:09,617 INFO: Candle inserido com ID: 686f2b151d9c27c6b2f10c03
2025-07-09 23:53:10,441 INFO: Atualizando candle com filtro: {'signal.signal_id': 'R6679ISN'}, update: {'$set': {'signal': {'signal_id': 'R6679ISN', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 53, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 54), 'open_candle_timestamp': 1752115980, 'message_id': 9928, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:53:10,444 INFO: Número de candles atualizados: 1
2025-07-09 23:53:10,445 INFO: ✅ Mensagem enviada ao Telegram (ID: R6679ISN).
2025-07-09 23:54:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 02:54:00 UTC
2025-07-09 23:54:09,583 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:54:09,587 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:54:09,587 INFO: 🔔 Candle 1752116040 é menor ou igual ao entry_time 2025-07-09 23:54:00
2025-07-09 23:55:09,598 INFO: 🔔 Novo candle detectado em 2025-07-10 02:55:00 UTC
2025-07-09 23:55:09,598 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:55:09,601 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:55:09,601 INFO: 🔔 Candle 1752116100 é maior que o entry_time 2025-07-09 23:54:00
2025-07-09 23:55:09,601 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:55:09,601 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:55:09,604 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:55:09,605 INFO: 🔄 Candle 1752115980 já existe no banco, atualizando...
2025-07-09 23:55:09,605 INFO: 🔄 Candle 1752115980 não tem gale_items
2025-07-09 23:55:09,605 INFO: Atualizando candle com filtro: {'epoch': 1752115980}, update: {'$set': {'epoch': 1752115980, 'open': 2754.762, 'high': 2755.991, 'low': 2754.676, 'close': 2754.861, 'time': datetime.datetime(2025, 7, 10, 2, 53), 'signal': {'signal_id': 'R6679ISN', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 53), 'entry_time': datetime.datetime(2025, 7, 9, 23, 54), 'open_candle_timestamp': 1752115980, 'message_id': 9928, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:55:09,608 INFO: Número de candles atualizados: 1
2025-07-09 23:55:09,608 INFO: ✅ Candle 1752115980 atualizado com sucesso
2025-07-09 23:55:09,609 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:55:09,609 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:55:09,609 INFO: Funcao validate_signals_for_candle iniciada para o sinal R6679ISN
2025-07-09 23:55:09,609 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:55:09,612 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:55:09,612 INFO: Funcao validate_signal iniciada para o signal R6679ISN
2025-07-09 23:55:09,613 INFO: Funcao validate_signal finalizada para o signal R6679ISN
2025-07-09 23:55:09,613 INFO: Validando sinal R6679ISN sem gale items
2025-07-09 23:55:09,613 INFO: Sinal R6679ISN adicionado à fila para G1
2025-07-09 23:55:09,613 INFO: Atualizando candle com filtro: {'epoch': 1752115980}, update: {'$set': {'epoch': 1752115980, 'open': 2754.762, 'high': 2755.991, 'low': 2754.676, 'close': 2754.861, 'time': datetime.datetime(2025, 7, 10, 2, 53), 'signal': {'signal_id': 'R6679ISN', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 53), 'entry_time': datetime.datetime(2025, 7, 9, 23, 54), 'open_candle_timestamp': 1752115980, 'message_id': 9928, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116100, 'open_price': 2753.617, 'high': 2753.617, 'low': 2753.617, 'close_price': 2753.617, 'time': datetime.datetime(2025, 7, 9, 23, 55, 9, 613627), 'result': None}]}}
2025-07-09 23:55:09,616 INFO: Número de candles atualizados: 1
2025-07-09 23:55:09,616 INFO: Candle completo com gales atualizado para R6679ISN
2025-07-09 23:55:10,452 INFO: ✅ Resposta de resultado enviada para o sinal R6679ISN
2025-07-09 23:55:10,453 INFO: Sinal R6679ISN validado como LOSS e notificação enviada
2025-07-09 23:55:10,453 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal R6679ISN
2025-07-09 23:55:10,453 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-09 23:56:09,588 INFO: 🔔 Novo candle detectado em 2025-07-10 02:56:00 UTC
2025-07-09 23:56:09,589 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:56:09,592 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:56:09,592 INFO: 🔔 Candle 1752116160 é maior que o entry_time 2025-07-09 23:54:00
2025-07-09 23:56:09,593 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:56:09,593 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:56:09,595 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:56:09,595 INFO: 🔄 Candle 1752116100 já existe no banco, atualizando...
2025-07-09 23:56:09,595 INFO: 🔄 Atualizando último gale item do candle 1752116100
2025-07-09 23:56:09,596 INFO: Atualizando candle com filtro: {'epoch': 1752115980}, update: {'$set': {'epoch': 1752115980, 'open': 2754.762, 'high': 2755.991, 'low': 2754.676, 'close': 2754.861, 'time': datetime.datetime(2025, 7, 10, 2, 53), 'signal': {'signal_id': 'R6679ISN', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 53), 'entry_time': datetime.datetime(2025, 7, 9, 23, 54), 'open_candle_timestamp': 1752115980, 'message_id': 9928, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116100, 'open_price': 2753.617, 'high': 2753.617, 'low': 2752.612, 'close_price': 2753.083, 'time': datetime.datetime(2025, 7, 9, 23, 55, 9, 613000), 'result': None}]}}
2025-07-09 23:56:09,599 INFO: Número de candles atualizados: 1
2025-07-09 23:56:09,599 INFO: ✅ Candle 1752115980 atualizado com sucesso
2025-07-09 23:56:09,600 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:56:09,600 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:56:09,600 INFO: Funcao validate_signals_for_candle iniciada para o sinal R6679ISN
2025-07-09 23:56:09,600 INFO: Buscando candle com signal_id: R6679ISN
2025-07-09 23:56:09,603 INFO: Candle encontrado para o signal_id: R6679ISN
2025-07-09 23:56:09,603 INFO: Funcao validate_signal iniciada para o signal R6679ISN
2025-07-09 23:56:09,603 INFO: Validando sinal R6679ISN com gale items
2025-07-09 23:56:09,603 INFO: Atualizando candle com filtro: {'epoch': 1752115980}, update: {'$set': {'epoch': 1752115980, 'open': 2754.762, 'high': 2755.991, 'low': 2754.676, 'close': 2754.861, 'time': datetime.datetime(2025, 7, 10, 2, 53), 'signal': {'signal_id': 'R6679ISN', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 53), 'entry_time': datetime.datetime(2025, 7, 9, 23, 54), 'open_candle_timestamp': 1752115980, 'message_id': 9928, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116100, 'open_price': 2753.617, 'high': 2753.617, 'low': 2752.612, 'close_price': 2753.083, 'time': datetime.datetime(2025, 7, 9, 23, 55, 9, 613000), 'result': 'WIN'}]}}
2025-07-09 23:56:09,606 INFO: Número de candles atualizados: 1
2025-07-09 23:56:09,606 INFO: Candle completo com gales atualizado para R6679ISN
2025-07-09 23:56:10,406 INFO: ✅ Resposta de resultado enviada para o sinal R6679ISN
2025-07-09 23:56:10,406 INFO: Sinal R6679ISN validado como LOSS e notificação enviada
2025-07-09 23:56:10,407 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal R6679ISN
2025-07-09 23:56:10,407 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-09 23:57:09,564 INFO: 🔔 Novo candle detectado em 2025-07-10 02:57:00 UTC
2025-07-09 23:57:09,564 INFO: 📊 Iniciando processamento de 200 candles
2025-07-09 23:57:09,574 INFO: Buscando candle com filtro: {'epoch': 1752116220}
2025-07-09 23:57:09,577 INFO: Candle não encontrado
2025-07-09 23:57:09,593 INFO: Tendência HMA: FALL (HMA21=2752.35, HMA100=2752.39)
2025-07-09 23:57:09,594 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-09 23:57:09,594 INFO: 📈 Análise: EMA9=2752.46, EMA21=2752.59, trend_ema=FALL, trend_final=FALL, RSI=37.81, MACD=-0.14/-0.11, ATR=0.71, body=0.00, confidence=80
2025-07-09 23:57:09,594 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-09 23:57:09,595 INFO: Inserindo candle: Candle(2025-07-10 02:57:00, DOJI, O:2752.26, H:2752.26, L:2752.26, C:2752.26)
2025-07-09 23:57:09,597 INFO: Candle inserido com ID: 686f2c051d9c27c6b2f10c04
2025-07-09 23:57:10,395 INFO: Atualizando candle com filtro: {'signal.signal_id': 'UCVL7PJH'}, update: {'$set': {'signal': {'signal_id': 'UCVL7PJH', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 20, 57, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 9, 23, 58), 'open_candle_timestamp': 1752116220, 'message_id': 9933, 'chat_id': -4767147054, 'result': None}}}
2025-07-09 23:57:10,399 INFO: Número de candles atualizados: 1
2025-07-09 23:57:10,400 INFO: ✅ Mensagem enviada ao Telegram (ID: UCVL7PJH).
2025-07-09 23:58:09,594 INFO: 🔔 Novo candle detectado em 2025-07-10 02:58:00 UTC
2025-07-09 23:58:09,594 INFO: Buscando candle com signal_id: UCVL7PJH
2025-07-09 23:58:09,596 INFO: Candle encontrado para o signal_id: UCVL7PJH
2025-07-09 23:58:09,597 INFO: 🔔 Candle 1752116280 é menor ou igual ao entry_time 2025-07-09 23:58:00
2025-07-09 23:59:09,605 INFO: 🔔 Novo candle detectado em 2025-07-10 02:59:00 UTC
2025-07-09 23:59:09,605 INFO: Buscando candle com signal_id: UCVL7PJH
2025-07-09 23:59:09,608 INFO: Candle encontrado para o signal_id: UCVL7PJH
2025-07-09 23:59:09,609 INFO: 🔔 Candle 1752116340 é maior que o entry_time 2025-07-09 23:58:00
2025-07-09 23:59:09,609 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-09 23:59:09,609 INFO: Buscando candle com signal_id: UCVL7PJH
2025-07-09 23:59:09,611 INFO: Candle encontrado para o signal_id: UCVL7PJH
2025-07-09 23:59:09,612 INFO: 🔄 Candle 1752116220 já existe no banco, atualizando...
2025-07-09 23:59:09,612 INFO: 🔄 Candle 1752116220 não tem gale_items
2025-07-09 23:59:09,612 INFO: Atualizando candle com filtro: {'epoch': 1752116220}, update: {'$set': {'epoch': 1752116220, 'open': 2752.259, 'high': 2752.578, 'low': 2751.248, 'close': 2751.395, 'time': datetime.datetime(2025, 7, 10, 2, 57), 'signal': {'signal_id': 'UCVL7PJH', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 57), 'entry_time': datetime.datetime(2025, 7, 9, 23, 58), 'open_candle_timestamp': 1752116220, 'message_id': 9933, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-09 23:59:09,615 INFO: Número de candles atualizados: 1
2025-07-09 23:59:09,615 INFO: ✅ Candle 1752116220 atualizado com sucesso
2025-07-09 23:59:09,615 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-09 23:59:09,616 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-09 23:59:09,616 INFO: Funcao validate_signals_for_candle iniciada para o sinal UCVL7PJH
2025-07-09 23:59:09,616 INFO: Buscando candle com signal_id: UCVL7PJH
2025-07-09 23:59:09,618 INFO: Candle encontrado para o signal_id: UCVL7PJH
2025-07-09 23:59:09,619 INFO: Funcao validate_signal iniciada para o signal UCVL7PJH
2025-07-09 23:59:09,619 INFO: Funcao validate_signal finalizada para o signal UCVL7PJH
2025-07-09 23:59:09,619 INFO: Validando sinal UCVL7PJH sem gale items
2025-07-09 23:59:09,619 INFO: Atualizando candle com filtro: {'signal.signal_id': 'UCVL7PJH'}, update: {'$set': {'signal': {'signal_id': 'UCVL7PJH', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 57), 'entry_time': datetime.datetime(2025, 7, 9, 23, 58), 'open_candle_timestamp': 1752116220, 'message_id': 9933, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-09 23:59:09,621 INFO: Número de candles atualizados: 1
2025-07-09 23:59:09,621 INFO: Sinal atualizado no repositório para UCVL7PJH
2025-07-09 23:59:10,423 INFO: ✅ Resposta de resultado enviada para o sinal UCVL7PJH
2025-07-09 23:59:10,424 INFO: Sinal UCVL7PJH validado como WIN e notificação enviada
2025-07-09 23:59:10,424 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal UCVL7PJH
2025-07-09 23:59:10,424 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:00:09,605 INFO: 🔔 Novo candle detectado em 2025-07-10 03:00:00 UTC
2025-07-10 00:00:09,605 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:00:09,613 INFO: Buscando candle com filtro: {'epoch': 1752116400}
2025-07-10 00:00:09,617 INFO: Candle não encontrado
2025-07-10 00:00:09,632 INFO: Tendência HMA: FALL (HMA21=2752.18, HMA100=2752.09)
2025-07-10 00:00:09,633 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:00:09,633 INFO: 📈 Análise: EMA9=2752.19, EMA21=2752.11, trend_ema=RISE, trend_final=FALL, RSI=55.51, MACD=0.12/0.14, ATR=1.55, body=0.00, confidence=20
2025-07-10 00:00:09,633 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 00:00:09,633 INFO: Inserindo candle: Candle(2025-07-10 03:00:00, DOJI, O:2752.22, H:2752.22, L:2752.22, C:2752.22)
2025-07-10 00:00:09,636 INFO: Candle inserido com ID: 686f2cb91d9c27c6b2f10c05
2025-07-10 00:00:10,460 INFO: Atualizando candle com filtro: {'signal.signal_id': 'MTRUFK2Y'}, update: {'$set': {'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 0, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:00:10,463 INFO: Número de candles atualizados: 1
2025-07-10 00:00:10,464 INFO: ✅ Mensagem enviada ao Telegram (ID: MTRUFK2Y).
2025-07-10 00:01:09,587 INFO: 🔔 Novo candle detectado em 2025-07-10 03:01:00 UTC
2025-07-10 00:01:09,588 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:01:09,590 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:01:09,590 INFO: 🔔 Candle 1752116460 é menor ou igual ao entry_time 2025-07-10 00:01:00
2025-07-10 00:02:09,609 INFO: 🔔 Novo candle detectado em 2025-07-10 03:02:00 UTC
2025-07-10 00:02:09,609 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:02:09,612 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:02:09,613 INFO: 🔔 Candle 1752116520 é maior que o entry_time 2025-07-10 00:01:00
2025-07-10 00:02:09,613 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:02:09,613 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:02:09,616 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:02:09,616 INFO: 🔄 Candle 1752116400 já existe no banco, atualizando...
2025-07-10 00:02:09,617 INFO: 🔄 Candle 1752116400 não tem gale_items
2025-07-10 00:02:09,617 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:02:09,619 INFO: Número de candles atualizados: 1
2025-07-10 00:02:09,619 INFO: ✅ Candle 1752116400 atualizado com sucesso
2025-07-10 00:02:09,620 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:02:09,620 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:02:09,620 INFO: Funcao validate_signals_for_candle iniciada para o sinal MTRUFK2Y
2025-07-10 00:02:09,621 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:02:09,623 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:02:09,623 INFO: Funcao validate_signal iniciada para o signal MTRUFK2Y
2025-07-10 00:02:09,623 INFO: Funcao validate_signal finalizada para o signal MTRUFK2Y
2025-07-10 00:02:09,623 INFO: Validando sinal MTRUFK2Y sem gale items
2025-07-10 00:02:09,624 INFO: Sinal MTRUFK2Y adicionado à fila para G1
2025-07-10 00:02:09,624 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116520, 'open_price': 2754.265, 'high': 2754.265, 'low': 2754.265, 'close_price': 2754.265, 'time': datetime.datetime(2025, 7, 10, 0, 2, 9, 624338), 'result': None}]}}
2025-07-10 00:02:09,626 INFO: Número de candles atualizados: 1
2025-07-10 00:02:09,627 INFO: Candle completo com gales atualizado para MTRUFK2Y
2025-07-10 00:02:10,441 INFO: ✅ Resposta de resultado enviada para o sinal MTRUFK2Y
2025-07-10 00:02:10,442 INFO: Sinal MTRUFK2Y validado como LOSS e notificação enviada
2025-07-10 00:02:10,442 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal MTRUFK2Y
2025-07-10 00:02:10,442 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:03:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 03:03:00 UTC
2025-07-10 00:03:09,584 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:03:09,586 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:03:09,587 INFO: 🔔 Candle 1752116580 é maior que o entry_time 2025-07-10 00:01:00
2025-07-10 00:03:09,587 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:03:09,587 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:03:09,590 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:03:09,590 INFO: 🔄 Candle 1752116520 já existe no banco, atualizando...
2025-07-10 00:03:09,590 INFO: 🔄 Atualizando último gale item do candle 1752116520
2025-07-10 00:03:09,591 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116520, 'open_price': 2754.265, 'high': 2755.686, 'low': 2753.84, 'close_price': 2755.403, 'time': datetime.datetime(2025, 7, 10, 0, 2, 9, 624000), 'result': None}]}}
2025-07-10 00:03:09,593 INFO: Número de candles atualizados: 1
2025-07-10 00:03:09,594 INFO: ✅ Candle 1752116400 atualizado com sucesso
2025-07-10 00:03:09,595 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:03:09,595 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:03:09,595 INFO: Funcao validate_signals_for_candle iniciada para o sinal MTRUFK2Y
2025-07-10 00:03:09,595 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:03:09,598 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:03:09,598 INFO: Funcao validate_signal iniciada para o signal MTRUFK2Y
2025-07-10 00:03:09,598 INFO: Validando sinal MTRUFK2Y com gale items
2025-07-10 00:03:09,599 INFO: Gale G1 para o sinal MTRUFK2Y resultou em LOSS
2025-07-10 00:03:09,599 INFO: Sinal MTRUFK2Y adicionado à fila para G2
2025-07-10 00:03:09,599 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116520, 'open_price': 2754.265, 'high': 2755.686, 'low': 2753.84, 'close_price': 2755.403, 'time': datetime.datetime(2025, 7, 10, 0, 2, 9, 624000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752116580, 'open_price': 2755.34, 'high': 2755.34, 'low': 2755.34, 'close_price': 2755.34, 'time': datetime.datetime(2025, 7, 10, 0, 3, 9, 599330), 'result': None}]}}
2025-07-10 00:03:09,602 INFO: Número de candles atualizados: 1
2025-07-10 00:03:09,602 INFO: Candle completo com gales atualizado para MTRUFK2Y
2025-07-10 00:03:10,418 INFO: ✅ Resposta de resultado enviada para o sinal MTRUFK2Y
2025-07-10 00:03:10,419 INFO: Sinal MTRUFK2Y validado como LOSS e notificação enviada
2025-07-10 00:03:10,420 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal MTRUFK2Y
2025-07-10 00:03:10,420 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:04:09,585 INFO: 🔔 Novo candle detectado em 2025-07-10 03:04:00 UTC
2025-07-10 00:04:09,585 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:04:09,588 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:04:09,589 INFO: 🔔 Candle 1752116640 é maior que o entry_time 2025-07-10 00:01:00
2025-07-10 00:04:09,589 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:04:09,589 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:04:09,592 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:04:09,592 INFO: 🔄 Candle 1752116580 já existe no banco, atualizando...
2025-07-10 00:04:09,592 INFO: 🔄 Atualizando último gale item do candle 1752116580
2025-07-10 00:04:09,593 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116520, 'open_price': 2754.265, 'high': 2755.686, 'low': 2753.84, 'close_price': 2755.403, 'time': datetime.datetime(2025, 7, 10, 0, 2, 9, 624000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752116580, 'open_price': 2755.34, 'high': 2756.004, 'low': 2755.123, 'close_price': 2755.863, 'time': datetime.datetime(2025, 7, 10, 0, 3, 9, 599000), 'result': None}]}}
2025-07-10 00:04:09,595 INFO: Número de candles atualizados: 1
2025-07-10 00:04:09,596 INFO: ✅ Candle 1752116400 atualizado com sucesso
2025-07-10 00:04:09,596 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:04:09,596 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:04:09,597 INFO: Funcao validate_signals_for_candle iniciada para o sinal MTRUFK2Y
2025-07-10 00:04:09,597 INFO: Buscando candle com signal_id: MTRUFK2Y
2025-07-10 00:04:09,599 INFO: Candle encontrado para o signal_id: MTRUFK2Y
2025-07-10 00:04:09,599 INFO: Funcao validate_signal iniciada para o signal MTRUFK2Y
2025-07-10 00:04:09,600 INFO: Validando sinal MTRUFK2Y com gale items
2025-07-10 00:04:09,600 INFO: Gale G2 para o sinal MTRUFK2Y resultou em LOSS
2025-07-10 00:04:09,601 INFO: Atualizando candle com filtro: {'epoch': 1752116400}, update: {'$set': {'epoch': 1752116400, 'open': 2752.218, 'high': 2752.958, 'low': 2751.816, 'close': 2752.618, 'time': datetime.datetime(2025, 7, 10, 3, 0), 'signal': {'signal_id': 'MTRUFK2Y', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 0), 'entry_time': datetime.datetime(2025, 7, 10, 0, 1), 'open_candle_timestamp': 1752116400, 'message_id': 9935, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116520, 'open_price': 2754.265, 'high': 2755.686, 'low': 2753.84, 'close_price': 2755.403, 'time': datetime.datetime(2025, 7, 10, 0, 2, 9, 624000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752116580, 'open_price': 2755.34, 'high': 2756.004, 'low': 2755.123, 'close_price': 2755.863, 'time': datetime.datetime(2025, 7, 10, 0, 3, 9, 599000), 'result': 'LOSS'}]}}
2025-07-10 00:04:09,603 INFO: Número de candles atualizados: 1
2025-07-10 00:04:09,603 INFO: Candle completo com gales atualizado para MTRUFK2Y
2025-07-10 00:04:10,461 INFO: ✅ Resposta de resultado enviada para o sinal MTRUFK2Y
2025-07-10 00:04:10,462 INFO: Sinal MTRUFK2Y validado como LOSS e notificação enviada
2025-07-10 00:04:10,462 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal MTRUFK2Y
2025-07-10 00:04:10,463 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:05:09,601 INFO: 🔔 Novo candle detectado em 2025-07-10 03:05:00 UTC
2025-07-10 00:05:09,602 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:05:09,611 INFO: Buscando candle com filtro: {'epoch': 1752116700}
2025-07-10 00:05:09,615 INFO: Candle não encontrado
2025-07-10 00:05:09,631 INFO: Tendência HMA: FALL (HMA21=2754.75, HMA100=2755.66)
2025-07-10 00:05:09,631 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:05:09,631 INFO: 📈 Análise: EMA9=2754.88, EMA21=2755.15, trend_ema=FALL, trend_final=FALL, RSI=32.63, MACD=-0.27/-0.22, ATR=1.22, body=0.00, confidence=80
2025-07-10 00:05:09,632 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 00:05:09,632 INFO: Inserindo candle: Candle(2025-07-10 03:05:00, DOJI, O:2754.62, H:2754.62, L:2754.62, C:2754.62)
2025-07-10 00:05:09,635 INFO: Candle inserido com ID: 686f2de51d9c27c6b2f10c06
2025-07-10 00:05:10,489 INFO: Atualizando candle com filtro: {'signal.signal_id': '8W8VSDP7'}, update: {'$set': {'signal': {'signal_id': '8W8VSDP7', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 5, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 6), 'open_candle_timestamp': 1752116700, 'message_id': 9939, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:05:10,492 INFO: Número de candles atualizados: 1
2025-07-10 00:05:10,493 INFO: ✅ Mensagem enviada ao Telegram (ID: 8W8VSDP7).
2025-07-10 00:06:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 03:06:00 UTC
2025-07-10 00:06:09,584 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:06:09,586 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:06:09,587 INFO: 🔔 Candle 1752116760 é menor ou igual ao entry_time 2025-07-10 00:06:00
2025-07-10 00:07:09,634 INFO: 🔔 Novo candle detectado em 2025-07-10 03:07:00 UTC
2025-07-10 00:07:09,634 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:07:09,638 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:07:09,638 INFO: 🔔 Candle 1752116820 é maior que o entry_time 2025-07-10 00:06:00
2025-07-10 00:07:09,639 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:07:09,639 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:07:09,641 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:07:09,642 INFO: 🔄 Candle 1752116700 já existe no banco, atualizando...
2025-07-10 00:07:09,642 INFO: 🔄 Candle 1752116700 não tem gale_items
2025-07-10 00:07:09,642 INFO: Atualizando candle com filtro: {'epoch': 1752116700}, update: {'$set': {'epoch': 1752116700, 'open': 2754.622, 'high': 2755.597, 'low': 2754.607, 'close': 2754.911, 'time': datetime.datetime(2025, 7, 10, 3, 5), 'signal': {'signal_id': '8W8VSDP7', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 5), 'entry_time': datetime.datetime(2025, 7, 10, 0, 6), 'open_candle_timestamp': 1752116700, 'message_id': 9939, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:07:09,644 INFO: Número de candles atualizados: 1
2025-07-10 00:07:09,645 INFO: ✅ Candle 1752116700 atualizado com sucesso
2025-07-10 00:07:09,645 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:07:09,645 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:07:09,645 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8W8VSDP7
2025-07-10 00:07:09,646 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:07:09,648 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:07:09,648 INFO: Funcao validate_signal iniciada para o signal 8W8VSDP7
2025-07-10 00:07:09,649 INFO: Funcao validate_signal finalizada para o signal 8W8VSDP7
2025-07-10 00:07:09,649 INFO: Validando sinal 8W8VSDP7 sem gale items
2025-07-10 00:07:09,649 INFO: Sinal 8W8VSDP7 adicionado à fila para G1
2025-07-10 00:07:09,649 INFO: Atualizando candle com filtro: {'epoch': 1752116700}, update: {'$set': {'epoch': 1752116700, 'open': 2754.622, 'high': 2755.597, 'low': 2754.607, 'close': 2754.911, 'time': datetime.datetime(2025, 7, 10, 3, 5), 'signal': {'signal_id': '8W8VSDP7', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 5), 'entry_time': datetime.datetime(2025, 7, 10, 0, 6), 'open_candle_timestamp': 1752116700, 'message_id': 9939, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116820, 'open_price': 2755.029, 'high': 2755.029, 'low': 2755.029, 'close_price': 2755.029, 'time': datetime.datetime(2025, 7, 10, 0, 7, 9, 649749), 'result': None}]}}
2025-07-10 00:07:09,652 INFO: Número de candles atualizados: 1
2025-07-10 00:07:09,653 INFO: Candle completo com gales atualizado para 8W8VSDP7
2025-07-10 00:07:10,474 INFO: ✅ Resposta de resultado enviada para o sinal 8W8VSDP7
2025-07-10 00:07:10,475 INFO: Sinal 8W8VSDP7 validado como LOSS e notificação enviada
2025-07-10 00:07:10,475 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8W8VSDP7
2025-07-10 00:07:10,475 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:08:09,577 INFO: 🔔 Novo candle detectado em 2025-07-10 03:08:00 UTC
2025-07-10 00:08:09,578 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:08:09,581 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:08:09,581 INFO: 🔔 Candle 1752116880 é maior que o entry_time 2025-07-10 00:06:00
2025-07-10 00:08:09,581 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:08:09,582 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:08:09,584 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:08:09,584 INFO: 🔄 Candle 1752116820 já existe no banco, atualizando...
2025-07-10 00:08:09,585 INFO: 🔄 Atualizando último gale item do candle 1752116820
2025-07-10 00:08:09,585 INFO: Atualizando candle com filtro: {'epoch': 1752116700}, update: {'$set': {'epoch': 1752116700, 'open': 2754.622, 'high': 2755.597, 'low': 2754.607, 'close': 2754.911, 'time': datetime.datetime(2025, 7, 10, 3, 5), 'signal': {'signal_id': '8W8VSDP7', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 5), 'entry_time': datetime.datetime(2025, 7, 10, 0, 6), 'open_candle_timestamp': 1752116700, 'message_id': 9939, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116820, 'open_price': 2755.029, 'high': 2755.612, 'low': 2754.773, 'close_price': 2755.014, 'time': datetime.datetime(2025, 7, 10, 0, 7, 9, 649000), 'result': None}]}}
2025-07-10 00:08:09,588 INFO: Número de candles atualizados: 1
2025-07-10 00:08:09,588 INFO: ✅ Candle 1752116700 atualizado com sucesso
2025-07-10 00:08:09,589 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:08:09,589 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:08:09,589 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8W8VSDP7
2025-07-10 00:08:09,589 INFO: Buscando candle com signal_id: 8W8VSDP7
2025-07-10 00:08:09,592 INFO: Candle encontrado para o signal_id: 8W8VSDP7
2025-07-10 00:08:09,592 INFO: Funcao validate_signal iniciada para o signal 8W8VSDP7
2025-07-10 00:08:09,593 INFO: Validando sinal 8W8VSDP7 com gale items
2025-07-10 00:08:09,593 INFO: Atualizando candle com filtro: {'epoch': 1752116700}, update: {'$set': {'epoch': 1752116700, 'open': 2754.622, 'high': 2755.597, 'low': 2754.607, 'close': 2754.911, 'time': datetime.datetime(2025, 7, 10, 3, 5), 'signal': {'signal_id': '8W8VSDP7', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 5), 'entry_time': datetime.datetime(2025, 7, 10, 0, 6), 'open_candle_timestamp': 1752116700, 'message_id': 9939, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752116820, 'open_price': 2755.029, 'high': 2755.612, 'low': 2754.773, 'close_price': 2755.014, 'time': datetime.datetime(2025, 7, 10, 0, 7, 9, 649000), 'result': 'WIN'}]}}
2025-07-10 00:08:09,596 INFO: Número de candles atualizados: 1
2025-07-10 00:08:09,596 INFO: Candle completo com gales atualizado para 8W8VSDP7
2025-07-10 00:08:10,397 INFO: ✅ Resposta de resultado enviada para o sinal 8W8VSDP7
2025-07-10 00:08:10,398 INFO: Sinal 8W8VSDP7 validado como LOSS e notificação enviada
2025-07-10 00:08:10,398 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8W8VSDP7
2025-07-10 00:08:10,398 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:09:09,607 INFO: 🔔 Novo candle detectado em 2025-07-10 03:09:00 UTC
2025-07-10 00:09:09,608 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:09:09,617 INFO: Buscando candle com filtro: {'epoch': 1752116940}
2025-07-10 00:09:09,620 INFO: Candle não encontrado
2025-07-10 00:09:09,637 INFO: Tendência HMA: FALL (HMA21=2754.58, HMA100=2754.51)
2025-07-10 00:09:09,638 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:09:09,638 INFO: 📈 Análise: EMA9=2754.40, EMA21=2754.44, trend_ema=FALL, trend_final=FALL, RSI=46.03, MACD=-0.08/-0.13, ATR=1.04, body=0.00, confidence=20
2025-07-10 00:09:09,638 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 00:09:09,639 INFO: Inserindo candle: Candle(2025-07-10 03:09:00, DOJI, O:2754.37, H:2754.37, L:2754.37, C:2754.37)
2025-07-10 00:09:09,641 INFO: Candle inserido com ID: 686f2ed51d9c27c6b2f10c07
2025-07-10 00:09:10,436 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HE32XC7H'}, update: {'$set': {'signal': {'signal_id': 'HE32XC7H', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 9, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 10), 'open_candle_timestamp': 1752116940, 'message_id': 9942, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:09:10,439 INFO: Número de candles atualizados: 1
2025-07-10 00:09:10,440 INFO: ✅ Mensagem enviada ao Telegram (ID: HE32XC7H).
2025-07-10 00:10:09,599 INFO: 🔔 Novo candle detectado em 2025-07-10 03:10:00 UTC
2025-07-10 00:10:09,599 INFO: Buscando candle com signal_id: HE32XC7H
2025-07-10 00:10:09,603 INFO: Candle encontrado para o signal_id: HE32XC7H
2025-07-10 00:10:09,603 INFO: 🔔 Candle 1752117000 é menor ou igual ao entry_time 2025-07-10 00:10:00
2025-07-10 00:11:09,589 INFO: 🔔 Novo candle detectado em 2025-07-10 03:11:00 UTC
2025-07-10 00:11:09,589 INFO: Buscando candle com signal_id: HE32XC7H
2025-07-10 00:11:09,592 INFO: Candle encontrado para o signal_id: HE32XC7H
2025-07-10 00:11:09,592 INFO: 🔔 Candle 1752117060 é maior que o entry_time 2025-07-10 00:10:00
2025-07-10 00:11:09,592 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:11:09,592 INFO: Buscando candle com signal_id: HE32XC7H
2025-07-10 00:11:09,595 INFO: Candle encontrado para o signal_id: HE32XC7H
2025-07-10 00:11:09,595 INFO: 🔄 Candle 1752116940 já existe no banco, atualizando...
2025-07-10 00:11:09,596 INFO: 🔄 Candle 1752116940 não tem gale_items
2025-07-10 00:11:09,596 INFO: Atualizando candle com filtro: {'epoch': 1752116940}, update: {'$set': {'epoch': 1752116940, 'open': 2754.368, 'high': 2754.414, 'low': 2753.188, 'close': 2753.568, 'time': datetime.datetime(2025, 7, 10, 3, 9), 'signal': {'signal_id': 'HE32XC7H', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 9), 'entry_time': datetime.datetime(2025, 7, 10, 0, 10), 'open_candle_timestamp': 1752116940, 'message_id': 9942, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:11:09,598 INFO: Número de candles atualizados: 1
2025-07-10 00:11:09,599 INFO: ✅ Candle 1752116940 atualizado com sucesso
2025-07-10 00:11:09,599 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:11:09,600 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:11:09,600 INFO: Funcao validate_signals_for_candle iniciada para o sinal HE32XC7H
2025-07-10 00:11:09,600 INFO: Buscando candle com signal_id: HE32XC7H
2025-07-10 00:11:09,602 INFO: Candle encontrado para o signal_id: HE32XC7H
2025-07-10 00:11:09,603 INFO: Funcao validate_signal iniciada para o signal HE32XC7H
2025-07-10 00:11:09,603 INFO: Funcao validate_signal finalizada para o signal HE32XC7H
2025-07-10 00:11:09,603 INFO: Validando sinal HE32XC7H sem gale items
2025-07-10 00:11:09,604 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HE32XC7H'}, update: {'$set': {'signal': {'signal_id': 'HE32XC7H', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 9), 'entry_time': datetime.datetime(2025, 7, 10, 0, 10), 'open_candle_timestamp': 1752116940, 'message_id': 9942, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:11:09,606 INFO: Número de candles atualizados: 1
2025-07-10 00:11:09,606 INFO: Sinal atualizado no repositório para HE32XC7H
2025-07-10 00:11:10,471 INFO: ✅ Resposta de resultado enviada para o sinal HE32XC7H
2025-07-10 00:11:10,472 INFO: Sinal HE32XC7H validado como WIN e notificação enviada
2025-07-10 00:11:10,472 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HE32XC7H
2025-07-10 00:11:10,472 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:12:09,575 INFO: 🔔 Novo candle detectado em 2025-07-10 03:12:00 UTC
2025-07-10 00:12:09,576 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:12:09,586 INFO: Buscando candle com filtro: {'epoch': 1752117120}
2025-07-10 00:12:09,589 INFO: Candle não encontrado
2025-07-10 00:12:09,606 INFO: Tendência HMA: FALL (HMA21=2755.82, HMA100=2756.14)
2025-07-10 00:12:09,606 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:12:09,606 INFO: 📈 Análise: EMA9=2755.82, EMA21=2755.79, trend_ema=RISE, trend_final=FALL, RSI=42.62, MACD=0.14/0.27, ATR=1.35, body=0.00, confidence=20
2025-07-10 00:12:09,607 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 00:12:09,607 INFO: Inserindo candle: Candle(2025-07-10 03:12:00, DOJI, O:2755.43, H:2755.43, L:2755.43, C:2755.43)
2025-07-10 00:12:09,609 INFO: Candle inserido com ID: 686f2f891d9c27c6b2f10c08
2025-07-10 00:12:10,435 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V6M5MFQC'}, update: {'$set': {'signal': {'signal_id': 'V6M5MFQC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 12, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 13), 'open_candle_timestamp': 1752117120, 'message_id': 9944, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:12:10,438 INFO: Número de candles atualizados: 1
2025-07-10 00:12:10,439 INFO: ✅ Mensagem enviada ao Telegram (ID: V6M5MFQC).
2025-07-10 00:13:09,607 INFO: 🔔 Novo candle detectado em 2025-07-10 03:13:00 UTC
2025-07-10 00:13:09,607 INFO: Buscando candle com signal_id: V6M5MFQC
2025-07-10 00:13:09,611 INFO: Candle encontrado para o signal_id: V6M5MFQC
2025-07-10 00:13:09,611 INFO: 🔔 Candle 1752117180 é menor ou igual ao entry_time 2025-07-10 00:13:00
2025-07-10 00:14:09,571 INFO: 🔔 Novo candle detectado em 2025-07-10 03:14:00 UTC
2025-07-10 00:14:09,571 INFO: Buscando candle com signal_id: V6M5MFQC
2025-07-10 00:14:09,574 INFO: Candle encontrado para o signal_id: V6M5MFQC
2025-07-10 00:14:09,575 INFO: 🔔 Candle 1752117240 é maior que o entry_time 2025-07-10 00:13:00
2025-07-10 00:14:09,575 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:14:09,575 INFO: Buscando candle com signal_id: V6M5MFQC
2025-07-10 00:14:09,578 INFO: Candle encontrado para o signal_id: V6M5MFQC
2025-07-10 00:14:09,578 INFO: 🔄 Candle 1752117120 já existe no banco, atualizando...
2025-07-10 00:14:09,578 INFO: 🔄 Candle 1752117120 não tem gale_items
2025-07-10 00:14:09,579 INFO: Atualizando candle com filtro: {'epoch': 1752117120}, update: {'$set': {'epoch': 1752117120, 'open': 2755.43, 'high': 2755.677, 'low': 2754.297, 'close': 2754.792, 'time': datetime.datetime(2025, 7, 10, 3, 12), 'signal': {'signal_id': 'V6M5MFQC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 12), 'entry_time': datetime.datetime(2025, 7, 10, 0, 13), 'open_candle_timestamp': 1752117120, 'message_id': 9944, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:14:09,581 INFO: Número de candles atualizados: 1
2025-07-10 00:14:09,582 INFO: ✅ Candle 1752117120 atualizado com sucesso
2025-07-10 00:14:09,582 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:14:09,582 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:14:09,582 INFO: Funcao validate_signals_for_candle iniciada para o sinal V6M5MFQC
2025-07-10 00:14:09,582 INFO: Buscando candle com signal_id: V6M5MFQC
2025-07-10 00:14:09,585 INFO: Candle encontrado para o signal_id: V6M5MFQC
2025-07-10 00:14:09,585 INFO: Funcao validate_signal iniciada para o signal V6M5MFQC
2025-07-10 00:14:09,585 INFO: Funcao validate_signal finalizada para o signal V6M5MFQC
2025-07-10 00:14:09,586 INFO: Validando sinal V6M5MFQC sem gale items
2025-07-10 00:14:09,586 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V6M5MFQC'}, update: {'$set': {'signal': {'signal_id': 'V6M5MFQC', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 12), 'entry_time': datetime.datetime(2025, 7, 10, 0, 13), 'open_candle_timestamp': 1752117120, 'message_id': 9944, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:14:09,588 INFO: Número de candles atualizados: 1
2025-07-10 00:14:09,589 INFO: Sinal atualizado no repositório para V6M5MFQC
2025-07-10 00:14:10,403 INFO: ✅ Resposta de resultado enviada para o sinal V6M5MFQC
2025-07-10 00:14:10,404 INFO: Sinal V6M5MFQC validado como WIN e notificação enviada
2025-07-10 00:14:10,404 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal V6M5MFQC
2025-07-10 00:14:10,404 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:15:09,597 INFO: 🔔 Novo candle detectado em 2025-07-10 03:15:00 UTC
2025-07-10 00:15:09,598 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:15:09,612 INFO: Buscando candle com filtro: {'epoch': 1752117300}
2025-07-10 00:15:09,614 INFO: Candle não encontrado
2025-07-10 00:15:09,631 INFO: Tendência HMA: FALL (HMA21=2755.89, HMA100=2756.01)
2025-07-10 00:15:09,632 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:15:09,632 INFO: 📈 Análise: EMA9=2756.02, EMA21=2755.92, trend_ema=RISE, trend_final=FALL, RSI=64.53, MACD=0.12/0.14, ATR=1.09, body=0.00, confidence=40
2025-07-10 00:15:09,632 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 00:15:09,632 INFO: Inserindo candle: Candle(2025-07-10 03:15:00, DOJI, O:2756.57, H:2756.57, L:2756.57, C:2756.57)
2025-07-10 00:15:09,634 INFO: Candle inserido com ID: 686f303d1d9c27c6b2f10c09
2025-07-10 00:15:10,429 INFO: Atualizando candle com filtro: {'signal.signal_id': 'G0RZPPGX'}, update: {'$set': {'signal': {'signal_id': 'G0RZPPGX', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 15, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 16), 'open_candle_timestamp': 1752117300, 'message_id': 9946, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:15:10,433 INFO: Número de candles atualizados: 1
2025-07-10 00:15:10,433 INFO: ✅ Mensagem enviada ao Telegram (ID: G0RZPPGX).
2025-07-10 00:16:09,601 INFO: 🔔 Novo candle detectado em 2025-07-10 03:16:00 UTC
2025-07-10 00:16:09,601 INFO: Buscando candle com signal_id: G0RZPPGX
2025-07-10 00:16:09,604 INFO: Candle encontrado para o signal_id: G0RZPPGX
2025-07-10 00:16:09,604 INFO: 🔔 Candle 1752117360 é menor ou igual ao entry_time 2025-07-10 00:16:00
2025-07-10 00:17:09,576 INFO: 🔔 Novo candle detectado em 2025-07-10 03:17:00 UTC
2025-07-10 00:17:09,576 INFO: Buscando candle com signal_id: G0RZPPGX
2025-07-10 00:17:09,580 INFO: Candle encontrado para o signal_id: G0RZPPGX
2025-07-10 00:17:09,580 INFO: 🔔 Candle 1752117420 é maior que o entry_time 2025-07-10 00:16:00
2025-07-10 00:17:09,580 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:17:09,580 INFO: Buscando candle com signal_id: G0RZPPGX
2025-07-10 00:17:09,583 INFO: Candle encontrado para o signal_id: G0RZPPGX
2025-07-10 00:17:09,583 INFO: 🔄 Candle 1752117300 já existe no banco, atualizando...
2025-07-10 00:17:09,583 INFO: 🔄 Candle 1752117300 não tem gale_items
2025-07-10 00:17:09,583 INFO: Atualizando candle com filtro: {'epoch': 1752117300}, update: {'$set': {'epoch': 1752117300, 'open': 2756.574, 'high': 2756.595, 'low': 2755.637, 'close': 2755.696, 'time': datetime.datetime(2025, 7, 10, 3, 15), 'signal': {'signal_id': 'G0RZPPGX', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 15), 'entry_time': datetime.datetime(2025, 7, 10, 0, 16), 'open_candle_timestamp': 1752117300, 'message_id': 9946, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:17:09,586 INFO: Número de candles atualizados: 1
2025-07-10 00:17:09,586 INFO: ✅ Candle 1752117300 atualizado com sucesso
2025-07-10 00:17:09,586 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:17:09,586 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:17:09,586 INFO: Funcao validate_signals_for_candle iniciada para o sinal G0RZPPGX
2025-07-10 00:17:09,587 INFO: Buscando candle com signal_id: G0RZPPGX
2025-07-10 00:17:09,589 INFO: Candle encontrado para o signal_id: G0RZPPGX
2025-07-10 00:17:09,589 INFO: Funcao validate_signal iniciada para o signal G0RZPPGX
2025-07-10 00:17:09,589 INFO: Funcao validate_signal finalizada para o signal G0RZPPGX
2025-07-10 00:17:09,589 INFO: Validando sinal G0RZPPGX sem gale items
2025-07-10 00:17:09,589 INFO: Atualizando candle com filtro: {'signal.signal_id': 'G0RZPPGX'}, update: {'$set': {'signal': {'signal_id': 'G0RZPPGX', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 15), 'entry_time': datetime.datetime(2025, 7, 10, 0, 16), 'open_candle_timestamp': 1752117300, 'message_id': 9946, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:17:09,592 INFO: Número de candles atualizados: 1
2025-07-10 00:17:09,592 INFO: Sinal atualizado no repositório para G0RZPPGX
2025-07-10 00:17:10,423 INFO: ✅ Resposta de resultado enviada para o sinal G0RZPPGX
2025-07-10 00:17:10,424 INFO: Sinal G0RZPPGX validado como WIN e notificação enviada
2025-07-10 00:17:10,424 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal G0RZPPGX
2025-07-10 00:17:10,424 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:18:09,603 INFO: 🔔 Novo candle detectado em 2025-07-10 03:18:00 UTC
2025-07-10 00:18:09,604 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:18:09,612 INFO: Buscando candle com filtro: {'epoch': 1752117480}
2025-07-10 00:18:09,616 INFO: Candle não encontrado
2025-07-10 00:18:09,632 INFO: Tendência HMA: FALL (HMA21=2754.14, HMA100=2753.68)
2025-07-10 00:18:09,632 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:18:09,633 INFO: 📈 Análise: EMA9=2754.28, EMA21=2754.22, trend_ema=RISE, trend_final=FALL, RSI=59.86, MACD=0.04/0.02, ATR=0.88, body=0.00, confidence=60
2025-07-10 00:18:09,633 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 00:18:09,633 INFO: Inserindo candle: Candle(2025-07-10 03:18:00, DOJI, O:2754.59, H:2754.59, L:2754.59, C:2754.59)
2025-07-10 00:18:09,636 INFO: Candle inserido com ID: 686f30f11d9c27c6b2f10c0a
2025-07-10 00:18:10,452 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V0TVS5S0'}, update: {'$set': {'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 18, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:18:10,454 INFO: Número de candles atualizados: 1
2025-07-10 00:18:10,455 INFO: ✅ Mensagem enviada ao Telegram (ID: V0TVS5S0).
2025-07-10 00:19:09,583 INFO: 🔔 Novo candle detectado em 2025-07-10 03:19:00 UTC
2025-07-10 00:19:09,584 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:19:09,587 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:19:09,587 INFO: 🔔 Candle 1752117540 é menor ou igual ao entry_time 2025-07-10 00:19:00
2025-07-10 00:20:09,591 INFO: 🔔 Novo candle detectado em 2025-07-10 03:20:00 UTC
2025-07-10 00:20:09,592 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:20:09,594 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:20:09,595 INFO: 🔔 Candle 1752117600 é maior que o entry_time 2025-07-10 00:19:00
2025-07-10 00:20:09,595 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:20:09,595 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:20:09,597 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:20:09,598 INFO: 🔄 Candle 1752117480 já existe no banco, atualizando...
2025-07-10 00:20:09,598 INFO: 🔄 Candle 1752117480 não tem gale_items
2025-07-10 00:20:09,598 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:20:09,601 INFO: Número de candles atualizados: 1
2025-07-10 00:20:09,602 INFO: ✅ Candle 1752117480 atualizado com sucesso
2025-07-10 00:20:09,602 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:20:09,602 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:20:09,603 INFO: Funcao validate_signals_for_candle iniciada para o sinal V0TVS5S0
2025-07-10 00:20:09,603 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:20:09,605 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:20:09,606 INFO: Funcao validate_signal iniciada para o signal V0TVS5S0
2025-07-10 00:20:09,606 INFO: Funcao validate_signal finalizada para o signal V0TVS5S0
2025-07-10 00:20:09,607 INFO: Validando sinal V0TVS5S0 sem gale items
2025-07-10 00:20:09,607 INFO: Sinal V0TVS5S0 adicionado à fila para G1
2025-07-10 00:20:09,607 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117600, 'open_price': 2754.744, 'high': 2754.744, 'low': 2754.744, 'close_price': 2754.744, 'time': datetime.datetime(2025, 7, 10, 0, 20, 9, 607045), 'result': None}]}}
2025-07-10 00:20:09,610 INFO: Número de candles atualizados: 1
2025-07-10 00:20:09,610 INFO: Candle completo com gales atualizado para V0TVS5S0
2025-07-10 00:20:10,415 INFO: ✅ Resposta de resultado enviada para o sinal V0TVS5S0
2025-07-10 00:20:10,415 INFO: Sinal V0TVS5S0 validado como LOSS e notificação enviada
2025-07-10 00:20:10,415 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal V0TVS5S0
2025-07-10 00:20:10,416 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:21:09,590 INFO: 🔔 Novo candle detectado em 2025-07-10 03:21:00 UTC
2025-07-10 00:21:09,590 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:21:09,594 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:21:09,594 INFO: 🔔 Candle 1752117660 é maior que o entry_time 2025-07-10 00:19:00
2025-07-10 00:21:09,594 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:21:09,595 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:21:09,597 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:21:09,598 INFO: 🔄 Candle 1752117600 já existe no banco, atualizando...
2025-07-10 00:21:09,598 INFO: 🔄 Atualizando último gale item do candle 1752117600
2025-07-10 00:21:09,598 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117600, 'open_price': 2754.744, 'high': 2755.353, 'low': 2754.212, 'close_price': 2754.828, 'time': datetime.datetime(2025, 7, 10, 0, 20, 9, 607000), 'result': None}]}}
2025-07-10 00:21:09,600 INFO: Número de candles atualizados: 1
2025-07-10 00:21:09,601 INFO: ✅ Candle 1752117480 atualizado com sucesso
2025-07-10 00:21:09,601 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:21:09,602 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:21:09,602 INFO: Funcao validate_signals_for_candle iniciada para o sinal V0TVS5S0
2025-07-10 00:21:09,602 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:21:09,604 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:21:09,604 INFO: Funcao validate_signal iniciada para o signal V0TVS5S0
2025-07-10 00:21:09,604 INFO: Validando sinal V0TVS5S0 com gale items
2025-07-10 00:21:09,605 INFO: Gale G1 para o sinal V0TVS5S0 resultou em LOSS
2025-07-10 00:21:09,605 INFO: Sinal V0TVS5S0 adicionado à fila para G2
2025-07-10 00:21:09,605 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117600, 'open_price': 2754.744, 'high': 2755.353, 'low': 2754.212, 'close_price': 2754.828, 'time': datetime.datetime(2025, 7, 10, 0, 20, 9, 607000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752117660, 'open_price': 2754.973, 'high': 2754.973, 'low': 2754.973, 'close_price': 2754.973, 'time': datetime.datetime(2025, 7, 10, 0, 21, 9, 605262), 'result': None}]}}
2025-07-10 00:21:09,608 INFO: Número de candles atualizados: 1
2025-07-10 00:21:09,608 INFO: Candle completo com gales atualizado para V0TVS5S0
2025-07-10 00:21:10,482 INFO: ✅ Resposta de resultado enviada para o sinal V0TVS5S0
2025-07-10 00:21:10,483 INFO: Sinal V0TVS5S0 validado como LOSS e notificação enviada
2025-07-10 00:21:10,483 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal V0TVS5S0
2025-07-10 00:21:10,483 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:22:09,595 INFO: 🔔 Novo candle detectado em 2025-07-10 03:22:00 UTC
2025-07-10 00:22:09,596 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:22:09,598 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:22:09,599 INFO: 🔔 Candle 1752117720 é maior que o entry_time 2025-07-10 00:19:00
2025-07-10 00:22:09,599 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:22:09,599 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:22:09,601 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:22:09,601 INFO: 🔄 Candle 1752117660 já existe no banco, atualizando...
2025-07-10 00:22:09,602 INFO: 🔄 Atualizando último gale item do candle 1752117660
2025-07-10 00:22:09,602 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117600, 'open_price': 2754.744, 'high': 2755.353, 'low': 2754.212, 'close_price': 2754.828, 'time': datetime.datetime(2025, 7, 10, 0, 20, 9, 607000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752117660, 'open_price': 2754.973, 'high': 2755.873, 'low': 2754.973, 'close_price': 2755.807, 'time': datetime.datetime(2025, 7, 10, 0, 21, 9, 605000), 'result': None}]}}
2025-07-10 00:22:09,605 INFO: Número de candles atualizados: 1
2025-07-10 00:22:09,605 INFO: ✅ Candle 1752117480 atualizado com sucesso
2025-07-10 00:22:09,606 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:22:09,606 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:22:09,606 INFO: Funcao validate_signals_for_candle iniciada para o sinal V0TVS5S0
2025-07-10 00:22:09,606 INFO: Buscando candle com signal_id: V0TVS5S0
2025-07-10 00:22:09,609 INFO: Candle encontrado para o signal_id: V0TVS5S0
2025-07-10 00:22:09,610 INFO: Funcao validate_signal iniciada para o signal V0TVS5S0
2025-07-10 00:22:09,610 INFO: Validando sinal V0TVS5S0 com gale items
2025-07-10 00:22:09,610 INFO: Gale G2 para o sinal V0TVS5S0 resultou em LOSS
2025-07-10 00:22:09,610 INFO: Atualizando candle com filtro: {'epoch': 1752117480}, update: {'$set': {'epoch': 1752117480, 'open': 2754.591, 'high': 2755.303, 'low': 2754.416, 'close': 2755.072, 'time': datetime.datetime(2025, 7, 10, 3, 18), 'signal': {'signal_id': 'V0TVS5S0', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 18), 'entry_time': datetime.datetime(2025, 7, 10, 0, 19), 'open_candle_timestamp': 1752117480, 'message_id': 9949, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117600, 'open_price': 2754.744, 'high': 2755.353, 'low': 2754.212, 'close_price': 2754.828, 'time': datetime.datetime(2025, 7, 10, 0, 20, 9, 607000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752117660, 'open_price': 2754.973, 'high': 2755.873, 'low': 2754.973, 'close_price': 2755.807, 'time': datetime.datetime(2025, 7, 10, 0, 21, 9, 605000), 'result': 'LOSS'}]}}
2025-07-10 00:22:09,613 INFO: Número de candles atualizados: 1
2025-07-10 00:22:09,613 INFO: Candle completo com gales atualizado para V0TVS5S0
2025-07-10 00:22:10,431 INFO: ✅ Resposta de resultado enviada para o sinal V0TVS5S0
2025-07-10 00:22:10,432 INFO: Sinal V0TVS5S0 validado como LOSS e notificação enviada
2025-07-10 00:22:10,432 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal V0TVS5S0
2025-07-10 00:22:10,432 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:23:09,602 INFO: 🔔 Novo candle detectado em 2025-07-10 03:23:00 UTC
2025-07-10 00:23:09,602 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:23:09,610 INFO: Buscando candle com filtro: {'epoch': 1752117780}
2025-07-10 00:23:09,613 INFO: Candle não encontrado
2025-07-10 00:23:09,630 INFO: Tendência HMA: FALL (HMA21=2756.28, HMA100=2756.34)
2025-07-10 00:23:09,631 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:23:09,631 INFO: 📈 Análise: EMA9=2756.23, EMA21=2756.14, trend_ema=RISE, trend_final=FALL, RSI=55.60, MACD=0.11/0.10, ATR=0.71, body=0.00, confidence=40
2025-07-10 00:23:09,632 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 00:23:09,632 INFO: Inserindo candle: Candle(2025-07-10 03:23:00, DOJI, O:2756.31, H:2756.31, L:2756.31, C:2756.31)
2025-07-10 00:23:09,635 INFO: Candle inserido com ID: 686f321d1d9c27c6b2f10c0b
2025-07-10 00:23:10,463 INFO: Atualizando candle com filtro: {'signal.signal_id': 'LE697JY8'}, update: {'$set': {'signal': {'signal_id': 'LE697JY8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 23, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 24), 'open_candle_timestamp': 1752117780, 'message_id': 9954, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:23:10,464 INFO: Número de candles atualizados: 1
2025-07-10 00:23:10,466 INFO: ✅ Mensagem enviada ao Telegram (ID: LE697JY8).
2025-07-10 00:24:09,606 INFO: 🔔 Novo candle detectado em 2025-07-10 03:24:00 UTC
2025-07-10 00:24:09,607 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:24:09,609 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:24:09,610 INFO: 🔔 Candle 1752117840 é menor ou igual ao entry_time 2025-07-10 00:24:00
2025-07-10 00:25:09,601 INFO: 🔔 Novo candle detectado em 2025-07-10 03:25:00 UTC
2025-07-10 00:25:09,602 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:25:09,605 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:25:09,605 INFO: 🔔 Candle 1752117900 é maior que o entry_time 2025-07-10 00:24:00
2025-07-10 00:25:09,605 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:25:09,605 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:25:09,608 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:25:09,609 INFO: 🔄 Candle 1752117780 já existe no banco, atualizando...
2025-07-10 00:25:09,609 INFO: 🔄 Candle 1752117780 não tem gale_items
2025-07-10 00:25:09,609 INFO: Atualizando candle com filtro: {'epoch': 1752117780}, update: {'$set': {'epoch': 1752117780, 'open': 2756.311, 'high': 2756.82, 'low': 2756.061, 'close': 2756.82, 'time': datetime.datetime(2025, 7, 10, 3, 23), 'signal': {'signal_id': 'LE697JY8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 23), 'entry_time': datetime.datetime(2025, 7, 10, 0, 24), 'open_candle_timestamp': 1752117780, 'message_id': 9954, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:25:09,612 INFO: Número de candles atualizados: 1
2025-07-10 00:25:09,612 INFO: ✅ Candle 1752117780 atualizado com sucesso
2025-07-10 00:25:09,612 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:25:09,613 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:25:09,613 INFO: Funcao validate_signals_for_candle iniciada para o sinal LE697JY8
2025-07-10 00:25:09,614 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:25:09,616 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:25:09,616 INFO: Funcao validate_signal iniciada para o signal LE697JY8
2025-07-10 00:25:09,617 INFO: Funcao validate_signal finalizada para o signal LE697JY8
2025-07-10 00:25:09,617 INFO: Validando sinal LE697JY8 sem gale items
2025-07-10 00:25:09,617 INFO: Sinal LE697JY8 adicionado à fila para G1
2025-07-10 00:25:09,617 INFO: Atualizando candle com filtro: {'epoch': 1752117780}, update: {'$set': {'epoch': 1752117780, 'open': 2756.311, 'high': 2756.82, 'low': 2756.061, 'close': 2756.82, 'time': datetime.datetime(2025, 7, 10, 3, 23), 'signal': {'signal_id': 'LE697JY8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 23), 'entry_time': datetime.datetime(2025, 7, 10, 0, 24), 'open_candle_timestamp': 1752117780, 'message_id': 9954, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117900, 'open_price': 2757.648, 'high': 2757.648, 'low': 2757.648, 'close_price': 2757.648, 'time': datetime.datetime(2025, 7, 10, 0, 25, 9, 617417), 'result': None}]}}
2025-07-10 00:25:09,620 INFO: Número de candles atualizados: 1
2025-07-10 00:25:09,620 INFO: Candle completo com gales atualizado para LE697JY8
2025-07-10 00:25:10,441 INFO: ✅ Resposta de resultado enviada para o sinal LE697JY8
2025-07-10 00:25:10,442 INFO: Sinal LE697JY8 validado como LOSS e notificação enviada
2025-07-10 00:25:10,442 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal LE697JY8
2025-07-10 00:25:10,442 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:26:09,594 INFO: 🔔 Novo candle detectado em 2025-07-10 03:26:00 UTC
2025-07-10 00:26:09,594 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:26:09,597 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:26:09,597 INFO: 🔔 Candle 1752117960 é maior que o entry_time 2025-07-10 00:24:00
2025-07-10 00:26:09,597 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:26:09,597 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:26:09,600 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:26:09,601 INFO: 🔄 Candle 1752117900 já existe no banco, atualizando...
2025-07-10 00:26:09,601 INFO: 🔄 Atualizando último gale item do candle 1752117900
2025-07-10 00:26:09,601 INFO: Atualizando candle com filtro: {'epoch': 1752117780}, update: {'$set': {'epoch': 1752117780, 'open': 2756.311, 'high': 2756.82, 'low': 2756.061, 'close': 2756.82, 'time': datetime.datetime(2025, 7, 10, 3, 23), 'signal': {'signal_id': 'LE697JY8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 23), 'entry_time': datetime.datetime(2025, 7, 10, 0, 24), 'open_candle_timestamp': 1752117780, 'message_id': 9954, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117900, 'open_price': 2757.648, 'high': 2757.685, 'low': 2756.15, 'close_price': 2756.332, 'time': datetime.datetime(2025, 7, 10, 0, 25, 9, 617000), 'result': None}]}}
2025-07-10 00:26:09,604 INFO: Número de candles atualizados: 1
2025-07-10 00:26:09,604 INFO: ✅ Candle 1752117780 atualizado com sucesso
2025-07-10 00:26:09,605 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:26:09,605 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:26:09,605 INFO: Funcao validate_signals_for_candle iniciada para o sinal LE697JY8
2025-07-10 00:26:09,605 INFO: Buscando candle com signal_id: LE697JY8
2025-07-10 00:26:09,608 INFO: Candle encontrado para o signal_id: LE697JY8
2025-07-10 00:26:09,608 INFO: Funcao validate_signal iniciada para o signal LE697JY8
2025-07-10 00:26:09,608 INFO: Validando sinal LE697JY8 com gale items
2025-07-10 00:26:09,609 INFO: Atualizando candle com filtro: {'epoch': 1752117780}, update: {'$set': {'epoch': 1752117780, 'open': 2756.311, 'high': 2756.82, 'low': 2756.061, 'close': 2756.82, 'time': datetime.datetime(2025, 7, 10, 3, 23), 'signal': {'signal_id': 'LE697JY8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 23), 'entry_time': datetime.datetime(2025, 7, 10, 0, 24), 'open_candle_timestamp': 1752117780, 'message_id': 9954, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752117900, 'open_price': 2757.648, 'high': 2757.685, 'low': 2756.15, 'close_price': 2756.332, 'time': datetime.datetime(2025, 7, 10, 0, 25, 9, 617000), 'result': 'WIN'}]}}
2025-07-10 00:26:09,612 INFO: Número de candles atualizados: 1
2025-07-10 00:26:09,612 INFO: Candle completo com gales atualizado para LE697JY8
2025-07-10 00:26:10,438 INFO: ✅ Resposta de resultado enviada para o sinal LE697JY8
2025-07-10 00:26:10,439 INFO: Sinal LE697JY8 validado como LOSS e notificação enviada
2025-07-10 00:26:10,439 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal LE697JY8
2025-07-10 00:26:10,439 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:27:09,594 INFO: 🔔 Novo candle detectado em 2025-07-10 03:27:00 UTC
2025-07-10 00:27:09,594 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:27:09,603 INFO: Buscando candle com filtro: {'epoch': 1752118020}
2025-07-10 00:27:09,607 INFO: Candle não encontrado
2025-07-10 00:27:09,623 INFO: Tendência HMA: FALL (HMA21=2756.38, HMA100=2755.55)
2025-07-10 00:27:09,624 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:27:09,624 INFO: 📈 Análise: EMA9=2756.23, EMA21=2756.10, trend_ema=RISE, trend_final=FALL, RSI=58.68, MACD=0.09/0.03, ATR=1.23, body=0.00, confidence=60
2025-07-10 00:27:09,624 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 00:27:09,624 INFO: Inserindo candle: Candle(2025-07-10 03:27:00, DOJI, O:2756.37, H:2756.37, L:2756.37, C:2756.37)
2025-07-10 00:27:09,628 INFO: Candle inserido com ID: 686f330d1d9c27c6b2f10c0c
2025-07-10 00:27:10,498 INFO: Atualizando candle com filtro: {'signal.signal_id': '8TKYSOSU'}, update: {'$set': {'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 27, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:27:10,502 INFO: Número de candles atualizados: 1
2025-07-10 00:27:10,502 INFO: ✅ Mensagem enviada ao Telegram (ID: 8TKYSOSU).
2025-07-10 00:28:09,605 INFO: 🔔 Novo candle detectado em 2025-07-10 03:28:00 UTC
2025-07-10 00:28:09,605 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:28:09,608 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:28:09,608 INFO: 🔔 Candle 1752118080 é menor ou igual ao entry_time 2025-07-10 00:28:00
2025-07-10 00:29:09,598 INFO: 🔔 Novo candle detectado em 2025-07-10 03:29:00 UTC
2025-07-10 00:29:09,599 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:29:09,602 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:29:09,602 INFO: 🔔 Candle 1752118140 é maior que o entry_time 2025-07-10 00:28:00
2025-07-10 00:29:09,602 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:29:09,602 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:29:09,605 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:29:09,606 INFO: 🔄 Candle 1752118020 já existe no banco, atualizando...
2025-07-10 00:29:09,606 INFO: 🔄 Candle 1752118020 não tem gale_items
2025-07-10 00:29:09,606 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:29:09,609 INFO: Número de candles atualizados: 1
2025-07-10 00:29:09,609 INFO: ✅ Candle 1752118020 atualizado com sucesso
2025-07-10 00:29:09,610 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:29:09,610 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:29:09,610 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8TKYSOSU
2025-07-10 00:29:09,610 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:29:09,613 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:29:09,614 INFO: Funcao validate_signal iniciada para o signal 8TKYSOSU
2025-07-10 00:29:09,614 INFO: Funcao validate_signal finalizada para o signal 8TKYSOSU
2025-07-10 00:29:09,614 INFO: Validando sinal 8TKYSOSU sem gale items
2025-07-10 00:29:09,614 INFO: Sinal 8TKYSOSU adicionado à fila para G1
2025-07-10 00:29:09,615 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118140, 'open_price': 2756.943, 'high': 2756.943, 'low': 2756.943, 'close_price': 2756.943, 'time': datetime.datetime(2025, 7, 10, 0, 29, 9, 614589), 'result': None}]}}
2025-07-10 00:29:09,617 INFO: Número de candles atualizados: 1
2025-07-10 00:29:09,617 INFO: Candle completo com gales atualizado para 8TKYSOSU
2025-07-10 00:29:10,440 INFO: ✅ Resposta de resultado enviada para o sinal 8TKYSOSU
2025-07-10 00:29:10,440 INFO: Sinal 8TKYSOSU validado como LOSS e notificação enviada
2025-07-10 00:29:10,440 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8TKYSOSU
2025-07-10 00:29:10,441 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:30:09,610 INFO: 🔔 Novo candle detectado em 2025-07-10 03:30:00 UTC
2025-07-10 00:30:09,611 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:30:09,614 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:30:09,615 INFO: 🔔 Candle 1752118200 é maior que o entry_time 2025-07-10 00:28:00
2025-07-10 00:30:09,615 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:30:09,615 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:30:09,617 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:30:09,618 INFO: 🔄 Candle 1752118140 já existe no banco, atualizando...
2025-07-10 00:30:09,618 INFO: 🔄 Atualizando último gale item do candle 1752118140
2025-07-10 00:30:09,618 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118140, 'open_price': 2756.943, 'high': 2758.502, 'low': 2756.943, 'close_price': 2757.979, 'time': datetime.datetime(2025, 7, 10, 0, 29, 9, 614000), 'result': None}]}}
2025-07-10 00:30:09,621 INFO: Número de candles atualizados: 1
2025-07-10 00:30:09,621 INFO: ✅ Candle 1752118020 atualizado com sucesso
2025-07-10 00:30:09,621 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:30:09,622 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:30:09,622 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8TKYSOSU
2025-07-10 00:30:09,622 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:30:09,624 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:30:09,625 INFO: Funcao validate_signal iniciada para o signal 8TKYSOSU
2025-07-10 00:30:09,625 INFO: Validando sinal 8TKYSOSU com gale items
2025-07-10 00:30:09,625 INFO: Gale G1 para o sinal 8TKYSOSU resultou em LOSS
2025-07-10 00:30:09,625 INFO: Sinal 8TKYSOSU adicionado à fila para G2
2025-07-10 00:30:09,626 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118140, 'open_price': 2756.943, 'high': 2758.502, 'low': 2756.943, 'close_price': 2757.979, 'time': datetime.datetime(2025, 7, 10, 0, 29, 9, 614000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752118200, 'open_price': 2757.846, 'high': 2757.846, 'low': 2757.846, 'close_price': 2757.846, 'time': datetime.datetime(2025, 7, 10, 0, 30, 9, 625567), 'result': None}]}}
2025-07-10 00:30:09,628 INFO: Número de candles atualizados: 1
2025-07-10 00:30:09,629 INFO: Candle completo com gales atualizado para 8TKYSOSU
2025-07-10 00:30:10,430 INFO: ✅ Resposta de resultado enviada para o sinal 8TKYSOSU
2025-07-10 00:30:10,430 INFO: Sinal 8TKYSOSU validado como LOSS e notificação enviada
2025-07-10 00:30:10,430 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8TKYSOSU
2025-07-10 00:30:10,430 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:31:09,591 INFO: 🔔 Novo candle detectado em 2025-07-10 03:31:00 UTC
2025-07-10 00:31:09,592 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:31:09,595 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:31:09,595 INFO: 🔔 Candle 1752118260 é maior que o entry_time 2025-07-10 00:28:00
2025-07-10 00:31:09,595 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:31:09,595 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:31:09,599 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:31:09,600 INFO: 🔄 Candle 1752118200 já existe no banco, atualizando...
2025-07-10 00:31:09,600 INFO: 🔄 Atualizando último gale item do candle 1752118200
2025-07-10 00:31:09,600 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118140, 'open_price': 2756.943, 'high': 2758.502, 'low': 2756.943, 'close_price': 2757.979, 'time': datetime.datetime(2025, 7, 10, 0, 29, 9, 614000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752118200, 'open_price': 2757.846, 'high': 2757.868, 'low': 2756.409, 'close_price': 2756.599, 'time': datetime.datetime(2025, 7, 10, 0, 30, 9, 625000), 'result': None}]}}
2025-07-10 00:31:09,603 INFO: Número de candles atualizados: 1
2025-07-10 00:31:09,603 INFO: ✅ Candle 1752118020 atualizado com sucesso
2025-07-10 00:31:09,604 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:31:09,604 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:31:09,604 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8TKYSOSU
2025-07-10 00:31:09,604 INFO: Buscando candle com signal_id: 8TKYSOSU
2025-07-10 00:31:09,606 INFO: Candle encontrado para o signal_id: 8TKYSOSU
2025-07-10 00:31:09,607 INFO: Funcao validate_signal iniciada para o signal 8TKYSOSU
2025-07-10 00:31:09,607 INFO: Validando sinal 8TKYSOSU com gale items
2025-07-10 00:31:09,608 INFO: Atualizando candle com filtro: {'epoch': 1752118020}, update: {'$set': {'epoch': 1752118020, 'open': 2756.366, 'high': 2758.028, 'low': 2756.366, 'close': 2757.231, 'time': datetime.datetime(2025, 7, 10, 3, 27), 'signal': {'signal_id': '8TKYSOSU', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 27), 'entry_time': datetime.datetime(2025, 7, 10, 0, 28), 'open_candle_timestamp': 1752118020, 'message_id': 9957, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118140, 'open_price': 2756.943, 'high': 2758.502, 'low': 2756.943, 'close_price': 2757.979, 'time': datetime.datetime(2025, 7, 10, 0, 29, 9, 614000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752118200, 'open_price': 2757.846, 'high': 2757.868, 'low': 2756.409, 'close_price': 2756.599, 'time': datetime.datetime(2025, 7, 10, 0, 30, 9, 625000), 'result': 'WIN'}]}}
2025-07-10 00:31:09,610 INFO: Número de candles atualizados: 1
2025-07-10 00:31:09,610 INFO: Candle completo com gales atualizado para 8TKYSOSU
2025-07-10 00:31:10,418 INFO: ✅ Resposta de resultado enviada para o sinal 8TKYSOSU
2025-07-10 00:31:10,419 INFO: Sinal 8TKYSOSU validado como LOSS e notificação enviada
2025-07-10 00:31:10,419 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8TKYSOSU
2025-07-10 00:31:10,419 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:32:09,594 INFO: 🔔 Novo candle detectado em 2025-07-10 03:32:00 UTC
2025-07-10 00:32:09,595 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:32:09,604 INFO: Buscando candle com filtro: {'epoch': 1752118320}
2025-07-10 00:32:09,606 INFO: Candle não encontrado
2025-07-10 00:32:09,625 INFO: Tendência HMA: FALL (HMA21=2754.53, HMA100=2754.48)
2025-07-10 00:32:09,625 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:32:09,625 INFO: 📈 Análise: EMA9=2754.57, EMA21=2754.79, trend_ema=FALL, trend_final=FALL, RSI=40.70, MACD=-0.34/-0.46, ATR=2.03, body=0.00, confidence=20
2025-07-10 00:32:09,626 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 00:32:09,626 INFO: Inserindo candle: Candle(2025-07-10 03:32:00, DOJI, O:2754.64, H:2754.64, L:2754.64, C:2754.64)
2025-07-10 00:32:09,628 INFO: Candle inserido com ID: 686f34391d9c27c6b2f10c0d
2025-07-10 00:32:10,437 INFO: Atualizando candle com filtro: {'signal.signal_id': 'IGPSM6FJ'}, update: {'$set': {'signal': {'signal_id': 'IGPSM6FJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 32, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 33), 'open_candle_timestamp': 1752118320, 'message_id': 9961, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:32:10,440 INFO: Número de candles atualizados: 1
2025-07-10 00:32:10,441 INFO: ✅ Mensagem enviada ao Telegram (ID: IGPSM6FJ).
2025-07-10 00:33:09,601 INFO: 🔔 Novo candle detectado em 2025-07-10 03:33:00 UTC
2025-07-10 00:33:09,601 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:33:09,604 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:33:09,604 INFO: 🔔 Candle 1752118380 é menor ou igual ao entry_time 2025-07-10 00:33:00
2025-07-10 00:34:09,605 INFO: 🔔 Novo candle detectado em 2025-07-10 03:34:00 UTC
2025-07-10 00:34:09,605 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:34:09,608 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:34:09,608 INFO: 🔔 Candle 1752118440 é maior que o entry_time 2025-07-10 00:33:00
2025-07-10 00:34:09,608 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:34:09,609 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:34:09,611 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:34:09,612 INFO: 🔄 Candle 1752118320 já existe no banco, atualizando...
2025-07-10 00:34:09,612 INFO: 🔄 Candle 1752118320 não tem gale_items
2025-07-10 00:34:09,612 INFO: Atualizando candle com filtro: {'epoch': 1752118320}, update: {'$set': {'epoch': 1752118320, 'open': 2754.637, 'high': 2755.632, 'low': 2754.303, 'close': 2755.537, 'time': datetime.datetime(2025, 7, 10, 3, 32), 'signal': {'signal_id': 'IGPSM6FJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 32), 'entry_time': datetime.datetime(2025, 7, 10, 0, 33), 'open_candle_timestamp': 1752118320, 'message_id': 9961, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:34:09,614 INFO: Número de candles atualizados: 1
2025-07-10 00:34:09,615 INFO: ✅ Candle 1752118320 atualizado com sucesso
2025-07-10 00:34:09,615 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:34:09,615 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:34:09,615 INFO: Funcao validate_signals_for_candle iniciada para o sinal IGPSM6FJ
2025-07-10 00:34:09,615 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:34:09,617 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:34:09,618 INFO: Funcao validate_signal iniciada para o signal IGPSM6FJ
2025-07-10 00:34:09,618 INFO: Funcao validate_signal finalizada para o signal IGPSM6FJ
2025-07-10 00:34:09,618 INFO: Validando sinal IGPSM6FJ sem gale items
2025-07-10 00:34:09,618 INFO: Sinal IGPSM6FJ adicionado à fila para G1
2025-07-10 00:34:09,618 INFO: Atualizando candle com filtro: {'epoch': 1752118320}, update: {'$set': {'epoch': 1752118320, 'open': 2754.637, 'high': 2755.632, 'low': 2754.303, 'close': 2755.537, 'time': datetime.datetime(2025, 7, 10, 3, 32), 'signal': {'signal_id': 'IGPSM6FJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 32), 'entry_time': datetime.datetime(2025, 7, 10, 0, 33), 'open_candle_timestamp': 1752118320, 'message_id': 9961, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118440, 'open_price': 2756.473, 'high': 2756.473, 'low': 2756.473, 'close_price': 2756.473, 'time': datetime.datetime(2025, 7, 10, 0, 34, 9, 618587), 'result': None}]}}
2025-07-10 00:34:09,620 INFO: Número de candles atualizados: 1
2025-07-10 00:34:09,620 INFO: Candle completo com gales atualizado para IGPSM6FJ
2025-07-10 00:34:10,434 INFO: ✅ Resposta de resultado enviada para o sinal IGPSM6FJ
2025-07-10 00:34:10,434 INFO: Sinal IGPSM6FJ validado como LOSS e notificação enviada
2025-07-10 00:34:10,434 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IGPSM6FJ
2025-07-10 00:34:10,435 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:35:26,683 ERROR: WebSocket error: [WinError 10054] Foi forçado o cancelamento de uma conexão existente pelo host remoto
2025-07-10 00:35:26,689 ERROR: [WinError 10054] Foi forçado o cancelamento de uma conexão existente pelo host remoto - goodbye
2025-07-10 00:35:26,689 WARNING: Conexão WebSocket fechada. Status: None, Mensagem: None
2025-07-10 00:35:26,692 ERROR: ❌ Conexão WebSocket perdida. Tentando reconectar...
2025-07-10 00:35:34,283 INFO: Websocket connected
2025-07-10 00:35:34,585 INFO: Token autorizado. Solicitando 200 candles históricos...
2025-07-10 00:35:34,586 INFO: Enviando requisição: {'ticks_history': 'R_25', 'style': 'candles', 'granularity': 60, 'count': 200, 'end': 'latest', 'subscribe': 1}
2025-07-10 00:35:34,586 INFO: ✅ Token autorizado às 2025-07-10 03:35:34.586518 UTC
2025-07-10 00:35:34,966 INFO: Recebendo histórico inicial com 200 candles
2025-07-10 00:35:34,967 INFO: Estrutura do primeiro candle: {'close': 2765.306, 'epoch': 1752106560, 'high': 2766.567, 'low': 2765.306, 'open': 2766.223}
2025-07-10 00:35:34,967 INFO: 📥 Histórico inicial recebido às 2025-07-10 03:35:34.967938 UTC. Total de candles: 400
2025-07-10 00:35:35,649 INFO: 🔔 Novo candle detectado em 2025-07-10 03:35:26 UTC
2025-07-10 00:35:35,649 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:35:35,659 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:35:35,660 INFO: 🔔 Candle 1752118526 é maior que o entry_time 2025-07-10 00:33:00
2025-07-10 00:35:35,660 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:35:35,660 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:35:35,663 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:35:35,663 WARNING: ⚠️ Não foi possível encontrar o candle anterior com open_time=1752118440
2025-07-10 00:35:35,663 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:35:35,663 INFO: Funcao validate_signals_for_candle iniciada para o sinal IGPSM6FJ
2025-07-10 00:35:35,664 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:35:35,668 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:35:35,668 INFO: Funcao validate_signal iniciada para o signal IGPSM6FJ
2025-07-10 00:35:35,669 INFO: Validando sinal IGPSM6FJ com gale items
2025-07-10 00:35:35,669 INFO: Gale G1 para o sinal IGPSM6FJ resultou em LOSS
2025-07-10 00:35:35,669 INFO: Sinal IGPSM6FJ adicionado à fila para G2
2025-07-10 00:35:35,670 INFO: Atualizando candle com filtro: {'epoch': 1752118320}, update: {'$set': {'epoch': 1752118320, 'open': 2754.637, 'high': 2755.632, 'low': 2754.303, 'close': 2755.537, 'time': datetime.datetime(2025, 7, 10, 3, 32), 'signal': {'signal_id': 'IGPSM6FJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 32), 'entry_time': datetime.datetime(2025, 7, 10, 0, 33), 'open_candle_timestamp': 1752118320, 'message_id': 9961, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118440, 'open_price': 2756.473, 'high': 2756.473, 'low': 2756.473, 'close_price': 2756.473, 'time': datetime.datetime(2025, 7, 10, 0, 34, 9, 618000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752118526, 'open_price': 2757.251, 'high': 2757.251, 'low': 2756.038, 'close_price': 2756.194, 'time': datetime.datetime(2025, 7, 10, 0, 35, 35, 669631), 'result': None}]}}
2025-07-10 00:35:35,673 INFO: Número de candles atualizados: 1
2025-07-10 00:35:35,673 INFO: Candle completo com gales atualizado para IGPSM6FJ
2025-07-10 00:35:36,560 INFO: ✅ Resposta de resultado enviada para o sinal IGPSM6FJ
2025-07-10 00:35:36,560 INFO: Sinal IGPSM6FJ validado como LOSS e notificação enviada
2025-07-10 00:35:36,562 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IGPSM6FJ
2025-07-10 00:35:36,562 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:36:09,653 INFO: 🔔 Novo candle detectado em 2025-07-10 03:36:00 UTC
2025-07-10 00:36:09,653 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:36:09,656 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:36:09,657 INFO: 🔔 Candle 1752118560 é maior que o entry_time 2025-07-10 00:33:00
2025-07-10 00:36:09,657 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:36:09,657 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:36:09,660 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:36:09,660 WARNING: ⚠️ Não foi possível encontrar o candle anterior com open_time=1752118526
2025-07-10 00:36:09,660 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:36:09,661 INFO: Funcao validate_signals_for_candle iniciada para o sinal IGPSM6FJ
2025-07-10 00:36:09,661 INFO: Buscando candle com signal_id: IGPSM6FJ
2025-07-10 00:36:09,663 INFO: Candle encontrado para o signal_id: IGPSM6FJ
2025-07-10 00:36:09,663 INFO: Funcao validate_signal iniciada para o signal IGPSM6FJ
2025-07-10 00:36:09,663 INFO: Validando sinal IGPSM6FJ com gale items
2025-07-10 00:36:09,663 INFO: Atualizando candle com filtro: {'epoch': 1752118320}, update: {'$set': {'epoch': 1752118320, 'open': 2754.637, 'high': 2755.632, 'low': 2754.303, 'close': 2755.537, 'time': datetime.datetime(2025, 7, 10, 3, 32), 'signal': {'signal_id': 'IGPSM6FJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 32), 'entry_time': datetime.datetime(2025, 7, 10, 0, 33), 'open_candle_timestamp': 1752118320, 'message_id': 9961, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118440, 'open_price': 2756.473, 'high': 2756.473, 'low': 2756.473, 'close_price': 2756.473, 'time': datetime.datetime(2025, 7, 10, 0, 34, 9, 618000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752118526, 'open_price': 2757.251, 'high': 2757.251, 'low': 2756.038, 'close_price': 2756.194, 'time': datetime.datetime(2025, 7, 10, 0, 35, 35, 669000), 'result': 'WIN'}]}}
2025-07-10 00:36:09,665 INFO: Número de candles atualizados: 1
2025-07-10 00:36:09,665 INFO: Candle completo com gales atualizado para IGPSM6FJ
2025-07-10 00:36:10,493 INFO: ✅ Resposta de resultado enviada para o sinal IGPSM6FJ
2025-07-10 00:36:10,493 INFO: Sinal IGPSM6FJ validado como LOSS e notificação enviada
2025-07-10 00:36:10,494 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IGPSM6FJ
2025-07-10 00:36:10,494 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:37:09,684 INFO: 🔔 Novo candle detectado em 2025-07-10 03:37:00 UTC
2025-07-10 00:37:09,684 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:37:09,693 INFO: Buscando candle com filtro: {'epoch': 1752118620}
2025-07-10 00:37:09,696 INFO: Candle não encontrado
2025-07-10 00:37:09,711 INFO: Tendência HMA: FALL (HMA21=2755.22, HMA100=2754.95)
2025-07-10 00:37:09,712 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:37:09,712 INFO: 📈 Análise: EMA9=2755.10, EMA21=2755.08, trend_ema=RISE, trend_final=FALL, RSI=47.67, MACD=-0.01/-0.04, ATR=0.67, body=0.00, confidence=40
2025-07-10 00:37:09,712 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 00:37:09,713 INFO: Inserindo candle: Candle(2025-07-10 03:37:00, DOJI, O:2755.01, H:2755.01, L:2755.01, C:2755.01)
2025-07-10 00:37:09,716 INFO: Candle inserido com ID: 686f35651d9c27c6b2f10c0e
2025-07-10 00:37:10,520 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KY0OT674'}, update: {'$set': {'signal': {'signal_id': 'KY0OT674', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 37, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 38), 'open_candle_timestamp': 1752118620, 'message_id': 9965, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:37:10,523 INFO: Número de candles atualizados: 1
2025-07-10 00:37:10,523 INFO: ✅ Mensagem enviada ao Telegram (ID: KY0OT674).
2025-07-10 00:38:09,635 INFO: 🔔 Novo candle detectado em 2025-07-10 03:38:00 UTC
2025-07-10 00:38:09,635 INFO: Buscando candle com signal_id: KY0OT674
2025-07-10 00:38:09,638 INFO: Candle encontrado para o signal_id: KY0OT674
2025-07-10 00:38:09,639 INFO: 🔔 Candle 1752118680 é menor ou igual ao entry_time 2025-07-10 00:38:00
2025-07-10 00:39:09,638 INFO: 🔔 Novo candle detectado em 2025-07-10 03:39:00 UTC
2025-07-10 00:39:09,638 INFO: Buscando candle com signal_id: KY0OT674
2025-07-10 00:39:09,642 INFO: Candle encontrado para o signal_id: KY0OT674
2025-07-10 00:39:09,642 INFO: 🔔 Candle 1752118740 é maior que o entry_time 2025-07-10 00:38:00
2025-07-10 00:39:09,642 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:39:09,642 INFO: Buscando candle com signal_id: KY0OT674
2025-07-10 00:39:09,645 INFO: Candle encontrado para o signal_id: KY0OT674
2025-07-10 00:39:09,645 INFO: 🔄 Candle 1752118620 já existe no banco, atualizando...
2025-07-10 00:39:09,645 INFO: 🔄 Candle 1752118620 não tem gale_items
2025-07-10 00:39:09,645 INFO: Atualizando candle com filtro: {'epoch': 1752118620}, update: {'$set': {'epoch': 1752118620, 'open': 2755.012, 'high': 2755.069, 'low': 2752.957, 'close': 2753.396, 'time': datetime.datetime(2025, 7, 10, 3, 37), 'signal': {'signal_id': 'KY0OT674', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 37), 'entry_time': datetime.datetime(2025, 7, 10, 0, 38), 'open_candle_timestamp': 1752118620, 'message_id': 9965, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:39:09,648 INFO: Número de candles atualizados: 1
2025-07-10 00:39:09,649 INFO: ✅ Candle 1752118620 atualizado com sucesso
2025-07-10 00:39:09,649 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:39:09,649 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:39:09,649 INFO: Funcao validate_signals_for_candle iniciada para o sinal KY0OT674
2025-07-10 00:39:09,650 INFO: Buscando candle com signal_id: KY0OT674
2025-07-10 00:39:09,651 INFO: Candle encontrado para o signal_id: KY0OT674
2025-07-10 00:39:09,652 INFO: Funcao validate_signal iniciada para o signal KY0OT674
2025-07-10 00:39:09,652 INFO: Funcao validate_signal finalizada para o signal KY0OT674
2025-07-10 00:39:09,652 INFO: Validando sinal KY0OT674 sem gale items
2025-07-10 00:39:09,652 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KY0OT674'}, update: {'$set': {'signal': {'signal_id': 'KY0OT674', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 37), 'entry_time': datetime.datetime(2025, 7, 10, 0, 38), 'open_candle_timestamp': 1752118620, 'message_id': 9965, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:39:09,655 INFO: Número de candles atualizados: 1
2025-07-10 00:39:09,655 INFO: Sinal atualizado no repositório para KY0OT674
2025-07-10 00:39:10,480 INFO: ✅ Resposta de resultado enviada para o sinal KY0OT674
2025-07-10 00:39:10,481 INFO: Sinal KY0OT674 validado como WIN e notificação enviada
2025-07-10 00:39:10,481 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal KY0OT674
2025-07-10 00:39:10,481 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:40:09,651 INFO: 🔔 Novo candle detectado em 2025-07-10 03:40:00 UTC
2025-07-10 00:40:09,652 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:40:09,661 INFO: Buscando candle com filtro: {'epoch': 1752118800}
2025-07-10 00:40:09,664 INFO: Candle não encontrado
2025-07-10 00:40:09,679 INFO: Tendência HMA: FALL (HMA21=2754.14, HMA100=2754.59)
2025-07-10 00:40:09,679 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:40:09,680 INFO: 📈 Análise: EMA9=2754.31, EMA21=2754.38, trend_ema=FALL, trend_final=FALL, RSI=44.95, MACD=-0.05/-0.03, ATR=0.72, body=0.00, confidence=40
2025-07-10 00:40:09,680 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 00:40:09,680 INFO: Inserindo candle: Candle(2025-07-10 03:40:00, DOJI, O:2754.23, H:2754.23, L:2754.23, C:2754.23)
2025-07-10 00:40:09,682 INFO: Candle inserido com ID: 686f36191d9c27c6b2f10c0f
2025-07-10 00:40:10,497 INFO: Atualizando candle com filtro: {'signal.signal_id': '4YKR9WEP'}, update: {'$set': {'signal': {'signal_id': '4YKR9WEP', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 40, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 41), 'open_candle_timestamp': 1752118800, 'message_id': 9967, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:40:10,499 INFO: Número de candles atualizados: 1
2025-07-10 00:40:10,500 INFO: ✅ Mensagem enviada ao Telegram (ID: 4YKR9WEP).
2025-07-10 00:41:09,647 INFO: 🔔 Novo candle detectado em 2025-07-10 03:41:00 UTC
2025-07-10 00:41:09,647 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:41:09,650 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:41:09,651 INFO: 🔔 Candle 1752118860 é menor ou igual ao entry_time 2025-07-10 00:41:00
2025-07-10 00:42:09,637 INFO: 🔔 Novo candle detectado em 2025-07-10 03:42:00 UTC
2025-07-10 00:42:09,637 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:42:09,639 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:42:09,640 INFO: 🔔 Candle 1752118920 é maior que o entry_time 2025-07-10 00:41:00
2025-07-10 00:42:09,640 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:42:09,640 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:42:09,642 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:42:09,643 INFO: 🔄 Candle 1752118800 já existe no banco, atualizando...
2025-07-10 00:42:09,643 INFO: 🔄 Candle 1752118800 não tem gale_items
2025-07-10 00:42:09,643 INFO: Atualizando candle com filtro: {'epoch': 1752118800}, update: {'$set': {'epoch': 1752118800, 'open': 2754.229, 'high': 2754.855, 'low': 2753.395, 'close': 2754.295, 'time': datetime.datetime(2025, 7, 10, 3, 40), 'signal': {'signal_id': '4YKR9WEP', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 40), 'entry_time': datetime.datetime(2025, 7, 10, 0, 41), 'open_candle_timestamp': 1752118800, 'message_id': 9967, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:42:09,645 INFO: Número de candles atualizados: 1
2025-07-10 00:42:09,646 INFO: ✅ Candle 1752118800 atualizado com sucesso
2025-07-10 00:42:09,646 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:42:09,646 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:42:09,646 INFO: Funcao validate_signals_for_candle iniciada para o sinal 4YKR9WEP
2025-07-10 00:42:09,646 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:42:09,648 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:42:09,648 INFO: Funcao validate_signal iniciada para o signal 4YKR9WEP
2025-07-10 00:42:09,648 INFO: Funcao validate_signal finalizada para o signal 4YKR9WEP
2025-07-10 00:42:09,648 INFO: Validando sinal 4YKR9WEP sem gale items
2025-07-10 00:42:09,649 INFO: Sinal 4YKR9WEP adicionado à fila para G1
2025-07-10 00:42:09,649 INFO: Atualizando candle com filtro: {'epoch': 1752118800}, update: {'$set': {'epoch': 1752118800, 'open': 2754.229, 'high': 2754.855, 'low': 2753.395, 'close': 2754.295, 'time': datetime.datetime(2025, 7, 10, 3, 40), 'signal': {'signal_id': '4YKR9WEP', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 40), 'entry_time': datetime.datetime(2025, 7, 10, 0, 41), 'open_candle_timestamp': 1752118800, 'message_id': 9967, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118920, 'open_price': 2755.109, 'high': 2755.109, 'low': 2755.109, 'close_price': 2755.109, 'time': datetime.datetime(2025, 7, 10, 0, 42, 9, 649476), 'result': None}]}}
2025-07-10 00:42:09,651 INFO: Número de candles atualizados: 1
2025-07-10 00:42:09,652 INFO: Candle completo com gales atualizado para 4YKR9WEP
2025-07-10 00:42:10,476 INFO: ✅ Resposta de resultado enviada para o sinal 4YKR9WEP
2025-07-10 00:42:10,477 INFO: Sinal 4YKR9WEP validado como LOSS e notificação enviada
2025-07-10 00:42:10,477 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 4YKR9WEP
2025-07-10 00:42:10,477 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:43:09,642 INFO: 🔔 Novo candle detectado em 2025-07-10 03:43:00 UTC
2025-07-10 00:43:09,642 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:43:09,645 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:43:09,646 INFO: 🔔 Candle 1752118980 é maior que o entry_time 2025-07-10 00:41:00
2025-07-10 00:43:09,646 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:43:09,646 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:43:09,649 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:43:09,649 INFO: 🔄 Candle 1752118920 já existe no banco, atualizando...
2025-07-10 00:43:09,649 INFO: 🔄 Atualizando último gale item do candle 1752118920
2025-07-10 00:43:09,650 INFO: Atualizando candle com filtro: {'epoch': 1752118800}, update: {'$set': {'epoch': 1752118800, 'open': 2754.229, 'high': 2754.855, 'low': 2753.395, 'close': 2754.295, 'time': datetime.datetime(2025, 7, 10, 3, 40), 'signal': {'signal_id': '4YKR9WEP', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 40), 'entry_time': datetime.datetime(2025, 7, 10, 0, 41), 'open_candle_timestamp': 1752118800, 'message_id': 9967, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118920, 'open_price': 2755.109, 'high': 2756.104, 'low': 2754.199, 'close_price': 2754.949, 'time': datetime.datetime(2025, 7, 10, 0, 42, 9, 649000), 'result': None}]}}
2025-07-10 00:43:09,652 INFO: Número de candles atualizados: 1
2025-07-10 00:43:09,653 INFO: ✅ Candle 1752118800 atualizado com sucesso
2025-07-10 00:43:09,653 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:43:09,653 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:43:09,653 INFO: Funcao validate_signals_for_candle iniciada para o sinal 4YKR9WEP
2025-07-10 00:43:09,654 INFO: Buscando candle com signal_id: 4YKR9WEP
2025-07-10 00:43:09,656 INFO: Candle encontrado para o signal_id: 4YKR9WEP
2025-07-10 00:43:09,656 INFO: Funcao validate_signal iniciada para o signal 4YKR9WEP
2025-07-10 00:43:09,656 INFO: Validando sinal 4YKR9WEP com gale items
2025-07-10 00:43:09,656 INFO: Atualizando candle com filtro: {'epoch': 1752118800}, update: {'$set': {'epoch': 1752118800, 'open': 2754.229, 'high': 2754.855, 'low': 2753.395, 'close': 2754.295, 'time': datetime.datetime(2025, 7, 10, 3, 40), 'signal': {'signal_id': '4YKR9WEP', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 40), 'entry_time': datetime.datetime(2025, 7, 10, 0, 41), 'open_candle_timestamp': 1752118800, 'message_id': 9967, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752118920, 'open_price': 2755.109, 'high': 2756.104, 'low': 2754.199, 'close_price': 2754.949, 'time': datetime.datetime(2025, 7, 10, 0, 42, 9, 649000), 'result': 'WIN'}]}}
2025-07-10 00:43:09,658 INFO: Número de candles atualizados: 1
2025-07-10 00:43:09,658 INFO: Candle completo com gales atualizado para 4YKR9WEP
2025-07-10 00:43:10,442 INFO: ✅ Resposta de resultado enviada para o sinal 4YKR9WEP
2025-07-10 00:43:10,443 INFO: Sinal 4YKR9WEP validado como LOSS e notificação enviada
2025-07-10 00:43:10,444 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 4YKR9WEP
2025-07-10 00:43:10,444 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:44:09,644 INFO: 🔔 Novo candle detectado em 2025-07-10 03:44:00 UTC
2025-07-10 00:44:09,645 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:44:09,653 INFO: Buscando candle com filtro: {'epoch': 1752119040}
2025-07-10 00:44:09,656 INFO: Candle não encontrado
2025-07-10 00:44:09,671 INFO: Tendência HMA: FALL (HMA21=2754.63, HMA100=2754.54)
2025-07-10 00:44:09,672 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:44:09,672 INFO: 📈 Análise: EMA9=2754.58, EMA21=2754.54, trend_ema=RISE, trend_final=FALL, RSI=59.97, MACD=-0.02/-0.11, ATR=1.13, body=0.00, confidence=60
2025-07-10 00:44:09,672 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 00:44:09,673 INFO: Inserindo candle: Candle(2025-07-10 03:44:00, DOJI, O:2754.96, H:2754.96, L:2754.96, C:2754.96)
2025-07-10 00:44:09,675 INFO: Candle inserido com ID: 686f37091d9c27c6b2f10c10
2025-07-10 00:44:10,470 INFO: Atualizando candle com filtro: {'signal.signal_id': '72K4UQY4'}, update: {'$set': {'signal': {'signal_id': '72K4UQY4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 44, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 45), 'open_candle_timestamp': 1752119040, 'message_id': 9970, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:44:10,473 INFO: Número de candles atualizados: 1
2025-07-10 00:44:10,473 INFO: ✅ Mensagem enviada ao Telegram (ID: 72K4UQY4).
2025-07-10 00:45:09,668 INFO: 🔔 Novo candle detectado em 2025-07-10 03:45:00 UTC
2025-07-10 00:45:09,668 INFO: Buscando candle com signal_id: 72K4UQY4
2025-07-10 00:45:09,671 INFO: Candle encontrado para o signal_id: 72K4UQY4
2025-07-10 00:45:09,671 INFO: 🔔 Candle 1752119100 é menor ou igual ao entry_time 2025-07-10 00:45:00
2025-07-10 00:46:09,662 INFO: 🔔 Novo candle detectado em 2025-07-10 03:46:00 UTC
2025-07-10 00:46:09,662 INFO: Buscando candle com signal_id: 72K4UQY4
2025-07-10 00:46:09,665 INFO: Candle encontrado para o signal_id: 72K4UQY4
2025-07-10 00:46:09,665 INFO: 🔔 Candle 1752119160 é maior que o entry_time 2025-07-10 00:45:00
2025-07-10 00:46:09,666 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:46:09,666 INFO: Buscando candle com signal_id: 72K4UQY4
2025-07-10 00:46:09,668 INFO: Candle encontrado para o signal_id: 72K4UQY4
2025-07-10 00:46:09,669 INFO: 🔄 Candle 1752119040 já existe no banco, atualizando...
2025-07-10 00:46:09,669 INFO: 🔄 Candle 1752119040 não tem gale_items
2025-07-10 00:46:09,669 INFO: Atualizando candle com filtro: {'epoch': 1752119040}, update: {'$set': {'epoch': 1752119040, 'open': 2754.96, 'high': 2755.375, 'low': 2753.279, 'close': 2753.52, 'time': datetime.datetime(2025, 7, 10, 3, 44), 'signal': {'signal_id': '72K4UQY4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 44), 'entry_time': datetime.datetime(2025, 7, 10, 0, 45), 'open_candle_timestamp': 1752119040, 'message_id': 9970, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:46:09,672 INFO: Número de candles atualizados: 1
2025-07-10 00:46:09,672 INFO: ✅ Candle 1752119040 atualizado com sucesso
2025-07-10 00:46:09,672 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:46:09,672 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:46:09,673 INFO: Funcao validate_signals_for_candle iniciada para o sinal 72K4UQY4
2025-07-10 00:46:09,673 INFO: Buscando candle com signal_id: 72K4UQY4
2025-07-10 00:46:09,675 INFO: Candle encontrado para o signal_id: 72K4UQY4
2025-07-10 00:46:09,675 INFO: Funcao validate_signal iniciada para o signal 72K4UQY4
2025-07-10 00:46:09,675 INFO: Funcao validate_signal finalizada para o signal 72K4UQY4
2025-07-10 00:46:09,676 INFO: Validando sinal 72K4UQY4 sem gale items
2025-07-10 00:46:09,676 INFO: Atualizando candle com filtro: {'signal.signal_id': '72K4UQY4'}, update: {'$set': {'signal': {'signal_id': '72K4UQY4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 44), 'entry_time': datetime.datetime(2025, 7, 10, 0, 45), 'open_candle_timestamp': 1752119040, 'message_id': 9970, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:46:09,678 INFO: Número de candles atualizados: 1
2025-07-10 00:46:09,678 INFO: Sinal atualizado no repositório para 72K4UQY4
2025-07-10 00:46:10,493 INFO: ✅ Resposta de resultado enviada para o sinal 72K4UQY4
2025-07-10 00:46:10,493 INFO: Sinal 72K4UQY4 validado como WIN e notificação enviada
2025-07-10 00:46:10,494 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 72K4UQY4
2025-07-10 00:46:10,494 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:47:09,634 INFO: 🔔 Novo candle detectado em 2025-07-10 03:47:00 UTC
2025-07-10 00:47:09,634 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:47:09,642 INFO: Buscando candle com filtro: {'epoch': 1752119220}
2025-07-10 00:47:09,645 INFO: Candle não encontrado
2025-07-10 00:47:09,660 INFO: Tendência HMA: FALL (HMA21=2757.78, HMA100=2756.86)
2025-07-10 00:47:09,661 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:47:09,661 INFO: 📈 Análise: EMA9=2757.43, EMA21=2756.93, trend_ema=RISE, trend_final=FALL, RSI=78.08, MACD=0.57/0.56, ATR=1.98, body=0.00, confidence=80
2025-07-10 00:47:09,661 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 00:47:09,662 INFO: Inserindo candle: Candle(2025-07-10 03:47:00, DOJI, O:2757.73, H:2757.73, L:2757.73, C:2757.73)
2025-07-10 00:47:09,664 INFO: Candle inserido com ID: 686f37bd1d9c27c6b2f10c11
2025-07-10 00:47:10,482 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WFUS1SHG'}, update: {'$set': {'signal': {'signal_id': 'WFUS1SHG', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 47, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 48), 'open_candle_timestamp': 1752119220, 'message_id': 9973, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:47:10,485 INFO: Número de candles atualizados: 1
2025-07-10 00:47:10,486 INFO: ✅ Mensagem enviada ao Telegram (ID: WFUS1SHG).
2025-07-10 00:48:09,652 INFO: 🔔 Novo candle detectado em 2025-07-10 03:48:00 UTC
2025-07-10 00:48:09,652 INFO: Buscando candle com signal_id: WFUS1SHG
2025-07-10 00:48:09,655 INFO: Candle encontrado para o signal_id: WFUS1SHG
2025-07-10 00:48:09,655 INFO: 🔔 Candle 1752119280 é menor ou igual ao entry_time 2025-07-10 00:48:00
2025-07-10 00:49:09,646 INFO: 🔔 Novo candle detectado em 2025-07-10 03:49:00 UTC
2025-07-10 00:49:09,647 INFO: Buscando candle com signal_id: WFUS1SHG
2025-07-10 00:49:09,650 INFO: Candle encontrado para o signal_id: WFUS1SHG
2025-07-10 00:49:09,650 INFO: 🔔 Candle 1752119340 é maior que o entry_time 2025-07-10 00:48:00
2025-07-10 00:49:09,650 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:49:09,650 INFO: Buscando candle com signal_id: WFUS1SHG
2025-07-10 00:49:09,653 INFO: Candle encontrado para o signal_id: WFUS1SHG
2025-07-10 00:49:09,653 INFO: 🔄 Candle 1752119220 já existe no banco, atualizando...
2025-07-10 00:49:09,653 INFO: 🔄 Candle 1752119220 não tem gale_items
2025-07-10 00:49:09,654 INFO: Atualizando candle com filtro: {'epoch': 1752119220}, update: {'$set': {'epoch': 1752119220, 'open': 2757.728, 'high': 2758.355, 'low': 2756.999, 'close': 2756.999, 'time': datetime.datetime(2025, 7, 10, 3, 47), 'signal': {'signal_id': 'WFUS1SHG', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 47), 'entry_time': datetime.datetime(2025, 7, 10, 0, 48), 'open_candle_timestamp': 1752119220, 'message_id': 9973, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:49:09,656 INFO: Número de candles atualizados: 1
2025-07-10 00:49:09,656 INFO: ✅ Candle 1752119220 atualizado com sucesso
2025-07-10 00:49:09,656 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:49:09,657 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:49:09,657 INFO: Funcao validate_signals_for_candle iniciada para o sinal WFUS1SHG
2025-07-10 00:49:09,657 INFO: Buscando candle com signal_id: WFUS1SHG
2025-07-10 00:49:09,659 INFO: Candle encontrado para o signal_id: WFUS1SHG
2025-07-10 00:49:09,659 INFO: Funcao validate_signal iniciada para o signal WFUS1SHG
2025-07-10 00:49:09,659 INFO: Funcao validate_signal finalizada para o signal WFUS1SHG
2025-07-10 00:49:09,659 INFO: Validando sinal WFUS1SHG sem gale items
2025-07-10 00:49:09,660 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WFUS1SHG'}, update: {'$set': {'signal': {'signal_id': 'WFUS1SHG', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 47), 'entry_time': datetime.datetime(2025, 7, 10, 0, 48), 'open_candle_timestamp': 1752119220, 'message_id': 9973, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:49:09,662 INFO: Número de candles atualizados: 1
2025-07-10 00:49:09,662 INFO: Sinal atualizado no repositório para WFUS1SHG
2025-07-10 00:49:10,507 INFO: ✅ Resposta de resultado enviada para o sinal WFUS1SHG
2025-07-10 00:49:10,508 INFO: Sinal WFUS1SHG validado como WIN e notificação enviada
2025-07-10 00:49:10,508 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WFUS1SHG
2025-07-10 00:49:10,508 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:50:09,699 INFO: 🔔 Novo candle detectado em 2025-07-10 03:50:00 UTC
2025-07-10 00:50:09,699 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:50:09,707 INFO: Buscando candle com filtro: {'epoch': 1752119400}
2025-07-10 00:50:09,710 INFO: Candle não encontrado
2025-07-10 00:50:09,725 INFO: Tendência HMA: FALL (HMA21=2756.31, HMA100=2756.39)
2025-07-10 00:50:09,726 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:50:09,726 INFO: 📈 Análise: EMA9=2756.40, EMA21=2756.54, trend_ema=FALL, trend_final=FALL, RSI=38.84, MACD=-0.09/-0.00, ATR=0.62, body=0.00, confidence=80
2025-07-10 00:50:09,726 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 00:50:09,727 INFO: Inserindo candle: Candle(2025-07-10 03:50:00, DOJI, O:2756.08, H:2756.08, L:2756.08, C:2756.08)
2025-07-10 00:50:09,729 INFO: Candle inserido com ID: 686f38711d9c27c6b2f10c12
2025-07-10 00:50:10,541 INFO: Atualizando candle com filtro: {'signal.signal_id': '9EOE9D7L'}, update: {'$set': {'signal': {'signal_id': '9EOE9D7L', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 50, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 51), 'open_candle_timestamp': 1752119400, 'message_id': 9976, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:50:10,544 INFO: Número de candles atualizados: 1
2025-07-10 00:50:10,545 INFO: ✅ Mensagem enviada ao Telegram (ID: 9EOE9D7L).
2025-07-10 00:51:09,634 INFO: 🔔 Novo candle detectado em 2025-07-10 03:51:00 UTC
2025-07-10 00:51:09,634 INFO: Buscando candle com signal_id: 9EOE9D7L
2025-07-10 00:51:09,637 INFO: Candle encontrado para o signal_id: 9EOE9D7L
2025-07-10 00:51:09,637 INFO: 🔔 Candle 1752119460 é menor ou igual ao entry_time 2025-07-10 00:51:00
2025-07-10 00:52:09,645 INFO: 🔔 Novo candle detectado em 2025-07-10 03:52:00 UTC
2025-07-10 00:52:09,645 INFO: Buscando candle com signal_id: 9EOE9D7L
2025-07-10 00:52:09,648 INFO: Candle encontrado para o signal_id: 9EOE9D7L
2025-07-10 00:52:09,649 INFO: 🔔 Candle 1752119520 é maior que o entry_time 2025-07-10 00:51:00
2025-07-10 00:52:09,649 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:52:09,649 INFO: Buscando candle com signal_id: 9EOE9D7L
2025-07-10 00:52:09,651 INFO: Candle encontrado para o signal_id: 9EOE9D7L
2025-07-10 00:52:09,652 INFO: 🔄 Candle 1752119400 já existe no banco, atualizando...
2025-07-10 00:52:09,652 INFO: 🔄 Candle 1752119400 não tem gale_items
2025-07-10 00:52:09,652 INFO: Atualizando candle com filtro: {'epoch': 1752119400}, update: {'$set': {'epoch': 1752119400, 'open': 2756.081, 'high': 2756.662, 'low': 2755.677, 'close': 2755.677, 'time': datetime.datetime(2025, 7, 10, 3, 50), 'signal': {'signal_id': '9EOE9D7L', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 50), 'entry_time': datetime.datetime(2025, 7, 10, 0, 51), 'open_candle_timestamp': 1752119400, 'message_id': 9976, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:52:09,655 INFO: Número de candles atualizados: 1
2025-07-10 00:52:09,655 INFO: ✅ Candle 1752119400 atualizado com sucesso
2025-07-10 00:52:09,655 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:52:09,656 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:52:09,656 INFO: Funcao validate_signals_for_candle iniciada para o sinal 9EOE9D7L
2025-07-10 00:52:09,656 INFO: Buscando candle com signal_id: 9EOE9D7L
2025-07-10 00:52:09,658 INFO: Candle encontrado para o signal_id: 9EOE9D7L
2025-07-10 00:52:09,658 INFO: Funcao validate_signal iniciada para o signal 9EOE9D7L
2025-07-10 00:52:09,658 INFO: Funcao validate_signal finalizada para o signal 9EOE9D7L
2025-07-10 00:52:09,658 INFO: Validando sinal 9EOE9D7L sem gale items
2025-07-10 00:52:09,659 INFO: Atualizando candle com filtro: {'signal.signal_id': '9EOE9D7L'}, update: {'$set': {'signal': {'signal_id': '9EOE9D7L', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 50), 'entry_time': datetime.datetime(2025, 7, 10, 0, 51), 'open_candle_timestamp': 1752119400, 'message_id': 9976, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 00:52:09,661 INFO: Número de candles atualizados: 1
2025-07-10 00:52:09,661 INFO: Sinal atualizado no repositório para 9EOE9D7L
2025-07-10 00:52:10,528 INFO: ✅ Resposta de resultado enviada para o sinal 9EOE9D7L
2025-07-10 00:52:10,528 INFO: Sinal 9EOE9D7L validado como WIN e notificação enviada
2025-07-10 00:52:10,529 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 9EOE9D7L
2025-07-10 00:52:10,529 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:53:09,662 INFO: 🔔 Novo candle detectado em 2025-07-10 03:53:00 UTC
2025-07-10 00:53:09,662 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:53:09,671 INFO: Buscando candle com filtro: {'epoch': 1752119580}
2025-07-10 00:53:09,674 INFO: Candle não encontrado
2025-07-10 00:53:09,688 INFO: Tendência HMA: FALL (HMA21=2755.94, HMA100=2755.84)
2025-07-10 00:53:09,689 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:53:09,689 INFO: 📈 Análise: EMA9=2755.89, EMA21=2755.91, trend_ema=FALL, trend_final=FALL, RSI=46.16, MACD=0.02/0.08, ATR=0.70, body=0.00, confidence=40
2025-07-10 00:53:09,689 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 00:53:09,690 INFO: Inserindo candle: Candle(2025-07-10 03:53:00, DOJI, O:2755.73, H:2755.73, L:2755.73, C:2755.73)
2025-07-10 00:53:09,693 INFO: Candle inserido com ID: 686f39251d9c27c6b2f10c13
2025-07-10 00:53:10,511 INFO: Atualizando candle com filtro: {'signal.signal_id': 'EFO0RT7Z'}, update: {'$set': {'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 53, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:53:10,513 INFO: Número de candles atualizados: 1
2025-07-10 00:53:10,514 INFO: ✅ Mensagem enviada ao Telegram (ID: EFO0RT7Z).
2025-07-10 00:54:09,638 INFO: 🔔 Novo candle detectado em 2025-07-10 03:54:00 UTC
2025-07-10 00:54:09,639 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:54:09,641 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:54:09,641 INFO: 🔔 Candle 1752119640 é menor ou igual ao entry_time 2025-07-10 00:54:00
2025-07-10 00:55:09,656 INFO: 🔔 Novo candle detectado em 2025-07-10 03:55:00 UTC
2025-07-10 00:55:09,656 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:55:09,660 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:55:09,660 INFO: 🔔 Candle 1752119700 é maior que o entry_time 2025-07-10 00:54:00
2025-07-10 00:55:09,660 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:55:09,660 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:55:09,663 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:55:09,663 INFO: 🔄 Candle 1752119580 já existe no banco, atualizando...
2025-07-10 00:55:09,663 INFO: 🔄 Candle 1752119580 não tem gale_items
2025-07-10 00:55:09,663 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 00:55:09,666 INFO: Número de candles atualizados: 1
2025-07-10 00:55:09,666 INFO: ✅ Candle 1752119580 atualizado com sucesso
2025-07-10 00:55:09,666 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:55:09,666 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:55:09,667 INFO: Funcao validate_signals_for_candle iniciada para o sinal EFO0RT7Z
2025-07-10 00:55:09,667 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:55:09,669 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:55:09,669 INFO: Funcao validate_signal iniciada para o signal EFO0RT7Z
2025-07-10 00:55:09,669 INFO: Funcao validate_signal finalizada para o signal EFO0RT7Z
2025-07-10 00:55:09,670 INFO: Validando sinal EFO0RT7Z sem gale items
2025-07-10 00:55:09,670 INFO: Sinal EFO0RT7Z adicionado à fila para G1
2025-07-10 00:55:09,670 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752119700, 'open_price': 2757.161, 'high': 2757.161, 'low': 2757.161, 'close_price': 2757.161, 'time': datetime.datetime(2025, 7, 10, 0, 55, 9, 670249), 'result': None}]}}
2025-07-10 00:55:09,672 INFO: Número de candles atualizados: 1
2025-07-10 00:55:09,672 INFO: Candle completo com gales atualizado para EFO0RT7Z
2025-07-10 00:55:10,485 INFO: ✅ Resposta de resultado enviada para o sinal EFO0RT7Z
2025-07-10 00:55:10,485 INFO: Sinal EFO0RT7Z validado como LOSS e notificação enviada
2025-07-10 00:55:10,486 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal EFO0RT7Z
2025-07-10 00:55:10,486 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:56:09,629 INFO: 🔔 Novo candle detectado em 2025-07-10 03:56:00 UTC
2025-07-10 00:56:09,629 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:56:09,632 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:56:09,632 INFO: 🔔 Candle 1752119760 é maior que o entry_time 2025-07-10 00:54:00
2025-07-10 00:56:09,632 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:56:09,633 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:56:09,634 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:56:09,635 INFO: 🔄 Candle 1752119700 já existe no banco, atualizando...
2025-07-10 00:56:09,635 INFO: 🔄 Atualizando último gale item do candle 1752119700
2025-07-10 00:56:09,636 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752119700, 'open_price': 2757.161, 'high': 2757.287, 'low': 2756.751, 'close_price': 2757.287, 'time': datetime.datetime(2025, 7, 10, 0, 55, 9, 670000), 'result': None}]}}
2025-07-10 00:56:09,638 INFO: Número de candles atualizados: 1
2025-07-10 00:56:09,638 INFO: ✅ Candle 1752119580 atualizado com sucesso
2025-07-10 00:56:09,639 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:56:09,639 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:56:09,639 INFO: Funcao validate_signals_for_candle iniciada para o sinal EFO0RT7Z
2025-07-10 00:56:09,639 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:56:09,641 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:56:09,641 INFO: Funcao validate_signal iniciada para o signal EFO0RT7Z
2025-07-10 00:56:09,642 INFO: Validando sinal EFO0RT7Z com gale items
2025-07-10 00:56:09,642 INFO: Gale G1 para o sinal EFO0RT7Z resultou em LOSS
2025-07-10 00:56:09,642 INFO: Sinal EFO0RT7Z adicionado à fila para G2
2025-07-10 00:56:09,642 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752119700, 'open_price': 2757.161, 'high': 2757.287, 'low': 2756.751, 'close_price': 2757.287, 'time': datetime.datetime(2025, 7, 10, 0, 55, 9, 670000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752119760, 'open_price': 2757.162, 'high': 2757.162, 'low': 2757.162, 'close_price': 2757.162, 'time': datetime.datetime(2025, 7, 10, 0, 56, 9, 642445), 'result': None}]}}
2025-07-10 00:56:09,645 INFO: Número de candles atualizados: 1
2025-07-10 00:56:09,645 INFO: Candle completo com gales atualizado para EFO0RT7Z
2025-07-10 00:56:10,465 INFO: ✅ Resposta de resultado enviada para o sinal EFO0RT7Z
2025-07-10 00:56:10,466 INFO: Sinal EFO0RT7Z validado como LOSS e notificação enviada
2025-07-10 00:56:10,466 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal EFO0RT7Z
2025-07-10 00:56:10,466 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 00:57:09,641 INFO: 🔔 Novo candle detectado em 2025-07-10 03:57:00 UTC
2025-07-10 00:57:09,641 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:57:09,643 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:57:09,645 INFO: 🔔 Candle 1752119820 é maior que o entry_time 2025-07-10 00:54:00
2025-07-10 00:57:09,645 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 00:57:09,645 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:57:09,647 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:57:09,648 INFO: 🔄 Candle 1752119760 já existe no banco, atualizando...
2025-07-10 00:57:09,648 INFO: 🔄 Atualizando último gale item do candle 1752119760
2025-07-10 00:57:09,648 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752119700, 'open_price': 2757.161, 'high': 2757.287, 'low': 2756.751, 'close_price': 2757.287, 'time': datetime.datetime(2025, 7, 10, 0, 55, 9, 670000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752119760, 'open_price': 2757.162, 'high': 2757.892, 'low': 2756.808, 'close_price': 2757.392, 'time': datetime.datetime(2025, 7, 10, 0, 56, 9, 642000), 'result': None}]}}
2025-07-10 00:57:09,650 INFO: Número de candles atualizados: 1
2025-07-10 00:57:09,651 INFO: ✅ Candle 1752119580 atualizado com sucesso
2025-07-10 00:57:09,651 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 00:57:09,651 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 00:57:09,652 INFO: Funcao validate_signals_for_candle iniciada para o sinal EFO0RT7Z
2025-07-10 00:57:09,652 INFO: Buscando candle com signal_id: EFO0RT7Z
2025-07-10 00:57:09,653 INFO: Candle encontrado para o signal_id: EFO0RT7Z
2025-07-10 00:57:09,654 INFO: Funcao validate_signal iniciada para o signal EFO0RT7Z
2025-07-10 00:57:09,654 INFO: Validando sinal EFO0RT7Z com gale items
2025-07-10 00:57:09,654 INFO: Gale G2 para o sinal EFO0RT7Z resultou em LOSS
2025-07-10 00:57:09,654 INFO: Atualizando candle com filtro: {'epoch': 1752119580}, update: {'$set': {'epoch': 1752119580, 'open': 2755.732, 'high': 2756.789, 'low': 2755.623, 'close': 2756.273, 'time': datetime.datetime(2025, 7, 10, 3, 53), 'signal': {'signal_id': 'EFO0RT7Z', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 53), 'entry_time': datetime.datetime(2025, 7, 10, 0, 54), 'open_candle_timestamp': 1752119580, 'message_id': 9978, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752119700, 'open_price': 2757.161, 'high': 2757.287, 'low': 2756.751, 'close_price': 2757.287, 'time': datetime.datetime(2025, 7, 10, 0, 55, 9, 670000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752119760, 'open_price': 2757.162, 'high': 2757.892, 'low': 2756.808, 'close_price': 2757.392, 'time': datetime.datetime(2025, 7, 10, 0, 56, 9, 642000), 'result': 'LOSS'}]}}
2025-07-10 00:57:09,657 INFO: Número de candles atualizados: 1
2025-07-10 00:57:09,657 INFO: Candle completo com gales atualizado para EFO0RT7Z
2025-07-10 00:57:10,481 INFO: ✅ Resposta de resultado enviada para o sinal EFO0RT7Z
2025-07-10 00:57:10,482 INFO: Sinal EFO0RT7Z validado como LOSS e notificação enviada
2025-07-10 00:57:10,482 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal EFO0RT7Z
2025-07-10 00:57:10,482 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 00:58:09,683 INFO: 🔔 Novo candle detectado em 2025-07-10 03:58:00 UTC
2025-07-10 00:58:09,684 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 00:58:09,692 INFO: Buscando candle com filtro: {'epoch': 1752119880}
2025-07-10 00:58:09,695 INFO: Candle não encontrado
2025-07-10 00:58:09,710 INFO: Tendência HMA: FALL (HMA21=2757.51, HMA100=2757.74)
2025-07-10 00:58:09,710 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 00:58:09,711 INFO: 📈 Análise: EMA9=2757.65, EMA21=2757.63, trend_ema=RISE, trend_final=FALL, RSI=57.03, MACD=0.04/0.06, ATR=0.78, body=0.00, confidence=20
2025-07-10 00:58:09,711 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 00:58:09,712 INFO: Inserindo candle: Candle(2025-07-10 03:58:00, DOJI, O:2757.82, H:2757.82, L:2757.82, C:2757.82)
2025-07-10 00:58:09,714 INFO: Candle inserido com ID: 686f3a511d9c27c6b2f10c14
2025-07-10 00:58:10,520 INFO: Atualizando candle com filtro: {'signal.signal_id': '1PV5XFRJ'}, update: {'$set': {'signal': {'signal_id': '1PV5XFRJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 21, 58, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 0, 59), 'open_candle_timestamp': 1752119880, 'message_id': 9982, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 00:58:10,522 INFO: Número de candles atualizados: 1
2025-07-10 00:58:10,523 INFO: ✅ Mensagem enviada ao Telegram (ID: 1PV5XFRJ).
2025-07-10 00:59:09,649 INFO: 🔔 Novo candle detectado em 2025-07-10 03:59:00 UTC
2025-07-10 00:59:09,649 INFO: Buscando candle com signal_id: 1PV5XFRJ
2025-07-10 00:59:09,652 INFO: Candle encontrado para o signal_id: 1PV5XFRJ
2025-07-10 00:59:09,652 INFO: 🔔 Candle 1752119940 é menor ou igual ao entry_time 2025-07-10 00:59:00
2025-07-10 01:00:09,717 INFO: 🔔 Novo candle detectado em 2025-07-10 04:00:00 UTC
2025-07-10 01:00:09,718 INFO: Buscando candle com signal_id: 1PV5XFRJ
2025-07-10 01:00:09,721 INFO: Candle encontrado para o signal_id: 1PV5XFRJ
2025-07-10 01:00:09,721 INFO: 🔔 Candle 1752120000 é maior que o entry_time 2025-07-10 00:59:00
2025-07-10 01:00:09,721 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:00:09,722 INFO: Buscando candle com signal_id: 1PV5XFRJ
2025-07-10 01:00:09,724 INFO: Candle encontrado para o signal_id: 1PV5XFRJ
2025-07-10 01:00:09,724 INFO: 🔄 Candle 1752119880 já existe no banco, atualizando...
2025-07-10 01:00:09,725 INFO: 🔄 Candle 1752119880 não tem gale_items
2025-07-10 01:00:09,725 INFO: Atualizando candle com filtro: {'epoch': 1752119880}, update: {'$set': {'epoch': 1752119880, 'open': 2757.823, 'high': 2758.313, 'low': 2757.413, 'close': 2757.517, 'time': datetime.datetime(2025, 7, 10, 3, 58), 'signal': {'signal_id': '1PV5XFRJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 58), 'entry_time': datetime.datetime(2025, 7, 10, 0, 59), 'open_candle_timestamp': 1752119880, 'message_id': 9982, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:00:09,727 INFO: Número de candles atualizados: 1
2025-07-10 01:00:09,727 INFO: ✅ Candle 1752119880 atualizado com sucesso
2025-07-10 01:00:09,728 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:00:09,728 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:00:09,728 INFO: Funcao validate_signals_for_candle iniciada para o sinal 1PV5XFRJ
2025-07-10 01:00:09,728 INFO: Buscando candle com signal_id: 1PV5XFRJ
2025-07-10 01:00:09,730 INFO: Candle encontrado para o signal_id: 1PV5XFRJ
2025-07-10 01:00:09,730 INFO: Funcao validate_signal iniciada para o signal 1PV5XFRJ
2025-07-10 01:00:09,730 INFO: Funcao validate_signal finalizada para o signal 1PV5XFRJ
2025-07-10 01:00:09,731 INFO: Validando sinal 1PV5XFRJ sem gale items
2025-07-10 01:00:09,731 INFO: Atualizando candle com filtro: {'signal.signal_id': '1PV5XFRJ'}, update: {'$set': {'signal': {'signal_id': '1PV5XFRJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 58), 'entry_time': datetime.datetime(2025, 7, 10, 0, 59), 'open_candle_timestamp': 1752119880, 'message_id': 9982, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:00:09,733 INFO: Número de candles atualizados: 1
2025-07-10 01:00:09,733 INFO: Sinal atualizado no repositório para 1PV5XFRJ
2025-07-10 01:00:10,535 INFO: ✅ Resposta de resultado enviada para o sinal 1PV5XFRJ
2025-07-10 01:00:10,536 INFO: Sinal 1PV5XFRJ validado como WIN e notificação enviada
2025-07-10 01:00:10,536 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 1PV5XFRJ
2025-07-10 01:00:10,537 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:01:09,650 INFO: 🔔 Novo candle detectado em 2025-07-10 04:01:00 UTC
2025-07-10 01:01:09,651 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:01:09,660 INFO: Buscando candle com filtro: {'epoch': 1752120060}
2025-07-10 01:01:09,662 INFO: Candle não encontrado
2025-07-10 01:01:09,677 INFO: Tendência HMA: FALL (HMA21=2756.81, HMA100=2756.76)
2025-07-10 01:01:09,677 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:01:09,677 INFO: 📈 Análise: EMA9=2756.82, EMA21=2756.86, trend_ema=FALL, trend_final=FALL, RSI=44.45, MACD=-0.04/-0.03, ATR=0.81, body=0.00, confidence=60
2025-07-10 01:01:09,678 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:01:09,678 INFO: Inserindo candle: Candle(2025-07-10 04:01:00, DOJI, O:2756.71, H:2756.71, L:2756.71, C:2756.71)
2025-07-10 01:01:09,680 INFO: Candle inserido com ID: 686f3b051d9c27c6b2f10c15
2025-07-10 01:01:10,508 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XYEEIVR4'}, update: {'$set': {'signal': {'signal_id': 'XYEEIVR4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 1, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 2), 'open_candle_timestamp': 1752120060, 'message_id': 9984, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:01:10,511 INFO: Número de candles atualizados: 1
2025-07-10 01:01:10,511 INFO: ✅ Mensagem enviada ao Telegram (ID: XYEEIVR4).
2025-07-10 01:02:09,659 INFO: 🔔 Novo candle detectado em 2025-07-10 04:02:00 UTC
2025-07-10 01:02:09,659 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:02:09,662 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:02:09,662 INFO: 🔔 Candle 1752120120 é menor ou igual ao entry_time 2025-07-10 01:02:00
2025-07-10 01:03:09,680 INFO: 🔔 Novo candle detectado em 2025-07-10 04:03:00 UTC
2025-07-10 01:03:09,680 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:03:09,683 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:03:09,684 INFO: 🔔 Candle 1752120180 é maior que o entry_time 2025-07-10 01:02:00
2025-07-10 01:03:09,684 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:03:09,684 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:03:09,687 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:03:09,687 INFO: 🔄 Candle 1752120060 já existe no banco, atualizando...
2025-07-10 01:03:09,687 INFO: 🔄 Candle 1752120060 não tem gale_items
2025-07-10 01:03:09,687 INFO: Atualizando candle com filtro: {'epoch': 1752120060}, update: {'$set': {'epoch': 1752120060, 'open': 2756.709, 'high': 2757.639, 'low': 2756.709, 'close': 2756.977, 'time': datetime.datetime(2025, 7, 10, 4, 1), 'signal': {'signal_id': 'XYEEIVR4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 1), 'entry_time': datetime.datetime(2025, 7, 10, 1, 2), 'open_candle_timestamp': 1752120060, 'message_id': 9984, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:03:09,689 INFO: Número de candles atualizados: 1
2025-07-10 01:03:09,690 INFO: ✅ Candle 1752120060 atualizado com sucesso
2025-07-10 01:03:09,690 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:03:09,690 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:03:09,691 INFO: Funcao validate_signals_for_candle iniciada para o sinal XYEEIVR4
2025-07-10 01:03:09,691 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:03:09,693 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:03:09,693 INFO: Funcao validate_signal iniciada para o signal XYEEIVR4
2025-07-10 01:03:09,693 INFO: Funcao validate_signal finalizada para o signal XYEEIVR4
2025-07-10 01:03:09,693 INFO: Validando sinal XYEEIVR4 sem gale items
2025-07-10 01:03:09,693 INFO: Sinal XYEEIVR4 adicionado à fila para G1
2025-07-10 01:03:09,693 INFO: Atualizando candle com filtro: {'epoch': 1752120060}, update: {'$set': {'epoch': 1752120060, 'open': 2756.709, 'high': 2757.639, 'low': 2756.709, 'close': 2756.977, 'time': datetime.datetime(2025, 7, 10, 4, 1), 'signal': {'signal_id': 'XYEEIVR4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 1), 'entry_time': datetime.datetime(2025, 7, 10, 1, 2), 'open_candle_timestamp': 1752120060, 'message_id': 9984, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120180, 'open_price': 2756.557, 'high': 2756.557, 'low': 2756.557, 'close_price': 2756.557, 'time': datetime.datetime(2025, 7, 10, 1, 3, 9, 693691), 'result': None}]}}
2025-07-10 01:03:09,695 INFO: Número de candles atualizados: 1
2025-07-10 01:03:09,695 INFO: Candle completo com gales atualizado para XYEEIVR4
2025-07-10 01:03:10,592 INFO: ✅ Resposta de resultado enviada para o sinal XYEEIVR4
2025-07-10 01:03:10,592 INFO: Sinal XYEEIVR4 validado como LOSS e notificação enviada
2025-07-10 01:03:10,593 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XYEEIVR4
2025-07-10 01:03:10,593 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:04:09,676 INFO: 🔔 Novo candle detectado em 2025-07-10 04:04:00 UTC
2025-07-10 01:04:09,677 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:04:09,680 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:04:09,680 INFO: 🔔 Candle 1752120240 é maior que o entry_time 2025-07-10 01:02:00
2025-07-10 01:04:09,680 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:04:09,681 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:04:09,683 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:04:09,683 INFO: 🔄 Candle 1752120180 já existe no banco, atualizando...
2025-07-10 01:04:09,683 INFO: 🔄 Atualizando último gale item do candle 1752120180
2025-07-10 01:04:09,684 INFO: Atualizando candle com filtro: {'epoch': 1752120060}, update: {'$set': {'epoch': 1752120060, 'open': 2756.709, 'high': 2757.639, 'low': 2756.709, 'close': 2756.977, 'time': datetime.datetime(2025, 7, 10, 4, 1), 'signal': {'signal_id': 'XYEEIVR4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 1), 'entry_time': datetime.datetime(2025, 7, 10, 1, 2), 'open_candle_timestamp': 1752120060, 'message_id': 9984, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120180, 'open_price': 2756.557, 'high': 2756.72, 'low': 2754.882, 'close_price': 2755.012, 'time': datetime.datetime(2025, 7, 10, 1, 3, 9, 693000), 'result': None}]}}
2025-07-10 01:04:09,686 INFO: Número de candles atualizados: 1
2025-07-10 01:04:09,686 INFO: ✅ Candle 1752120060 atualizado com sucesso
2025-07-10 01:04:09,686 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:04:09,686 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:04:09,686 INFO: Funcao validate_signals_for_candle iniciada para o sinal XYEEIVR4
2025-07-10 01:04:09,687 INFO: Buscando candle com signal_id: XYEEIVR4
2025-07-10 01:04:09,688 INFO: Candle encontrado para o signal_id: XYEEIVR4
2025-07-10 01:04:09,688 INFO: Funcao validate_signal iniciada para o signal XYEEIVR4
2025-07-10 01:04:09,689 INFO: Validando sinal XYEEIVR4 com gale items
2025-07-10 01:04:09,689 INFO: Atualizando candle com filtro: {'epoch': 1752120060}, update: {'$set': {'epoch': 1752120060, 'open': 2756.709, 'high': 2757.639, 'low': 2756.709, 'close': 2756.977, 'time': datetime.datetime(2025, 7, 10, 4, 1), 'signal': {'signal_id': 'XYEEIVR4', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 1), 'entry_time': datetime.datetime(2025, 7, 10, 1, 2), 'open_candle_timestamp': 1752120060, 'message_id': 9984, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120180, 'open_price': 2756.557, 'high': 2756.72, 'low': 2754.882, 'close_price': 2755.012, 'time': datetime.datetime(2025, 7, 10, 1, 3, 9, 693000), 'result': 'WIN'}]}}
2025-07-10 01:04:09,690 INFO: Número de candles atualizados: 1
2025-07-10 01:04:09,691 INFO: Candle completo com gales atualizado para XYEEIVR4
2025-07-10 01:04:10,511 INFO: ✅ Resposta de resultado enviada para o sinal XYEEIVR4
2025-07-10 01:04:10,512 INFO: Sinal XYEEIVR4 validado como LOSS e notificação enviada
2025-07-10 01:04:10,512 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XYEEIVR4
2025-07-10 01:04:10,512 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:05:09,661 INFO: 🔔 Novo candle detectado em 2025-07-10 04:05:00 UTC
2025-07-10 01:05:09,661 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:05:09,670 INFO: Buscando candle com filtro: {'epoch': 1752120300}
2025-07-10 01:05:09,672 INFO: Candle não encontrado
2025-07-10 01:05:09,687 INFO: Tendência HMA: FALL (HMA21=2753.20, HMA100=2753.28)
2025-07-10 01:05:09,688 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:05:09,688 INFO: 📈 Análise: EMA9=2753.28, EMA21=2753.58, trend_ema=FALL, trend_final=FALL, RSI=33.48, MACD=-0.39/-0.44, ATR=1.43, body=0.00, confidence=60
2025-07-10 01:05:09,688 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:05:09,689 INFO: Inserindo candle: Candle(2025-07-10 04:05:00, DOJI, O:2753.07, H:2753.07, L:2753.07, C:2753.07)
2025-07-10 01:05:09,691 INFO: Candle inserido com ID: 686f3bf51d9c27c6b2f10c16
2025-07-10 01:05:10,500 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NR8FLK2T'}, update: {'$set': {'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 5, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:05:10,504 INFO: Número de candles atualizados: 1
2025-07-10 01:05:10,504 INFO: ✅ Mensagem enviada ao Telegram (ID: NR8FLK2T).
2025-07-10 01:06:09,656 INFO: 🔔 Novo candle detectado em 2025-07-10 04:06:00 UTC
2025-07-10 01:06:09,656 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:06:09,659 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:06:09,659 INFO: 🔔 Candle 1752120360 é menor ou igual ao entry_time 2025-07-10 01:06:00
2025-07-10 01:07:09,652 INFO: 🔔 Novo candle detectado em 2025-07-10 04:07:00 UTC
2025-07-10 01:07:09,652 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:07:09,655 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:07:09,655 INFO: 🔔 Candle 1752120420 é maior que o entry_time 2025-07-10 01:06:00
2025-07-10 01:07:09,655 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:07:09,656 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:07:09,657 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:07:09,658 INFO: 🔄 Candle 1752120300 já existe no banco, atualizando...
2025-07-10 01:07:09,658 INFO: 🔄 Candle 1752120300 não tem gale_items
2025-07-10 01:07:09,659 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:07:09,661 INFO: Número de candles atualizados: 1
2025-07-10 01:07:09,661 INFO: ✅ Candle 1752120300 atualizado com sucesso
2025-07-10 01:07:09,661 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:07:09,661 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:07:09,662 INFO: Funcao validate_signals_for_candle iniciada para o sinal NR8FLK2T
2025-07-10 01:07:09,662 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:07:09,663 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:07:09,664 INFO: Funcao validate_signal iniciada para o signal NR8FLK2T
2025-07-10 01:07:09,664 INFO: Funcao validate_signal finalizada para o signal NR8FLK2T
2025-07-10 01:07:09,664 INFO: Validando sinal NR8FLK2T sem gale items
2025-07-10 01:07:09,664 INFO: Sinal NR8FLK2T adicionado à fila para G1
2025-07-10 01:07:09,664 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120420, 'open_price': 2754.023, 'high': 2754.023, 'low': 2754.023, 'close_price': 2754.023, 'time': datetime.datetime(2025, 7, 10, 1, 7, 9, 664930), 'result': None}]}}
2025-07-10 01:07:09,666 INFO: Número de candles atualizados: 1
2025-07-10 01:07:09,667 INFO: Candle completo com gales atualizado para NR8FLK2T
2025-07-10 01:07:10,498 INFO: ✅ Resposta de resultado enviada para o sinal NR8FLK2T
2025-07-10 01:07:10,498 INFO: Sinal NR8FLK2T validado como LOSS e notificação enviada
2025-07-10 01:07:10,498 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NR8FLK2T
2025-07-10 01:07:10,498 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:08:09,669 INFO: 🔔 Novo candle detectado em 2025-07-10 04:08:00 UTC
2025-07-10 01:08:09,669 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:08:09,672 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:08:09,672 INFO: 🔔 Candle 1752120480 é maior que o entry_time 2025-07-10 01:06:00
2025-07-10 01:08:09,672 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:08:09,672 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:08:09,675 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:08:09,675 INFO: 🔄 Candle 1752120420 já existe no banco, atualizando...
2025-07-10 01:08:09,675 INFO: 🔄 Atualizando último gale item do candle 1752120420
2025-07-10 01:08:09,675 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120420, 'open_price': 2754.023, 'high': 2755.446, 'low': 2753.815, 'close_price': 2755.074, 'time': datetime.datetime(2025, 7, 10, 1, 7, 9, 664000), 'result': None}]}}
2025-07-10 01:08:09,678 INFO: Número de candles atualizados: 1
2025-07-10 01:08:09,678 INFO: ✅ Candle 1752120300 atualizado com sucesso
2025-07-10 01:08:09,678 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:08:09,679 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:08:09,679 INFO: Funcao validate_signals_for_candle iniciada para o sinal NR8FLK2T
2025-07-10 01:08:09,680 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:08:09,681 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:08:09,681 INFO: Funcao validate_signal iniciada para o signal NR8FLK2T
2025-07-10 01:08:09,681 INFO: Validando sinal NR8FLK2T com gale items
2025-07-10 01:08:09,682 INFO: Gale G1 para o sinal NR8FLK2T resultou em LOSS
2025-07-10 01:08:09,682 INFO: Sinal NR8FLK2T adicionado à fila para G2
2025-07-10 01:08:09,682 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120420, 'open_price': 2754.023, 'high': 2755.446, 'low': 2753.815, 'close_price': 2755.074, 'time': datetime.datetime(2025, 7, 10, 1, 7, 9, 664000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752120480, 'open_price': 2755.275, 'high': 2755.275, 'low': 2755.275, 'close_price': 2755.275, 'time': datetime.datetime(2025, 7, 10, 1, 8, 9, 682364), 'result': None}]}}
2025-07-10 01:08:09,684 INFO: Número de candles atualizados: 1
2025-07-10 01:08:09,685 INFO: Candle completo com gales atualizado para NR8FLK2T
2025-07-10 01:08:10,503 INFO: ✅ Resposta de resultado enviada para o sinal NR8FLK2T
2025-07-10 01:08:10,504 INFO: Sinal NR8FLK2T validado como LOSS e notificação enviada
2025-07-10 01:08:10,504 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NR8FLK2T
2025-07-10 01:08:10,504 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:09:09,654 INFO: 🔔 Novo candle detectado em 2025-07-10 04:09:00 UTC
2025-07-10 01:09:09,654 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:09:09,658 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:09:09,658 INFO: 🔔 Candle 1752120540 é maior que o entry_time 2025-07-10 01:06:00
2025-07-10 01:09:09,658 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:09:09,659 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:09:09,661 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:09:09,661 INFO: 🔄 Candle 1752120480 já existe no banco, atualizando...
2025-07-10 01:09:09,661 INFO: 🔄 Atualizando último gale item do candle 1752120480
2025-07-10 01:09:09,662 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120420, 'open_price': 2754.023, 'high': 2755.446, 'low': 2753.815, 'close_price': 2755.074, 'time': datetime.datetime(2025, 7, 10, 1, 7, 9, 664000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752120480, 'open_price': 2755.275, 'high': 2755.275, 'low': 2753.67, 'close_price': 2754.279, 'time': datetime.datetime(2025, 7, 10, 1, 8, 9, 682000), 'result': None}]}}
2025-07-10 01:09:09,664 INFO: Número de candles atualizados: 1
2025-07-10 01:09:09,664 INFO: ✅ Candle 1752120300 atualizado com sucesso
2025-07-10 01:09:09,665 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:09:09,665 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:09:09,665 INFO: Funcao validate_signals_for_candle iniciada para o sinal NR8FLK2T
2025-07-10 01:09:09,665 INFO: Buscando candle com signal_id: NR8FLK2T
2025-07-10 01:09:09,667 INFO: Candle encontrado para o signal_id: NR8FLK2T
2025-07-10 01:09:09,667 INFO: Funcao validate_signal iniciada para o signal NR8FLK2T
2025-07-10 01:09:09,668 INFO: Validando sinal NR8FLK2T com gale items
2025-07-10 01:09:09,668 INFO: Atualizando candle com filtro: {'epoch': 1752120300}, update: {'$set': {'epoch': 1752120300, 'open': 2753.068, 'high': 2754.01, 'low': 2752.627, 'close': 2753.405, 'time': datetime.datetime(2025, 7, 10, 4, 5), 'signal': {'signal_id': 'NR8FLK2T', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 5), 'entry_time': datetime.datetime(2025, 7, 10, 1, 6), 'open_candle_timestamp': 1752120300, 'message_id': 9987, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752120420, 'open_price': 2754.023, 'high': 2755.446, 'low': 2753.815, 'close_price': 2755.074, 'time': datetime.datetime(2025, 7, 10, 1, 7, 9, 664000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752120480, 'open_price': 2755.275, 'high': 2755.275, 'low': 2753.67, 'close_price': 2754.279, 'time': datetime.datetime(2025, 7, 10, 1, 8, 9, 682000), 'result': 'WIN'}]}}
2025-07-10 01:09:09,670 INFO: Número de candles atualizados: 1
2025-07-10 01:09:09,670 INFO: Candle completo com gales atualizado para NR8FLK2T
2025-07-10 01:09:10,481 INFO: ✅ Resposta de resultado enviada para o sinal NR8FLK2T
2025-07-10 01:09:10,481 INFO: Sinal NR8FLK2T validado como LOSS e notificação enviada
2025-07-10 01:09:10,482 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NR8FLK2T
2025-07-10 01:09:10,482 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:10:09,684 INFO: 🔔 Novo candle detectado em 2025-07-10 04:10:00 UTC
2025-07-10 01:10:09,684 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:10:09,693 INFO: Buscando candle com filtro: {'epoch': 1752120600}
2025-07-10 01:10:09,696 INFO: Candle não encontrado
2025-07-10 01:10:09,711 INFO: Tendência HMA: FALL (HMA21=2752.20, HMA100=2752.92)
2025-07-10 01:10:09,711 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:10:09,712 INFO: 📈 Análise: EMA9=2752.49, EMA21=2752.86, trend_ema=FALL, trend_final=FALL, RSI=31.03, MACD=-0.39/-0.35, ATR=1.45, body=0.00, confidence=80
2025-07-10 01:10:09,712 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 01:10:09,712 INFO: Inserindo candle: Candle(2025-07-10 04:10:00, DOJI, O:2752.14, H:2752.14, L:2752.14, C:2752.14)
2025-07-10 01:10:09,715 INFO: Candle inserido com ID: 686f3d211d9c27c6b2f10c17
2025-07-10 01:10:10,561 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XLZ4TVL8'}, update: {'$set': {'signal': {'signal_id': 'XLZ4TVL8', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 10, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 11), 'open_candle_timestamp': 1752120600, 'message_id': 9991, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:10:10,565 INFO: Número de candles atualizados: 1
2025-07-10 01:10:10,566 INFO: ✅ Mensagem enviada ao Telegram (ID: XLZ4TVL8).
2025-07-10 01:11:09,664 INFO: 🔔 Novo candle detectado em 2025-07-10 04:11:00 UTC
2025-07-10 01:11:09,664 INFO: Buscando candle com signal_id: XLZ4TVL8
2025-07-10 01:11:09,667 INFO: Candle encontrado para o signal_id: XLZ4TVL8
2025-07-10 01:11:09,667 INFO: 🔔 Candle 1752120660 é menor ou igual ao entry_time 2025-07-10 01:11:00
2025-07-10 01:12:09,657 INFO: 🔔 Novo candle detectado em 2025-07-10 04:12:00 UTC
2025-07-10 01:12:09,657 INFO: Buscando candle com signal_id: XLZ4TVL8
2025-07-10 01:12:09,659 INFO: Candle encontrado para o signal_id: XLZ4TVL8
2025-07-10 01:12:09,660 INFO: 🔔 Candle 1752120720 é maior que o entry_time 2025-07-10 01:11:00
2025-07-10 01:12:09,660 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:12:09,661 INFO: Buscando candle com signal_id: XLZ4TVL8
2025-07-10 01:12:09,663 INFO: Candle encontrado para o signal_id: XLZ4TVL8
2025-07-10 01:12:09,663 INFO: 🔄 Candle 1752120600 já existe no banco, atualizando...
2025-07-10 01:12:09,664 INFO: 🔄 Candle 1752120600 não tem gale_items
2025-07-10 01:12:09,664 INFO: Atualizando candle com filtro: {'epoch': 1752120600}, update: {'$set': {'epoch': 1752120600, 'open': 2752.141, 'high': 2752.141, 'low': 2750.481, 'close': 2751.025, 'time': datetime.datetime(2025, 7, 10, 4, 10), 'signal': {'signal_id': 'XLZ4TVL8', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 10), 'entry_time': datetime.datetime(2025, 7, 10, 1, 11), 'open_candle_timestamp': 1752120600, 'message_id': 9991, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:12:09,666 INFO: Número de candles atualizados: 1
2025-07-10 01:12:09,666 INFO: ✅ Candle 1752120600 atualizado com sucesso
2025-07-10 01:12:09,666 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:12:09,667 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:12:09,667 INFO: Funcao validate_signals_for_candle iniciada para o sinal XLZ4TVL8
2025-07-10 01:12:09,667 INFO: Buscando candle com signal_id: XLZ4TVL8
2025-07-10 01:12:09,668 INFO: Candle encontrado para o signal_id: XLZ4TVL8
2025-07-10 01:12:09,669 INFO: Funcao validate_signal iniciada para o signal XLZ4TVL8
2025-07-10 01:12:09,669 INFO: Funcao validate_signal finalizada para o signal XLZ4TVL8
2025-07-10 01:12:09,669 INFO: Validando sinal XLZ4TVL8 sem gale items
2025-07-10 01:12:09,669 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XLZ4TVL8'}, update: {'$set': {'signal': {'signal_id': 'XLZ4TVL8', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 10), 'entry_time': datetime.datetime(2025, 7, 10, 1, 11), 'open_candle_timestamp': 1752120600, 'message_id': 9991, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:12:09,672 INFO: Número de candles atualizados: 1
2025-07-10 01:12:09,672 INFO: Sinal atualizado no repositório para XLZ4TVL8
2025-07-10 01:12:10,483 INFO: ✅ Resposta de resultado enviada para o sinal XLZ4TVL8
2025-07-10 01:12:10,483 INFO: Sinal XLZ4TVL8 validado como WIN e notificação enviada
2025-07-10 01:12:10,484 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XLZ4TVL8
2025-07-10 01:12:10,484 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:13:09,676 INFO: 🔔 Novo candle detectado em 2025-07-10 04:13:00 UTC
2025-07-10 01:13:09,676 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:13:09,686 INFO: Buscando candle com filtro: {'epoch': 1752120780}
2025-07-10 01:13:09,688 INFO: Candle não encontrado
2025-07-10 01:13:09,703 INFO: Tendência HMA: FALL (HMA21=2752.70, HMA100=2753.13)
2025-07-10 01:13:09,704 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:13:09,704 INFO: 📈 Análise: EMA9=2752.56, EMA21=2752.66, trend_ema=FALL, trend_final=FALL, RSI=37.75, MACD=-0.04/0.06, ATR=1.00, body=0.00, confidence=80
2025-07-10 01:13:09,704 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 01:13:09,704 INFO: Inserindo candle: Candle(2025-07-10 04:13:00, DOJI, O:2752.04, H:2752.04, L:2752.04, C:2752.04)
2025-07-10 01:13:09,707 INFO: Candle inserido com ID: 686f3dd51d9c27c6b2f10c18
2025-07-10 01:13:10,527 INFO: Atualizando candle com filtro: {'signal.signal_id': 'U35WV8AS'}, update: {'$set': {'signal': {'signal_id': 'U35WV8AS', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 13, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 14), 'open_candle_timestamp': 1752120780, 'message_id': 9993, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:13:10,531 INFO: Número de candles atualizados: 1
2025-07-10 01:13:10,531 INFO: ✅ Mensagem enviada ao Telegram (ID: U35WV8AS).
2025-07-10 01:14:09,655 INFO: 🔔 Novo candle detectado em 2025-07-10 04:14:00 UTC
2025-07-10 01:14:09,655 INFO: Buscando candle com signal_id: U35WV8AS
2025-07-10 01:14:09,658 INFO: Candle encontrado para o signal_id: U35WV8AS
2025-07-10 01:14:09,658 INFO: 🔔 Candle 1752120840 é menor ou igual ao entry_time 2025-07-10 01:14:00
2025-07-10 01:15:09,668 INFO: 🔔 Novo candle detectado em 2025-07-10 04:15:00 UTC
2025-07-10 01:15:09,669 INFO: Buscando candle com signal_id: U35WV8AS
2025-07-10 01:15:09,672 INFO: Candle encontrado para o signal_id: U35WV8AS
2025-07-10 01:15:09,672 INFO: 🔔 Candle 1752120900 é maior que o entry_time 2025-07-10 01:14:00
2025-07-10 01:15:09,672 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:15:09,672 INFO: Buscando candle com signal_id: U35WV8AS
2025-07-10 01:15:09,675 INFO: Candle encontrado para o signal_id: U35WV8AS
2025-07-10 01:15:09,675 INFO: 🔄 Candle 1752120780 já existe no banco, atualizando...
2025-07-10 01:15:09,675 INFO: 🔄 Candle 1752120780 não tem gale_items
2025-07-10 01:15:09,676 INFO: Atualizando candle com filtro: {'epoch': 1752120780}, update: {'$set': {'epoch': 1752120780, 'open': 2752.042, 'high': 2752.77, 'low': 2751.768, 'close': 2751.77, 'time': datetime.datetime(2025, 7, 10, 4, 13), 'signal': {'signal_id': 'U35WV8AS', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 13), 'entry_time': datetime.datetime(2025, 7, 10, 1, 14), 'open_candle_timestamp': 1752120780, 'message_id': 9993, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:15:09,678 INFO: Número de candles atualizados: 1
2025-07-10 01:15:09,678 INFO: ✅ Candle 1752120780 atualizado com sucesso
2025-07-10 01:15:09,679 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:15:09,679 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:15:09,679 INFO: Funcao validate_signals_for_candle iniciada para o sinal U35WV8AS
2025-07-10 01:15:09,679 INFO: Buscando candle com signal_id: U35WV8AS
2025-07-10 01:15:09,681 INFO: Candle encontrado para o signal_id: U35WV8AS
2025-07-10 01:15:09,681 INFO: Funcao validate_signal iniciada para o signal U35WV8AS
2025-07-10 01:15:09,681 INFO: Funcao validate_signal finalizada para o signal U35WV8AS
2025-07-10 01:15:09,682 INFO: Validando sinal U35WV8AS sem gale items
2025-07-10 01:15:09,682 INFO: Atualizando candle com filtro: {'signal.signal_id': 'U35WV8AS'}, update: {'$set': {'signal': {'signal_id': 'U35WV8AS', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 13), 'entry_time': datetime.datetime(2025, 7, 10, 1, 14), 'open_candle_timestamp': 1752120780, 'message_id': 9993, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:15:09,684 INFO: Número de candles atualizados: 1
2025-07-10 01:15:09,684 INFO: Sinal atualizado no repositório para U35WV8AS
2025-07-10 01:15:10,512 INFO: ✅ Resposta de resultado enviada para o sinal U35WV8AS
2025-07-10 01:15:10,512 INFO: Sinal U35WV8AS validado como WIN e notificação enviada
2025-07-10 01:15:10,512 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal U35WV8AS
2025-07-10 01:15:10,512 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:16:09,649 INFO: 🔔 Novo candle detectado em 2025-07-10 04:16:00 UTC
2025-07-10 01:16:09,649 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:16:09,658 INFO: Buscando candle com filtro: {'epoch': 1752120960}
2025-07-10 01:16:09,661 INFO: Candle não encontrado
2025-07-10 01:16:09,676 INFO: Tendência HMA: FALL (HMA21=2751.76, HMA100=2750.85)
2025-07-10 01:16:09,676 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:16:09,676 INFO: 📈 Análise: EMA9=2751.59, EMA21=2751.40, trend_ema=RISE, trend_final=FALL, RSI=58.96, MACD=0.19/0.16, ATR=1.09, body=0.00, confidence=40
2025-07-10 01:16:09,677 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 01:16:09,677 INFO: Inserindo candle: Candle(2025-07-10 04:16:00, DOJI, O:2751.74, H:2751.74, L:2751.74, C:2751.74)
2025-07-10 01:16:09,680 INFO: Candle inserido com ID: 686f3e891d9c27c6b2f10c19
2025-07-10 01:16:10,555 INFO: Atualizando candle com filtro: {'signal.signal_id': 'X0WXDCCU'}, update: {'$set': {'signal': {'signal_id': 'X0WXDCCU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 16, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 17), 'open_candle_timestamp': 1752120960, 'message_id': 9995, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:16:10,558 INFO: Número de candles atualizados: 1
2025-07-10 01:16:10,558 INFO: ✅ Mensagem enviada ao Telegram (ID: X0WXDCCU).
2025-07-10 01:17:09,673 INFO: 🔔 Novo candle detectado em 2025-07-10 04:17:00 UTC
2025-07-10 01:17:09,673 INFO: Buscando candle com signal_id: X0WXDCCU
2025-07-10 01:17:09,676 INFO: Candle encontrado para o signal_id: X0WXDCCU
2025-07-10 01:17:09,676 INFO: 🔔 Candle 1752121020 é menor ou igual ao entry_time 2025-07-10 01:17:00
2025-07-10 01:18:09,661 INFO: 🔔 Novo candle detectado em 2025-07-10 04:18:00 UTC
2025-07-10 01:18:09,661 INFO: Buscando candle com signal_id: X0WXDCCU
2025-07-10 01:18:09,664 INFO: Candle encontrado para o signal_id: X0WXDCCU
2025-07-10 01:18:09,665 INFO: 🔔 Candle 1752121080 é maior que o entry_time 2025-07-10 01:17:00
2025-07-10 01:18:09,665 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:18:09,665 INFO: Buscando candle com signal_id: X0WXDCCU
2025-07-10 01:18:09,666 INFO: Candle encontrado para o signal_id: X0WXDCCU
2025-07-10 01:18:09,668 INFO: 🔄 Candle 1752120960 já existe no banco, atualizando...
2025-07-10 01:18:09,668 INFO: 🔄 Candle 1752120960 não tem gale_items
2025-07-10 01:18:09,668 INFO: Atualizando candle com filtro: {'epoch': 1752120960}, update: {'$set': {'epoch': 1752120960, 'open': 2751.735, 'high': 2751.942, 'low': 2750.099, 'close': 2750.905, 'time': datetime.datetime(2025, 7, 10, 4, 16), 'signal': {'signal_id': 'X0WXDCCU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 16), 'entry_time': datetime.datetime(2025, 7, 10, 1, 17), 'open_candle_timestamp': 1752120960, 'message_id': 9995, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:18:09,670 INFO: Número de candles atualizados: 1
2025-07-10 01:18:09,670 INFO: ✅ Candle 1752120960 atualizado com sucesso
2025-07-10 01:18:09,670 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:18:09,670 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:18:09,671 INFO: Funcao validate_signals_for_candle iniciada para o sinal X0WXDCCU
2025-07-10 01:18:09,671 INFO: Buscando candle com signal_id: X0WXDCCU
2025-07-10 01:18:09,673 INFO: Candle encontrado para o signal_id: X0WXDCCU
2025-07-10 01:18:09,673 INFO: Funcao validate_signal iniciada para o signal X0WXDCCU
2025-07-10 01:18:09,673 INFO: Funcao validate_signal finalizada para o signal X0WXDCCU
2025-07-10 01:18:09,673 INFO: Validando sinal X0WXDCCU sem gale items
2025-07-10 01:18:09,673 INFO: Atualizando candle com filtro: {'signal.signal_id': 'X0WXDCCU'}, update: {'$set': {'signal': {'signal_id': 'X0WXDCCU', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 16), 'entry_time': datetime.datetime(2025, 7, 10, 1, 17), 'open_candle_timestamp': 1752120960, 'message_id': 9995, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:18:09,675 INFO: Número de candles atualizados: 1
2025-07-10 01:18:09,676 INFO: Sinal atualizado no repositório para X0WXDCCU
2025-07-10 01:18:10,484 INFO: ✅ Resposta de resultado enviada para o sinal X0WXDCCU
2025-07-10 01:18:10,484 INFO: Sinal X0WXDCCU validado como WIN e notificação enviada
2025-07-10 01:18:10,485 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal X0WXDCCU
2025-07-10 01:18:10,485 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:19:09,666 INFO: 🔔 Novo candle detectado em 2025-07-10 04:19:00 UTC
2025-07-10 01:19:09,666 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:19:09,675 INFO: Buscando candle com filtro: {'epoch': 1752121140}
2025-07-10 01:19:09,677 INFO: Candle não encontrado
2025-07-10 01:19:09,693 INFO: Tendência HMA: FALL (HMA21=2750.99, HMA100=2750.88)
2025-07-10 01:19:09,693 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:19:09,693 INFO: 📈 Análise: EMA9=2750.90, EMA21=2750.87, trend_ema=RISE, trend_final=FALL, RSI=54.88, MACD=0.02/0.00, ATR=0.89, body=0.00, confidence=60
2025-07-10 01:19:09,694 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:19:09,694 INFO: Inserindo candle: Candle(2025-07-10 04:19:00, DOJI, O:2751.04, H:2751.04, L:2751.04, C:2751.04)
2025-07-10 01:19:09,697 INFO: Candle inserido com ID: 686f3f3d1d9c27c6b2f10c1a
2025-07-10 01:19:10,506 INFO: Atualizando candle com filtro: {'signal.signal_id': '7R499N2W'}, update: {'$set': {'signal': {'signal_id': '7R499N2W', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 19, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 20), 'open_candle_timestamp': 1752121140, 'message_id': 9997, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:19:10,510 INFO: Número de candles atualizados: 1
2025-07-10 01:19:10,510 INFO: ✅ Mensagem enviada ao Telegram (ID: 7R499N2W).
2025-07-10 01:20:09,666 INFO: 🔔 Novo candle detectado em 2025-07-10 04:20:00 UTC
2025-07-10 01:20:09,667 INFO: Buscando candle com signal_id: 7R499N2W
2025-07-10 01:20:09,669 INFO: Candle encontrado para o signal_id: 7R499N2W
2025-07-10 01:20:09,670 INFO: 🔔 Candle 1752121200 é menor ou igual ao entry_time 2025-07-10 01:20:00
2025-07-10 01:21:09,667 INFO: 🔔 Novo candle detectado em 2025-07-10 04:21:00 UTC
2025-07-10 01:21:09,667 INFO: Buscando candle com signal_id: 7R499N2W
2025-07-10 01:21:09,670 INFO: Candle encontrado para o signal_id: 7R499N2W
2025-07-10 01:21:09,670 INFO: 🔔 Candle 1752121260 é maior que o entry_time 2025-07-10 01:20:00
2025-07-10 01:21:09,670 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:21:09,671 INFO: Buscando candle com signal_id: 7R499N2W
2025-07-10 01:21:09,673 INFO: Candle encontrado para o signal_id: 7R499N2W
2025-07-10 01:21:09,674 INFO: 🔄 Candle 1752121140 já existe no banco, atualizando...
2025-07-10 01:21:09,674 INFO: 🔄 Candle 1752121140 não tem gale_items
2025-07-10 01:21:09,674 INFO: Atualizando candle com filtro: {'epoch': 1752121140}, update: {'$set': {'epoch': 1752121140, 'open': 2751.04, 'high': 2751.04, 'low': 2748.565, 'close': 2748.565, 'time': datetime.datetime(2025, 7, 10, 4, 19), 'signal': {'signal_id': '7R499N2W', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 19), 'entry_time': datetime.datetime(2025, 7, 10, 1, 20), 'open_candle_timestamp': 1752121140, 'message_id': 9997, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:21:09,676 INFO: Número de candles atualizados: 1
2025-07-10 01:21:09,677 INFO: ✅ Candle 1752121140 atualizado com sucesso
2025-07-10 01:21:09,677 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:21:09,677 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:21:09,677 INFO: Funcao validate_signals_for_candle iniciada para o sinal 7R499N2W
2025-07-10 01:21:09,677 INFO: Buscando candle com signal_id: 7R499N2W
2025-07-10 01:21:09,679 INFO: Candle encontrado para o signal_id: 7R499N2W
2025-07-10 01:21:09,679 INFO: Funcao validate_signal iniciada para o signal 7R499N2W
2025-07-10 01:21:09,679 INFO: Funcao validate_signal finalizada para o signal 7R499N2W
2025-07-10 01:21:09,679 INFO: Validando sinal 7R499N2W sem gale items
2025-07-10 01:21:09,680 INFO: Atualizando candle com filtro: {'signal.signal_id': '7R499N2W'}, update: {'$set': {'signal': {'signal_id': '7R499N2W', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 19), 'entry_time': datetime.datetime(2025, 7, 10, 1, 20), 'open_candle_timestamp': 1752121140, 'message_id': 9997, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:21:09,682 INFO: Número de candles atualizados: 1
2025-07-10 01:21:09,682 INFO: Sinal atualizado no repositório para 7R499N2W
2025-07-10 01:21:10,514 INFO: ✅ Resposta de resultado enviada para o sinal 7R499N2W
2025-07-10 01:21:10,514 INFO: Sinal 7R499N2W validado como WIN e notificação enviada
2025-07-10 01:21:10,514 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 7R499N2W
2025-07-10 01:21:10,514 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:22:09,658 INFO: 🔔 Novo candle detectado em 2025-07-10 04:22:00 UTC
2025-07-10 01:22:09,659 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:22:09,668 INFO: Buscando candle com filtro: {'epoch': 1752121320}
2025-07-10 01:22:09,671 INFO: Candle não encontrado
2025-07-10 01:22:09,685 INFO: Tendência HMA: FALL (HMA21=2749.44, HMA100=2748.85)
2025-07-10 01:22:09,686 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:22:09,686 INFO: 📈 Análise: EMA9=2749.29, EMA21=2749.19, trend_ema=RISE, trend_final=FALL, RSI=50.77, MACD=0.13/0.17, ATR=1.18, body=0.00, confidence=20
2025-07-10 01:22:09,687 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 01:22:09,687 INFO: Inserindo candle: Candle(2025-07-10 04:22:00, DOJI, O:2749.16, H:2749.16, L:2749.16, C:2749.16)
2025-07-10 01:22:09,690 INFO: Candle inserido com ID: 686f3ff11d9c27c6b2f10c1b
2025-07-10 01:22:10,502 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Q7ODAT5E'}, update: {'$set': {'signal': {'signal_id': 'Q7ODAT5E', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 22, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 23), 'open_candle_timestamp': 1752121320, 'message_id': 10000, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:22:10,505 INFO: Número de candles atualizados: 1
2025-07-10 01:22:10,505 INFO: ✅ Mensagem enviada ao Telegram (ID: Q7ODAT5E).
2025-07-10 01:23:09,663 INFO: 🔔 Novo candle detectado em 2025-07-10 04:23:00 UTC
2025-07-10 01:23:09,663 INFO: Buscando candle com signal_id: Q7ODAT5E
2025-07-10 01:23:09,666 INFO: Candle encontrado para o signal_id: Q7ODAT5E
2025-07-10 01:23:09,666 INFO: 🔔 Candle 1752121380 é menor ou igual ao entry_time 2025-07-10 01:23:00
2025-07-10 01:24:09,675 INFO: 🔔 Novo candle detectado em 2025-07-10 04:24:00 UTC
2025-07-10 01:24:09,676 INFO: Buscando candle com signal_id: Q7ODAT5E
2025-07-10 01:24:09,679 INFO: Candle encontrado para o signal_id: Q7ODAT5E
2025-07-10 01:24:09,682 INFO: 🔔 Candle 1752121440 é maior que o entry_time 2025-07-10 01:23:00
2025-07-10 01:24:09,682 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:24:09,683 INFO: Buscando candle com signal_id: Q7ODAT5E
2025-07-10 01:24:09,685 INFO: Candle encontrado para o signal_id: Q7ODAT5E
2025-07-10 01:24:09,686 INFO: 🔄 Candle 1752121320 já existe no banco, atualizando...
2025-07-10 01:24:09,686 INFO: 🔄 Candle 1752121320 não tem gale_items
2025-07-10 01:24:09,686 INFO: Atualizando candle com filtro: {'epoch': 1752121320}, update: {'$set': {'epoch': 1752121320, 'open': 2749.164, 'high': 2749.164, 'low': 2747.084, 'close': 2747.772, 'time': datetime.datetime(2025, 7, 10, 4, 22), 'signal': {'signal_id': 'Q7ODAT5E', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 22), 'entry_time': datetime.datetime(2025, 7, 10, 1, 23), 'open_candle_timestamp': 1752121320, 'message_id': 10000, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:24:09,688 INFO: Número de candles atualizados: 1
2025-07-10 01:24:09,688 INFO: ✅ Candle 1752121320 atualizado com sucesso
2025-07-10 01:24:09,689 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:24:09,689 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:24:09,689 INFO: Funcao validate_signals_for_candle iniciada para o sinal Q7ODAT5E
2025-07-10 01:24:09,689 INFO: Buscando candle com signal_id: Q7ODAT5E
2025-07-10 01:24:09,691 INFO: Candle encontrado para o signal_id: Q7ODAT5E
2025-07-10 01:24:09,691 INFO: Funcao validate_signal iniciada para o signal Q7ODAT5E
2025-07-10 01:24:09,691 INFO: Funcao validate_signal finalizada para o signal Q7ODAT5E
2025-07-10 01:24:09,691 INFO: Validando sinal Q7ODAT5E sem gale items
2025-07-10 01:24:09,691 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Q7ODAT5E'}, update: {'$set': {'signal': {'signal_id': 'Q7ODAT5E', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 22), 'entry_time': datetime.datetime(2025, 7, 10, 1, 23), 'open_candle_timestamp': 1752121320, 'message_id': 10000, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:24:09,693 INFO: Número de candles atualizados: 1
2025-07-10 01:24:09,693 INFO: Sinal atualizado no repositório para Q7ODAT5E
2025-07-10 01:24:10,570 INFO: ✅ Resposta de resultado enviada para o sinal Q7ODAT5E
2025-07-10 01:24:10,570 INFO: Sinal Q7ODAT5E validado como WIN e notificação enviada
2025-07-10 01:24:10,571 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Q7ODAT5E
2025-07-10 01:24:10,571 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:25:09,670 INFO: 🔔 Novo candle detectado em 2025-07-10 04:25:00 UTC
2025-07-10 01:25:09,670 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:25:09,679 INFO: Buscando candle com filtro: {'epoch': 1752121500}
2025-07-10 01:25:09,681 INFO: Candle não encontrado
2025-07-10 01:25:09,697 INFO: Tendência HMA: FALL (HMA21=2745.33, HMA100=2744.66)
2025-07-10 01:25:09,697 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:25:09,698 INFO: 📈 Análise: EMA9=2745.26, EMA21=2745.31, trend_ema=FALL, trend_final=FALL, RSI=46.03, MACD=-0.10/-0.14, ATR=1.33, body=0.00, confidence=20
2025-07-10 01:25:09,698 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 01:25:09,698 INFO: Inserindo candle: Candle(2025-07-10 04:25:00, DOJI, O:2745.18, H:2745.18, L:2745.18, C:2745.18)
2025-07-10 01:25:09,701 INFO: Candle inserido com ID: 686f40a51d9c27c6b2f10c1c
2025-07-10 01:25:10,509 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Q9F6TY9M'}, update: {'$set': {'signal': {'signal_id': 'Q9F6TY9M', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 25, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 26), 'open_candle_timestamp': 1752121500, 'message_id': 10003, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:25:10,512 INFO: Número de candles atualizados: 1
2025-07-10 01:25:10,513 INFO: ✅ Mensagem enviada ao Telegram (ID: Q9F6TY9M).
2025-07-10 01:26:09,698 INFO: 🔔 Novo candle detectado em 2025-07-10 04:26:00 UTC
2025-07-10 01:26:09,698 INFO: Buscando candle com signal_id: Q9F6TY9M
2025-07-10 01:26:09,702 INFO: Candle encontrado para o signal_id: Q9F6TY9M
2025-07-10 01:26:09,702 INFO: 🔔 Candle 1752121560 é menor ou igual ao entry_time 2025-07-10 01:26:00
2025-07-10 01:27:09,686 INFO: 🔔 Novo candle detectado em 2025-07-10 04:27:00 UTC
2025-07-10 01:27:09,687 INFO: Buscando candle com signal_id: Q9F6TY9M
2025-07-10 01:27:09,690 INFO: Candle encontrado para o signal_id: Q9F6TY9M
2025-07-10 01:27:09,690 INFO: 🔔 Candle 1752121620 é maior que o entry_time 2025-07-10 01:26:00
2025-07-10 01:27:09,690 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:27:09,691 INFO: Buscando candle com signal_id: Q9F6TY9M
2025-07-10 01:27:09,693 INFO: Candle encontrado para o signal_id: Q9F6TY9M
2025-07-10 01:27:09,693 INFO: 🔄 Candle 1752121500 já existe no banco, atualizando...
2025-07-10 01:27:09,693 INFO: 🔄 Candle 1752121500 não tem gale_items
2025-07-10 01:27:09,694 INFO: Atualizando candle com filtro: {'epoch': 1752121500}, update: {'$set': {'epoch': 1752121500, 'open': 2745.176, 'high': 2745.923, 'low': 2744.379, 'close': 2744.473, 'time': datetime.datetime(2025, 7, 10, 4, 25), 'signal': {'signal_id': 'Q9F6TY9M', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 25), 'entry_time': datetime.datetime(2025, 7, 10, 1, 26), 'open_candle_timestamp': 1752121500, 'message_id': 10003, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:27:09,696 INFO: Número de candles atualizados: 1
2025-07-10 01:27:09,697 INFO: ✅ Candle 1752121500 atualizado com sucesso
2025-07-10 01:27:09,697 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:27:09,697 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:27:09,697 INFO: Funcao validate_signals_for_candle iniciada para o sinal Q9F6TY9M
2025-07-10 01:27:09,697 INFO: Buscando candle com signal_id: Q9F6TY9M
2025-07-10 01:27:09,699 INFO: Candle encontrado para o signal_id: Q9F6TY9M
2025-07-10 01:27:09,699 INFO: Funcao validate_signal iniciada para o signal Q9F6TY9M
2025-07-10 01:27:09,700 INFO: Funcao validate_signal finalizada para o signal Q9F6TY9M
2025-07-10 01:27:09,700 INFO: Validando sinal Q9F6TY9M sem gale items
2025-07-10 01:27:09,700 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Q9F6TY9M'}, update: {'$set': {'signal': {'signal_id': 'Q9F6TY9M', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 25), 'entry_time': datetime.datetime(2025, 7, 10, 1, 26), 'open_candle_timestamp': 1752121500, 'message_id': 10003, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:27:09,702 INFO: Número de candles atualizados: 1
2025-07-10 01:27:09,703 INFO: Sinal atualizado no repositório para Q9F6TY9M
2025-07-10 01:27:10,583 INFO: ✅ Resposta de resultado enviada para o sinal Q9F6TY9M
2025-07-10 01:27:10,583 INFO: Sinal Q9F6TY9M validado como WIN e notificação enviada
2025-07-10 01:27:10,583 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Q9F6TY9M
2025-07-10 01:27:10,584 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:28:09,648 INFO: 🔔 Novo candle detectado em 2025-07-10 04:28:00 UTC
2025-07-10 01:28:09,648 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:28:09,656 INFO: Buscando candle com filtro: {'epoch': 1752121680}
2025-07-10 01:28:09,660 INFO: Candle não encontrado
2025-07-10 01:28:09,675 INFO: Tendência HMA: FALL (HMA21=2742.15, HMA100=2742.95)
2025-07-10 01:28:09,675 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:28:09,675 INFO: 📈 Análise: EMA9=2742.45, EMA21=2742.87, trend_ema=FALL, trend_final=FALL, RSI=32.36, MACD=-0.45/-0.41, ATR=1.25, body=0.00, confidence=60
2025-07-10 01:28:09,676 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:28:09,676 INFO: Inserindo candle: Candle(2025-07-10 04:28:00, DOJI, O:2742.32, H:2742.32, L:2742.32, C:2742.32)
2025-07-10 01:28:09,678 INFO: Candle inserido com ID: 686f41591d9c27c6b2f10c1d
2025-07-10 01:28:10,483 INFO: Atualizando candle com filtro: {'signal.signal_id': '5S9JDR5Z'}, update: {'$set': {'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 28, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:28:10,485 INFO: Número de candles atualizados: 1
2025-07-10 01:28:10,486 INFO: ✅ Mensagem enviada ao Telegram (ID: 5S9JDR5Z).
2025-07-10 01:29:09,682 INFO: 🔔 Novo candle detectado em 2025-07-10 04:29:00 UTC
2025-07-10 01:29:09,682 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:29:09,685 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:29:09,685 INFO: 🔔 Candle 1752121740 é menor ou igual ao entry_time 2025-07-10 01:29:00
2025-07-10 01:30:09,660 INFO: 🔔 Novo candle detectado em 2025-07-10 04:30:00 UTC
2025-07-10 01:30:09,660 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:30:09,663 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:30:09,663 INFO: 🔔 Candle 1752121800 é maior que o entry_time 2025-07-10 01:29:00
2025-07-10 01:30:09,663 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:30:09,663 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:30:09,666 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:30:09,666 INFO: 🔄 Candle 1752121680 já existe no banco, atualizando...
2025-07-10 01:30:09,666 INFO: 🔄 Candle 1752121680 não tem gale_items
2025-07-10 01:30:09,666 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:30:09,669 INFO: Número de candles atualizados: 1
2025-07-10 01:30:09,669 INFO: ✅ Candle 1752121680 atualizado com sucesso
2025-07-10 01:30:09,670 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:30:09,670 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:30:09,670 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5S9JDR5Z
2025-07-10 01:30:09,670 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:30:09,672 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:30:09,672 INFO: Funcao validate_signal iniciada para o signal 5S9JDR5Z
2025-07-10 01:30:09,672 INFO: Funcao validate_signal finalizada para o signal 5S9JDR5Z
2025-07-10 01:30:09,672 INFO: Validando sinal 5S9JDR5Z sem gale items
2025-07-10 01:30:09,673 INFO: Sinal 5S9JDR5Z adicionado à fila para G1
2025-07-10 01:30:09,673 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752121800, 'open_price': 2743.465, 'high': 2743.465, 'low': 2743.465, 'close_price': 2743.465, 'time': datetime.datetime(2025, 7, 10, 1, 30, 9, 673545), 'result': None}]}}
2025-07-10 01:30:09,675 INFO: Número de candles atualizados: 1
2025-07-10 01:30:09,675 INFO: Candle completo com gales atualizado para 5S9JDR5Z
2025-07-10 01:30:10,490 INFO: ✅ Resposta de resultado enviada para o sinal 5S9JDR5Z
2025-07-10 01:30:10,491 INFO: Sinal 5S9JDR5Z validado como LOSS e notificação enviada
2025-07-10 01:30:10,491 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5S9JDR5Z
2025-07-10 01:30:10,491 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:31:09,667 INFO: 🔔 Novo candle detectado em 2025-07-10 04:31:00 UTC
2025-07-10 01:31:09,668 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:31:09,670 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:31:09,671 INFO: 🔔 Candle 1752121860 é maior que o entry_time 2025-07-10 01:29:00
2025-07-10 01:31:09,671 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:31:09,671 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:31:09,673 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:31:09,674 INFO: 🔄 Candle 1752121800 já existe no banco, atualizando...
2025-07-10 01:31:09,674 INFO: 🔄 Atualizando último gale item do candle 1752121800
2025-07-10 01:31:09,674 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752121800, 'open_price': 2743.465, 'high': 2744.539, 'low': 2743.313, 'close_price': 2744.038, 'time': datetime.datetime(2025, 7, 10, 1, 30, 9, 673000), 'result': None}]}}
2025-07-10 01:31:09,676 INFO: Número de candles atualizados: 1
2025-07-10 01:31:09,677 INFO: ✅ Candle 1752121680 atualizado com sucesso
2025-07-10 01:31:09,677 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:31:09,677 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:31:09,677 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5S9JDR5Z
2025-07-10 01:31:09,677 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:31:09,679 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:31:09,679 INFO: Funcao validate_signal iniciada para o signal 5S9JDR5Z
2025-07-10 01:31:09,679 INFO: Validando sinal 5S9JDR5Z com gale items
2025-07-10 01:31:09,679 INFO: Gale G1 para o sinal 5S9JDR5Z resultou em LOSS
2025-07-10 01:31:09,680 INFO: Sinal 5S9JDR5Z adicionado à fila para G2
2025-07-10 01:31:09,680 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752121800, 'open_price': 2743.465, 'high': 2744.539, 'low': 2743.313, 'close_price': 2744.038, 'time': datetime.datetime(2025, 7, 10, 1, 30, 9, 673000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752121860, 'open_price': 2744.519, 'high': 2744.519, 'low': 2744.519, 'close_price': 2744.519, 'time': datetime.datetime(2025, 7, 10, 1, 31, 9, 680279), 'result': None}]}}
2025-07-10 01:31:09,682 INFO: Número de candles atualizados: 1
2025-07-10 01:31:09,682 INFO: Candle completo com gales atualizado para 5S9JDR5Z
2025-07-10 01:31:10,483 INFO: ✅ Resposta de resultado enviada para o sinal 5S9JDR5Z
2025-07-10 01:31:10,484 INFO: Sinal 5S9JDR5Z validado como LOSS e notificação enviada
2025-07-10 01:31:10,484 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5S9JDR5Z
2025-07-10 01:31:10,484 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:32:09,688 INFO: 🔔 Novo candle detectado em 2025-07-10 04:32:00 UTC
2025-07-10 01:32:09,689 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:32:09,692 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:32:09,692 INFO: 🔔 Candle 1752121920 é maior que o entry_time 2025-07-10 01:29:00
2025-07-10 01:32:09,692 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:32:09,692 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:32:09,695 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:32:09,695 INFO: 🔄 Candle 1752121860 já existe no banco, atualizando...
2025-07-10 01:32:09,695 INFO: 🔄 Atualizando último gale item do candle 1752121860
2025-07-10 01:32:09,696 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752121800, 'open_price': 2743.465, 'high': 2744.539, 'low': 2743.313, 'close_price': 2744.038, 'time': datetime.datetime(2025, 7, 10, 1, 30, 9, 673000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752121860, 'open_price': 2744.519, 'high': 2745.417, 'low': 2744.231, 'close_price': 2745.39, 'time': datetime.datetime(2025, 7, 10, 1, 31, 9, 680000), 'result': None}]}}
2025-07-10 01:32:09,698 INFO: Número de candles atualizados: 1
2025-07-10 01:32:09,698 INFO: ✅ Candle 1752121680 atualizado com sucesso
2025-07-10 01:32:09,698 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:32:09,699 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:32:09,699 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5S9JDR5Z
2025-07-10 01:32:09,699 INFO: Buscando candle com signal_id: 5S9JDR5Z
2025-07-10 01:32:09,701 INFO: Candle encontrado para o signal_id: 5S9JDR5Z
2025-07-10 01:32:09,701 INFO: Funcao validate_signal iniciada para o signal 5S9JDR5Z
2025-07-10 01:32:09,702 INFO: Validando sinal 5S9JDR5Z com gale items
2025-07-10 01:32:09,702 INFO: Gale G2 para o sinal 5S9JDR5Z resultou em LOSS
2025-07-10 01:32:09,702 INFO: Atualizando candle com filtro: {'epoch': 1752121680}, update: {'$set': {'epoch': 1752121680, 'open': 2742.318, 'high': 2742.951, 'low': 2741.837, 'close': 2742.734, 'time': datetime.datetime(2025, 7, 10, 4, 28), 'signal': {'signal_id': '5S9JDR5Z', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 28), 'entry_time': datetime.datetime(2025, 7, 10, 1, 29), 'open_candle_timestamp': 1752121680, 'message_id': 10005, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752121800, 'open_price': 2743.465, 'high': 2744.539, 'low': 2743.313, 'close_price': 2744.038, 'time': datetime.datetime(2025, 7, 10, 1, 30, 9, 673000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752121860, 'open_price': 2744.519, 'high': 2745.417, 'low': 2744.231, 'close_price': 2745.39, 'time': datetime.datetime(2025, 7, 10, 1, 31, 9, 680000), 'result': 'LOSS'}]}}
2025-07-10 01:32:09,704 INFO: Número de candles atualizados: 1
2025-07-10 01:32:09,704 INFO: Candle completo com gales atualizado para 5S9JDR5Z
2025-07-10 01:32:10,522 INFO: ✅ Resposta de resultado enviada para o sinal 5S9JDR5Z
2025-07-10 01:32:10,523 INFO: Sinal 5S9JDR5Z validado como LOSS e notificação enviada
2025-07-10 01:32:10,523 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5S9JDR5Z
2025-07-10 01:32:10,523 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:33:09,648 INFO: 🔔 Novo candle detectado em 2025-07-10 04:33:00 UTC
2025-07-10 01:33:09,648 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:33:09,658 INFO: Buscando candle com filtro: {'epoch': 1752121980}
2025-07-10 01:33:09,660 INFO: Candle não encontrado
2025-07-10 01:33:09,675 INFO: Tendência HMA: FALL (HMA21=2745.12, HMA100=2745.17)
2025-07-10 01:33:09,676 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:33:09,676 INFO: 📈 Análise: EMA9=2745.08, EMA21=2744.98, trend_ema=RISE, trend_final=FALL, RSI=57.74, MACD=0.07/-0.01, ATR=0.66, body=0.00, confidence=40
2025-07-10 01:33:09,676 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 01:33:09,677 INFO: Inserindo candle: Candle(2025-07-10 04:33:00, DOJI, O:2745.26, H:2745.26, L:2745.26, C:2745.26)
2025-07-10 01:33:09,679 INFO: Candle inserido com ID: 686f42851d9c27c6b2f10c1e
2025-07-10 01:33:10,487 INFO: Atualizando candle com filtro: {'signal.signal_id': 'FEUWNHGW'}, update: {'$set': {'signal': {'signal_id': 'FEUWNHGW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 33, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 34), 'open_candle_timestamp': 1752121980, 'message_id': 10009, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:33:10,489 INFO: Número de candles atualizados: 1
2025-07-10 01:33:10,490 INFO: ✅ Mensagem enviada ao Telegram (ID: FEUWNHGW).
2025-07-10 01:34:09,654 INFO: 🔔 Novo candle detectado em 2025-07-10 04:34:00 UTC
2025-07-10 01:34:09,654 INFO: Buscando candle com signal_id: FEUWNHGW
2025-07-10 01:34:09,656 INFO: Candle encontrado para o signal_id: FEUWNHGW
2025-07-10 01:34:09,657 INFO: 🔔 Candle 1752122040 é menor ou igual ao entry_time 2025-07-10 01:34:00
2025-07-10 01:35:09,664 INFO: 🔔 Novo candle detectado em 2025-07-10 04:35:00 UTC
2025-07-10 01:35:09,664 INFO: Buscando candle com signal_id: FEUWNHGW
2025-07-10 01:35:09,666 INFO: Candle encontrado para o signal_id: FEUWNHGW
2025-07-10 01:35:09,667 INFO: 🔔 Candle 1752122100 é maior que o entry_time 2025-07-10 01:34:00
2025-07-10 01:35:09,667 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:35:09,667 INFO: Buscando candle com signal_id: FEUWNHGW
2025-07-10 01:35:09,670 INFO: Candle encontrado para o signal_id: FEUWNHGW
2025-07-10 01:35:09,670 INFO: 🔄 Candle 1752121980 já existe no banco, atualizando...
2025-07-10 01:35:09,670 INFO: 🔄 Candle 1752121980 não tem gale_items
2025-07-10 01:35:09,670 INFO: Atualizando candle com filtro: {'epoch': 1752121980}, update: {'$set': {'epoch': 1752121980, 'open': 2745.258, 'high': 2745.839, 'low': 2744.935, 'close': 2745.089, 'time': datetime.datetime(2025, 7, 10, 4, 33), 'signal': {'signal_id': 'FEUWNHGW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 33), 'entry_time': datetime.datetime(2025, 7, 10, 1, 34), 'open_candle_timestamp': 1752121980, 'message_id': 10009, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:35:09,673 INFO: Número de candles atualizados: 1
2025-07-10 01:35:09,673 INFO: ✅ Candle 1752121980 atualizado com sucesso
2025-07-10 01:35:09,673 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:35:09,674 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:35:09,674 INFO: Funcao validate_signals_for_candle iniciada para o sinal FEUWNHGW
2025-07-10 01:35:09,674 INFO: Buscando candle com signal_id: FEUWNHGW
2025-07-10 01:35:09,676 INFO: Candle encontrado para o signal_id: FEUWNHGW
2025-07-10 01:35:09,676 INFO: Funcao validate_signal iniciada para o signal FEUWNHGW
2025-07-10 01:35:09,676 INFO: Funcao validate_signal finalizada para o signal FEUWNHGW
2025-07-10 01:35:09,677 INFO: Validando sinal FEUWNHGW sem gale items
2025-07-10 01:35:09,677 INFO: Atualizando candle com filtro: {'signal.signal_id': 'FEUWNHGW'}, update: {'$set': {'signal': {'signal_id': 'FEUWNHGW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 33), 'entry_time': datetime.datetime(2025, 7, 10, 1, 34), 'open_candle_timestamp': 1752121980, 'message_id': 10009, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:35:09,679 INFO: Número de candles atualizados: 1
2025-07-10 01:35:09,679 INFO: Sinal atualizado no repositório para FEUWNHGW
2025-07-10 01:35:10,504 INFO: ✅ Resposta de resultado enviada para o sinal FEUWNHGW
2025-07-10 01:35:10,504 INFO: Sinal FEUWNHGW validado como WIN e notificação enviada
2025-07-10 01:35:10,505 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal FEUWNHGW
2025-07-10 01:35:10,505 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:36:09,669 INFO: 🔔 Novo candle detectado em 2025-07-10 04:36:00 UTC
2025-07-10 01:36:09,670 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:36:09,678 INFO: Buscando candle com filtro: {'epoch': 1752122160}
2025-07-10 01:36:09,681 INFO: Candle não encontrado
2025-07-10 01:36:09,696 INFO: Tendência HMA: FALL (HMA21=2744.93, HMA100=2745.48)
2025-07-10 01:36:09,696 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:36:09,697 INFO: 📈 Análise: EMA9=2745.13, EMA21=2745.30, trend_ema=FALL, trend_final=FALL, RSI=39.81, MACD=-0.13/-0.05, ATR=0.68, body=0.00, confidence=60
2025-07-10 01:36:09,697 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:36:09,697 INFO: Inserindo candle: Candle(2025-07-10 04:36:00, DOJI, O:2744.92, H:2744.92, L:2744.92, C:2744.92)
2025-07-10 01:36:09,700 INFO: Candle inserido com ID: 686f43391d9c27c6b2f10c1f
2025-07-10 01:36:10,502 INFO: Atualizando candle com filtro: {'signal.signal_id': 'ZM22DK0M'}, update: {'$set': {'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 36, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:36:10,504 INFO: Número de candles atualizados: 1
2025-07-10 01:36:10,505 INFO: ✅ Mensagem enviada ao Telegram (ID: ZM22DK0M).
2025-07-10 01:37:09,688 INFO: 🔔 Novo candle detectado em 2025-07-10 04:37:00 UTC
2025-07-10 01:37:09,688 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:37:09,691 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:37:09,691 INFO: 🔔 Candle 1752122220 é menor ou igual ao entry_time 2025-07-10 01:37:00
2025-07-10 01:38:09,672 INFO: 🔔 Novo candle detectado em 2025-07-10 04:38:00 UTC
2025-07-10 01:38:09,673 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:38:09,675 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:38:09,676 INFO: 🔔 Candle 1752122280 é maior que o entry_time 2025-07-10 01:37:00
2025-07-10 01:38:09,676 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:38:09,677 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:38:09,678 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:38:09,679 INFO: 🔄 Candle 1752122160 já existe no banco, atualizando...
2025-07-10 01:38:09,679 INFO: 🔄 Candle 1752122160 não tem gale_items
2025-07-10 01:38:09,679 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:38:09,682 INFO: Número de candles atualizados: 1
2025-07-10 01:38:09,682 INFO: ✅ Candle 1752122160 atualizado com sucesso
2025-07-10 01:38:09,682 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:38:09,682 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:38:09,682 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZM22DK0M
2025-07-10 01:38:09,683 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:38:09,684 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:38:09,684 INFO: Funcao validate_signal iniciada para o signal ZM22DK0M
2025-07-10 01:38:09,684 INFO: Funcao validate_signal finalizada para o signal ZM22DK0M
2025-07-10 01:38:09,684 INFO: Validando sinal ZM22DK0M sem gale items
2025-07-10 01:38:09,685 INFO: Sinal ZM22DK0M adicionado à fila para G1
2025-07-10 01:38:09,685 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122280, 'open_price': 2745.991, 'high': 2745.991, 'low': 2745.991, 'close_price': 2745.991, 'time': datetime.datetime(2025, 7, 10, 1, 38, 9, 685459), 'result': None}]}}
2025-07-10 01:38:09,687 INFO: Número de candles atualizados: 1
2025-07-10 01:38:09,687 INFO: Candle completo com gales atualizado para ZM22DK0M
2025-07-10 01:38:10,568 INFO: ✅ Resposta de resultado enviada para o sinal ZM22DK0M
2025-07-10 01:38:10,569 INFO: Sinal ZM22DK0M validado como LOSS e notificação enviada
2025-07-10 01:38:10,569 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZM22DK0M
2025-07-10 01:38:10,569 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:39:09,683 INFO: 🔔 Novo candle detectado em 2025-07-10 04:39:00 UTC
2025-07-10 01:39:09,683 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:39:09,686 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:39:09,686 INFO: 🔔 Candle 1752122340 é maior que o entry_time 2025-07-10 01:37:00
2025-07-10 01:39:09,686 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:39:09,687 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:39:09,690 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:39:09,690 INFO: 🔄 Candle 1752122280 já existe no banco, atualizando...
2025-07-10 01:39:09,690 INFO: 🔄 Atualizando último gale item do candle 1752122280
2025-07-10 01:39:09,691 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122280, 'open_price': 2745.991, 'high': 2747.139, 'low': 2745.895, 'close_price': 2746.781, 'time': datetime.datetime(2025, 7, 10, 1, 38, 9, 685000), 'result': None}]}}
2025-07-10 01:39:09,693 INFO: Número de candles atualizados: 1
2025-07-10 01:39:09,693 INFO: ✅ Candle 1752122160 atualizado com sucesso
2025-07-10 01:39:09,694 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:39:09,694 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:39:09,694 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZM22DK0M
2025-07-10 01:39:09,694 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:39:09,696 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:39:09,696 INFO: Funcao validate_signal iniciada para o signal ZM22DK0M
2025-07-10 01:39:09,696 INFO: Validando sinal ZM22DK0M com gale items
2025-07-10 01:39:09,696 INFO: Gale G1 para o sinal ZM22DK0M resultou em LOSS
2025-07-10 01:39:09,696 INFO: Sinal ZM22DK0M adicionado à fila para G2
2025-07-10 01:39:09,696 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122280, 'open_price': 2745.991, 'high': 2747.139, 'low': 2745.895, 'close_price': 2746.781, 'time': datetime.datetime(2025, 7, 10, 1, 38, 9, 685000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752122340, 'open_price': 2746.902, 'high': 2746.902, 'low': 2746.902, 'close_price': 2746.902, 'time': datetime.datetime(2025, 7, 10, 1, 39, 9, 696993), 'result': None}]}}
2025-07-10 01:39:09,699 INFO: Número de candles atualizados: 1
2025-07-10 01:39:09,699 INFO: Candle completo com gales atualizado para ZM22DK0M
2025-07-10 01:39:10,532 INFO: ✅ Resposta de resultado enviada para o sinal ZM22DK0M
2025-07-10 01:39:10,532 INFO: Sinal ZM22DK0M validado como LOSS e notificação enviada
2025-07-10 01:39:10,533 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZM22DK0M
2025-07-10 01:39:10,533 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:40:09,683 INFO: 🔔 Novo candle detectado em 2025-07-10 04:40:00 UTC
2025-07-10 01:40:09,683 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:40:09,686 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:40:09,686 INFO: 🔔 Candle 1752122400 é maior que o entry_time 2025-07-10 01:37:00
2025-07-10 01:40:09,686 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:40:09,687 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:40:09,689 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:40:09,689 INFO: 🔄 Candle 1752122340 já existe no banco, atualizando...
2025-07-10 01:40:09,690 INFO: 🔄 Atualizando último gale item do candle 1752122340
2025-07-10 01:40:09,690 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122280, 'open_price': 2745.991, 'high': 2747.139, 'low': 2745.895, 'close_price': 2746.781, 'time': datetime.datetime(2025, 7, 10, 1, 38, 9, 685000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752122340, 'open_price': 2746.902, 'high': 2747.362, 'low': 2746.308, 'close_price': 2747.362, 'time': datetime.datetime(2025, 7, 10, 1, 39, 9, 696000), 'result': None}]}}
2025-07-10 01:40:09,692 INFO: Número de candles atualizados: 1
2025-07-10 01:40:09,692 INFO: ✅ Candle 1752122160 atualizado com sucesso
2025-07-10 01:40:09,693 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:40:09,693 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:40:09,693 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZM22DK0M
2025-07-10 01:40:09,693 INFO: Buscando candle com signal_id: ZM22DK0M
2025-07-10 01:40:09,695 INFO: Candle encontrado para o signal_id: ZM22DK0M
2025-07-10 01:40:09,695 INFO: Funcao validate_signal iniciada para o signal ZM22DK0M
2025-07-10 01:40:09,696 INFO: Validando sinal ZM22DK0M com gale items
2025-07-10 01:40:09,696 INFO: Gale G2 para o sinal ZM22DK0M resultou em LOSS
2025-07-10 01:40:09,696 INFO: Atualizando candle com filtro: {'epoch': 1752122160}, update: {'$set': {'epoch': 1752122160, 'open': 2744.92, 'high': 2746.761, 'low': 2744.92, 'close': 2746.694, 'time': datetime.datetime(2025, 7, 10, 4, 36), 'signal': {'signal_id': 'ZM22DK0M', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 36), 'entry_time': datetime.datetime(2025, 7, 10, 1, 37), 'open_candle_timestamp': 1752122160, 'message_id': 10012, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122280, 'open_price': 2745.991, 'high': 2747.139, 'low': 2745.895, 'close_price': 2746.781, 'time': datetime.datetime(2025, 7, 10, 1, 38, 9, 685000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752122340, 'open_price': 2746.902, 'high': 2747.362, 'low': 2746.308, 'close_price': 2747.362, 'time': datetime.datetime(2025, 7, 10, 1, 39, 9, 696000), 'result': 'LOSS'}]}}
2025-07-10 01:40:09,698 INFO: Número de candles atualizados: 1
2025-07-10 01:40:09,698 INFO: Candle completo com gales atualizado para ZM22DK0M
2025-07-10 01:40:10,511 INFO: ✅ Resposta de resultado enviada para o sinal ZM22DK0M
2025-07-10 01:40:10,511 INFO: Sinal ZM22DK0M validado como LOSS e notificação enviada
2025-07-10 01:40:10,512 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZM22DK0M
2025-07-10 01:40:10,512 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:41:09,690 INFO: 🔔 Novo candle detectado em 2025-07-10 04:41:00 UTC
2025-07-10 01:41:09,691 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:41:09,700 INFO: Buscando candle com filtro: {'epoch': 1752122460}
2025-07-10 01:41:09,702 INFO: Candle não encontrado
2025-07-10 01:41:09,717 INFO: Tendência HMA: FALL (HMA21=2747.93, HMA100=2747.90)
2025-07-10 01:41:09,717 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:41:09,718 INFO: 📈 Análise: EMA9=2747.89, EMA21=2747.78, trend_ema=RISE, trend_final=FALL, RSI=61.21, MACD=0.14/0.15, ATR=0.76, body=0.00, confidence=40
2025-07-10 01:41:09,718 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 01:41:09,718 INFO: Inserindo candle: Candle(2025-07-10 04:41:00, DOJI, O:2748.13, H:2748.13, L:2748.13, C:2748.13)
2025-07-10 01:41:09,721 INFO: Candle inserido com ID: 686f44651d9c27c6b2f10c20
2025-07-10 01:41:10,536 INFO: Atualizando candle com filtro: {'signal.signal_id': '2WVKJLF1'}, update: {'$set': {'signal': {'signal_id': '2WVKJLF1', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 41, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 42), 'open_candle_timestamp': 1752122460, 'message_id': 10017, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:41:10,539 INFO: Número de candles atualizados: 1
2025-07-10 01:41:10,539 INFO: ✅ Mensagem enviada ao Telegram (ID: 2WVKJLF1).
2025-07-10 01:42:09,673 INFO: 🔔 Novo candle detectado em 2025-07-10 04:42:00 UTC
2025-07-10 01:42:09,673 INFO: Buscando candle com signal_id: 2WVKJLF1
2025-07-10 01:42:09,677 INFO: Candle encontrado para o signal_id: 2WVKJLF1
2025-07-10 01:42:09,677 INFO: 🔔 Candle 1752122520 é menor ou igual ao entry_time 2025-07-10 01:42:00
2025-07-10 01:43:09,721 INFO: 🔔 Novo candle detectado em 2025-07-10 04:43:00 UTC
2025-07-10 01:43:09,721 INFO: Buscando candle com signal_id: 2WVKJLF1
2025-07-10 01:43:09,724 INFO: Candle encontrado para o signal_id: 2WVKJLF1
2025-07-10 01:43:09,724 INFO: 🔔 Candle 1752122580 é maior que o entry_time 2025-07-10 01:42:00
2025-07-10 01:43:09,724 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:43:09,725 INFO: Buscando candle com signal_id: 2WVKJLF1
2025-07-10 01:43:09,727 INFO: Candle encontrado para o signal_id: 2WVKJLF1
2025-07-10 01:43:09,728 INFO: 🔄 Candle 1752122460 já existe no banco, atualizando...
2025-07-10 01:43:09,728 INFO: 🔄 Candle 1752122460 não tem gale_items
2025-07-10 01:43:09,728 INFO: Atualizando candle com filtro: {'epoch': 1752122460}, update: {'$set': {'epoch': 1752122460, 'open': 2748.133, 'high': 2748.934, 'low': 2747.184, 'close': 2747.282, 'time': datetime.datetime(2025, 7, 10, 4, 41), 'signal': {'signal_id': '2WVKJLF1', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 41), 'entry_time': datetime.datetime(2025, 7, 10, 1, 42), 'open_candle_timestamp': 1752122460, 'message_id': 10017, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:43:09,730 INFO: Número de candles atualizados: 1
2025-07-10 01:43:09,730 INFO: ✅ Candle 1752122460 atualizado com sucesso
2025-07-10 01:43:09,730 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:43:09,731 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:43:09,731 INFO: Funcao validate_signals_for_candle iniciada para o sinal 2WVKJLF1
2025-07-10 01:43:09,731 INFO: Buscando candle com signal_id: 2WVKJLF1
2025-07-10 01:43:09,733 INFO: Candle encontrado para o signal_id: 2WVKJLF1
2025-07-10 01:43:09,734 INFO: Funcao validate_signal iniciada para o signal 2WVKJLF1
2025-07-10 01:43:09,734 INFO: Funcao validate_signal finalizada para o signal 2WVKJLF1
2025-07-10 01:43:09,734 INFO: Validando sinal 2WVKJLF1 sem gale items
2025-07-10 01:43:09,734 INFO: Atualizando candle com filtro: {'signal.signal_id': '2WVKJLF1'}, update: {'$set': {'signal': {'signal_id': '2WVKJLF1', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 41), 'entry_time': datetime.datetime(2025, 7, 10, 1, 42), 'open_candle_timestamp': 1752122460, 'message_id': 10017, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:43:09,736 INFO: Número de candles atualizados: 1
2025-07-10 01:43:09,736 INFO: Sinal atualizado no repositório para 2WVKJLF1
2025-07-10 01:43:10,566 INFO: ✅ Resposta de resultado enviada para o sinal 2WVKJLF1
2025-07-10 01:43:10,566 INFO: Sinal 2WVKJLF1 validado como WIN e notificação enviada
2025-07-10 01:43:10,566 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 2WVKJLF1
2025-07-10 01:43:10,567 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:44:09,714 INFO: 🔔 Novo candle detectado em 2025-07-10 04:44:00 UTC
2025-07-10 01:44:09,714 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:44:09,723 INFO: Buscando candle com filtro: {'epoch': 1752122640}
2025-07-10 01:44:09,726 INFO: Candle não encontrado
2025-07-10 01:44:09,740 INFO: Tendência HMA: FALL (HMA21=2748.70, HMA100=2748.95)
2025-07-10 01:44:09,741 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:44:09,741 INFO: 📈 Análise: EMA9=2748.66, EMA21=2748.69, trend_ema=FALL, trend_final=FALL, RSI=45.87, MACD=0.01/0.06, ATR=0.89, body=0.00, confidence=60
2025-07-10 01:44:09,741 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 01:44:09,742 INFO: Inserindo candle: Candle(2025-07-10 04:44:00, DOJI, O:2748.52, H:2748.52, L:2748.52, C:2748.52)
2025-07-10 01:44:09,744 INFO: Candle inserido com ID: 686f45191d9c27c6b2f10c21
2025-07-10 01:44:10,618 INFO: Atualizando candle com filtro: {'signal.signal_id': 'YFEZIQNA'}, update: {'$set': {'signal': {'signal_id': 'YFEZIQNA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 44, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 45), 'open_candle_timestamp': 1752122640, 'message_id': 10019, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:44:10,625 INFO: Número de candles atualizados: 1
2025-07-10 01:44:10,625 INFO: ✅ Mensagem enviada ao Telegram (ID: YFEZIQNA).
2025-07-10 01:45:09,680 INFO: 🔔 Novo candle detectado em 2025-07-10 04:45:00 UTC
2025-07-10 01:45:09,680 INFO: Buscando candle com signal_id: YFEZIQNA
2025-07-10 01:45:09,683 INFO: Candle encontrado para o signal_id: YFEZIQNA
2025-07-10 01:45:09,683 INFO: 🔔 Candle 1752122700 é menor ou igual ao entry_time 2025-07-10 01:45:00
2025-07-10 01:46:09,691 INFO: 🔔 Novo candle detectado em 2025-07-10 04:46:00 UTC
2025-07-10 01:46:09,692 INFO: Buscando candle com signal_id: YFEZIQNA
2025-07-10 01:46:09,695 INFO: Candle encontrado para o signal_id: YFEZIQNA
2025-07-10 01:46:09,695 INFO: 🔔 Candle 1752122760 é maior que o entry_time 2025-07-10 01:45:00
2025-07-10 01:46:09,695 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:46:09,696 INFO: Buscando candle com signal_id: YFEZIQNA
2025-07-10 01:46:09,698 INFO: Candle encontrado para o signal_id: YFEZIQNA
2025-07-10 01:46:09,698 INFO: 🔄 Candle 1752122640 já existe no banco, atualizando...
2025-07-10 01:46:09,698 INFO: 🔄 Candle 1752122640 não tem gale_items
2025-07-10 01:46:09,699 INFO: Atualizando candle com filtro: {'epoch': 1752122640}, update: {'$set': {'epoch': 1752122640, 'open': 2748.518, 'high': 2748.559, 'low': 2747.334, 'close': 2747.334, 'time': datetime.datetime(2025, 7, 10, 4, 44), 'signal': {'signal_id': 'YFEZIQNA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 44), 'entry_time': datetime.datetime(2025, 7, 10, 1, 45), 'open_candle_timestamp': 1752122640, 'message_id': 10019, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:46:09,701 INFO: Número de candles atualizados: 1
2025-07-10 01:46:09,702 INFO: ✅ Candle 1752122640 atualizado com sucesso
2025-07-10 01:46:09,702 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:46:09,702 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:46:09,702 INFO: Funcao validate_signals_for_candle iniciada para o sinal YFEZIQNA
2025-07-10 01:46:09,702 INFO: Buscando candle com signal_id: YFEZIQNA
2025-07-10 01:46:09,705 INFO: Candle encontrado para o signal_id: YFEZIQNA
2025-07-10 01:46:09,705 INFO: Funcao validate_signal iniciada para o signal YFEZIQNA
2025-07-10 01:46:09,705 INFO: Funcao validate_signal finalizada para o signal YFEZIQNA
2025-07-10 01:46:09,705 INFO: Validando sinal YFEZIQNA sem gale items
2025-07-10 01:46:09,705 INFO: Atualizando candle com filtro: {'signal.signal_id': 'YFEZIQNA'}, update: {'$set': {'signal': {'signal_id': 'YFEZIQNA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 44), 'entry_time': datetime.datetime(2025, 7, 10, 1, 45), 'open_candle_timestamp': 1752122640, 'message_id': 10019, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 01:46:09,707 INFO: Número de candles atualizados: 1
2025-07-10 01:46:09,708 INFO: Sinal atualizado no repositório para YFEZIQNA
2025-07-10 01:46:10,529 INFO: ✅ Resposta de resultado enviada para o sinal YFEZIQNA
2025-07-10 01:46:10,530 INFO: Sinal YFEZIQNA validado como WIN e notificação enviada
2025-07-10 01:46:10,530 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal YFEZIQNA
2025-07-10 01:46:10,530 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:47:09,665 INFO: 🔔 Novo candle detectado em 2025-07-10 04:47:00 UTC
2025-07-10 01:47:09,665 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:47:09,674 INFO: Buscando candle com filtro: {'epoch': 1752122820}
2025-07-10 01:47:09,677 INFO: Candle não encontrado
2025-07-10 01:47:09,692 INFO: Tendência HMA: FALL (HMA21=2747.09, HMA100=2746.79)
2025-07-10 01:47:09,693 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:47:09,693 INFO: 📈 Análise: EMA9=2746.85, EMA21=2746.90, trend_ema=FALL, trend_final=FALL, RSI=43.09, MACD=-0.09/-0.12, ATR=1.08, body=0.00, confidence=40
2025-07-10 01:47:09,693 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 01:47:09,694 INFO: Inserindo candle: Candle(2025-07-10 04:47:00, DOJI, O:2746.72, H:2746.72, L:2746.72, C:2746.72)
2025-07-10 01:47:09,697 INFO: Candle inserido com ID: 686f45cd1d9c27c6b2f10c22
2025-07-10 01:47:10,536 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XJKG2XZT'}, update: {'$set': {'signal': {'signal_id': 'XJKG2XZT', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 47, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 48), 'open_candle_timestamp': 1752122820, 'message_id': 10021, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:47:10,539 INFO: Número de candles atualizados: 1
2025-07-10 01:47:10,540 INFO: ✅ Mensagem enviada ao Telegram (ID: XJKG2XZT).
2025-07-10 01:48:09,670 INFO: 🔔 Novo candle detectado em 2025-07-10 04:48:00 UTC
2025-07-10 01:48:09,671 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:48:09,673 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:48:09,673 INFO: 🔔 Candle 1752122880 é menor ou igual ao entry_time 2025-07-10 01:48:00
2025-07-10 01:49:09,668 INFO: 🔔 Novo candle detectado em 2025-07-10 04:49:00 UTC
2025-07-10 01:49:09,669 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:49:09,671 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:49:09,672 INFO: 🔔 Candle 1752122940 é maior que o entry_time 2025-07-10 01:48:00
2025-07-10 01:49:09,672 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:49:09,672 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:49:09,674 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:49:09,674 INFO: 🔄 Candle 1752122820 já existe no banco, atualizando...
2025-07-10 01:49:09,675 INFO: 🔄 Candle 1752122820 não tem gale_items
2025-07-10 01:49:09,675 INFO: Atualizando candle com filtro: {'epoch': 1752122820}, update: {'$set': {'epoch': 1752122820, 'open': 2746.725, 'high': 2747.964, 'low': 2746.67, 'close': 2747.265, 'time': datetime.datetime(2025, 7, 10, 4, 47), 'signal': {'signal_id': 'XJKG2XZT', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 47), 'entry_time': datetime.datetime(2025, 7, 10, 1, 48), 'open_candle_timestamp': 1752122820, 'message_id': 10021, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:49:09,677 INFO: Número de candles atualizados: 1
2025-07-10 01:49:09,677 INFO: ✅ Candle 1752122820 atualizado com sucesso
2025-07-10 01:49:09,678 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:49:09,678 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:49:09,678 INFO: Funcao validate_signals_for_candle iniciada para o sinal XJKG2XZT
2025-07-10 01:49:09,679 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:49:09,680 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:49:09,680 INFO: Funcao validate_signal iniciada para o signal XJKG2XZT
2025-07-10 01:49:09,680 INFO: Funcao validate_signal finalizada para o signal XJKG2XZT
2025-07-10 01:49:09,681 INFO: Validando sinal XJKG2XZT sem gale items
2025-07-10 01:49:09,681 INFO: Sinal XJKG2XZT adicionado à fila para G1
2025-07-10 01:49:09,681 INFO: Atualizando candle com filtro: {'epoch': 1752122820}, update: {'$set': {'epoch': 1752122820, 'open': 2746.725, 'high': 2747.964, 'low': 2746.67, 'close': 2747.265, 'time': datetime.datetime(2025, 7, 10, 4, 47), 'signal': {'signal_id': 'XJKG2XZT', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 47), 'entry_time': datetime.datetime(2025, 7, 10, 1, 48), 'open_candle_timestamp': 1752122820, 'message_id': 10021, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122940, 'open_price': 2748.096, 'high': 2748.096, 'low': 2748.096, 'close_price': 2748.096, 'time': datetime.datetime(2025, 7, 10, 1, 49, 9, 681227), 'result': None}]}}
2025-07-10 01:49:09,683 INFO: Número de candles atualizados: 1
2025-07-10 01:49:09,684 INFO: Candle completo com gales atualizado para XJKG2XZT
2025-07-10 01:49:10,499 INFO: ✅ Resposta de resultado enviada para o sinal XJKG2XZT
2025-07-10 01:49:10,500 INFO: Sinal XJKG2XZT validado como LOSS e notificação enviada
2025-07-10 01:49:10,500 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XJKG2XZT
2025-07-10 01:49:10,500 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:50:09,720 INFO: 🔔 Novo candle detectado em 2025-07-10 04:50:00 UTC
2025-07-10 01:50:09,721 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:50:09,723 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:50:09,724 INFO: 🔔 Candle 1752123000 é maior que o entry_time 2025-07-10 01:48:00
2025-07-10 01:50:09,724 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:50:09,724 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:50:09,726 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:50:09,726 INFO: 🔄 Candle 1752122940 já existe no banco, atualizando...
2025-07-10 01:50:09,727 INFO: 🔄 Atualizando último gale item do candle 1752122940
2025-07-10 01:50:09,727 INFO: Atualizando candle com filtro: {'epoch': 1752122820}, update: {'$set': {'epoch': 1752122820, 'open': 2746.725, 'high': 2747.964, 'low': 2746.67, 'close': 2747.265, 'time': datetime.datetime(2025, 7, 10, 4, 47), 'signal': {'signal_id': 'XJKG2XZT', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 47), 'entry_time': datetime.datetime(2025, 7, 10, 1, 48), 'open_candle_timestamp': 1752122820, 'message_id': 10021, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122940, 'open_price': 2748.096, 'high': 2748.589, 'low': 2747.396, 'close_price': 2747.452, 'time': datetime.datetime(2025, 7, 10, 1, 49, 9, 681000), 'result': None}]}}
2025-07-10 01:50:09,729 INFO: Número de candles atualizados: 1
2025-07-10 01:50:09,730 INFO: ✅ Candle 1752122820 atualizado com sucesso
2025-07-10 01:50:09,730 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:50:09,730 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:50:09,730 INFO: Funcao validate_signals_for_candle iniciada para o sinal XJKG2XZT
2025-07-10 01:50:09,730 INFO: Buscando candle com signal_id: XJKG2XZT
2025-07-10 01:50:09,732 INFO: Candle encontrado para o signal_id: XJKG2XZT
2025-07-10 01:50:09,733 INFO: Funcao validate_signal iniciada para o signal XJKG2XZT
2025-07-10 01:50:09,733 INFO: Validando sinal XJKG2XZT com gale items
2025-07-10 01:50:09,733 INFO: Atualizando candle com filtro: {'epoch': 1752122820}, update: {'$set': {'epoch': 1752122820, 'open': 2746.725, 'high': 2747.964, 'low': 2746.67, 'close': 2747.265, 'time': datetime.datetime(2025, 7, 10, 4, 47), 'signal': {'signal_id': 'XJKG2XZT', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 47), 'entry_time': datetime.datetime(2025, 7, 10, 1, 48), 'open_candle_timestamp': 1752122820, 'message_id': 10021, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752122940, 'open_price': 2748.096, 'high': 2748.589, 'low': 2747.396, 'close_price': 2747.452, 'time': datetime.datetime(2025, 7, 10, 1, 49, 9, 681000), 'result': 'WIN'}]}}
2025-07-10 01:50:09,735 INFO: Número de candles atualizados: 1
2025-07-10 01:50:09,735 INFO: Candle completo com gales atualizado para XJKG2XZT
2025-07-10 01:50:10,567 INFO: ✅ Resposta de resultado enviada para o sinal XJKG2XZT
2025-07-10 01:50:10,567 INFO: Sinal XJKG2XZT validado como LOSS e notificação enviada
2025-07-10 01:50:10,567 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XJKG2XZT
2025-07-10 01:50:10,568 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:51:09,664 INFO: 🔔 Novo candle detectado em 2025-07-10 04:51:00 UTC
2025-07-10 01:51:09,665 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:51:09,673 INFO: Buscando candle com filtro: {'epoch': 1752123060}
2025-07-10 01:51:09,677 INFO: Candle não encontrado
2025-07-10 01:51:09,693 INFO: Tendência HMA: FALL (HMA21=2746.51, HMA100=2747.06)
2025-07-10 01:51:09,694 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:51:09,694 INFO: 📈 Análise: EMA9=2746.63, EMA21=2746.92, trend_ema=FALL, trend_final=FALL, RSI=27.07, MACD=-0.29/-0.23, ATR=0.82, body=0.00, confidence=80
2025-07-10 01:51:09,695 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 01:51:09,695 INFO: Inserindo candle: Candle(2025-07-10 04:51:00, DOJI, O:2746.20, H:2746.20, L:2746.20, C:2746.20)
2025-07-10 01:51:09,697 INFO: Candle inserido com ID: 686f46bd1d9c27c6b2f10c23
2025-07-10 01:51:10,541 INFO: Atualizando candle com filtro: {'signal.signal_id': 'DWQ94SWT'}, update: {'$set': {'signal': {'signal_id': 'DWQ94SWT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 51, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 52), 'open_candle_timestamp': 1752123060, 'message_id': 10024, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:51:10,543 INFO: Número de candles atualizados: 1
2025-07-10 01:51:10,544 INFO: ✅ Mensagem enviada ao Telegram (ID: DWQ94SWT).
2025-07-10 01:52:09,710 INFO: 🔔 Novo candle detectado em 2025-07-10 04:52:00 UTC
2025-07-10 01:52:09,712 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:52:09,715 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:52:09,715 INFO: 🔔 Candle 1752123120 é menor ou igual ao entry_time 2025-07-10 01:52:00
2025-07-10 01:53:09,684 INFO: 🔔 Novo candle detectado em 2025-07-10 04:53:00 UTC
2025-07-10 01:53:09,684 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:53:09,687 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:53:09,687 INFO: 🔔 Candle 1752123180 é maior que o entry_time 2025-07-10 01:52:00
2025-07-10 01:53:09,687 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:53:09,687 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:53:09,690 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:53:09,691 INFO: 🔄 Candle 1752123060 já existe no banco, atualizando...
2025-07-10 01:53:09,691 INFO: 🔄 Candle 1752123060 não tem gale_items
2025-07-10 01:53:09,691 INFO: Atualizando candle com filtro: {'epoch': 1752123060}, update: {'$set': {'epoch': 1752123060, 'open': 2746.2, 'high': 2746.409, 'low': 2745.518, 'close': 2746.24, 'time': datetime.datetime(2025, 7, 10, 4, 51), 'signal': {'signal_id': 'DWQ94SWT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 51), 'entry_time': datetime.datetime(2025, 7, 10, 1, 52), 'open_candle_timestamp': 1752123060, 'message_id': 10024, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:53:09,693 INFO: Número de candles atualizados: 1
2025-07-10 01:53:09,693 INFO: ✅ Candle 1752123060 atualizado com sucesso
2025-07-10 01:53:09,694 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:53:09,694 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:53:09,694 INFO: Funcao validate_signals_for_candle iniciada para o sinal DWQ94SWT
2025-07-10 01:53:09,694 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:53:09,696 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:53:09,696 INFO: Funcao validate_signal iniciada para o signal DWQ94SWT
2025-07-10 01:53:09,696 INFO: Funcao validate_signal finalizada para o signal DWQ94SWT
2025-07-10 01:53:09,697 INFO: Validando sinal DWQ94SWT sem gale items
2025-07-10 01:53:09,697 INFO: Sinal DWQ94SWT adicionado à fila para G1
2025-07-10 01:53:09,697 INFO: Atualizando candle com filtro: {'epoch': 1752123060}, update: {'$set': {'epoch': 1752123060, 'open': 2746.2, 'high': 2746.409, 'low': 2745.518, 'close': 2746.24, 'time': datetime.datetime(2025, 7, 10, 4, 51), 'signal': {'signal_id': 'DWQ94SWT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 51), 'entry_time': datetime.datetime(2025, 7, 10, 1, 52), 'open_candle_timestamp': 1752123060, 'message_id': 10024, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123180, 'open_price': 2746.041, 'high': 2746.041, 'low': 2746.041, 'close_price': 2746.041, 'time': datetime.datetime(2025, 7, 10, 1, 53, 9, 697242), 'result': None}]}}
2025-07-10 01:53:09,699 INFO: Número de candles atualizados: 1
2025-07-10 01:53:09,700 INFO: Candle completo com gales atualizado para DWQ94SWT
2025-07-10 01:53:10,534 INFO: ✅ Resposta de resultado enviada para o sinal DWQ94SWT
2025-07-10 01:53:10,535 INFO: Sinal DWQ94SWT validado como LOSS e notificação enviada
2025-07-10 01:53:10,535 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal DWQ94SWT
2025-07-10 01:53:10,535 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:54:09,674 INFO: 🔔 Novo candle detectado em 2025-07-10 04:54:00 UTC
2025-07-10 01:54:09,674 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:54:09,677 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:54:09,677 INFO: 🔔 Candle 1752123240 é maior que o entry_time 2025-07-10 01:52:00
2025-07-10 01:54:09,677 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:54:09,677 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:54:09,680 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:54:09,680 INFO: 🔄 Candle 1752123180 já existe no banco, atualizando...
2025-07-10 01:54:09,680 INFO: 🔄 Atualizando último gale item do candle 1752123180
2025-07-10 01:54:09,680 INFO: Atualizando candle com filtro: {'epoch': 1752123060}, update: {'$set': {'epoch': 1752123060, 'open': 2746.2, 'high': 2746.409, 'low': 2745.518, 'close': 2746.24, 'time': datetime.datetime(2025, 7, 10, 4, 51), 'signal': {'signal_id': 'DWQ94SWT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 51), 'entry_time': datetime.datetime(2025, 7, 10, 1, 52), 'open_candle_timestamp': 1752123060, 'message_id': 10024, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123180, 'open_price': 2746.041, 'high': 2746.222, 'low': 2745.484, 'close_price': 2745.93, 'time': datetime.datetime(2025, 7, 10, 1, 53, 9, 697000), 'result': None}]}}
2025-07-10 01:54:09,682 INFO: Número de candles atualizados: 1
2025-07-10 01:54:09,683 INFO: ✅ Candle 1752123060 atualizado com sucesso
2025-07-10 01:54:09,683 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:54:09,683 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:54:09,683 INFO: Funcao validate_signals_for_candle iniciada para o sinal DWQ94SWT
2025-07-10 01:54:09,683 INFO: Buscando candle com signal_id: DWQ94SWT
2025-07-10 01:54:09,685 INFO: Candle encontrado para o signal_id: DWQ94SWT
2025-07-10 01:54:09,685 INFO: Funcao validate_signal iniciada para o signal DWQ94SWT
2025-07-10 01:54:09,686 INFO: Validando sinal DWQ94SWT com gale items
2025-07-10 01:54:09,686 INFO: Atualizando candle com filtro: {'epoch': 1752123060}, update: {'$set': {'epoch': 1752123060, 'open': 2746.2, 'high': 2746.409, 'low': 2745.518, 'close': 2746.24, 'time': datetime.datetime(2025, 7, 10, 4, 51), 'signal': {'signal_id': 'DWQ94SWT', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 51), 'entry_time': datetime.datetime(2025, 7, 10, 1, 52), 'open_candle_timestamp': 1752123060, 'message_id': 10024, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123180, 'open_price': 2746.041, 'high': 2746.222, 'low': 2745.484, 'close_price': 2745.93, 'time': datetime.datetime(2025, 7, 10, 1, 53, 9, 697000), 'result': 'WIN'}]}}
2025-07-10 01:54:09,688 INFO: Número de candles atualizados: 1
2025-07-10 01:54:09,689 INFO: Candle completo com gales atualizado para DWQ94SWT
2025-07-10 01:54:10,497 INFO: ✅ Resposta de resultado enviada para o sinal DWQ94SWT
2025-07-10 01:54:10,498 INFO: Sinal DWQ94SWT validado como LOSS e notificação enviada
2025-07-10 01:54:10,498 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal DWQ94SWT
2025-07-10 01:54:10,498 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 01:55:09,683 INFO: 🔔 Novo candle detectado em 2025-07-10 04:55:00 UTC
2025-07-10 01:55:09,683 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 01:55:09,691 INFO: Buscando candle com filtro: {'epoch': 1752123300}
2025-07-10 01:55:09,695 INFO: Candle não encontrado
2025-07-10 01:55:09,710 INFO: Tendência HMA: FALL (HMA21=2746.70, HMA100=2746.14)
2025-07-10 01:55:09,711 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 01:55:09,711 INFO: 📈 Análise: EMA9=2746.44, EMA21=2746.26, trend_ema=RISE, trend_final=FALL, RSI=54.49, MACD=0.19/0.17, ATR=0.79, body=0.00, confidence=40
2025-07-10 01:55:09,711 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 01:55:09,712 INFO: Inserindo candle: Candle(2025-07-10 04:55:00, DOJI, O:2746.34, H:2746.34, L:2746.34, C:2746.34)
2025-07-10 01:55:09,714 INFO: Candle inserido com ID: 686f47ad1d9c27c6b2f10c24
2025-07-10 01:55:10,596 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NF6ERVJL'}, update: {'$set': {'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 22, 55, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 01:55:10,598 INFO: Número de candles atualizados: 1
2025-07-10 01:55:10,598 INFO: ✅ Mensagem enviada ao Telegram (ID: NF6ERVJL).
2025-07-10 01:56:09,712 INFO: 🔔 Novo candle detectado em 2025-07-10 04:56:00 UTC
2025-07-10 01:56:09,713 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:56:09,715 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:56:09,715 INFO: 🔔 Candle 1752123360 é menor ou igual ao entry_time 2025-07-10 01:56:00
2025-07-10 01:57:09,692 INFO: 🔔 Novo candle detectado em 2025-07-10 04:57:00 UTC
2025-07-10 01:57:09,692 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:57:09,695 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:57:09,695 INFO: 🔔 Candle 1752123420 é maior que o entry_time 2025-07-10 01:56:00
2025-07-10 01:57:09,696 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:57:09,696 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:57:09,699 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:57:09,699 INFO: 🔄 Candle 1752123300 já existe no banco, atualizando...
2025-07-10 01:57:09,699 INFO: 🔄 Candle 1752123300 não tem gale_items
2025-07-10 01:57:09,700 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 01:57:09,702 INFO: Número de candles atualizados: 1
2025-07-10 01:57:09,702 INFO: ✅ Candle 1752123300 atualizado com sucesso
2025-07-10 01:57:09,702 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:57:09,702 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:57:09,702 INFO: Funcao validate_signals_for_candle iniciada para o sinal NF6ERVJL
2025-07-10 01:57:09,703 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:57:09,705 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:57:09,705 INFO: Funcao validate_signal iniciada para o signal NF6ERVJL
2025-07-10 01:57:09,705 INFO: Funcao validate_signal finalizada para o signal NF6ERVJL
2025-07-10 01:57:09,705 INFO: Validando sinal NF6ERVJL sem gale items
2025-07-10 01:57:09,705 INFO: Sinal NF6ERVJL adicionado à fila para G1
2025-07-10 01:57:09,706 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123420, 'open_price': 2747.457, 'high': 2747.457, 'low': 2747.457, 'close_price': 2747.457, 'time': datetime.datetime(2025, 7, 10, 1, 57, 9, 705756), 'result': None}]}}
2025-07-10 01:57:09,707 INFO: Número de candles atualizados: 1
2025-07-10 01:57:09,708 INFO: Candle completo com gales atualizado para NF6ERVJL
2025-07-10 01:57:10,511 INFO: ✅ Resposta de resultado enviada para o sinal NF6ERVJL
2025-07-10 01:57:10,512 INFO: Sinal NF6ERVJL validado como LOSS e notificação enviada
2025-07-10 01:57:10,512 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NF6ERVJL
2025-07-10 01:57:10,512 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:58:09,729 INFO: 🔔 Novo candle detectado em 2025-07-10 04:58:00 UTC
2025-07-10 01:58:09,729 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:58:09,732 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:58:09,732 INFO: 🔔 Candle 1752123480 é maior que o entry_time 2025-07-10 01:56:00
2025-07-10 01:58:09,733 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:58:09,733 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:58:09,735 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:58:09,736 INFO: 🔄 Candle 1752123420 já existe no banco, atualizando...
2025-07-10 01:58:09,736 INFO: 🔄 Atualizando último gale item do candle 1752123420
2025-07-10 01:58:09,736 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123420, 'open_price': 2747.457, 'high': 2748.898, 'low': 2747.215, 'close_price': 2748.465, 'time': datetime.datetime(2025, 7, 10, 1, 57, 9, 705000), 'result': None}]}}
2025-07-10 01:58:09,739 INFO: Número de candles atualizados: 1
2025-07-10 01:58:09,739 INFO: ✅ Candle 1752123300 atualizado com sucesso
2025-07-10 01:58:09,739 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:58:09,740 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:58:09,740 INFO: Funcao validate_signals_for_candle iniciada para o sinal NF6ERVJL
2025-07-10 01:58:09,740 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:58:09,742 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:58:09,742 INFO: Funcao validate_signal iniciada para o signal NF6ERVJL
2025-07-10 01:58:09,743 INFO: Validando sinal NF6ERVJL com gale items
2025-07-10 01:58:09,743 INFO: Gale G1 para o sinal NF6ERVJL resultou em LOSS
2025-07-10 01:58:09,743 INFO: Sinal NF6ERVJL adicionado à fila para G2
2025-07-10 01:58:09,743 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123420, 'open_price': 2747.457, 'high': 2748.898, 'low': 2747.215, 'close_price': 2748.465, 'time': datetime.datetime(2025, 7, 10, 1, 57, 9, 705000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752123480, 'open_price': 2748.782, 'high': 2748.782, 'low': 2748.782, 'close_price': 2748.782, 'time': datetime.datetime(2025, 7, 10, 1, 58, 9, 743232), 'result': None}]}}
2025-07-10 01:58:09,745 INFO: Número de candles atualizados: 1
2025-07-10 01:58:09,746 INFO: Candle completo com gales atualizado para NF6ERVJL
2025-07-10 01:58:10,582 INFO: ✅ Resposta de resultado enviada para o sinal NF6ERVJL
2025-07-10 01:58:10,582 INFO: Sinal NF6ERVJL validado como LOSS e notificação enviada
2025-07-10 01:58:10,583 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NF6ERVJL
2025-07-10 01:58:10,583 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 01:59:09,678 INFO: 🔔 Novo candle detectado em 2025-07-10 04:59:00 UTC
2025-07-10 01:59:09,678 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:59:09,681 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:59:09,681 INFO: 🔔 Candle 1752123540 é maior que o entry_time 2025-07-10 01:56:00
2025-07-10 01:59:09,682 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 01:59:09,682 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:59:09,684 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:59:09,685 INFO: 🔄 Candle 1752123480 já existe no banco, atualizando...
2025-07-10 01:59:09,685 INFO: 🔄 Atualizando último gale item do candle 1752123480
2025-07-10 01:59:09,685 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123420, 'open_price': 2747.457, 'high': 2748.898, 'low': 2747.215, 'close_price': 2748.465, 'time': datetime.datetime(2025, 7, 10, 1, 57, 9, 705000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752123480, 'open_price': 2748.782, 'high': 2749.365, 'low': 2748.155, 'close_price': 2749.354, 'time': datetime.datetime(2025, 7, 10, 1, 58, 9, 743000), 'result': None}]}}
2025-07-10 01:59:09,687 INFO: Número de candles atualizados: 1
2025-07-10 01:59:09,687 INFO: ✅ Candle 1752123300 atualizado com sucesso
2025-07-10 01:59:09,688 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 01:59:09,688 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 01:59:09,688 INFO: Funcao validate_signals_for_candle iniciada para o sinal NF6ERVJL
2025-07-10 01:59:09,688 INFO: Buscando candle com signal_id: NF6ERVJL
2025-07-10 01:59:09,690 INFO: Candle encontrado para o signal_id: NF6ERVJL
2025-07-10 01:59:09,690 INFO: Funcao validate_signal iniciada para o signal NF6ERVJL
2025-07-10 01:59:09,690 INFO: Validando sinal NF6ERVJL com gale items
2025-07-10 01:59:09,690 INFO: Gale G2 para o sinal NF6ERVJL resultou em LOSS
2025-07-10 01:59:09,690 INFO: Atualizando candle com filtro: {'epoch': 1752123300}, update: {'$set': {'epoch': 1752123300, 'open': 2746.339, 'high': 2747.883, 'low': 2746.339, 'close': 2747.353, 'time': datetime.datetime(2025, 7, 10, 4, 55), 'signal': {'signal_id': 'NF6ERVJL', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 55), 'entry_time': datetime.datetime(2025, 7, 10, 1, 56), 'open_candle_timestamp': 1752123300, 'message_id': 10027, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123420, 'open_price': 2747.457, 'high': 2748.898, 'low': 2747.215, 'close_price': 2748.465, 'time': datetime.datetime(2025, 7, 10, 1, 57, 9, 705000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752123480, 'open_price': 2748.782, 'high': 2749.365, 'low': 2748.155, 'close_price': 2749.354, 'time': datetime.datetime(2025, 7, 10, 1, 58, 9, 743000), 'result': 'LOSS'}]}}
2025-07-10 01:59:09,693 INFO: Número de candles atualizados: 1
2025-07-10 01:59:09,693 INFO: Candle completo com gales atualizado para NF6ERVJL
2025-07-10 01:59:10,517 INFO: ✅ Resposta de resultado enviada para o sinal NF6ERVJL
2025-07-10 01:59:10,518 INFO: Sinal NF6ERVJL validado como LOSS e notificação enviada
2025-07-10 01:59:10,519 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NF6ERVJL
2025-07-10 01:59:10,519 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:00:09,709 INFO: 🔔 Novo candle detectado em 2025-07-10 05:00:00 UTC
2025-07-10 02:00:09,709 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:00:09,718 INFO: Buscando candle com filtro: {'epoch': 1752123600}
2025-07-10 02:00:09,721 INFO: Candle não encontrado
2025-07-10 02:00:09,736 INFO: Tendência HMA: FALL (HMA21=2751.04, HMA100=2750.40)
2025-07-10 02:00:09,736 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:00:09,736 INFO: 📈 Análise: EMA9=2750.72, EMA21=2750.37, trend_ema=RISE, trend_final=FALL, RSI=65.06, MACD=0.41/0.42, ATR=1.11, body=0.00, confidence=20
2025-07-10 02:00:09,736 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:00:09,736 INFO: Inserindo candle: Candle(2025-07-10 05:00:00, DOJI, O:2750.72, H:2750.72, L:2750.72, C:2750.72)
2025-07-10 02:00:09,739 INFO: Candle inserido com ID: 686f48d91d9c27c6b2f10c25
2025-07-10 02:00:10,556 INFO: Atualizando candle com filtro: {'signal.signal_id': 'OC2BLWU9'}, update: {'$set': {'signal': {'signal_id': 'OC2BLWU9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 0, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 1), 'open_candle_timestamp': 1752123600, 'message_id': 10031, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:00:10,560 INFO: Número de candles atualizados: 1
2025-07-10 02:00:10,560 INFO: ✅ Mensagem enviada ao Telegram (ID: OC2BLWU9).
2025-07-10 02:01:09,714 INFO: 🔔 Novo candle detectado em 2025-07-10 05:01:00 UTC
2025-07-10 02:01:09,714 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:01:09,717 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:01:09,718 INFO: 🔔 Candle 1752123660 é menor ou igual ao entry_time 2025-07-10 02:01:00
2025-07-10 02:02:09,678 INFO: 🔔 Novo candle detectado em 2025-07-10 05:02:00 UTC
2025-07-10 02:02:09,679 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:02:09,681 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:02:09,681 INFO: 🔔 Candle 1752123720 é maior que o entry_time 2025-07-10 02:01:00
2025-07-10 02:02:09,681 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:02:09,682 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:02:09,684 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:02:09,684 INFO: 🔄 Candle 1752123600 já existe no banco, atualizando...
2025-07-10 02:02:09,684 INFO: 🔄 Candle 1752123600 não tem gale_items
2025-07-10 02:02:09,685 INFO: Atualizando candle com filtro: {'epoch': 1752123600}, update: {'$set': {'epoch': 1752123600, 'open': 2750.722, 'high': 2753.442, 'low': 2750.618, 'close': 2753.317, 'time': datetime.datetime(2025, 7, 10, 5, 0), 'signal': {'signal_id': 'OC2BLWU9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 0), 'entry_time': datetime.datetime(2025, 7, 10, 2, 1), 'open_candle_timestamp': 1752123600, 'message_id': 10031, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:02:09,687 INFO: Número de candles atualizados: 1
2025-07-10 02:02:09,688 INFO: ✅ Candle 1752123600 atualizado com sucesso
2025-07-10 02:02:09,688 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:02:09,688 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:02:09,688 INFO: Funcao validate_signals_for_candle iniciada para o sinal OC2BLWU9
2025-07-10 02:02:09,688 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:02:09,690 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:02:09,690 INFO: Funcao validate_signal iniciada para o signal OC2BLWU9
2025-07-10 02:02:09,690 INFO: Funcao validate_signal finalizada para o signal OC2BLWU9
2025-07-10 02:02:09,691 INFO: Validando sinal OC2BLWU9 sem gale items
2025-07-10 02:02:09,691 INFO: Sinal OC2BLWU9 adicionado à fila para G1
2025-07-10 02:02:09,691 INFO: Atualizando candle com filtro: {'epoch': 1752123600}, update: {'$set': {'epoch': 1752123600, 'open': 2750.722, 'high': 2753.442, 'low': 2750.618, 'close': 2753.317, 'time': datetime.datetime(2025, 7, 10, 5, 0), 'signal': {'signal_id': 'OC2BLWU9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 0), 'entry_time': datetime.datetime(2025, 7, 10, 2, 1), 'open_candle_timestamp': 1752123600, 'message_id': 10031, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123720, 'open_price': 2754.056, 'high': 2754.056, 'low': 2754.056, 'close_price': 2754.056, 'time': datetime.datetime(2025, 7, 10, 2, 2, 9, 691390), 'result': None}]}}
2025-07-10 02:02:09,693 INFO: Número de candles atualizados: 1
2025-07-10 02:02:09,694 INFO: Candle completo com gales atualizado para OC2BLWU9
2025-07-10 02:02:10,509 INFO: ✅ Resposta de resultado enviada para o sinal OC2BLWU9
2025-07-10 02:02:10,509 INFO: Sinal OC2BLWU9 validado como LOSS e notificação enviada
2025-07-10 02:02:10,511 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal OC2BLWU9
2025-07-10 02:02:10,511 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:03:09,715 INFO: 🔔 Novo candle detectado em 2025-07-10 05:03:00 UTC
2025-07-10 02:03:09,715 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:03:09,718 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:03:09,718 INFO: 🔔 Candle 1752123780 é maior que o entry_time 2025-07-10 02:01:00
2025-07-10 02:03:09,718 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:03:09,718 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:03:09,720 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:03:09,720 INFO: 🔄 Candle 1752123720 já existe no banco, atualizando...
2025-07-10 02:03:09,720 INFO: 🔄 Atualizando último gale item do candle 1752123720
2025-07-10 02:03:09,721 INFO: Atualizando candle com filtro: {'epoch': 1752123600}, update: {'$set': {'epoch': 1752123600, 'open': 2750.722, 'high': 2753.442, 'low': 2750.618, 'close': 2753.317, 'time': datetime.datetime(2025, 7, 10, 5, 0), 'signal': {'signal_id': 'OC2BLWU9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 0), 'entry_time': datetime.datetime(2025, 7, 10, 2, 1), 'open_candle_timestamp': 1752123600, 'message_id': 10031, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123720, 'open_price': 2754.056, 'high': 2754.082, 'low': 2752.266, 'close_price': 2752.733, 'time': datetime.datetime(2025, 7, 10, 2, 2, 9, 691000), 'result': None}]}}
2025-07-10 02:03:09,723 INFO: Número de candles atualizados: 1
2025-07-10 02:03:09,723 INFO: ✅ Candle 1752123600 atualizado com sucesso
2025-07-10 02:03:09,724 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:03:09,724 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:03:09,724 INFO: Funcao validate_signals_for_candle iniciada para o sinal OC2BLWU9
2025-07-10 02:03:09,724 INFO: Buscando candle com signal_id: OC2BLWU9
2025-07-10 02:03:09,726 INFO: Candle encontrado para o signal_id: OC2BLWU9
2025-07-10 02:03:09,726 INFO: Funcao validate_signal iniciada para o signal OC2BLWU9
2025-07-10 02:03:09,726 INFO: Validando sinal OC2BLWU9 com gale items
2025-07-10 02:03:09,726 INFO: Atualizando candle com filtro: {'epoch': 1752123600}, update: {'$set': {'epoch': 1752123600, 'open': 2750.722, 'high': 2753.442, 'low': 2750.618, 'close': 2753.317, 'time': datetime.datetime(2025, 7, 10, 5, 0), 'signal': {'signal_id': 'OC2BLWU9', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 0), 'entry_time': datetime.datetime(2025, 7, 10, 2, 1), 'open_candle_timestamp': 1752123600, 'message_id': 10031, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123720, 'open_price': 2754.056, 'high': 2754.082, 'low': 2752.266, 'close_price': 2752.733, 'time': datetime.datetime(2025, 7, 10, 2, 2, 9, 691000), 'result': 'WIN'}]}}
2025-07-10 02:03:09,729 INFO: Número de candles atualizados: 1
2025-07-10 02:03:09,729 INFO: Candle completo com gales atualizado para OC2BLWU9
2025-07-10 02:03:10,565 INFO: ✅ Resposta de resultado enviada para o sinal OC2BLWU9
2025-07-10 02:03:10,566 INFO: Sinal OC2BLWU9 validado como LOSS e notificação enviada
2025-07-10 02:03:10,566 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal OC2BLWU9
2025-07-10 02:03:10,566 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:04:09,706 INFO: 🔔 Novo candle detectado em 2025-07-10 05:04:00 UTC
2025-07-10 02:04:09,707 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:04:09,715 INFO: Buscando candle com filtro: {'epoch': 1752123840}
2025-07-10 02:04:09,718 INFO: Candle não encontrado
2025-07-10 02:04:09,733 INFO: Tendência HMA: FALL (HMA21=2752.94, HMA100=2752.59)
2025-07-10 02:04:09,734 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:04:09,734 INFO: 📈 Análise: EMA9=2752.89, EMA21=2752.86, trend_ema=RISE, trend_final=FALL, RSI=52.20, MACD=0.03/0.04, ATR=0.72, body=0.00, confidence=20
2025-07-10 02:04:09,734 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:04:09,735 INFO: Inserindo candle: Candle(2025-07-10 05:04:00, DOJI, O:2752.92, H:2752.92, L:2752.92, C:2752.92)
2025-07-10 02:04:09,738 INFO: Candle inserido com ID: 686f49c91d9c27c6b2f10c26
2025-07-10 02:04:10,562 INFO: Atualizando candle com filtro: {'signal.signal_id': 'E1BX5HYZ'}, update: {'$set': {'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 4, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:04:10,565 INFO: Número de candles atualizados: 1
2025-07-10 02:04:10,565 INFO: ✅ Mensagem enviada ao Telegram (ID: E1BX5HYZ).
2025-07-10 02:05:09,702 INFO: 🔔 Novo candle detectado em 2025-07-10 05:05:00 UTC
2025-07-10 02:05:09,702 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:05:09,704 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:05:09,705 INFO: 🔔 Candle 1752123900 é menor ou igual ao entry_time 2025-07-10 02:05:00
2025-07-10 02:06:09,679 INFO: 🔔 Novo candle detectado em 2025-07-10 05:06:00 UTC
2025-07-10 02:06:09,679 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:06:09,682 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:06:09,682 INFO: 🔔 Candle 1752123960 é maior que o entry_time 2025-07-10 02:05:00
2025-07-10 02:06:09,682 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:06:09,682 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:06:09,686 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:06:09,686 INFO: 🔄 Candle 1752123840 já existe no banco, atualizando...
2025-07-10 02:06:09,686 INFO: 🔄 Candle 1752123840 não tem gale_items
2025-07-10 02:06:09,687 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:06:09,689 INFO: Número de candles atualizados: 1
2025-07-10 02:06:09,689 INFO: ✅ Candle 1752123840 atualizado com sucesso
2025-07-10 02:06:09,689 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:06:09,690 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:06:09,690 INFO: Funcao validate_signals_for_candle iniciada para o sinal E1BX5HYZ
2025-07-10 02:06:09,691 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:06:09,692 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:06:09,693 INFO: Funcao validate_signal iniciada para o signal E1BX5HYZ
2025-07-10 02:06:09,693 INFO: Funcao validate_signal finalizada para o signal E1BX5HYZ
2025-07-10 02:06:09,693 INFO: Validando sinal E1BX5HYZ sem gale items
2025-07-10 02:06:09,693 INFO: Sinal E1BX5HYZ adicionado à fila para G1
2025-07-10 02:06:09,694 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123960, 'open_price': 2755.999, 'high': 2755.999, 'low': 2755.999, 'close_price': 2755.999, 'time': datetime.datetime(2025, 7, 10, 2, 6, 9, 693788), 'result': None}]}}
2025-07-10 02:06:09,696 INFO: Número de candles atualizados: 1
2025-07-10 02:06:09,696 INFO: Candle completo com gales atualizado para E1BX5HYZ
2025-07-10 02:06:10,514 INFO: ✅ Resposta de resultado enviada para o sinal E1BX5HYZ
2025-07-10 02:06:10,515 INFO: Sinal E1BX5HYZ validado como LOSS e notificação enviada
2025-07-10 02:06:10,515 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal E1BX5HYZ
2025-07-10 02:06:10,515 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:07:09,688 INFO: 🔔 Novo candle detectado em 2025-07-10 05:07:00 UTC
2025-07-10 02:07:09,688 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:07:09,691 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:07:09,691 INFO: 🔔 Candle 1752124020 é maior que o entry_time 2025-07-10 02:05:00
2025-07-10 02:07:09,691 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:07:09,692 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:07:09,694 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:07:09,694 INFO: 🔄 Candle 1752123960 já existe no banco, atualizando...
2025-07-10 02:07:09,694 INFO: 🔄 Atualizando último gale item do candle 1752123960
2025-07-10 02:07:09,695 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123960, 'open_price': 2755.999, 'high': 2757.391, 'low': 2755.369, 'close_price': 2757.391, 'time': datetime.datetime(2025, 7, 10, 2, 6, 9, 693000), 'result': None}]}}
2025-07-10 02:07:09,697 INFO: Número de candles atualizados: 1
2025-07-10 02:07:09,697 INFO: ✅ Candle 1752123840 atualizado com sucesso
2025-07-10 02:07:09,697 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:07:09,697 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:07:09,698 INFO: Funcao validate_signals_for_candle iniciada para o sinal E1BX5HYZ
2025-07-10 02:07:09,698 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:07:09,699 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:07:09,700 INFO: Funcao validate_signal iniciada para o signal E1BX5HYZ
2025-07-10 02:07:09,700 INFO: Validando sinal E1BX5HYZ com gale items
2025-07-10 02:07:09,700 INFO: Gale G1 para o sinal E1BX5HYZ resultou em LOSS
2025-07-10 02:07:09,701 INFO: Sinal E1BX5HYZ adicionado à fila para G2
2025-07-10 02:07:09,701 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123960, 'open_price': 2755.999, 'high': 2757.391, 'low': 2755.369, 'close_price': 2757.391, 'time': datetime.datetime(2025, 7, 10, 2, 6, 9, 693000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124020, 'open_price': 2757.349, 'high': 2757.349, 'low': 2757.349, 'close_price': 2757.349, 'time': datetime.datetime(2025, 7, 10, 2, 7, 9, 701043), 'result': None}]}}
2025-07-10 02:07:09,703 INFO: Número de candles atualizados: 1
2025-07-10 02:07:09,703 INFO: Candle completo com gales atualizado para E1BX5HYZ
2025-07-10 02:07:10,536 INFO: ✅ Resposta de resultado enviada para o sinal E1BX5HYZ
2025-07-10 02:07:10,536 INFO: Sinal E1BX5HYZ validado como LOSS e notificação enviada
2025-07-10 02:07:10,537 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal E1BX5HYZ
2025-07-10 02:07:10,537 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:08:09,680 INFO: 🔔 Novo candle detectado em 2025-07-10 05:08:00 UTC
2025-07-10 02:08:09,680 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:08:09,683 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:08:09,683 INFO: 🔔 Candle 1752124080 é maior que o entry_time 2025-07-10 02:05:00
2025-07-10 02:08:09,683 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:08:09,683 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:08:09,686 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:08:09,687 INFO: 🔄 Candle 1752124020 já existe no banco, atualizando...
2025-07-10 02:08:09,687 INFO: 🔄 Atualizando último gale item do candle 1752124020
2025-07-10 02:08:09,687 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123960, 'open_price': 2755.999, 'high': 2757.391, 'low': 2755.369, 'close_price': 2757.391, 'time': datetime.datetime(2025, 7, 10, 2, 6, 9, 693000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124020, 'open_price': 2757.349, 'high': 2757.577, 'low': 2756.417, 'close_price': 2757.544, 'time': datetime.datetime(2025, 7, 10, 2, 7, 9, 701000), 'result': None}]}}
2025-07-10 02:08:09,689 INFO: Número de candles atualizados: 1
2025-07-10 02:08:09,690 INFO: ✅ Candle 1752123840 atualizado com sucesso
2025-07-10 02:08:09,690 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:08:09,690 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:08:09,690 INFO: Funcao validate_signals_for_candle iniciada para o sinal E1BX5HYZ
2025-07-10 02:08:09,690 INFO: Buscando candle com signal_id: E1BX5HYZ
2025-07-10 02:08:09,692 INFO: Candle encontrado para o signal_id: E1BX5HYZ
2025-07-10 02:08:09,692 INFO: Funcao validate_signal iniciada para o signal E1BX5HYZ
2025-07-10 02:08:09,692 INFO: Validando sinal E1BX5HYZ com gale items
2025-07-10 02:08:09,692 INFO: Gale G2 para o sinal E1BX5HYZ resultou em LOSS
2025-07-10 02:08:09,693 INFO: Atualizando candle com filtro: {'epoch': 1752123840}, update: {'$set': {'epoch': 1752123840, 'open': 2752.924, 'high': 2755.295, 'low': 2752.924, 'close': 2755.116, 'time': datetime.datetime(2025, 7, 10, 5, 4), 'signal': {'signal_id': 'E1BX5HYZ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 4), 'entry_time': datetime.datetime(2025, 7, 10, 2, 5), 'open_candle_timestamp': 1752123840, 'message_id': 10034, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752123960, 'open_price': 2755.999, 'high': 2757.391, 'low': 2755.369, 'close_price': 2757.391, 'time': datetime.datetime(2025, 7, 10, 2, 6, 9, 693000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124020, 'open_price': 2757.349, 'high': 2757.577, 'low': 2756.417, 'close_price': 2757.544, 'time': datetime.datetime(2025, 7, 10, 2, 7, 9, 701000), 'result': 'LOSS'}]}}
2025-07-10 02:08:09,695 INFO: Número de candles atualizados: 1
2025-07-10 02:08:09,695 INFO: Candle completo com gales atualizado para E1BX5HYZ
2025-07-10 02:08:10,518 INFO: ✅ Resposta de resultado enviada para o sinal E1BX5HYZ
2025-07-10 02:08:10,518 INFO: Sinal E1BX5HYZ validado como LOSS e notificação enviada
2025-07-10 02:08:10,519 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal E1BX5HYZ
2025-07-10 02:08:10,519 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:09:09,701 INFO: 🔔 Novo candle detectado em 2025-07-10 05:09:00 UTC
2025-07-10 02:09:09,701 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:09:09,710 INFO: Buscando candle com filtro: {'epoch': 1752124140}
2025-07-10 02:09:09,713 INFO: Candle não encontrado
2025-07-10 02:09:09,728 INFO: Tendência HMA: FALL (HMA21=2756.89, HMA100=2757.44)
2025-07-10 02:09:09,728 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:09:09,728 INFO: 📈 Análise: EMA9=2757.00, EMA21=2757.11, trend_ema=FALL, trend_final=FALL, RSI=48.03, MACD=-0.09/-0.07, ATR=0.99, body=0.00, confidence=40
2025-07-10 02:09:09,728 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:09:09,729 INFO: Inserindo candle: Candle(2025-07-10 05:09:00, DOJI, O:2757.05, H:2757.05, L:2757.05, C:2757.05)
2025-07-10 02:09:09,732 INFO: Candle inserido com ID: 686f4af51d9c27c6b2f10c27
2025-07-10 02:09:10,549 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NM6AJESS'}, update: {'$set': {'signal': {'signal_id': 'NM6AJESS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 9, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 10), 'open_candle_timestamp': 1752124140, 'message_id': 10038, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:09:10,551 INFO: Número de candles atualizados: 1
2025-07-10 02:09:10,552 INFO: ✅ Mensagem enviada ao Telegram (ID: NM6AJESS).
2025-07-10 02:10:09,718 INFO: 🔔 Novo candle detectado em 2025-07-10 05:10:00 UTC
2025-07-10 02:10:09,718 INFO: Buscando candle com signal_id: NM6AJESS
2025-07-10 02:10:09,721 INFO: Candle encontrado para o signal_id: NM6AJESS
2025-07-10 02:10:09,721 INFO: 🔔 Candle 1752124200 é menor ou igual ao entry_time 2025-07-10 02:10:00
2025-07-10 02:11:09,698 INFO: 🔔 Novo candle detectado em 2025-07-10 05:11:00 UTC
2025-07-10 02:11:09,698 INFO: Buscando candle com signal_id: NM6AJESS
2025-07-10 02:11:09,701 INFO: Candle encontrado para o signal_id: NM6AJESS
2025-07-10 02:11:09,702 INFO: 🔔 Candle 1752124260 é maior que o entry_time 2025-07-10 02:10:00
2025-07-10 02:11:09,702 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:11:09,702 INFO: Buscando candle com signal_id: NM6AJESS
2025-07-10 02:11:09,704 INFO: Candle encontrado para o signal_id: NM6AJESS
2025-07-10 02:11:09,704 INFO: 🔄 Candle 1752124140 já existe no banco, atualizando...
2025-07-10 02:11:09,705 INFO: 🔄 Candle 1752124140 não tem gale_items
2025-07-10 02:11:09,705 INFO: Atualizando candle com filtro: {'epoch': 1752124140}, update: {'$set': {'epoch': 1752124140, 'open': 2757.047, 'high': 2757.047, 'low': 2756.336, 'close': 2756.651, 'time': datetime.datetime(2025, 7, 10, 5, 9), 'signal': {'signal_id': 'NM6AJESS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 9), 'entry_time': datetime.datetime(2025, 7, 10, 2, 10), 'open_candle_timestamp': 1752124140, 'message_id': 10038, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:11:09,707 INFO: Número de candles atualizados: 1
2025-07-10 02:11:09,708 INFO: ✅ Candle 1752124140 atualizado com sucesso
2025-07-10 02:11:09,708 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:11:09,708 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:11:09,708 INFO: Funcao validate_signals_for_candle iniciada para o sinal NM6AJESS
2025-07-10 02:11:09,708 INFO: Buscando candle com signal_id: NM6AJESS
2025-07-10 02:11:09,710 INFO: Candle encontrado para o signal_id: NM6AJESS
2025-07-10 02:11:09,710 INFO: Funcao validate_signal iniciada para o signal NM6AJESS
2025-07-10 02:11:09,711 INFO: Funcao validate_signal finalizada para o signal NM6AJESS
2025-07-10 02:11:09,711 INFO: Validando sinal NM6AJESS sem gale items
2025-07-10 02:11:09,711 INFO: Atualizando candle com filtro: {'signal.signal_id': 'NM6AJESS'}, update: {'$set': {'signal': {'signal_id': 'NM6AJESS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 9), 'entry_time': datetime.datetime(2025, 7, 10, 2, 10), 'open_candle_timestamp': 1752124140, 'message_id': 10038, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:11:09,713 INFO: Número de candles atualizados: 1
2025-07-10 02:11:09,714 INFO: Sinal atualizado no repositório para NM6AJESS
2025-07-10 02:11:10,516 INFO: ✅ Resposta de resultado enviada para o sinal NM6AJESS
2025-07-10 02:11:10,517 INFO: Sinal NM6AJESS validado como WIN e notificação enviada
2025-07-10 02:11:10,517 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal NM6AJESS
2025-07-10 02:11:10,517 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:12:09,681 INFO: 🔔 Novo candle detectado em 2025-07-10 05:12:00 UTC
2025-07-10 02:12:09,682 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:12:09,690 INFO: Buscando candle com filtro: {'epoch': 1752124320}
2025-07-10 02:12:09,692 INFO: Candle não encontrado
2025-07-10 02:12:09,707 INFO: Tendência HMA: FALL (HMA21=2757.88, HMA100=2758.40)
2025-07-10 02:12:09,707 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:12:09,707 INFO: 📈 Análise: EMA9=2757.96, EMA21=2758.01, trend_ema=FALL, trend_final=FALL, RSI=50.28, MACD=-0.01/0.05, ATR=0.68, body=0.00, confidence=40
2025-07-10 02:12:09,708 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:12:09,708 INFO: Inserindo candle: Candle(2025-07-10 05:12:00, DOJI, O:2758.00, H:2758.00, L:2758.00, C:2758.00)
2025-07-10 02:12:09,711 INFO: Candle inserido com ID: 686f4ba91d9c27c6b2f10c28
2025-07-10 02:12:10,589 INFO: Atualizando candle com filtro: {'signal.signal_id': '4E0HOFU3'}, update: {'$set': {'signal': {'signal_id': '4E0HOFU3', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 12, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 13), 'open_candle_timestamp': 1752124320, 'message_id': 10040, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:12:10,592 INFO: Número de candles atualizados: 1
2025-07-10 02:12:10,593 INFO: ✅ Mensagem enviada ao Telegram (ID: 4E0HOFU3).
2025-07-10 02:13:09,697 INFO: 🔔 Novo candle detectado em 2025-07-10 05:13:00 UTC
2025-07-10 02:13:09,697 INFO: Buscando candle com signal_id: 4E0HOFU3
2025-07-10 02:13:09,700 INFO: Candle encontrado para o signal_id: 4E0HOFU3
2025-07-10 02:13:09,700 INFO: 🔔 Candle 1752124380 é menor ou igual ao entry_time 2025-07-10 02:13:00
2025-07-10 02:14:09,694 INFO: 🔔 Novo candle detectado em 2025-07-10 05:14:00 UTC
2025-07-10 02:14:09,695 INFO: Buscando candle com signal_id: 4E0HOFU3
2025-07-10 02:14:09,697 INFO: Candle encontrado para o signal_id: 4E0HOFU3
2025-07-10 02:14:09,698 INFO: 🔔 Candle 1752124440 é maior que o entry_time 2025-07-10 02:13:00
2025-07-10 02:14:09,698 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:14:09,698 INFO: Buscando candle com signal_id: 4E0HOFU3
2025-07-10 02:14:09,701 INFO: Candle encontrado para o signal_id: 4E0HOFU3
2025-07-10 02:14:09,701 INFO: 🔄 Candle 1752124320 já existe no banco, atualizando...
2025-07-10 02:14:09,701 INFO: 🔄 Candle 1752124320 não tem gale_items
2025-07-10 02:14:09,702 INFO: Atualizando candle com filtro: {'epoch': 1752124320}, update: {'$set': {'epoch': 1752124320, 'open': 2757.998, 'high': 2758.392, 'low': 2757.014, 'close': 2757.833, 'time': datetime.datetime(2025, 7, 10, 5, 12), 'signal': {'signal_id': '4E0HOFU3', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 12), 'entry_time': datetime.datetime(2025, 7, 10, 2, 13), 'open_candle_timestamp': 1752124320, 'message_id': 10040, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:14:09,704 INFO: Número de candles atualizados: 1
2025-07-10 02:14:09,705 INFO: ✅ Candle 1752124320 atualizado com sucesso
2025-07-10 02:14:09,705 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:14:09,705 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:14:09,705 INFO: Funcao validate_signals_for_candle iniciada para o sinal 4E0HOFU3
2025-07-10 02:14:09,705 INFO: Buscando candle com signal_id: 4E0HOFU3
2025-07-10 02:14:09,707 INFO: Candle encontrado para o signal_id: 4E0HOFU3
2025-07-10 02:14:09,707 INFO: Funcao validate_signal iniciada para o signal 4E0HOFU3
2025-07-10 02:14:09,708 INFO: Funcao validate_signal finalizada para o signal 4E0HOFU3
2025-07-10 02:14:09,708 INFO: Validando sinal 4E0HOFU3 sem gale items
2025-07-10 02:14:09,708 INFO: Atualizando candle com filtro: {'signal.signal_id': '4E0HOFU3'}, update: {'$set': {'signal': {'signal_id': '4E0HOFU3', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 12), 'entry_time': datetime.datetime(2025, 7, 10, 2, 13), 'open_candle_timestamp': 1752124320, 'message_id': 10040, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:14:09,710 INFO: Número de candles atualizados: 1
2025-07-10 02:14:09,710 INFO: Sinal atualizado no repositório para 4E0HOFU3
2025-07-10 02:14:10,535 INFO: ✅ Resposta de resultado enviada para o sinal 4E0HOFU3
2025-07-10 02:14:10,536 INFO: Sinal 4E0HOFU3 validado como WIN e notificação enviada
2025-07-10 02:14:10,536 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 4E0HOFU3
2025-07-10 02:14:10,536 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:15:09,697 INFO: 🔔 Novo candle detectado em 2025-07-10 05:15:00 UTC
2025-07-10 02:15:09,698 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:15:09,707 INFO: Buscando candle com filtro: {'epoch': 1752124500}
2025-07-10 02:15:09,709 INFO: Candle não encontrado
2025-07-10 02:15:09,724 INFO: Tendência HMA: FALL (HMA21=2759.66, HMA100=2758.52)
2025-07-10 02:15:09,725 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:15:09,725 INFO: 📈 Análise: EMA9=2759.35, EMA21=2758.90, trend_ema=RISE, trend_final=FALL, RSI=85.04, MACD=0.44/0.34, ATR=0.99, body=0.00, confidence=80
2025-07-10 02:15:09,725 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 02:15:09,726 INFO: Inserindo candle: Candle(2025-07-10 05:15:00, DOJI, O:2759.76, H:2759.76, L:2759.76, C:2759.76)
2025-07-10 02:15:09,728 INFO: Candle inserido com ID: 686f4c5d1d9c27c6b2f10c29
2025-07-10 02:15:10,546 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KODI59UY'}, update: {'$set': {'signal': {'signal_id': 'KODI59UY', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 15, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 16), 'open_candle_timestamp': 1752124500, 'message_id': 10042, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:15:10,549 INFO: Número de candles atualizados: 1
2025-07-10 02:15:10,549 INFO: ✅ Mensagem enviada ao Telegram (ID: KODI59UY).
2025-07-10 02:16:09,700 INFO: 🔔 Novo candle detectado em 2025-07-10 05:16:00 UTC
2025-07-10 02:16:09,700 INFO: Buscando candle com signal_id: KODI59UY
2025-07-10 02:16:09,703 INFO: Candle encontrado para o signal_id: KODI59UY
2025-07-10 02:16:09,703 INFO: 🔔 Candle 1752124560 é menor ou igual ao entry_time 2025-07-10 02:16:00
2025-07-10 02:17:09,737 INFO: 🔔 Novo candle detectado em 2025-07-10 05:17:00 UTC
2025-07-10 02:17:09,738 INFO: Buscando candle com signal_id: KODI59UY
2025-07-10 02:17:09,741 INFO: Candle encontrado para o signal_id: KODI59UY
2025-07-10 02:17:09,741 INFO: 🔔 Candle 1752124620 é maior que o entry_time 2025-07-10 02:16:00
2025-07-10 02:17:09,741 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:17:09,741 INFO: Buscando candle com signal_id: KODI59UY
2025-07-10 02:17:09,744 INFO: Candle encontrado para o signal_id: KODI59UY
2025-07-10 02:17:09,744 INFO: 🔄 Candle 1752124500 já existe no banco, atualizando...
2025-07-10 02:17:09,744 INFO: 🔄 Candle 1752124500 não tem gale_items
2025-07-10 02:17:09,745 INFO: Atualizando candle com filtro: {'epoch': 1752124500}, update: {'$set': {'epoch': 1752124500, 'open': 2759.762, 'high': 2760.136, 'low': 2758.912, 'close': 2759.066, 'time': datetime.datetime(2025, 7, 10, 5, 15), 'signal': {'signal_id': 'KODI59UY', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 15), 'entry_time': datetime.datetime(2025, 7, 10, 2, 16), 'open_candle_timestamp': 1752124500, 'message_id': 10042, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:17:09,747 INFO: Número de candles atualizados: 1
2025-07-10 02:17:09,748 INFO: ✅ Candle 1752124500 atualizado com sucesso
2025-07-10 02:17:09,748 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:17:09,748 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:17:09,748 INFO: Funcao validate_signals_for_candle iniciada para o sinal KODI59UY
2025-07-10 02:17:09,748 INFO: Buscando candle com signal_id: KODI59UY
2025-07-10 02:17:09,750 INFO: Candle encontrado para o signal_id: KODI59UY
2025-07-10 02:17:09,750 INFO: Funcao validate_signal iniciada para o signal KODI59UY
2025-07-10 02:17:09,750 INFO: Funcao validate_signal finalizada para o signal KODI59UY
2025-07-10 02:17:09,750 INFO: Validando sinal KODI59UY sem gale items
2025-07-10 02:17:09,750 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KODI59UY'}, update: {'$set': {'signal': {'signal_id': 'KODI59UY', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 15), 'entry_time': datetime.datetime(2025, 7, 10, 2, 16), 'open_candle_timestamp': 1752124500, 'message_id': 10042, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:17:09,752 INFO: Número de candles atualizados: 1
2025-07-10 02:17:09,752 INFO: Sinal atualizado no repositório para KODI59UY
2025-07-10 02:17:10,628 INFO: ✅ Resposta de resultado enviada para o sinal KODI59UY
2025-07-10 02:17:10,628 INFO: Sinal KODI59UY validado como WIN e notificação enviada
2025-07-10 02:17:10,629 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal KODI59UY
2025-07-10 02:17:10,629 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:18:09,751 INFO: 🔔 Novo candle detectado em 2025-07-10 05:18:00 UTC
2025-07-10 02:18:09,752 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:18:09,761 INFO: Buscando candle com filtro: {'epoch': 1752124680}
2025-07-10 02:18:09,764 INFO: Candle não encontrado
2025-07-10 02:18:09,778 INFO: Tendência HMA: FALL (HMA21=2760.06, HMA100=2760.26)
2025-07-10 02:18:09,778 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:18:09,779 INFO: 📈 Análise: EMA9=2760.08, EMA21=2760.03, trend_ema=RISE, trend_final=FALL, RSI=60.37, MACD=0.07/0.07, ATR=0.75, body=0.00, confidence=40
2025-07-10 02:18:09,779 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:18:09,779 INFO: Inserindo candle: Candle(2025-07-10 05:18:00, DOJI, O:2760.32, H:2760.32, L:2760.32, C:2760.32)
2025-07-10 02:18:09,782 INFO: Candle inserido com ID: 686f4d111d9c27c6b2f10c2a
2025-07-10 02:18:10,597 INFO: Atualizando candle com filtro: {'signal.signal_id': 'IWAE1WF8'}, update: {'$set': {'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 18, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:18:10,599 INFO: Número de candles atualizados: 1
2025-07-10 02:18:10,599 INFO: ✅ Mensagem enviada ao Telegram (ID: IWAE1WF8).
2025-07-10 02:19:09,708 INFO: 🔔 Novo candle detectado em 2025-07-10 05:19:00 UTC
2025-07-10 02:19:09,708 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:19:09,712 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:19:09,713 INFO: 🔔 Candle 1752124740 é menor ou igual ao entry_time 2025-07-10 02:19:00
2025-07-10 02:20:09,704 INFO: 🔔 Novo candle detectado em 2025-07-10 05:20:00 UTC
2025-07-10 02:20:09,704 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:20:09,707 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:20:09,707 INFO: 🔔 Candle 1752124800 é maior que o entry_time 2025-07-10 02:19:00
2025-07-10 02:20:09,707 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:20:09,707 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:20:09,710 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:20:09,710 INFO: 🔄 Candle 1752124680 já existe no banco, atualizando...
2025-07-10 02:20:09,711 INFO: 🔄 Candle 1752124680 não tem gale_items
2025-07-10 02:20:09,711 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:20:09,713 INFO: Número de candles atualizados: 1
2025-07-10 02:20:09,713 INFO: ✅ Candle 1752124680 atualizado com sucesso
2025-07-10 02:20:09,714 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:20:09,714 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:20:09,715 INFO: Funcao validate_signals_for_candle iniciada para o sinal IWAE1WF8
2025-07-10 02:20:09,715 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:20:09,716 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:20:09,717 INFO: Funcao validate_signal iniciada para o signal IWAE1WF8
2025-07-10 02:20:09,717 INFO: Funcao validate_signal finalizada para o signal IWAE1WF8
2025-07-10 02:20:09,717 INFO: Validando sinal IWAE1WF8 sem gale items
2025-07-10 02:20:09,718 INFO: Sinal IWAE1WF8 adicionado à fila para G1
2025-07-10 02:20:09,718 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752124800, 'open_price': 2762.251, 'high': 2762.251, 'low': 2762.251, 'close_price': 2762.251, 'time': datetime.datetime(2025, 7, 10, 2, 20, 9, 718045), 'result': None}]}}
2025-07-10 02:20:09,720 INFO: Número de candles atualizados: 1
2025-07-10 02:20:09,720 INFO: Candle completo com gales atualizado para IWAE1WF8
2025-07-10 02:20:10,520 INFO: ✅ Resposta de resultado enviada para o sinal IWAE1WF8
2025-07-10 02:20:10,520 INFO: Sinal IWAE1WF8 validado como LOSS e notificação enviada
2025-07-10 02:20:10,521 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IWAE1WF8
2025-07-10 02:20:10,521 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:21:09,686 INFO: 🔔 Novo candle detectado em 2025-07-10 05:21:00 UTC
2025-07-10 02:21:09,687 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:21:09,690 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:21:09,690 INFO: 🔔 Candle 1752124860 é maior que o entry_time 2025-07-10 02:19:00
2025-07-10 02:21:09,690 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:21:09,691 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:21:09,693 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:21:09,693 INFO: 🔄 Candle 1752124800 já existe no banco, atualizando...
2025-07-10 02:21:09,693 INFO: 🔄 Atualizando último gale item do candle 1752124800
2025-07-10 02:21:09,693 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752124800, 'open_price': 2762.251, 'high': 2762.849, 'low': 2762.003, 'close_price': 2762.449, 'time': datetime.datetime(2025, 7, 10, 2, 20, 9, 718000), 'result': None}]}}
2025-07-10 02:21:09,695 INFO: Número de candles atualizados: 1
2025-07-10 02:21:09,696 INFO: ✅ Candle 1752124680 atualizado com sucesso
2025-07-10 02:21:09,697 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:21:09,697 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:21:09,697 INFO: Funcao validate_signals_for_candle iniciada para o sinal IWAE1WF8
2025-07-10 02:21:09,697 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:21:09,699 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:21:09,699 INFO: Funcao validate_signal iniciada para o signal IWAE1WF8
2025-07-10 02:21:09,699 INFO: Validando sinal IWAE1WF8 com gale items
2025-07-10 02:21:09,700 INFO: Gale G1 para o sinal IWAE1WF8 resultou em LOSS
2025-07-10 02:21:09,700 INFO: Sinal IWAE1WF8 adicionado à fila para G2
2025-07-10 02:21:09,701 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752124800, 'open_price': 2762.251, 'high': 2762.849, 'low': 2762.003, 'close_price': 2762.449, 'time': datetime.datetime(2025, 7, 10, 2, 20, 9, 718000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124860, 'open_price': 2762.327, 'high': 2762.327, 'low': 2762.327, 'close_price': 2762.327, 'time': datetime.datetime(2025, 7, 10, 2, 21, 9, 700481), 'result': None}]}}
2025-07-10 02:21:09,702 INFO: Número de candles atualizados: 1
2025-07-10 02:21:09,703 INFO: Candle completo com gales atualizado para IWAE1WF8
2025-07-10 02:21:10,510 INFO: ✅ Resposta de resultado enviada para o sinal IWAE1WF8
2025-07-10 02:21:10,511 INFO: Sinal IWAE1WF8 validado como LOSS e notificação enviada
2025-07-10 02:21:10,511 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IWAE1WF8
2025-07-10 02:21:10,511 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:22:09,690 INFO: 🔔 Novo candle detectado em 2025-07-10 05:22:00 UTC
2025-07-10 02:22:09,690 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:22:09,693 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:22:09,694 INFO: 🔔 Candle 1752124920 é maior que o entry_time 2025-07-10 02:19:00
2025-07-10 02:22:09,694 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:22:09,694 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:22:09,696 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:22:09,696 INFO: 🔄 Candle 1752124860 já existe no banco, atualizando...
2025-07-10 02:22:09,697 INFO: 🔄 Atualizando último gale item do candle 1752124860
2025-07-10 02:22:09,697 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752124800, 'open_price': 2762.251, 'high': 2762.849, 'low': 2762.003, 'close_price': 2762.449, 'time': datetime.datetime(2025, 7, 10, 2, 20, 9, 718000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124860, 'open_price': 2762.327, 'high': 2762.582, 'low': 2761.885, 'close_price': 2762.214, 'time': datetime.datetime(2025, 7, 10, 2, 21, 9, 700000), 'result': None}]}}
2025-07-10 02:22:09,700 INFO: Número de candles atualizados: 1
2025-07-10 02:22:09,700 INFO: ✅ Candle 1752124680 atualizado com sucesso
2025-07-10 02:22:09,700 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:22:09,700 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:22:09,700 INFO: Funcao validate_signals_for_candle iniciada para o sinal IWAE1WF8
2025-07-10 02:22:09,701 INFO: Buscando candle com signal_id: IWAE1WF8
2025-07-10 02:22:09,703 INFO: Candle encontrado para o signal_id: IWAE1WF8
2025-07-10 02:22:09,703 INFO: Funcao validate_signal iniciada para o signal IWAE1WF8
2025-07-10 02:22:09,703 INFO: Validando sinal IWAE1WF8 com gale items
2025-07-10 02:22:09,704 INFO: Atualizando candle com filtro: {'epoch': 1752124680}, update: {'$set': {'epoch': 1752124680, 'open': 2760.323, 'high': 2761.02, 'low': 2759.917, 'close': 2760.42, 'time': datetime.datetime(2025, 7, 10, 5, 18), 'signal': {'signal_id': 'IWAE1WF8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 18), 'entry_time': datetime.datetime(2025, 7, 10, 2, 19), 'open_candle_timestamp': 1752124680, 'message_id': 10044, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752124800, 'open_price': 2762.251, 'high': 2762.849, 'low': 2762.003, 'close_price': 2762.449, 'time': datetime.datetime(2025, 7, 10, 2, 20, 9, 718000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752124860, 'open_price': 2762.327, 'high': 2762.582, 'low': 2761.885, 'close_price': 2762.214, 'time': datetime.datetime(2025, 7, 10, 2, 21, 9, 700000), 'result': 'WIN'}]}}
2025-07-10 02:22:09,706 INFO: Número de candles atualizados: 1
2025-07-10 02:22:09,706 INFO: Candle completo com gales atualizado para IWAE1WF8
2025-07-10 02:22:10,521 INFO: ✅ Resposta de resultado enviada para o sinal IWAE1WF8
2025-07-10 02:22:10,521 INFO: Sinal IWAE1WF8 validado como LOSS e notificação enviada
2025-07-10 02:22:10,521 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal IWAE1WF8
2025-07-10 02:22:10,522 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:23:09,715 INFO: 🔔 Novo candle detectado em 2025-07-10 05:23:00 UTC
2025-07-10 02:23:09,715 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:23:09,724 INFO: Buscando candle com filtro: {'epoch': 1752124980}
2025-07-10 02:23:09,727 INFO: Candle não encontrado
2025-07-10 02:23:09,742 INFO: Tendência HMA: FALL (HMA21=2763.27, HMA100=2762.71)
2025-07-10 02:23:09,742 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:23:09,742 INFO: 📈 Análise: EMA9=2763.15, EMA21=2762.92, trend_ema=RISE, trend_final=FALL, RSI=63.51, MACD=0.23/0.19, ATR=1.09, body=0.00, confidence=60
2025-07-10 02:23:09,743 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 02:23:09,743 INFO: Inserindo candle: Candle(2025-07-10 05:23:00, DOJI, O:2763.31, H:2763.31, L:2763.31, C:2763.31)
2025-07-10 02:23:09,746 INFO: Candle inserido com ID: 686f4e3d1d9c27c6b2f10c2b
2025-07-10 02:23:10,608 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V6VC1000'}, update: {'$set': {'signal': {'signal_id': 'V6VC1000', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 23, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 24), 'open_candle_timestamp': 1752124980, 'message_id': 10048, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:23:10,610 INFO: Número de candles atualizados: 1
2025-07-10 02:23:10,611 INFO: ✅ Mensagem enviada ao Telegram (ID: V6VC1000).
2025-07-10 02:24:09,675 INFO: 🔔 Novo candle detectado em 2025-07-10 05:24:00 UTC
2025-07-10 02:24:09,675 INFO: Buscando candle com signal_id: V6VC1000
2025-07-10 02:24:09,678 INFO: Candle encontrado para o signal_id: V6VC1000
2025-07-10 02:24:09,678 INFO: 🔔 Candle 1752125040 é menor ou igual ao entry_time 2025-07-10 02:24:00
2025-07-10 02:25:09,699 INFO: 🔔 Novo candle detectado em 2025-07-10 05:25:00 UTC
2025-07-10 02:25:09,699 INFO: Buscando candle com signal_id: V6VC1000
2025-07-10 02:25:09,702 INFO: Candle encontrado para o signal_id: V6VC1000
2025-07-10 02:25:09,702 INFO: 🔔 Candle 1752125100 é maior que o entry_time 2025-07-10 02:24:00
2025-07-10 02:25:09,702 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:25:09,703 INFO: Buscando candle com signal_id: V6VC1000
2025-07-10 02:25:09,705 INFO: Candle encontrado para o signal_id: V6VC1000
2025-07-10 02:25:09,706 INFO: 🔄 Candle 1752124980 já existe no banco, atualizando...
2025-07-10 02:25:09,706 INFO: 🔄 Candle 1752124980 não tem gale_items
2025-07-10 02:25:09,706 INFO: Atualizando candle com filtro: {'epoch': 1752124980}, update: {'$set': {'epoch': 1752124980, 'open': 2763.306, 'high': 2763.705, 'low': 2762.487, 'close': 2762.874, 'time': datetime.datetime(2025, 7, 10, 5, 23), 'signal': {'signal_id': 'V6VC1000', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 23), 'entry_time': datetime.datetime(2025, 7, 10, 2, 24), 'open_candle_timestamp': 1752124980, 'message_id': 10048, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:25:09,708 INFO: Número de candles atualizados: 1
2025-07-10 02:25:09,709 INFO: ✅ Candle 1752124980 atualizado com sucesso
2025-07-10 02:25:09,709 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:25:09,709 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:25:09,709 INFO: Funcao validate_signals_for_candle iniciada para o sinal V6VC1000
2025-07-10 02:25:09,710 INFO: Buscando candle com signal_id: V6VC1000
2025-07-10 02:25:09,711 INFO: Candle encontrado para o signal_id: V6VC1000
2025-07-10 02:25:09,712 INFO: Funcao validate_signal iniciada para o signal V6VC1000
2025-07-10 02:25:09,712 INFO: Funcao validate_signal finalizada para o signal V6VC1000
2025-07-10 02:25:09,712 INFO: Validando sinal V6VC1000 sem gale items
2025-07-10 02:25:09,713 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V6VC1000'}, update: {'$set': {'signal': {'signal_id': 'V6VC1000', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 23), 'entry_time': datetime.datetime(2025, 7, 10, 2, 24), 'open_candle_timestamp': 1752124980, 'message_id': 10048, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:25:09,714 INFO: Número de candles atualizados: 1
2025-07-10 02:25:09,714 INFO: Sinal atualizado no repositório para V6VC1000
2025-07-10 02:25:10,524 INFO: ✅ Resposta de resultado enviada para o sinal V6VC1000
2025-07-10 02:25:10,524 INFO: Sinal V6VC1000 validado como WIN e notificação enviada
2025-07-10 02:25:10,524 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal V6VC1000
2025-07-10 02:25:10,525 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:26:09,725 INFO: 🔔 Novo candle detectado em 2025-07-10 05:26:00 UTC
2025-07-10 02:26:09,726 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:26:09,734 INFO: Buscando candle com filtro: {'epoch': 1752125160}
2025-07-10 02:26:09,737 INFO: Candle não encontrado
2025-07-10 02:26:09,751 INFO: Tendência HMA: FALL (HMA21=2762.45, HMA100=2762.96)
2025-07-10 02:26:09,752 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:26:09,752 INFO: 📈 Análise: EMA9=2762.66, EMA21=2762.78, trend_ema=FALL, trend_final=FALL, RSI=46.92, MACD=-0.15/-0.17, ATR=0.85, body=0.00, confidence=20
2025-07-10 02:26:09,752 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:26:09,753 INFO: Inserindo candle: Candle(2025-07-10 05:26:00, DOJI, O:2762.73, H:2762.73, L:2762.73, C:2762.73)
2025-07-10 02:26:09,755 INFO: Candle inserido com ID: 686f4ef11d9c27c6b2f10c2c
2025-07-10 02:26:10,565 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KSODVZ6G'}, update: {'$set': {'signal': {'signal_id': 'KSODVZ6G', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 26, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 27), 'open_candle_timestamp': 1752125160, 'message_id': 10050, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:26:10,568 INFO: Número de candles atualizados: 1
2025-07-10 02:26:10,568 INFO: ✅ Mensagem enviada ao Telegram (ID: KSODVZ6G).
2025-07-10 02:27:09,723 INFO: 🔔 Novo candle detectado em 2025-07-10 05:27:00 UTC
2025-07-10 02:27:09,723 INFO: Buscando candle com signal_id: KSODVZ6G
2025-07-10 02:27:09,725 INFO: Candle encontrado para o signal_id: KSODVZ6G
2025-07-10 02:27:09,726 INFO: 🔔 Candle 1752125220 é menor ou igual ao entry_time 2025-07-10 02:27:00
2025-07-10 02:28:09,695 INFO: 🔔 Novo candle detectado em 2025-07-10 05:28:00 UTC
2025-07-10 02:28:09,695 INFO: Buscando candle com signal_id: KSODVZ6G
2025-07-10 02:28:09,698 INFO: Candle encontrado para o signal_id: KSODVZ6G
2025-07-10 02:28:09,699 INFO: 🔔 Candle 1752125280 é maior que o entry_time 2025-07-10 02:27:00
2025-07-10 02:28:09,699 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:28:09,699 INFO: Buscando candle com signal_id: KSODVZ6G
2025-07-10 02:28:09,701 INFO: Candle encontrado para o signal_id: KSODVZ6G
2025-07-10 02:28:09,702 INFO: 🔄 Candle 1752125160 já existe no banco, atualizando...
2025-07-10 02:28:09,702 INFO: 🔄 Candle 1752125160 não tem gale_items
2025-07-10 02:28:09,702 INFO: Atualizando candle com filtro: {'epoch': 1752125160}, update: {'$set': {'epoch': 1752125160, 'open': 2762.727, 'high': 2763.419, 'low': 2762.178, 'close': 2762.373, 'time': datetime.datetime(2025, 7, 10, 5, 26), 'signal': {'signal_id': 'KSODVZ6G', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 26), 'entry_time': datetime.datetime(2025, 7, 10, 2, 27), 'open_candle_timestamp': 1752125160, 'message_id': 10050, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:28:09,704 INFO: Número de candles atualizados: 1
2025-07-10 02:28:09,705 INFO: ✅ Candle 1752125160 atualizado com sucesso
2025-07-10 02:28:09,705 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:28:09,705 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:28:09,705 INFO: Funcao validate_signals_for_candle iniciada para o sinal KSODVZ6G
2025-07-10 02:28:09,706 INFO: Buscando candle com signal_id: KSODVZ6G
2025-07-10 02:28:09,707 INFO: Candle encontrado para o signal_id: KSODVZ6G
2025-07-10 02:28:09,708 INFO: Funcao validate_signal iniciada para o signal KSODVZ6G
2025-07-10 02:28:09,708 INFO: Funcao validate_signal finalizada para o signal KSODVZ6G
2025-07-10 02:28:09,708 INFO: Validando sinal KSODVZ6G sem gale items
2025-07-10 02:28:09,708 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KSODVZ6G'}, update: {'$set': {'signal': {'signal_id': 'KSODVZ6G', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 26), 'entry_time': datetime.datetime(2025, 7, 10, 2, 27), 'open_candle_timestamp': 1752125160, 'message_id': 10050, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:28:09,711 INFO: Número de candles atualizados: 1
2025-07-10 02:28:09,711 INFO: Sinal atualizado no repositório para KSODVZ6G
2025-07-10 02:28:10,525 INFO: ✅ Resposta de resultado enviada para o sinal KSODVZ6G
2025-07-10 02:28:10,526 INFO: Sinal KSODVZ6G validado como WIN e notificação enviada
2025-07-10 02:28:10,526 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal KSODVZ6G
2025-07-10 02:28:10,526 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:29:09,703 INFO: 🔔 Novo candle detectado em 2025-07-10 05:29:00 UTC
2025-07-10 02:29:09,703 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:29:09,711 INFO: Buscando candle com filtro: {'epoch': 1752125340}
2025-07-10 02:29:09,714 INFO: Candle não encontrado
2025-07-10 02:29:09,729 INFO: Tendência HMA: FALL (HMA21=2766.25, HMA100=2765.36)
2025-07-10 02:29:09,730 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:29:09,730 INFO: 📈 Análise: EMA9=2765.87, EMA21=2765.33, trend_ema=RISE, trend_final=FALL, RSI=82.21, MACD=0.52/0.39, ATR=1.01, body=0.00, confidence=80
2025-07-10 02:29:09,730 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 02:29:09,731 INFO: Inserindo candle: Candle(2025-07-10 05:29:00, DOJI, O:2766.54, H:2766.54, L:2766.54, C:2766.54)
2025-07-10 02:29:09,733 INFO: Candle inserido com ID: 686f4fa51d9c27c6b2f10c2d
2025-07-10 02:29:10,591 INFO: Atualizando candle com filtro: {'signal.signal_id': '8W9W33OB'}, update: {'$set': {'signal': {'signal_id': '8W9W33OB', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 29, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 30), 'open_candle_timestamp': 1752125340, 'message_id': 10052, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:29:10,593 INFO: Número de candles atualizados: 1
2025-07-10 02:29:10,594 INFO: ✅ Mensagem enviada ao Telegram (ID: 8W9W33OB).
2025-07-10 02:30:09,927 INFO: 🔔 Novo candle detectado em 2025-07-10 05:30:00 UTC
2025-07-10 02:30:09,927 INFO: Buscando candle com signal_id: 8W9W33OB
2025-07-10 02:30:09,930 INFO: Candle encontrado para o signal_id: 8W9W33OB
2025-07-10 02:30:09,930 INFO: 🔔 Candle 1752125400 é menor ou igual ao entry_time 2025-07-10 02:30:00
2025-07-10 02:31:09,699 INFO: 🔔 Novo candle detectado em 2025-07-10 05:31:00 UTC
2025-07-10 02:31:09,700 INFO: Buscando candle com signal_id: 8W9W33OB
2025-07-10 02:31:09,702 INFO: Candle encontrado para o signal_id: 8W9W33OB
2025-07-10 02:31:09,703 INFO: 🔔 Candle 1752125460 é maior que o entry_time 2025-07-10 02:30:00
2025-07-10 02:31:09,703 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:31:09,703 INFO: Buscando candle com signal_id: 8W9W33OB
2025-07-10 02:31:09,705 INFO: Candle encontrado para o signal_id: 8W9W33OB
2025-07-10 02:31:09,706 INFO: 🔄 Candle 1752125340 já existe no banco, atualizando...
2025-07-10 02:31:09,706 INFO: 🔄 Candle 1752125340 não tem gale_items
2025-07-10 02:31:09,706 INFO: Atualizando candle com filtro: {'epoch': 1752125340}, update: {'$set': {'epoch': 1752125340, 'open': 2766.539, 'high': 2766.571, 'low': 2765.383, 'close': 2765.965, 'time': datetime.datetime(2025, 7, 10, 5, 29), 'signal': {'signal_id': '8W9W33OB', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 29), 'entry_time': datetime.datetime(2025, 7, 10, 2, 30), 'open_candle_timestamp': 1752125340, 'message_id': 10052, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:31:09,708 INFO: Número de candles atualizados: 1
2025-07-10 02:31:09,709 INFO: ✅ Candle 1752125340 atualizado com sucesso
2025-07-10 02:31:09,709 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:31:09,709 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:31:09,709 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8W9W33OB
2025-07-10 02:31:09,709 INFO: Buscando candle com signal_id: 8W9W33OB
2025-07-10 02:31:09,712 INFO: Candle encontrado para o signal_id: 8W9W33OB
2025-07-10 02:31:09,712 INFO: Funcao validate_signal iniciada para o signal 8W9W33OB
2025-07-10 02:31:09,712 INFO: Funcao validate_signal finalizada para o signal 8W9W33OB
2025-07-10 02:31:09,712 INFO: Validando sinal 8W9W33OB sem gale items
2025-07-10 02:31:09,712 INFO: Atualizando candle com filtro: {'signal.signal_id': '8W9W33OB'}, update: {'$set': {'signal': {'signal_id': '8W9W33OB', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 29), 'entry_time': datetime.datetime(2025, 7, 10, 2, 30), 'open_candle_timestamp': 1752125340, 'message_id': 10052, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:31:09,714 INFO: Número de candles atualizados: 1
2025-07-10 02:31:09,714 INFO: Sinal atualizado no repositório para 8W9W33OB
2025-07-10 02:31:10,562 INFO: ✅ Resposta de resultado enviada para o sinal 8W9W33OB
2025-07-10 02:31:10,562 INFO: Sinal 8W9W33OB validado como WIN e notificação enviada
2025-07-10 02:31:10,562 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8W9W33OB
2025-07-10 02:31:10,563 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:32:09,690 INFO: 🔔 Novo candle detectado em 2025-07-10 05:32:00 UTC
2025-07-10 02:32:09,691 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:32:09,699 INFO: Buscando candle com filtro: {'epoch': 1752125520}
2025-07-10 02:32:09,703 INFO: Candle não encontrado
2025-07-10 02:32:09,718 INFO: Tendência HMA: FALL (HMA21=2765.31, HMA100=2765.12)
2025-07-10 02:32:09,719 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:32:09,719 INFO: 📈 Análise: EMA9=2765.34, EMA21=2765.31, trend_ema=RISE, trend_final=FALL, RSI=57.09, MACD=-0.04/-0.14, ATR=1.14, body=0.00, confidence=60
2025-07-10 02:32:09,719 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 02:32:09,720 INFO: Inserindo candle: Candle(2025-07-10 05:32:00, DOJI, O:2765.68, H:2765.68, L:2765.68, C:2765.68)
2025-07-10 02:32:09,722 INFO: Candle inserido com ID: 686f50591d9c27c6b2f10c2e
2025-07-10 02:32:10,533 INFO: Atualizando candle com filtro: {'signal.signal_id': 'N7Q5Y2TV'}, update: {'$set': {'signal': {'signal_id': 'N7Q5Y2TV', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 32, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 33), 'open_candle_timestamp': 1752125520, 'message_id': 10054, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:32:10,536 INFO: Número de candles atualizados: 1
2025-07-10 02:32:10,537 INFO: ✅ Mensagem enviada ao Telegram (ID: N7Q5Y2TV).
2025-07-10 02:33:09,715 INFO: 🔔 Novo candle detectado em 2025-07-10 05:33:00 UTC
2025-07-10 02:33:09,715 INFO: Buscando candle com signal_id: N7Q5Y2TV
2025-07-10 02:33:09,718 INFO: Candle encontrado para o signal_id: N7Q5Y2TV
2025-07-10 02:33:09,719 INFO: 🔔 Candle 1752125580 é menor ou igual ao entry_time 2025-07-10 02:33:00
2025-07-10 02:34:09,729 INFO: 🔔 Novo candle detectado em 2025-07-10 05:34:00 UTC
2025-07-10 02:34:09,729 INFO: Buscando candle com signal_id: N7Q5Y2TV
2025-07-10 02:34:09,732 INFO: Candle encontrado para o signal_id: N7Q5Y2TV
2025-07-10 02:34:09,733 INFO: 🔔 Candle 1752125640 é maior que o entry_time 2025-07-10 02:33:00
2025-07-10 02:34:09,733 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:34:09,733 INFO: Buscando candle com signal_id: N7Q5Y2TV
2025-07-10 02:34:09,735 INFO: Candle encontrado para o signal_id: N7Q5Y2TV
2025-07-10 02:34:09,736 INFO: 🔄 Candle 1752125520 já existe no banco, atualizando...
2025-07-10 02:34:09,736 INFO: 🔄 Candle 1752125520 não tem gale_items
2025-07-10 02:34:09,736 INFO: Atualizando candle com filtro: {'epoch': 1752125520}, update: {'$set': {'epoch': 1752125520, 'open': 2765.685, 'high': 2766.053, 'low': 2765.372, 'close': 2765.569, 'time': datetime.datetime(2025, 7, 10, 5, 32), 'signal': {'signal_id': 'N7Q5Y2TV', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 32), 'entry_time': datetime.datetime(2025, 7, 10, 2, 33), 'open_candle_timestamp': 1752125520, 'message_id': 10054, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:34:09,738 INFO: Número de candles atualizados: 1
2025-07-10 02:34:09,738 INFO: ✅ Candle 1752125520 atualizado com sucesso
2025-07-10 02:34:09,738 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:34:09,739 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:34:09,739 INFO: Funcao validate_signals_for_candle iniciada para o sinal N7Q5Y2TV
2025-07-10 02:34:09,739 INFO: Buscando candle com signal_id: N7Q5Y2TV
2025-07-10 02:34:09,740 INFO: Candle encontrado para o signal_id: N7Q5Y2TV
2025-07-10 02:34:09,741 INFO: Funcao validate_signal iniciada para o signal N7Q5Y2TV
2025-07-10 02:34:09,741 INFO: Funcao validate_signal finalizada para o signal N7Q5Y2TV
2025-07-10 02:34:09,741 INFO: Validando sinal N7Q5Y2TV sem gale items
2025-07-10 02:34:09,741 INFO: Atualizando candle com filtro: {'signal.signal_id': 'N7Q5Y2TV'}, update: {'$set': {'signal': {'signal_id': 'N7Q5Y2TV', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 32), 'entry_time': datetime.datetime(2025, 7, 10, 2, 33), 'open_candle_timestamp': 1752125520, 'message_id': 10054, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:34:09,743 INFO: Número de candles atualizados: 1
2025-07-10 02:34:09,743 INFO: Sinal atualizado no repositório para N7Q5Y2TV
2025-07-10 02:34:10,629 INFO: ✅ Resposta de resultado enviada para o sinal N7Q5Y2TV
2025-07-10 02:34:10,630 INFO: Sinal N7Q5Y2TV validado como WIN e notificação enviada
2025-07-10 02:34:10,630 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal N7Q5Y2TV
2025-07-10 02:34:10,630 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:35:09,701 INFO: 🔔 Novo candle detectado em 2025-07-10 05:35:00 UTC
2025-07-10 02:35:09,702 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:35:09,710 INFO: Buscando candle com filtro: {'epoch': 1752125700}
2025-07-10 02:35:09,714 INFO: Candle não encontrado
2025-07-10 02:35:09,728 INFO: Tendência HMA: FALL (HMA21=2764.51, HMA100=2764.02)
2025-07-10 02:35:09,729 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:35:09,729 INFO: 📈 Análise: EMA9=2764.43, EMA21=2764.44, trend_ema=FALL, trend_final=FALL, RSI=46.52, MACD=-0.03/-0.04, ATR=0.79, body=0.00, confidence=40
2025-07-10 02:35:09,729 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:35:09,730 INFO: Inserindo candle: Candle(2025-07-10 05:35:00, DOJI, O:2764.35, H:2764.35, L:2764.35, C:2764.35)
2025-07-10 02:35:09,732 INFO: Candle inserido com ID: 686f510d1d9c27c6b2f10c2f
2025-07-10 02:35:10,535 INFO: Atualizando candle com filtro: {'signal.signal_id': '2JP8IB8I'}, update: {'$set': {'signal': {'signal_id': '2JP8IB8I', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 35, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 36), 'open_candle_timestamp': 1752125700, 'message_id': 10056, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:35:10,538 INFO: Número de candles atualizados: 1
2025-07-10 02:35:10,538 INFO: ✅ Mensagem enviada ao Telegram (ID: 2JP8IB8I).
2025-07-10 02:36:09,707 INFO: 🔔 Novo candle detectado em 2025-07-10 05:36:00 UTC
2025-07-10 02:36:09,708 INFO: Buscando candle com signal_id: 2JP8IB8I
2025-07-10 02:36:09,710 INFO: Candle encontrado para o signal_id: 2JP8IB8I
2025-07-10 02:36:09,711 INFO: 🔔 Candle 1752125760 é menor ou igual ao entry_time 2025-07-10 02:36:00
2025-07-10 02:37:09,725 INFO: 🔔 Novo candle detectado em 2025-07-10 05:37:00 UTC
2025-07-10 02:37:09,725 INFO: Buscando candle com signal_id: 2JP8IB8I
2025-07-10 02:37:09,728 INFO: Candle encontrado para o signal_id: 2JP8IB8I
2025-07-10 02:37:09,729 INFO: 🔔 Candle 1752125820 é maior que o entry_time 2025-07-10 02:36:00
2025-07-10 02:37:09,729 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:37:09,729 INFO: Buscando candle com signal_id: 2JP8IB8I
2025-07-10 02:37:09,732 INFO: Candle encontrado para o signal_id: 2JP8IB8I
2025-07-10 02:37:09,732 INFO: 🔄 Candle 1752125700 já existe no banco, atualizando...
2025-07-10 02:37:09,732 INFO: 🔄 Candle 1752125700 não tem gale_items
2025-07-10 02:37:09,732 INFO: Atualizando candle com filtro: {'epoch': 1752125700}, update: {'$set': {'epoch': 1752125700, 'open': 2764.354, 'high': 2764.388, 'low': 2762.606, 'close': 2762.606, 'time': datetime.datetime(2025, 7, 10, 5, 35), 'signal': {'signal_id': '2JP8IB8I', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 35), 'entry_time': datetime.datetime(2025, 7, 10, 2, 36), 'open_candle_timestamp': 1752125700, 'message_id': 10056, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:37:09,735 INFO: Número de candles atualizados: 1
2025-07-10 02:37:09,735 INFO: ✅ Candle 1752125700 atualizado com sucesso
2025-07-10 02:37:09,735 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:37:09,736 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:37:09,736 INFO: Funcao validate_signals_for_candle iniciada para o sinal 2JP8IB8I
2025-07-10 02:37:09,736 INFO: Buscando candle com signal_id: 2JP8IB8I
2025-07-10 02:37:09,737 INFO: Candle encontrado para o signal_id: 2JP8IB8I
2025-07-10 02:37:09,738 INFO: Funcao validate_signal iniciada para o signal 2JP8IB8I
2025-07-10 02:37:09,738 INFO: Funcao validate_signal finalizada para o signal 2JP8IB8I
2025-07-10 02:37:09,738 INFO: Validando sinal 2JP8IB8I sem gale items
2025-07-10 02:37:09,739 INFO: Atualizando candle com filtro: {'signal.signal_id': '2JP8IB8I'}, update: {'$set': {'signal': {'signal_id': '2JP8IB8I', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 35), 'entry_time': datetime.datetime(2025, 7, 10, 2, 36), 'open_candle_timestamp': 1752125700, 'message_id': 10056, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:37:09,740 INFO: Número de candles atualizados: 1
2025-07-10 02:37:09,741 INFO: Sinal atualizado no repositório para 2JP8IB8I
2025-07-10 02:37:10,585 INFO: ✅ Resposta de resultado enviada para o sinal 2JP8IB8I
2025-07-10 02:37:10,585 INFO: Sinal 2JP8IB8I validado como WIN e notificação enviada
2025-07-10 02:37:10,586 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 2JP8IB8I
2025-07-10 02:37:10,586 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:38:09,705 INFO: 🔔 Novo candle detectado em 2025-07-10 05:38:00 UTC
2025-07-10 02:38:09,705 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:38:09,714 INFO: Buscando candle com filtro: {'epoch': 1752125880}
2025-07-10 02:38:09,716 INFO: Candle não encontrado
2025-07-10 02:38:09,731 INFO: Tendência HMA: FALL (HMA21=2762.70, HMA100=2762.08)
2025-07-10 02:38:09,732 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:38:09,732 INFO: 📈 Análise: EMA9=2762.57, EMA21=2762.53, trend_ema=RISE, trend_final=FALL, RSI=47.73, MACD=0.06/0.10, ATR=1.02, body=0.00, confidence=20
2025-07-10 02:38:09,732 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:38:09,732 INFO: Inserindo candle: Candle(2025-07-10 05:38:00, DOJI, O:2762.43, H:2762.43, L:2762.43, C:2762.43)
2025-07-10 02:38:09,735 INFO: Candle inserido com ID: 686f51c11d9c27c6b2f10c30
2025-07-10 02:38:10,545 INFO: Atualizando candle com filtro: {'signal.signal_id': 'RHFTVXOJ'}, update: {'$set': {'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 38, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:38:10,548 INFO: Número de candles atualizados: 1
2025-07-10 02:38:10,548 INFO: ✅ Mensagem enviada ao Telegram (ID: RHFTVXOJ).
2025-07-10 02:39:09,731 INFO: 🔔 Novo candle detectado em 2025-07-10 05:39:00 UTC
2025-07-10 02:39:09,731 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:39:09,734 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:39:09,734 INFO: 🔔 Candle 1752125940 é menor ou igual ao entry_time 2025-07-10 02:39:00
2025-07-10 02:40:09,757 INFO: 🔔 Novo candle detectado em 2025-07-10 05:40:00 UTC
2025-07-10 02:40:09,758 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:40:09,760 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:40:09,761 INFO: 🔔 Candle 1752126000 é maior que o entry_time 2025-07-10 02:39:00
2025-07-10 02:40:09,761 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:40:09,761 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:40:09,763 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:40:09,764 INFO: 🔄 Candle 1752125880 já existe no banco, atualizando...
2025-07-10 02:40:09,764 INFO: 🔄 Candle 1752125880 não tem gale_items
2025-07-10 02:40:09,764 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:40:09,767 INFO: Número de candles atualizados: 1
2025-07-10 02:40:09,767 INFO: ✅ Candle 1752125880 atualizado com sucesso
2025-07-10 02:40:09,767 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:40:09,767 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:40:09,767 INFO: Funcao validate_signals_for_candle iniciada para o sinal RHFTVXOJ
2025-07-10 02:40:09,767 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:40:09,769 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:40:09,770 INFO: Funcao validate_signal iniciada para o signal RHFTVXOJ
2025-07-10 02:40:09,770 INFO: Funcao validate_signal finalizada para o signal RHFTVXOJ
2025-07-10 02:40:09,770 INFO: Validando sinal RHFTVXOJ sem gale items
2025-07-10 02:40:09,770 INFO: Sinal RHFTVXOJ adicionado à fila para G1
2025-07-10 02:40:09,770 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126000, 'open_price': 2762.734, 'high': 2762.734, 'low': 2762.734, 'close_price': 2762.734, 'time': datetime.datetime(2025, 7, 10, 2, 40, 9, 770650), 'result': None}]}}
2025-07-10 02:40:09,772 INFO: Número de candles atualizados: 1
2025-07-10 02:40:09,772 INFO: Candle completo com gales atualizado para RHFTVXOJ
2025-07-10 02:40:10,636 INFO: ✅ Resposta de resultado enviada para o sinal RHFTVXOJ
2025-07-10 02:40:10,636 INFO: Sinal RHFTVXOJ validado como LOSS e notificação enviada
2025-07-10 02:40:10,636 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RHFTVXOJ
2025-07-10 02:40:10,637 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:41:09,729 INFO: 🔔 Novo candle detectado em 2025-07-10 05:41:00 UTC
2025-07-10 02:41:09,729 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:41:09,732 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:41:09,733 INFO: 🔔 Candle 1752126060 é maior que o entry_time 2025-07-10 02:39:00
2025-07-10 02:41:09,733 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:41:09,733 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:41:09,735 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:41:09,736 INFO: 🔄 Candle 1752126000 já existe no banco, atualizando...
2025-07-10 02:41:09,736 INFO: 🔄 Atualizando último gale item do candle 1752126000
2025-07-10 02:41:09,737 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126000, 'open_price': 2762.734, 'high': 2763.648, 'low': 2762.407, 'close_price': 2763.648, 'time': datetime.datetime(2025, 7, 10, 2, 40, 9, 770000), 'result': None}]}}
2025-07-10 02:41:09,739 INFO: Número de candles atualizados: 1
2025-07-10 02:41:09,740 INFO: ✅ Candle 1752125880 atualizado com sucesso
2025-07-10 02:41:09,740 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:41:09,740 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:41:09,740 INFO: Funcao validate_signals_for_candle iniciada para o sinal RHFTVXOJ
2025-07-10 02:41:09,740 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:41:09,742 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:41:09,742 INFO: Funcao validate_signal iniciada para o signal RHFTVXOJ
2025-07-10 02:41:09,742 INFO: Validando sinal RHFTVXOJ com gale items
2025-07-10 02:41:09,742 INFO: Gale G1 para o sinal RHFTVXOJ resultou em LOSS
2025-07-10 02:41:09,742 INFO: Sinal RHFTVXOJ adicionado à fila para G2
2025-07-10 02:41:09,743 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126000, 'open_price': 2762.734, 'high': 2763.648, 'low': 2762.407, 'close_price': 2763.648, 'time': datetime.datetime(2025, 7, 10, 2, 40, 9, 770000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752126060, 'open_price': 2763.695, 'high': 2763.695, 'low': 2763.695, 'close_price': 2763.695, 'time': datetime.datetime(2025, 7, 10, 2, 41, 9, 742664), 'result': None}]}}
2025-07-10 02:41:09,744 INFO: Número de candles atualizados: 1
2025-07-10 02:41:09,745 INFO: Candle completo com gales atualizado para RHFTVXOJ
2025-07-10 02:41:10,597 INFO: ✅ Resposta de resultado enviada para o sinal RHFTVXOJ
2025-07-10 02:41:10,598 INFO: Sinal RHFTVXOJ validado como LOSS e notificação enviada
2025-07-10 02:41:10,598 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RHFTVXOJ
2025-07-10 02:41:10,598 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:42:09,746 INFO: 🔔 Novo candle detectado em 2025-07-10 05:42:00 UTC
2025-07-10 02:42:09,747 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:42:09,749 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:42:09,749 INFO: 🔔 Candle 1752126120 é maior que o entry_time 2025-07-10 02:39:00
2025-07-10 02:42:09,750 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:42:09,750 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:42:09,752 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:42:09,753 INFO: 🔄 Candle 1752126060 já existe no banco, atualizando...
2025-07-10 02:42:09,753 INFO: 🔄 Atualizando último gale item do candle 1752126060
2025-07-10 02:42:09,753 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126000, 'open_price': 2762.734, 'high': 2763.648, 'low': 2762.407, 'close_price': 2763.648, 'time': datetime.datetime(2025, 7, 10, 2, 40, 9, 770000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752126060, 'open_price': 2763.695, 'high': 2763.865, 'low': 2762.594, 'close_price': 2762.594, 'time': datetime.datetime(2025, 7, 10, 2, 41, 9, 742000), 'result': None}]}}
2025-07-10 02:42:09,756 INFO: Número de candles atualizados: 1
2025-07-10 02:42:09,756 INFO: ✅ Candle 1752125880 atualizado com sucesso
2025-07-10 02:42:09,756 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:42:09,757 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:42:09,757 INFO: Funcao validate_signals_for_candle iniciada para o sinal RHFTVXOJ
2025-07-10 02:42:09,757 INFO: Buscando candle com signal_id: RHFTVXOJ
2025-07-10 02:42:09,759 INFO: Candle encontrado para o signal_id: RHFTVXOJ
2025-07-10 02:42:09,759 INFO: Funcao validate_signal iniciada para o signal RHFTVXOJ
2025-07-10 02:42:09,759 INFO: Validando sinal RHFTVXOJ com gale items
2025-07-10 02:42:09,759 INFO: Atualizando candle com filtro: {'epoch': 1752125880}, update: {'$set': {'epoch': 1752125880, 'open': 2762.427, 'high': 2762.99, 'low': 2762.254, 'close': 2762.776, 'time': datetime.datetime(2025, 7, 10, 5, 38), 'signal': {'signal_id': 'RHFTVXOJ', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 38), 'entry_time': datetime.datetime(2025, 7, 10, 2, 39), 'open_candle_timestamp': 1752125880, 'message_id': 10058, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126000, 'open_price': 2762.734, 'high': 2763.648, 'low': 2762.407, 'close_price': 2763.648, 'time': datetime.datetime(2025, 7, 10, 2, 40, 9, 770000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752126060, 'open_price': 2763.695, 'high': 2763.865, 'low': 2762.594, 'close_price': 2762.594, 'time': datetime.datetime(2025, 7, 10, 2, 41, 9, 742000), 'result': 'WIN'}]}}
2025-07-10 02:42:09,762 INFO: Número de candles atualizados: 1
2025-07-10 02:42:09,762 INFO: Candle completo com gales atualizado para RHFTVXOJ
2025-07-10 02:42:10,577 INFO: ✅ Resposta de resultado enviada para o sinal RHFTVXOJ
2025-07-10 02:42:10,578 INFO: Sinal RHFTVXOJ validado como LOSS e notificação enviada
2025-07-10 02:42:10,578 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RHFTVXOJ
2025-07-10 02:42:10,578 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:43:09,706 INFO: 🔔 Novo candle detectado em 2025-07-10 05:43:00 UTC
2025-07-10 02:43:09,706 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:43:09,715 INFO: Buscando candle com filtro: {'epoch': 1752126180}
2025-07-10 02:43:09,718 INFO: Candle não encontrado
2025-07-10 02:43:09,733 INFO: Tendência HMA: FALL (HMA21=2763.64, HMA100=2762.97)
2025-07-10 02:43:09,734 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:43:09,734 INFO: 📈 Análise: EMA9=2763.48, EMA21=2763.31, trend_ema=RISE, trend_final=FALL, RSI=55.42, MACD=0.17/0.16, ATR=0.90, body=0.00, confidence=40
2025-07-10 02:43:09,734 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:43:09,735 INFO: Inserindo candle: Candle(2025-07-10 05:43:00, DOJI, O:2763.49, H:2763.49, L:2763.49, C:2763.49)
2025-07-10 02:43:09,737 INFO: Candle inserido com ID: 686f52ed1d9c27c6b2f10c31
2025-07-10 02:43:10,547 INFO: Atualizando candle com filtro: {'signal.signal_id': 'SYJWSWVJ'}, update: {'$set': {'signal': {'signal_id': 'SYJWSWVJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 43, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 44), 'open_candle_timestamp': 1752126180, 'message_id': 10064, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:43:10,550 INFO: Número de candles atualizados: 1
2025-07-10 02:43:10,551 INFO: ✅ Mensagem enviada ao Telegram (ID: SYJWSWVJ).
2025-07-10 02:44:09,706 INFO: 🔔 Novo candle detectado em 2025-07-10 05:44:00 UTC
2025-07-10 02:44:09,706 INFO: Buscando candle com signal_id: SYJWSWVJ
2025-07-10 02:44:09,709 INFO: Candle encontrado para o signal_id: SYJWSWVJ
2025-07-10 02:44:09,710 INFO: 🔔 Candle 1752126240 é menor ou igual ao entry_time 2025-07-10 02:44:00
2025-07-10 02:45:09,716 INFO: 🔔 Novo candle detectado em 2025-07-10 05:45:00 UTC
2025-07-10 02:45:09,716 INFO: Buscando candle com signal_id: SYJWSWVJ
2025-07-10 02:45:09,719 INFO: Candle encontrado para o signal_id: SYJWSWVJ
2025-07-10 02:45:09,719 INFO: 🔔 Candle 1752126300 é maior que o entry_time 2025-07-10 02:44:00
2025-07-10 02:45:09,719 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:45:09,719 INFO: Buscando candle com signal_id: SYJWSWVJ
2025-07-10 02:45:09,722 INFO: Candle encontrado para o signal_id: SYJWSWVJ
2025-07-10 02:45:09,722 INFO: 🔄 Candle 1752126180 já existe no banco, atualizando...
2025-07-10 02:45:09,722 INFO: 🔄 Candle 1752126180 não tem gale_items
2025-07-10 02:45:09,722 INFO: Atualizando candle com filtro: {'epoch': 1752126180}, update: {'$set': {'epoch': 1752126180, 'open': 2763.491, 'high': 2764.006, 'low': 2762.739, 'close': 2762.857, 'time': datetime.datetime(2025, 7, 10, 5, 43), 'signal': {'signal_id': 'SYJWSWVJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 43), 'entry_time': datetime.datetime(2025, 7, 10, 2, 44), 'open_candle_timestamp': 1752126180, 'message_id': 10064, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:45:09,725 INFO: Número de candles atualizados: 1
2025-07-10 02:45:09,725 INFO: ✅ Candle 1752126180 atualizado com sucesso
2025-07-10 02:45:09,726 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:45:09,726 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:45:09,726 INFO: Funcao validate_signals_for_candle iniciada para o sinal SYJWSWVJ
2025-07-10 02:45:09,726 INFO: Buscando candle com signal_id: SYJWSWVJ
2025-07-10 02:45:09,728 INFO: Candle encontrado para o signal_id: SYJWSWVJ
2025-07-10 02:45:09,729 INFO: Funcao validate_signal iniciada para o signal SYJWSWVJ
2025-07-10 02:45:09,729 INFO: Funcao validate_signal finalizada para o signal SYJWSWVJ
2025-07-10 02:45:09,729 INFO: Validando sinal SYJWSWVJ sem gale items
2025-07-10 02:45:09,729 INFO: Atualizando candle com filtro: {'signal.signal_id': 'SYJWSWVJ'}, update: {'$set': {'signal': {'signal_id': 'SYJWSWVJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 43), 'entry_time': datetime.datetime(2025, 7, 10, 2, 44), 'open_candle_timestamp': 1752126180, 'message_id': 10064, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 02:45:09,730 INFO: Número de candles atualizados: 1
2025-07-10 02:45:09,731 INFO: Sinal atualizado no repositório para SYJWSWVJ
2025-07-10 02:45:10,556 INFO: ✅ Resposta de resultado enviada para o sinal SYJWSWVJ
2025-07-10 02:45:10,557 INFO: Sinal SYJWSWVJ validado como WIN e notificação enviada
2025-07-10 02:45:10,557 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal SYJWSWVJ
2025-07-10 02:45:10,557 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:46:09,697 INFO: 🔔 Novo candle detectado em 2025-07-10 05:46:00 UTC
2025-07-10 02:46:09,697 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:46:09,707 INFO: Buscando candle com filtro: {'epoch': 1752126360}
2025-07-10 02:46:09,709 INFO: Candle não encontrado
2025-07-10 02:46:09,723 INFO: Tendência HMA: FALL (HMA21=2762.83, HMA100=2762.74)
2025-07-10 02:46:09,724 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:46:09,724 INFO: 📈 Análise: EMA9=2762.87, EMA21=2762.89, trend_ema=FALL, trend_final=FALL, RSI=42.13, MACD=0.02/0.07, ATR=1.19, body=0.00, confidence=60
2025-07-10 02:46:09,724 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 02:46:09,724 INFO: Inserindo candle: Candle(2025-07-10 05:46:00, DOJI, O:2762.62, H:2762.62, L:2762.62, C:2762.62)
2025-07-10 02:46:09,727 INFO: Candle inserido com ID: 686f53a11d9c27c6b2f10c32
2025-07-10 02:46:10,593 INFO: Atualizando candle com filtro: {'signal.signal_id': 'DMD92KCA'}, update: {'$set': {'signal': {'signal_id': 'DMD92KCA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 46, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 47), 'open_candle_timestamp': 1752126360, 'message_id': 10066, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:46:10,595 INFO: Número de candles atualizados: 1
2025-07-10 02:46:10,595 INFO: ✅ Mensagem enviada ao Telegram (ID: DMD92KCA).
2025-07-10 02:47:09,697 INFO: 🔔 Novo candle detectado em 2025-07-10 05:47:00 UTC
2025-07-10 02:47:09,697 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:47:09,699 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:47:09,700 INFO: 🔔 Candle 1752126420 é menor ou igual ao entry_time 2025-07-10 02:47:00
2025-07-10 02:48:09,713 INFO: 🔔 Novo candle detectado em 2025-07-10 05:48:00 UTC
2025-07-10 02:48:09,713 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:48:09,715 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:48:09,715 INFO: 🔔 Candle 1752126480 é maior que o entry_time 2025-07-10 02:47:00
2025-07-10 02:48:09,716 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:48:09,716 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:48:09,719 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:48:09,719 INFO: 🔄 Candle 1752126360 já existe no banco, atualizando...
2025-07-10 02:48:09,720 INFO: 🔄 Candle 1752126360 não tem gale_items
2025-07-10 02:48:09,720 INFO: Atualizando candle com filtro: {'epoch': 1752126360}, update: {'$set': {'epoch': 1752126360, 'open': 2762.623, 'high': 2763.405, 'low': 2762.005, 'close': 2763.405, 'time': datetime.datetime(2025, 7, 10, 5, 46), 'signal': {'signal_id': 'DMD92KCA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 46), 'entry_time': datetime.datetime(2025, 7, 10, 2, 47), 'open_candle_timestamp': 1752126360, 'message_id': 10066, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:48:09,723 INFO: Número de candles atualizados: 1
2025-07-10 02:48:09,723 INFO: ✅ Candle 1752126360 atualizado com sucesso
2025-07-10 02:48:09,723 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:48:09,724 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:48:09,724 INFO: Funcao validate_signals_for_candle iniciada para o sinal DMD92KCA
2025-07-10 02:48:09,724 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:48:09,726 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:48:09,727 INFO: Funcao validate_signal iniciada para o signal DMD92KCA
2025-07-10 02:48:09,727 INFO: Funcao validate_signal finalizada para o signal DMD92KCA
2025-07-10 02:48:09,727 INFO: Validando sinal DMD92KCA sem gale items
2025-07-10 02:48:09,728 INFO: Sinal DMD92KCA adicionado à fila para G1
2025-07-10 02:48:09,728 INFO: Atualizando candle com filtro: {'epoch': 1752126360}, update: {'$set': {'epoch': 1752126360, 'open': 2762.623, 'high': 2763.405, 'low': 2762.005, 'close': 2763.405, 'time': datetime.datetime(2025, 7, 10, 5, 46), 'signal': {'signal_id': 'DMD92KCA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 46), 'entry_time': datetime.datetime(2025, 7, 10, 2, 47), 'open_candle_timestamp': 1752126360, 'message_id': 10066, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126480, 'open_price': 2762.056, 'high': 2762.056, 'low': 2762.056, 'close_price': 2762.056, 'time': datetime.datetime(2025, 7, 10, 2, 48, 9, 727679), 'result': None}]}}
2025-07-10 02:48:09,731 INFO: Número de candles atualizados: 1
2025-07-10 02:48:09,731 INFO: Candle completo com gales atualizado para DMD92KCA
2025-07-10 02:48:10,576 INFO: ✅ Resposta de resultado enviada para o sinal DMD92KCA
2025-07-10 02:48:10,577 INFO: Sinal DMD92KCA validado como LOSS e notificação enviada
2025-07-10 02:48:10,577 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal DMD92KCA
2025-07-10 02:48:10,578 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:49:09,767 INFO: 🔔 Novo candle detectado em 2025-07-10 05:49:00 UTC
2025-07-10 02:49:09,768 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:49:09,770 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:49:09,770 INFO: 🔔 Candle 1752126540 é maior que o entry_time 2025-07-10 02:47:00
2025-07-10 02:49:09,771 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:49:09,771 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:49:09,773 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:49:09,773 INFO: 🔄 Candle 1752126480 já existe no banco, atualizando...
2025-07-10 02:49:09,773 INFO: 🔄 Atualizando último gale item do candle 1752126480
2025-07-10 02:49:09,773 INFO: Atualizando candle com filtro: {'epoch': 1752126360}, update: {'$set': {'epoch': 1752126360, 'open': 2762.623, 'high': 2763.405, 'low': 2762.005, 'close': 2763.405, 'time': datetime.datetime(2025, 7, 10, 5, 46), 'signal': {'signal_id': 'DMD92KCA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 46), 'entry_time': datetime.datetime(2025, 7, 10, 2, 47), 'open_candle_timestamp': 1752126360, 'message_id': 10066, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126480, 'open_price': 2762.056, 'high': 2762.322, 'low': 2761.16, 'close_price': 2761.498, 'time': datetime.datetime(2025, 7, 10, 2, 48, 9, 727000), 'result': None}]}}
2025-07-10 02:49:09,776 INFO: Número de candles atualizados: 1
2025-07-10 02:49:09,776 INFO: ✅ Candle 1752126360 atualizado com sucesso
2025-07-10 02:49:09,776 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:49:09,776 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:49:09,777 INFO: Funcao validate_signals_for_candle iniciada para o sinal DMD92KCA
2025-07-10 02:49:09,777 INFO: Buscando candle com signal_id: DMD92KCA
2025-07-10 02:49:09,778 INFO: Candle encontrado para o signal_id: DMD92KCA
2025-07-10 02:49:09,779 INFO: Funcao validate_signal iniciada para o signal DMD92KCA
2025-07-10 02:49:09,779 INFO: Validando sinal DMD92KCA com gale items
2025-07-10 02:49:09,779 INFO: Atualizando candle com filtro: {'epoch': 1752126360}, update: {'$set': {'epoch': 1752126360, 'open': 2762.623, 'high': 2763.405, 'low': 2762.005, 'close': 2763.405, 'time': datetime.datetime(2025, 7, 10, 5, 46), 'signal': {'signal_id': 'DMD92KCA', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 46), 'entry_time': datetime.datetime(2025, 7, 10, 2, 47), 'open_candle_timestamp': 1752126360, 'message_id': 10066, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126480, 'open_price': 2762.056, 'high': 2762.322, 'low': 2761.16, 'close_price': 2761.498, 'time': datetime.datetime(2025, 7, 10, 2, 48, 9, 727000), 'result': 'WIN'}]}}
2025-07-10 02:49:09,781 INFO: Número de candles atualizados: 1
2025-07-10 02:49:09,781 INFO: Candle completo com gales atualizado para DMD92KCA
2025-07-10 02:49:10,582 INFO: ✅ Resposta de resultado enviada para o sinal DMD92KCA
2025-07-10 02:49:10,583 INFO: Sinal DMD92KCA validado como LOSS e notificação enviada
2025-07-10 02:49:10,583 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal DMD92KCA
2025-07-10 02:49:10,583 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:50:09,723 INFO: 🔔 Novo candle detectado em 2025-07-10 05:50:00 UTC
2025-07-10 02:50:09,723 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:50:09,734 INFO: Buscando candle com filtro: {'epoch': 1752126600}
2025-07-10 02:50:09,737 INFO: Candle não encontrado
2025-07-10 02:50:09,755 INFO: Tendência HMA: FALL (HMA21=2762.46, HMA100=2762.32)
2025-07-10 02:50:09,755 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:50:09,755 INFO: 📈 Análise: EMA9=2762.56, EMA21=2762.50, trend_ema=RISE, trend_final=FALL, RSI=56.54, MACD=0.09/0.10, ATR=0.79, body=0.00, confidence=40
2025-07-10 02:50:09,756 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 02:50:09,756 INFO: Inserindo candle: Candle(2025-07-10 05:50:00, DOJI, O:2762.68, H:2762.68, L:2762.68, C:2762.68)
2025-07-10 02:50:09,758 INFO: Candle inserido com ID: 686f54911d9c27c6b2f10c33
2025-07-10 02:50:10,575 INFO: Atualizando candle com filtro: {'signal.signal_id': 'RH8QO2G8'}, update: {'$set': {'signal': {'signal_id': 'RH8QO2G8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 50, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 51), 'open_candle_timestamp': 1752126600, 'message_id': 10069, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:50:10,578 INFO: Número de candles atualizados: 1
2025-07-10 02:50:10,579 INFO: ✅ Mensagem enviada ao Telegram (ID: RH8QO2G8).
2025-07-10 02:51:09,728 INFO: 🔔 Novo candle detectado em 2025-07-10 05:51:00 UTC
2025-07-10 02:51:09,729 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:51:09,732 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:51:09,732 INFO: 🔔 Candle 1752126660 é menor ou igual ao entry_time 2025-07-10 02:51:00
2025-07-10 02:52:09,725 INFO: 🔔 Novo candle detectado em 2025-07-10 05:52:00 UTC
2025-07-10 02:52:09,726 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:52:09,728 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:52:09,729 INFO: 🔔 Candle 1752126720 é maior que o entry_time 2025-07-10 02:51:00
2025-07-10 02:52:09,729 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:52:09,729 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:52:09,732 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:52:09,732 INFO: 🔄 Candle 1752126600 já existe no banco, atualizando...
2025-07-10 02:52:09,732 INFO: 🔄 Candle 1752126600 não tem gale_items
2025-07-10 02:52:09,732 INFO: Atualizando candle com filtro: {'epoch': 1752126600}, update: {'$set': {'epoch': 1752126600, 'open': 2762.676, 'high': 2764.047, 'low': 2762.676, 'close': 2763.858, 'time': datetime.datetime(2025, 7, 10, 5, 50), 'signal': {'signal_id': 'RH8QO2G8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 50), 'entry_time': datetime.datetime(2025, 7, 10, 2, 51), 'open_candle_timestamp': 1752126600, 'message_id': 10069, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:52:09,735 INFO: Número de candles atualizados: 1
2025-07-10 02:52:09,735 INFO: ✅ Candle 1752126600 atualizado com sucesso
2025-07-10 02:52:09,735 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:52:09,735 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:52:09,736 INFO: Funcao validate_signals_for_candle iniciada para o sinal RH8QO2G8
2025-07-10 02:52:09,736 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:52:09,738 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:52:09,738 INFO: Funcao validate_signal iniciada para o signal RH8QO2G8
2025-07-10 02:52:09,738 INFO: Funcao validate_signal finalizada para o signal RH8QO2G8
2025-07-10 02:52:09,738 INFO: Validando sinal RH8QO2G8 sem gale items
2025-07-10 02:52:09,738 INFO: Sinal RH8QO2G8 adicionado à fila para G1
2025-07-10 02:52:09,738 INFO: Atualizando candle com filtro: {'epoch': 1752126600}, update: {'$set': {'epoch': 1752126600, 'open': 2762.676, 'high': 2764.047, 'low': 2762.676, 'close': 2763.858, 'time': datetime.datetime(2025, 7, 10, 5, 50), 'signal': {'signal_id': 'RH8QO2G8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 50), 'entry_time': datetime.datetime(2025, 7, 10, 2, 51), 'open_candle_timestamp': 1752126600, 'message_id': 10069, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126720, 'open_price': 2763.222, 'high': 2763.222, 'low': 2763.222, 'close_price': 2763.222, 'time': datetime.datetime(2025, 7, 10, 2, 52, 9, 738883), 'result': None}]}}
2025-07-10 02:52:09,741 INFO: Número de candles atualizados: 1
2025-07-10 02:52:09,741 INFO: Candle completo com gales atualizado para RH8QO2G8
2025-07-10 02:52:10,543 INFO: ✅ Resposta de resultado enviada para o sinal RH8QO2G8
2025-07-10 02:52:10,543 INFO: Sinal RH8QO2G8 validado como LOSS e notificação enviada
2025-07-10 02:52:10,543 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RH8QO2G8
2025-07-10 02:52:10,544 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:53:09,723 INFO: 🔔 Novo candle detectado em 2025-07-10 05:53:00 UTC
2025-07-10 02:53:09,724 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:53:09,726 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:53:09,726 INFO: 🔔 Candle 1752126780 é maior que o entry_time 2025-07-10 02:51:00
2025-07-10 02:53:09,727 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:53:09,727 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:53:09,729 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:53:09,729 INFO: 🔄 Candle 1752126720 já existe no banco, atualizando...
2025-07-10 02:53:09,729 INFO: 🔄 Atualizando último gale item do candle 1752126720
2025-07-10 02:53:09,730 INFO: Atualizando candle com filtro: {'epoch': 1752126600}, update: {'$set': {'epoch': 1752126600, 'open': 2762.676, 'high': 2764.047, 'low': 2762.676, 'close': 2763.858, 'time': datetime.datetime(2025, 7, 10, 5, 50), 'signal': {'signal_id': 'RH8QO2G8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 50), 'entry_time': datetime.datetime(2025, 7, 10, 2, 51), 'open_candle_timestamp': 1752126600, 'message_id': 10069, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126720, 'open_price': 2763.222, 'high': 2763.293, 'low': 2762.313, 'close_price': 2762.974, 'time': datetime.datetime(2025, 7, 10, 2, 52, 9, 738000), 'result': None}]}}
2025-07-10 02:53:09,731 INFO: Número de candles atualizados: 1
2025-07-10 02:53:09,732 INFO: ✅ Candle 1752126600 atualizado com sucesso
2025-07-10 02:53:09,732 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:53:09,732 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:53:09,732 INFO: Funcao validate_signals_for_candle iniciada para o sinal RH8QO2G8
2025-07-10 02:53:09,732 INFO: Buscando candle com signal_id: RH8QO2G8
2025-07-10 02:53:09,734 INFO: Candle encontrado para o signal_id: RH8QO2G8
2025-07-10 02:53:09,734 INFO: Funcao validate_signal iniciada para o signal RH8QO2G8
2025-07-10 02:53:09,735 INFO: Validando sinal RH8QO2G8 com gale items
2025-07-10 02:53:09,735 INFO: Atualizando candle com filtro: {'epoch': 1752126600}, update: {'$set': {'epoch': 1752126600, 'open': 2762.676, 'high': 2764.047, 'low': 2762.676, 'close': 2763.858, 'time': datetime.datetime(2025, 7, 10, 5, 50), 'signal': {'signal_id': 'RH8QO2G8', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 50), 'entry_time': datetime.datetime(2025, 7, 10, 2, 51), 'open_candle_timestamp': 1752126600, 'message_id': 10069, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126720, 'open_price': 2763.222, 'high': 2763.293, 'low': 2762.313, 'close_price': 2762.974, 'time': datetime.datetime(2025, 7, 10, 2, 52, 9, 738000), 'result': 'WIN'}]}}
2025-07-10 02:53:09,737 INFO: Número de candles atualizados: 1
2025-07-10 02:53:09,737 INFO: Candle completo com gales atualizado para RH8QO2G8
2025-07-10 02:53:10,538 INFO: ✅ Resposta de resultado enviada para o sinal RH8QO2G8
2025-07-10 02:53:10,539 INFO: Sinal RH8QO2G8 validado como LOSS e notificação enviada
2025-07-10 02:53:10,539 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RH8QO2G8
2025-07-10 02:53:10,539 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:54:09,699 INFO: 🔔 Novo candle detectado em 2025-07-10 05:54:00 UTC
2025-07-10 02:54:09,701 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:54:09,709 INFO: Buscando candle com filtro: {'epoch': 1752126840}
2025-07-10 02:54:09,712 INFO: Candle não encontrado
2025-07-10 02:54:09,727 INFO: Tendência HMA: FALL (HMA21=2763.55, HMA100=2763.35)
2025-07-10 02:54:09,727 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:54:09,728 INFO: 📈 Análise: EMA9=2763.53, EMA21=2763.42, trend_ema=RISE, trend_final=FALL, RSI=56.51, MACD=0.13/0.14, ATR=0.82, body=0.00, confidence=20
2025-07-10 02:54:09,728 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:54:09,728 INFO: Inserindo candle: Candle(2025-07-10 05:54:00, DOJI, O:2763.55, H:2763.55, L:2763.55, C:2763.55)
2025-07-10 02:54:09,730 INFO: Candle inserido com ID: 686f55811d9c27c6b2f10c34
2025-07-10 02:54:10,534 INFO: Atualizando candle com filtro: {'signal.signal_id': '5JWQ3XML'}, update: {'$set': {'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 54, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:54:10,537 INFO: Número de candles atualizados: 1
2025-07-10 02:54:10,538 INFO: ✅ Mensagem enviada ao Telegram (ID: 5JWQ3XML).
2025-07-10 02:55:09,721 INFO: 🔔 Novo candle detectado em 2025-07-10 05:55:00 UTC
2025-07-10 02:55:09,722 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:55:09,725 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:55:09,725 INFO: 🔔 Candle 1752126900 é menor ou igual ao entry_time 2025-07-10 02:55:00
2025-07-10 02:56:09,770 INFO: 🔔 Novo candle detectado em 2025-07-10 05:56:00 UTC
2025-07-10 02:56:09,771 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:56:09,774 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:56:09,774 INFO: 🔔 Candle 1752126960 é maior que o entry_time 2025-07-10 02:55:00
2025-07-10 02:56:09,774 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:56:09,774 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:56:09,777 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:56:09,777 INFO: 🔄 Candle 1752126840 já existe no banco, atualizando...
2025-07-10 02:56:09,777 INFO: 🔄 Candle 1752126840 não tem gale_items
2025-07-10 02:56:09,777 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 02:56:09,780 INFO: Número de candles atualizados: 1
2025-07-10 02:56:09,780 INFO: ✅ Candle 1752126840 atualizado com sucesso
2025-07-10 02:56:09,780 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:56:09,781 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:56:09,781 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5JWQ3XML
2025-07-10 02:56:09,781 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:56:09,783 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:56:09,783 INFO: Funcao validate_signal iniciada para o signal 5JWQ3XML
2025-07-10 02:56:09,783 INFO: Funcao validate_signal finalizada para o signal 5JWQ3XML
2025-07-10 02:56:09,783 INFO: Validando sinal 5JWQ3XML sem gale items
2025-07-10 02:56:09,783 INFO: Sinal 5JWQ3XML adicionado à fila para G1
2025-07-10 02:56:09,784 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126960, 'open_price': 2763.692, 'high': 2763.692, 'low': 2763.692, 'close_price': 2763.692, 'time': datetime.datetime(2025, 7, 10, 2, 56, 9, 783988), 'result': None}]}}
2025-07-10 02:56:09,786 INFO: Número de candles atualizados: 1
2025-07-10 02:56:09,786 INFO: Candle completo com gales atualizado para 5JWQ3XML
2025-07-10 02:56:10,660 INFO: ✅ Resposta de resultado enviada para o sinal 5JWQ3XML
2025-07-10 02:56:10,660 INFO: Sinal 5JWQ3XML validado como LOSS e notificação enviada
2025-07-10 02:56:10,660 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5JWQ3XML
2025-07-10 02:56:10,661 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:57:09,715 INFO: 🔔 Novo candle detectado em 2025-07-10 05:57:00 UTC
2025-07-10 02:57:09,715 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:57:09,718 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:57:09,718 INFO: 🔔 Candle 1752127020 é maior que o entry_time 2025-07-10 02:55:00
2025-07-10 02:57:09,719 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:57:09,719 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:57:09,721 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:57:09,722 INFO: 🔄 Candle 1752126960 já existe no banco, atualizando...
2025-07-10 02:57:09,722 INFO: 🔄 Atualizando último gale item do candle 1752126960
2025-07-10 02:57:09,722 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126960, 'open_price': 2763.692, 'high': 2764.252, 'low': 2763.434, 'close_price': 2764.174, 'time': datetime.datetime(2025, 7, 10, 2, 56, 9, 783000), 'result': None}]}}
2025-07-10 02:57:09,725 INFO: Número de candles atualizados: 1
2025-07-10 02:57:09,725 INFO: ✅ Candle 1752126840 atualizado com sucesso
2025-07-10 02:57:09,725 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:57:09,725 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:57:09,725 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5JWQ3XML
2025-07-10 02:57:09,726 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:57:09,727 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:57:09,727 INFO: Funcao validate_signal iniciada para o signal 5JWQ3XML
2025-07-10 02:57:09,728 INFO: Validando sinal 5JWQ3XML com gale items
2025-07-10 02:57:09,728 INFO: Gale G1 para o sinal 5JWQ3XML resultou em LOSS
2025-07-10 02:57:09,728 INFO: Sinal 5JWQ3XML adicionado à fila para G2
2025-07-10 02:57:09,729 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126960, 'open_price': 2763.692, 'high': 2764.252, 'low': 2763.434, 'close_price': 2764.174, 'time': datetime.datetime(2025, 7, 10, 2, 56, 9, 783000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127020, 'open_price': 2764.323, 'high': 2764.323, 'low': 2764.323, 'close_price': 2764.323, 'time': datetime.datetime(2025, 7, 10, 2, 57, 9, 728441), 'result': None}]}}
2025-07-10 02:57:09,731 INFO: Número de candles atualizados: 1
2025-07-10 02:57:09,731 INFO: Candle completo com gales atualizado para 5JWQ3XML
2025-07-10 02:57:10,582 INFO: ✅ Resposta de resultado enviada para o sinal 5JWQ3XML
2025-07-10 02:57:10,582 INFO: Sinal 5JWQ3XML validado como LOSS e notificação enviada
2025-07-10 02:57:10,582 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5JWQ3XML
2025-07-10 02:57:10,583 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 02:58:09,718 INFO: 🔔 Novo candle detectado em 2025-07-10 05:58:00 UTC
2025-07-10 02:58:09,718 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:58:09,721 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:58:09,721 INFO: 🔔 Candle 1752127080 é maior que o entry_time 2025-07-10 02:55:00
2025-07-10 02:58:09,721 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 02:58:09,722 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:58:09,724 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:58:09,725 INFO: 🔄 Candle 1752127020 já existe no banco, atualizando...
2025-07-10 02:58:09,725 INFO: 🔄 Atualizando último gale item do candle 1752127020
2025-07-10 02:58:09,725 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126960, 'open_price': 2763.692, 'high': 2764.252, 'low': 2763.434, 'close_price': 2764.174, 'time': datetime.datetime(2025, 7, 10, 2, 56, 9, 783000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127020, 'open_price': 2764.323, 'high': 2765.122, 'low': 2764.05, 'close_price': 2764.922, 'time': datetime.datetime(2025, 7, 10, 2, 57, 9, 728000), 'result': None}]}}
2025-07-10 02:58:09,728 INFO: Número de candles atualizados: 1
2025-07-10 02:58:09,728 INFO: ✅ Candle 1752126840 atualizado com sucesso
2025-07-10 02:58:09,728 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 02:58:09,729 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 02:58:09,729 INFO: Funcao validate_signals_for_candle iniciada para o sinal 5JWQ3XML
2025-07-10 02:58:09,729 INFO: Buscando candle com signal_id: 5JWQ3XML
2025-07-10 02:58:09,731 INFO: Candle encontrado para o signal_id: 5JWQ3XML
2025-07-10 02:58:09,731 INFO: Funcao validate_signal iniciada para o signal 5JWQ3XML
2025-07-10 02:58:09,731 INFO: Validando sinal 5JWQ3XML com gale items
2025-07-10 02:58:09,731 INFO: Gale G2 para o sinal 5JWQ3XML resultou em LOSS
2025-07-10 02:58:09,732 INFO: Atualizando candle com filtro: {'epoch': 1752126840}, update: {'$set': {'epoch': 1752126840, 'open': 2763.55, 'high': 2764.313, 'low': 2763.319, 'close': 2764.07, 'time': datetime.datetime(2025, 7, 10, 5, 54), 'signal': {'signal_id': '5JWQ3XML', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 54), 'entry_time': datetime.datetime(2025, 7, 10, 2, 55), 'open_candle_timestamp': 1752126840, 'message_id': 10072, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752126960, 'open_price': 2763.692, 'high': 2764.252, 'low': 2763.434, 'close_price': 2764.174, 'time': datetime.datetime(2025, 7, 10, 2, 56, 9, 783000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127020, 'open_price': 2764.323, 'high': 2765.122, 'low': 2764.05, 'close_price': 2764.922, 'time': datetime.datetime(2025, 7, 10, 2, 57, 9, 728000), 'result': 'LOSS'}]}}
2025-07-10 02:58:09,733 INFO: Número de candles atualizados: 1
2025-07-10 02:58:09,733 INFO: Candle completo com gales atualizado para 5JWQ3XML
2025-07-10 02:58:10,536 INFO: ✅ Resposta de resultado enviada para o sinal 5JWQ3XML
2025-07-10 02:58:10,536 INFO: Sinal 5JWQ3XML validado como LOSS e notificação enviada
2025-07-10 02:58:10,537 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 5JWQ3XML
2025-07-10 02:58:10,537 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 02:59:09,733 INFO: 🔔 Novo candle detectado em 2025-07-10 05:59:00 UTC
2025-07-10 02:59:09,733 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 02:59:09,742 INFO: Buscando candle com filtro: {'epoch': 1752127140}
2025-07-10 02:59:09,745 INFO: Candle não encontrado
2025-07-10 02:59:09,760 INFO: Tendência HMA: FALL (HMA21=2766.05, HMA100=2765.81)
2025-07-10 02:59:09,760 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 02:59:09,760 INFO: 📈 Análise: EMA9=2765.75, EMA21=2765.63, trend_ema=RISE, trend_final=FALL, RSI=50.46, MACD=0.19/0.25, ATR=0.95, body=0.00, confidence=20
2025-07-10 02:59:09,761 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 02:59:09,761 INFO: Inserindo candle: Candle(2025-07-10 05:59:00, DOJI, O:2765.56, H:2765.56, L:2765.56, C:2765.56)
2025-07-10 02:59:09,763 INFO: Candle inserido com ID: 686f56ad1d9c27c6b2f10c35
2025-07-10 02:59:10,588 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HVONX4JD'}, update: {'$set': {'signal': {'signal_id': 'HVONX4JD', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 9, 23, 59, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 0), 'open_candle_timestamp': 1752127140, 'message_id': 10076, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 02:59:10,591 INFO: Número de candles atualizados: 1
2025-07-10 02:59:10,592 INFO: ✅ Mensagem enviada ao Telegram (ID: HVONX4JD).
2025-07-10 03:00:09,744 INFO: 🔔 Novo candle detectado em 2025-07-10 06:00:00 UTC
2025-07-10 03:00:09,744 INFO: Buscando candle com signal_id: HVONX4JD
2025-07-10 03:00:09,747 INFO: Candle encontrado para o signal_id: HVONX4JD
2025-07-10 03:00:09,747 INFO: 🔔 Candle 1752127200 é menor ou igual ao entry_time 2025-07-10 03:00:00
2025-07-10 03:01:09,717 INFO: 🔔 Novo candle detectado em 2025-07-10 06:01:00 UTC
2025-07-10 03:01:09,717 INFO: Buscando candle com signal_id: HVONX4JD
2025-07-10 03:01:09,720 INFO: Candle encontrado para o signal_id: HVONX4JD
2025-07-10 03:01:09,720 INFO: 🔔 Candle 1752127260 é maior que o entry_time 2025-07-10 03:00:00
2025-07-10 03:01:09,720 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:01:09,720 INFO: Buscando candle com signal_id: HVONX4JD
2025-07-10 03:01:09,723 INFO: Candle encontrado para o signal_id: HVONX4JD
2025-07-10 03:01:09,723 INFO: 🔄 Candle 1752127140 já existe no banco, atualizando...
2025-07-10 03:01:09,723 INFO: 🔄 Candle 1752127140 não tem gale_items
2025-07-10 03:01:09,724 INFO: Atualizando candle com filtro: {'epoch': 1752127140}, update: {'$set': {'epoch': 1752127140, 'open': 2765.556, 'high': 2765.577, 'low': 2764.309, 'close': 2764.667, 'time': datetime.datetime(2025, 7, 10, 5, 59), 'signal': {'signal_id': 'HVONX4JD', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 59), 'entry_time': datetime.datetime(2025, 7, 10, 3, 0), 'open_candle_timestamp': 1752127140, 'message_id': 10076, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:01:09,726 INFO: Número de candles atualizados: 1
2025-07-10 03:01:09,726 INFO: ✅ Candle 1752127140 atualizado com sucesso
2025-07-10 03:01:09,726 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:01:09,726 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:01:09,727 INFO: Funcao validate_signals_for_candle iniciada para o sinal HVONX4JD
2025-07-10 03:01:09,727 INFO: Buscando candle com signal_id: HVONX4JD
2025-07-10 03:01:09,729 INFO: Candle encontrado para o signal_id: HVONX4JD
2025-07-10 03:01:09,729 INFO: Funcao validate_signal iniciada para o signal HVONX4JD
2025-07-10 03:01:09,729 INFO: Funcao validate_signal finalizada para o signal HVONX4JD
2025-07-10 03:01:09,729 INFO: Validando sinal HVONX4JD sem gale items
2025-07-10 03:01:09,730 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HVONX4JD'}, update: {'$set': {'signal': {'signal_id': 'HVONX4JD', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 59), 'entry_time': datetime.datetime(2025, 7, 10, 3, 0), 'open_candle_timestamp': 1752127140, 'message_id': 10076, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 03:01:09,731 INFO: Número de candles atualizados: 1
2025-07-10 03:01:09,732 INFO: Sinal atualizado no repositório para HVONX4JD
2025-07-10 03:01:10,572 INFO: ✅ Resposta de resultado enviada para o sinal HVONX4JD
2025-07-10 03:01:10,572 INFO: Sinal HVONX4JD validado como WIN e notificação enviada
2025-07-10 03:01:10,572 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HVONX4JD
2025-07-10 03:01:10,573 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:02:09,731 INFO: 🔔 Novo candle detectado em 2025-07-10 06:02:00 UTC
2025-07-10 03:02:09,731 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:02:09,738 INFO: Buscando candle com filtro: {'epoch': 1752127320}
2025-07-10 03:02:09,742 INFO: Candle não encontrado
2025-07-10 03:02:09,757 INFO: Tendência HMA: FALL (HMA21=2766.60, HMA100=2767.22)
2025-07-10 03:02:09,757 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:02:09,757 INFO: 📈 Análise: EMA9=2766.65, EMA21=2766.66, trend_ema=FALL, trend_final=FALL, RSI=50.67, MACD=0.03/0.06, ATR=0.74, body=0.00, confidence=40
2025-07-10 03:02:09,758 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 03:02:09,758 INFO: Inserindo candle: Candle(2025-07-10 06:02:00, DOJI, O:2766.65, H:2766.65, L:2766.65, C:2766.65)
2025-07-10 03:02:09,760 INFO: Candle inserido com ID: 686f57611d9c27c6b2f10c36
2025-07-10 03:02:10,575 INFO: Atualizando candle com filtro: {'signal.signal_id': 'QAY4D5FJ'}, update: {'$set': {'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 2, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:02:10,578 INFO: Número de candles atualizados: 1
2025-07-10 03:02:10,578 INFO: ✅ Mensagem enviada ao Telegram (ID: QAY4D5FJ).
2025-07-10 03:03:09,755 INFO: 🔔 Novo candle detectado em 2025-07-10 06:03:00 UTC
2025-07-10 03:03:09,755 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:03:09,758 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:03:09,759 INFO: 🔔 Candle 1752127380 é menor ou igual ao entry_time 2025-07-10 03:03:00
2025-07-10 03:04:09,723 INFO: 🔔 Novo candle detectado em 2025-07-10 06:04:00 UTC
2025-07-10 03:04:09,724 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:04:09,727 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:04:09,727 INFO: 🔔 Candle 1752127440 é maior que o entry_time 2025-07-10 03:03:00
2025-07-10 03:04:09,727 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:04:09,727 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:04:09,729 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:04:09,730 INFO: 🔄 Candle 1752127320 já existe no banco, atualizando...
2025-07-10 03:04:09,730 INFO: 🔄 Candle 1752127320 não tem gale_items
2025-07-10 03:04:09,731 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:04:09,733 INFO: Número de candles atualizados: 1
2025-07-10 03:04:09,733 INFO: ✅ Candle 1752127320 atualizado com sucesso
2025-07-10 03:04:09,733 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:04:09,733 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:04:09,733 INFO: Funcao validate_signals_for_candle iniciada para o sinal QAY4D5FJ
2025-07-10 03:04:09,734 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:04:09,735 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:04:09,736 INFO: Funcao validate_signal iniciada para o signal QAY4D5FJ
2025-07-10 03:04:09,736 INFO: Funcao validate_signal finalizada para o signal QAY4D5FJ
2025-07-10 03:04:09,736 INFO: Validando sinal QAY4D5FJ sem gale items
2025-07-10 03:04:09,736 INFO: Sinal QAY4D5FJ adicionado à fila para G1
2025-07-10 03:04:09,736 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127440, 'open_price': 2766.661, 'high': 2766.661, 'low': 2766.661, 'close_price': 2766.661, 'time': datetime.datetime(2025, 7, 10, 3, 4, 9, 736794), 'result': None}]}}
2025-07-10 03:04:09,739 INFO: Número de candles atualizados: 1
2025-07-10 03:04:09,739 INFO: Candle completo com gales atualizado para QAY4D5FJ
2025-07-10 03:04:10,561 INFO: ✅ Resposta de resultado enviada para o sinal QAY4D5FJ
2025-07-10 03:04:10,561 INFO: Sinal QAY4D5FJ validado como LOSS e notificação enviada
2025-07-10 03:04:10,561 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal QAY4D5FJ
2025-07-10 03:04:10,562 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:05:09,758 INFO: 🔔 Novo candle detectado em 2025-07-10 06:05:00 UTC
2025-07-10 03:05:09,758 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:05:09,761 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:05:09,761 INFO: 🔔 Candle 1752127500 é maior que o entry_time 2025-07-10 03:03:00
2025-07-10 03:05:09,761 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:05:09,761 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:05:09,764 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:05:09,764 INFO: 🔄 Candle 1752127440 já existe no banco, atualizando...
2025-07-10 03:05:09,764 INFO: 🔄 Atualizando último gale item do candle 1752127440
2025-07-10 03:05:09,765 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127440, 'open_price': 2766.661, 'high': 2768.08, 'low': 2766.398, 'close_price': 2767.681, 'time': datetime.datetime(2025, 7, 10, 3, 4, 9, 736000), 'result': None}]}}
2025-07-10 03:05:09,767 INFO: Número de candles atualizados: 1
2025-07-10 03:05:09,768 INFO: ✅ Candle 1752127320 atualizado com sucesso
2025-07-10 03:05:09,768 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:05:09,768 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:05:09,768 INFO: Funcao validate_signals_for_candle iniciada para o sinal QAY4D5FJ
2025-07-10 03:05:09,768 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:05:09,770 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:05:09,770 INFO: Funcao validate_signal iniciada para o signal QAY4D5FJ
2025-07-10 03:05:09,770 INFO: Validando sinal QAY4D5FJ com gale items
2025-07-10 03:05:09,771 INFO: Gale G1 para o sinal QAY4D5FJ resultou em LOSS
2025-07-10 03:05:09,771 INFO: Sinal QAY4D5FJ adicionado à fila para G2
2025-07-10 03:05:09,771 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127440, 'open_price': 2766.661, 'high': 2768.08, 'low': 2766.398, 'close_price': 2767.681, 'time': datetime.datetime(2025, 7, 10, 3, 4, 9, 736000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127500, 'open_price': 2767.738, 'high': 2767.738, 'low': 2767.738, 'close_price': 2767.738, 'time': datetime.datetime(2025, 7, 10, 3, 5, 9, 771308), 'result': None}]}}
2025-07-10 03:05:09,774 INFO: Número de candles atualizados: 1
2025-07-10 03:05:09,774 INFO: Candle completo com gales atualizado para QAY4D5FJ
2025-07-10 03:05:10,583 INFO: ✅ Resposta de resultado enviada para o sinal QAY4D5FJ
2025-07-10 03:05:10,583 INFO: Sinal QAY4D5FJ validado como LOSS e notificação enviada
2025-07-10 03:05:10,583 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal QAY4D5FJ
2025-07-10 03:05:10,584 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:06:09,734 INFO: 🔔 Novo candle detectado em 2025-07-10 06:06:00 UTC
2025-07-10 03:06:09,735 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:06:09,737 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:06:09,737 INFO: 🔔 Candle 1752127560 é maior que o entry_time 2025-07-10 03:03:00
2025-07-10 03:06:09,737 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:06:09,738 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:06:09,741 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:06:09,741 INFO: 🔄 Candle 1752127500 já existe no banco, atualizando...
2025-07-10 03:06:09,741 INFO: 🔄 Atualizando último gale item do candle 1752127500
2025-07-10 03:06:09,742 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127440, 'open_price': 2766.661, 'high': 2768.08, 'low': 2766.398, 'close_price': 2767.681, 'time': datetime.datetime(2025, 7, 10, 3, 4, 9, 736000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127500, 'open_price': 2767.738, 'high': 2768.308, 'low': 2767.355, 'close_price': 2767.677, 'time': datetime.datetime(2025, 7, 10, 3, 5, 9, 771000), 'result': None}]}}
2025-07-10 03:06:09,744 INFO: Número de candles atualizados: 1
2025-07-10 03:06:09,745 INFO: ✅ Candle 1752127320 atualizado com sucesso
2025-07-10 03:06:09,745 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:06:09,745 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:06:09,745 INFO: Funcao validate_signals_for_candle iniciada para o sinal QAY4D5FJ
2025-07-10 03:06:09,745 INFO: Buscando candle com signal_id: QAY4D5FJ
2025-07-10 03:06:09,747 INFO: Candle encontrado para o signal_id: QAY4D5FJ
2025-07-10 03:06:09,747 INFO: Funcao validate_signal iniciada para o signal QAY4D5FJ
2025-07-10 03:06:09,747 INFO: Validando sinal QAY4D5FJ com gale items
2025-07-10 03:06:09,747 INFO: Atualizando candle com filtro: {'epoch': 1752127320}, update: {'$set': {'epoch': 1752127320, 'open': 2766.648, 'high': 2768.413, 'low': 2766.569, 'close': 2768.077, 'time': datetime.datetime(2025, 7, 10, 6, 2), 'signal': {'signal_id': 'QAY4D5FJ', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 2), 'entry_time': datetime.datetime(2025, 7, 10, 3, 3), 'open_candle_timestamp': 1752127320, 'message_id': 10078, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127440, 'open_price': 2766.661, 'high': 2768.08, 'low': 2766.398, 'close_price': 2767.681, 'time': datetime.datetime(2025, 7, 10, 3, 4, 9, 736000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127500, 'open_price': 2767.738, 'high': 2768.308, 'low': 2767.355, 'close_price': 2767.677, 'time': datetime.datetime(2025, 7, 10, 3, 5, 9, 771000), 'result': 'WIN'}]}}
2025-07-10 03:06:09,750 INFO: Número de candles atualizados: 1
2025-07-10 03:06:09,750 INFO: Candle completo com gales atualizado para QAY4D5FJ
2025-07-10 03:06:10,618 INFO: ✅ Resposta de resultado enviada para o sinal QAY4D5FJ
2025-07-10 03:06:10,618 INFO: Sinal QAY4D5FJ validado como LOSS e notificação enviada
2025-07-10 03:06:10,619 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal QAY4D5FJ
2025-07-10 03:06:10,619 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:07:09,728 INFO: 🔔 Novo candle detectado em 2025-07-10 06:07:00 UTC
2025-07-10 03:07:09,728 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:07:09,737 INFO: Buscando candle com filtro: {'epoch': 1752127620}
2025-07-10 03:07:09,740 INFO: Candle não encontrado
2025-07-10 03:07:09,754 INFO: Tendência HMA: FALL (HMA21=2767.87, HMA100=2767.82)
2025-07-10 03:07:09,755 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:07:09,756 INFO: 📈 Análise: EMA9=2767.95, EMA21=2767.88, trend_ema=RISE, trend_final=FALL, RSI=59.45, MACD=0.07/0.07, ATR=0.67, body=0.00, confidence=60
2025-07-10 03:07:09,756 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 03:07:09,756 INFO: Inserindo candle: Candle(2025-07-10 06:07:00, DOJI, O:2768.21, H:2768.21, L:2768.21, C:2768.21)
2025-07-10 03:07:09,759 INFO: Candle inserido com ID: 686f588d1d9c27c6b2f10c37
2025-07-10 03:07:10,552 INFO: Atualizando candle com filtro: {'signal.signal_id': 'B1KLSI9A'}, update: {'$set': {'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 7, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:07:10,555 INFO: Número de candles atualizados: 1
2025-07-10 03:07:10,555 INFO: ✅ Mensagem enviada ao Telegram (ID: B1KLSI9A).
2025-07-10 03:08:09,734 INFO: 🔔 Novo candle detectado em 2025-07-10 06:08:00 UTC
2025-07-10 03:08:09,735 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:08:09,737 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:08:09,738 INFO: 🔔 Candle 1752127680 é menor ou igual ao entry_time 2025-07-10 03:08:00
2025-07-10 03:09:09,729 INFO: 🔔 Novo candle detectado em 2025-07-10 06:09:00 UTC
2025-07-10 03:09:09,729 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:09:09,732 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:09:09,732 INFO: 🔔 Candle 1752127740 é maior que o entry_time 2025-07-10 03:08:00
2025-07-10 03:09:09,732 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:09:09,733 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:09:09,735 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:09:09,735 INFO: 🔄 Candle 1752127620 já existe no banco, atualizando...
2025-07-10 03:09:09,735 INFO: 🔄 Candle 1752127620 não tem gale_items
2025-07-10 03:09:09,735 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:09:09,738 INFO: Número de candles atualizados: 1
2025-07-10 03:09:09,738 INFO: ✅ Candle 1752127620 atualizado com sucesso
2025-07-10 03:09:09,738 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:09:09,738 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:09:09,738 INFO: Funcao validate_signals_for_candle iniciada para o sinal B1KLSI9A
2025-07-10 03:09:09,739 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:09:09,740 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:09:09,741 INFO: Funcao validate_signal iniciada para o signal B1KLSI9A
2025-07-10 03:09:09,741 INFO: Funcao validate_signal finalizada para o signal B1KLSI9A
2025-07-10 03:09:09,741 INFO: Validando sinal B1KLSI9A sem gale items
2025-07-10 03:09:09,742 INFO: Sinal B1KLSI9A adicionado à fila para G1
2025-07-10 03:09:09,742 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127740, 'open_price': 2769.654, 'high': 2769.654, 'low': 2769.654, 'close_price': 2769.654, 'time': datetime.datetime(2025, 7, 10, 3, 9, 9, 742018), 'result': None}]}}
2025-07-10 03:09:09,744 INFO: Número de candles atualizados: 1
2025-07-10 03:09:09,744 INFO: Candle completo com gales atualizado para B1KLSI9A
2025-07-10 03:09:10,625 INFO: ✅ Resposta de resultado enviada para o sinal B1KLSI9A
2025-07-10 03:09:10,626 INFO: Sinal B1KLSI9A validado como LOSS e notificação enviada
2025-07-10 03:09:10,626 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal B1KLSI9A
2025-07-10 03:09:10,626 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:10:09,755 INFO: 🔔 Novo candle detectado em 2025-07-10 06:10:00 UTC
2025-07-10 03:10:09,755 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:10:09,759 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:10:09,759 INFO: 🔔 Candle 1752127800 é maior que o entry_time 2025-07-10 03:08:00
2025-07-10 03:10:09,759 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:10:09,760 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:10:09,762 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:10:09,763 INFO: 🔄 Candle 1752127740 já existe no banco, atualizando...
2025-07-10 03:10:09,763 INFO: 🔄 Atualizando último gale item do candle 1752127740
2025-07-10 03:10:09,763 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127740, 'open_price': 2769.654, 'high': 2769.858, 'low': 2769.173, 'close_price': 2769.738, 'time': datetime.datetime(2025, 7, 10, 3, 9, 9, 742000), 'result': None}]}}
2025-07-10 03:10:09,765 INFO: Número de candles atualizados: 1
2025-07-10 03:10:09,766 INFO: ✅ Candle 1752127620 atualizado com sucesso
2025-07-10 03:10:09,766 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:10:09,767 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:10:09,767 INFO: Funcao validate_signals_for_candle iniciada para o sinal B1KLSI9A
2025-07-10 03:10:09,767 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:10:09,769 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:10:09,769 INFO: Funcao validate_signal iniciada para o signal B1KLSI9A
2025-07-10 03:10:09,769 INFO: Validando sinal B1KLSI9A com gale items
2025-07-10 03:10:09,769 INFO: Gale G1 para o sinal B1KLSI9A resultou em LOSS
2025-07-10 03:10:09,769 INFO: Sinal B1KLSI9A adicionado à fila para G2
2025-07-10 03:10:09,770 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127740, 'open_price': 2769.654, 'high': 2769.858, 'low': 2769.173, 'close_price': 2769.738, 'time': datetime.datetime(2025, 7, 10, 3, 9, 9, 742000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127800, 'open_price': 2769.502, 'high': 2769.502, 'low': 2769.502, 'close_price': 2769.502, 'time': datetime.datetime(2025, 7, 10, 3, 10, 9, 769726), 'result': None}]}}
2025-07-10 03:10:09,771 INFO: Número de candles atualizados: 1
2025-07-10 03:10:09,772 INFO: Candle completo com gales atualizado para B1KLSI9A
2025-07-10 03:10:10,604 INFO: ✅ Resposta de resultado enviada para o sinal B1KLSI9A
2025-07-10 03:10:10,605 INFO: Sinal B1KLSI9A validado como LOSS e notificação enviada
2025-07-10 03:10:10,605 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal B1KLSI9A
2025-07-10 03:10:10,606 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:11:09,756 INFO: 🔔 Novo candle detectado em 2025-07-10 06:11:00 UTC
2025-07-10 03:11:09,757 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:11:09,760 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:11:09,760 INFO: 🔔 Candle 1752127860 é maior que o entry_time 2025-07-10 03:08:00
2025-07-10 03:11:09,760 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:11:09,760 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:11:09,763 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:11:09,764 INFO: 🔄 Candle 1752127800 já existe no banco, atualizando...
2025-07-10 03:11:09,764 INFO: 🔄 Atualizando último gale item do candle 1752127800
2025-07-10 03:11:09,765 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127740, 'open_price': 2769.654, 'high': 2769.858, 'low': 2769.173, 'close_price': 2769.738, 'time': datetime.datetime(2025, 7, 10, 3, 9, 9, 742000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127800, 'open_price': 2769.502, 'high': 2770.521, 'low': 2769.502, 'close_price': 2770.457, 'time': datetime.datetime(2025, 7, 10, 3, 10, 9, 769000), 'result': None}]}}
2025-07-10 03:11:09,767 INFO: Número de candles atualizados: 1
2025-07-10 03:11:09,767 INFO: ✅ Candle 1752127620 atualizado com sucesso
2025-07-10 03:11:09,767 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:11:09,767 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:11:09,768 INFO: Funcao validate_signals_for_candle iniciada para o sinal B1KLSI9A
2025-07-10 03:11:09,768 INFO: Buscando candle com signal_id: B1KLSI9A
2025-07-10 03:11:09,769 INFO: Candle encontrado para o signal_id: B1KLSI9A
2025-07-10 03:11:09,770 INFO: Funcao validate_signal iniciada para o signal B1KLSI9A
2025-07-10 03:11:09,770 INFO: Validando sinal B1KLSI9A com gale items
2025-07-10 03:11:09,771 INFO: Gale G2 para o sinal B1KLSI9A resultou em LOSS
2025-07-10 03:11:09,771 INFO: Atualizando candle com filtro: {'epoch': 1752127620}, update: {'$set': {'epoch': 1752127620, 'open': 2768.207, 'high': 2768.372, 'low': 2767.606, 'close': 2768.295, 'time': datetime.datetime(2025, 7, 10, 6, 7), 'signal': {'signal_id': 'B1KLSI9A', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 7), 'entry_time': datetime.datetime(2025, 7, 10, 3, 8), 'open_candle_timestamp': 1752127620, 'message_id': 10082, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752127740, 'open_price': 2769.654, 'high': 2769.858, 'low': 2769.173, 'close_price': 2769.738, 'time': datetime.datetime(2025, 7, 10, 3, 9, 9, 742000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752127800, 'open_price': 2769.502, 'high': 2770.521, 'low': 2769.502, 'close_price': 2770.457, 'time': datetime.datetime(2025, 7, 10, 3, 10, 9, 769000), 'result': 'LOSS'}]}}
2025-07-10 03:11:09,773 INFO: Número de candles atualizados: 1
2025-07-10 03:11:09,773 INFO: Candle completo com gales atualizado para B1KLSI9A
2025-07-10 03:11:10,587 INFO: ✅ Resposta de resultado enviada para o sinal B1KLSI9A
2025-07-10 03:11:10,588 INFO: Sinal B1KLSI9A validado como LOSS e notificação enviada
2025-07-10 03:11:10,588 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal B1KLSI9A
2025-07-10 03:11:10,588 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:12:09,751 INFO: 🔔 Novo candle detectado em 2025-07-10 06:12:00 UTC
2025-07-10 03:12:09,751 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:12:09,760 INFO: Buscando candle com filtro: {'epoch': 1752127920}
2025-07-10 03:12:09,762 INFO: Candle não encontrado
2025-07-10 03:12:09,777 INFO: Tendência HMA: FALL (HMA21=2769.23, HMA100=2769.86)
2025-07-10 03:12:09,778 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:12:09,778 INFO: 📈 Análise: EMA9=2769.29, EMA21=2769.54, trend_ema=FALL, trend_final=FALL, RSI=31.63, MACD=-0.22/-0.15, ATR=0.83, body=0.00, confidence=80
2025-07-10 03:12:09,778 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 03:12:09,779 INFO: Inserindo candle: Candle(2025-07-10 06:12:00, DOJI, O:2768.80, H:2768.80, L:2768.80, C:2768.80)
2025-07-10 03:12:09,781 INFO: Candle inserido com ID: 686f59b91d9c27c6b2f10c38
2025-07-10 03:12:10,591 INFO: Atualizando candle com filtro: {'signal.signal_id': 'UEUDSJ9H'}, update: {'$set': {'signal': {'signal_id': 'UEUDSJ9H', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 12, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 13), 'open_candle_timestamp': 1752127920, 'message_id': 10086, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:12:10,594 INFO: Número de candles atualizados: 1
2025-07-10 03:12:10,594 INFO: ✅ Mensagem enviada ao Telegram (ID: UEUDSJ9H).
2025-07-10 03:13:09,714 INFO: 🔔 Novo candle detectado em 2025-07-10 06:13:00 UTC
2025-07-10 03:13:09,715 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:13:09,717 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:13:09,718 INFO: 🔔 Candle 1752127980 é menor ou igual ao entry_time 2025-07-10 03:13:00
2025-07-10 03:14:09,748 INFO: 🔔 Novo candle detectado em 2025-07-10 06:14:00 UTC
2025-07-10 03:14:09,748 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:14:09,751 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:14:09,751 INFO: 🔔 Candle 1752128040 é maior que o entry_time 2025-07-10 03:13:00
2025-07-10 03:14:09,751 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:14:09,751 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:14:09,755 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:14:09,755 INFO: 🔄 Candle 1752127920 já existe no banco, atualizando...
2025-07-10 03:14:09,756 INFO: 🔄 Candle 1752127920 não tem gale_items
2025-07-10 03:14:09,756 INFO: Atualizando candle com filtro: {'epoch': 1752127920}, update: {'$set': {'epoch': 1752127920, 'open': 2768.8, 'high': 2770.262, 'low': 2768.8, 'close': 2769.09, 'time': datetime.datetime(2025, 7, 10, 6, 12), 'signal': {'signal_id': 'UEUDSJ9H', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 12), 'entry_time': datetime.datetime(2025, 7, 10, 3, 13), 'open_candle_timestamp': 1752127920, 'message_id': 10086, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:14:09,758 INFO: Número de candles atualizados: 1
2025-07-10 03:14:09,758 INFO: ✅ Candle 1752127920 atualizado com sucesso
2025-07-10 03:14:09,758 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:14:09,759 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:14:09,759 INFO: Funcao validate_signals_for_candle iniciada para o sinal UEUDSJ9H
2025-07-10 03:14:09,759 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:14:09,761 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:14:09,761 INFO: Funcao validate_signal iniciada para o signal UEUDSJ9H
2025-07-10 03:14:09,762 INFO: Funcao validate_signal finalizada para o signal UEUDSJ9H
2025-07-10 03:14:09,762 INFO: Validando sinal UEUDSJ9H sem gale items
2025-07-10 03:14:09,762 INFO: Sinal UEUDSJ9H adicionado à fila para G1
2025-07-10 03:14:09,762 INFO: Atualizando candle com filtro: {'epoch': 1752127920}, update: {'$set': {'epoch': 1752127920, 'open': 2768.8, 'high': 2770.262, 'low': 2768.8, 'close': 2769.09, 'time': datetime.datetime(2025, 7, 10, 6, 12), 'signal': {'signal_id': 'UEUDSJ9H', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 12), 'entry_time': datetime.datetime(2025, 7, 10, 3, 13), 'open_candle_timestamp': 1752127920, 'message_id': 10086, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128040, 'open_price': 2768.044, 'high': 2768.044, 'low': 2768.044, 'close_price': 2768.044, 'time': datetime.datetime(2025, 7, 10, 3, 14, 9, 762598), 'result': None}]}}
2025-07-10 03:14:09,764 INFO: Número de candles atualizados: 1
2025-07-10 03:14:09,764 INFO: Candle completo com gales atualizado para UEUDSJ9H
2025-07-10 03:14:10,615 INFO: ✅ Resposta de resultado enviada para o sinal UEUDSJ9H
2025-07-10 03:14:10,616 INFO: Sinal UEUDSJ9H validado como LOSS e notificação enviada
2025-07-10 03:14:10,616 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal UEUDSJ9H
2025-07-10 03:14:10,616 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:15:09,761 INFO: 🔔 Novo candle detectado em 2025-07-10 06:15:00 UTC
2025-07-10 03:15:09,761 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:15:09,764 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:15:09,764 INFO: 🔔 Candle 1752128100 é maior que o entry_time 2025-07-10 03:13:00
2025-07-10 03:15:09,765 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:15:09,765 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:15:09,767 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:15:09,767 INFO: 🔄 Candle 1752128040 já existe no banco, atualizando...
2025-07-10 03:15:09,767 INFO: 🔄 Atualizando último gale item do candle 1752128040
2025-07-10 03:15:09,768 INFO: Atualizando candle com filtro: {'epoch': 1752127920}, update: {'$set': {'epoch': 1752127920, 'open': 2768.8, 'high': 2770.262, 'low': 2768.8, 'close': 2769.09, 'time': datetime.datetime(2025, 7, 10, 6, 12), 'signal': {'signal_id': 'UEUDSJ9H', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 12), 'entry_time': datetime.datetime(2025, 7, 10, 3, 13), 'open_candle_timestamp': 1752127920, 'message_id': 10086, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128040, 'open_price': 2768.044, 'high': 2769.017, 'low': 2767.849, 'close_price': 2767.849, 'time': datetime.datetime(2025, 7, 10, 3, 14, 9, 762000), 'result': None}]}}
2025-07-10 03:15:09,770 INFO: Número de candles atualizados: 1
2025-07-10 03:15:09,770 INFO: ✅ Candle 1752127920 atualizado com sucesso
2025-07-10 03:15:09,771 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:15:09,771 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:15:09,771 INFO: Funcao validate_signals_for_candle iniciada para o sinal UEUDSJ9H
2025-07-10 03:15:09,771 INFO: Buscando candle com signal_id: UEUDSJ9H
2025-07-10 03:15:09,773 INFO: Candle encontrado para o signal_id: UEUDSJ9H
2025-07-10 03:15:09,773 INFO: Funcao validate_signal iniciada para o signal UEUDSJ9H
2025-07-10 03:15:09,773 INFO: Validando sinal UEUDSJ9H com gale items
2025-07-10 03:15:09,773 INFO: Atualizando candle com filtro: {'epoch': 1752127920}, update: {'$set': {'epoch': 1752127920, 'open': 2768.8, 'high': 2770.262, 'low': 2768.8, 'close': 2769.09, 'time': datetime.datetime(2025, 7, 10, 6, 12), 'signal': {'signal_id': 'UEUDSJ9H', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 12), 'entry_time': datetime.datetime(2025, 7, 10, 3, 13), 'open_candle_timestamp': 1752127920, 'message_id': 10086, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128040, 'open_price': 2768.044, 'high': 2769.017, 'low': 2767.849, 'close_price': 2767.849, 'time': datetime.datetime(2025, 7, 10, 3, 14, 9, 762000), 'result': 'WIN'}]}}
2025-07-10 03:15:09,775 INFO: Número de candles atualizados: 1
2025-07-10 03:15:09,776 INFO: Candle completo com gales atualizado para UEUDSJ9H
2025-07-10 03:15:10,593 INFO: ✅ Resposta de resultado enviada para o sinal UEUDSJ9H
2025-07-10 03:15:10,594 INFO: Sinal UEUDSJ9H validado como LOSS e notificação enviada
2025-07-10 03:15:10,594 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal UEUDSJ9H
2025-07-10 03:15:10,594 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:16:09,716 INFO: 🔔 Novo candle detectado em 2025-07-10 06:16:00 UTC
2025-07-10 03:16:09,716 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:16:09,725 INFO: Buscando candle com filtro: {'epoch': 1752128160}
2025-07-10 03:16:09,728 INFO: Candle não encontrado
2025-07-10 03:16:09,742 INFO: Tendência HMA: FALL (HMA21=2768.62, HMA100=2768.51)
2025-07-10 03:16:09,743 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:16:09,743 INFO: 📈 Análise: EMA9=2768.68, EMA21=2768.62, trend_ema=RISE, trend_final=FALL, RSI=57.77, MACD=0.06/0.05, ATR=0.95, body=0.00, confidence=60
2025-07-10 03:16:09,743 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 03:16:09,744 INFO: Inserindo candle: Candle(2025-07-10 06:16:00, DOJI, O:2768.93, H:2768.93, L:2768.93, C:2768.93)
2025-07-10 03:16:09,747 INFO: Candle inserido com ID: 686f5aa91d9c27c6b2f10c39
2025-07-10 03:16:10,550 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HOPNGXX8'}, update: {'$set': {'signal': {'signal_id': 'HOPNGXX8', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 16, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 17), 'open_candle_timestamp': 1752128160, 'message_id': 10089, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:16:10,553 INFO: Número de candles atualizados: 1
2025-07-10 03:16:10,554 INFO: ✅ Mensagem enviada ao Telegram (ID: HOPNGXX8).
2025-07-10 03:17:09,811 INFO: 🔔 Novo candle detectado em 2025-07-10 06:17:00 UTC
2025-07-10 03:17:09,811 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:17:09,814 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:17:09,814 INFO: 🔔 Candle 1752128220 é menor ou igual ao entry_time 2025-07-10 03:17:00
2025-07-10 03:18:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 06:18:00 UTC
2025-07-10 03:18:09,764 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:18:09,766 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:18:09,767 INFO: 🔔 Candle 1752128280 é maior que o entry_time 2025-07-10 03:17:00
2025-07-10 03:18:09,767 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:18:09,767 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:18:09,770 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:18:09,770 INFO: 🔄 Candle 1752128160 já existe no banco, atualizando...
2025-07-10 03:18:09,771 INFO: 🔄 Candle 1752128160 não tem gale_items
2025-07-10 03:18:09,771 INFO: Atualizando candle com filtro: {'epoch': 1752128160}, update: {'$set': {'epoch': 1752128160, 'open': 2768.931, 'high': 2769.478, 'low': 2768.592, 'close': 2769.456, 'time': datetime.datetime(2025, 7, 10, 6, 16), 'signal': {'signal_id': 'HOPNGXX8', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 16), 'entry_time': datetime.datetime(2025, 7, 10, 3, 17), 'open_candle_timestamp': 1752128160, 'message_id': 10089, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:18:09,773 INFO: Número de candles atualizados: 1
2025-07-10 03:18:09,773 INFO: ✅ Candle 1752128160 atualizado com sucesso
2025-07-10 03:18:09,773 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:18:09,773 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:18:09,773 INFO: Funcao validate_signals_for_candle iniciada para o sinal HOPNGXX8
2025-07-10 03:18:09,774 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:18:09,775 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:18:09,776 INFO: Funcao validate_signal iniciada para o signal HOPNGXX8
2025-07-10 03:18:09,776 INFO: Funcao validate_signal finalizada para o signal HOPNGXX8
2025-07-10 03:18:09,776 INFO: Validando sinal HOPNGXX8 sem gale items
2025-07-10 03:18:09,776 INFO: Sinal HOPNGXX8 adicionado à fila para G1
2025-07-10 03:18:09,776 INFO: Atualizando candle com filtro: {'epoch': 1752128160}, update: {'$set': {'epoch': 1752128160, 'open': 2768.931, 'high': 2769.478, 'low': 2768.592, 'close': 2769.456, 'time': datetime.datetime(2025, 7, 10, 6, 16), 'signal': {'signal_id': 'HOPNGXX8', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 16), 'entry_time': datetime.datetime(2025, 7, 10, 3, 17), 'open_candle_timestamp': 1752128160, 'message_id': 10089, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128280, 'open_price': 2770.111, 'high': 2770.111, 'low': 2770.111, 'close_price': 2770.111, 'time': datetime.datetime(2025, 7, 10, 3, 18, 9, 776598), 'result': None}]}}
2025-07-10 03:18:09,778 INFO: Número de candles atualizados: 1
2025-07-10 03:18:09,779 INFO: Candle completo com gales atualizado para HOPNGXX8
2025-07-10 03:18:10,620 INFO: ✅ Resposta de resultado enviada para o sinal HOPNGXX8
2025-07-10 03:18:10,621 INFO: Sinal HOPNGXX8 validado como LOSS e notificação enviada
2025-07-10 03:18:10,621 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HOPNGXX8
2025-07-10 03:18:10,621 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:19:09,747 INFO: 🔔 Novo candle detectado em 2025-07-10 06:19:00 UTC
2025-07-10 03:19:09,748 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:19:09,750 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:19:09,751 INFO: 🔔 Candle 1752128340 é maior que o entry_time 2025-07-10 03:17:00
2025-07-10 03:19:09,751 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:19:09,751 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:19:09,753 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:19:09,754 INFO: 🔄 Candle 1752128280 já existe no banco, atualizando...
2025-07-10 03:19:09,754 INFO: 🔄 Atualizando último gale item do candle 1752128280
2025-07-10 03:19:09,754 INFO: Atualizando candle com filtro: {'epoch': 1752128160}, update: {'$set': {'epoch': 1752128160, 'open': 2768.931, 'high': 2769.478, 'low': 2768.592, 'close': 2769.456, 'time': datetime.datetime(2025, 7, 10, 6, 16), 'signal': {'signal_id': 'HOPNGXX8', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 16), 'entry_time': datetime.datetime(2025, 7, 10, 3, 17), 'open_candle_timestamp': 1752128160, 'message_id': 10089, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128280, 'open_price': 2770.111, 'high': 2770.368, 'low': 2768.818, 'close_price': 2768.818, 'time': datetime.datetime(2025, 7, 10, 3, 18, 9, 776000), 'result': None}]}}
2025-07-10 03:19:09,757 INFO: Número de candles atualizados: 1
2025-07-10 03:19:09,757 INFO: ✅ Candle 1752128160 atualizado com sucesso
2025-07-10 03:19:09,758 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:19:09,758 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:19:09,758 INFO: Funcao validate_signals_for_candle iniciada para o sinal HOPNGXX8
2025-07-10 03:19:09,758 INFO: Buscando candle com signal_id: HOPNGXX8
2025-07-10 03:19:09,760 INFO: Candle encontrado para o signal_id: HOPNGXX8
2025-07-10 03:19:09,761 INFO: Funcao validate_signal iniciada para o signal HOPNGXX8
2025-07-10 03:19:09,761 INFO: Validando sinal HOPNGXX8 com gale items
2025-07-10 03:19:09,761 INFO: Atualizando candle com filtro: {'epoch': 1752128160}, update: {'$set': {'epoch': 1752128160, 'open': 2768.931, 'high': 2769.478, 'low': 2768.592, 'close': 2769.456, 'time': datetime.datetime(2025, 7, 10, 6, 16), 'signal': {'signal_id': 'HOPNGXX8', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 16), 'entry_time': datetime.datetime(2025, 7, 10, 3, 17), 'open_candle_timestamp': 1752128160, 'message_id': 10089, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128280, 'open_price': 2770.111, 'high': 2770.368, 'low': 2768.818, 'close_price': 2768.818, 'time': datetime.datetime(2025, 7, 10, 3, 18, 9, 776000), 'result': 'WIN'}]}}
2025-07-10 03:19:09,763 INFO: Número de candles atualizados: 1
2025-07-10 03:19:09,763 INFO: Candle completo com gales atualizado para HOPNGXX8
2025-07-10 03:19:10,593 INFO: ✅ Resposta de resultado enviada para o sinal HOPNGXX8
2025-07-10 03:19:10,594 INFO: Sinal HOPNGXX8 validado como LOSS e notificação enviada
2025-07-10 03:19:10,594 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HOPNGXX8
2025-07-10 03:19:10,595 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:20:09,740 INFO: 🔔 Novo candle detectado em 2025-07-10 06:20:00 UTC
2025-07-10 03:20:09,741 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:20:09,750 INFO: Buscando candle com filtro: {'epoch': 1752128400}
2025-07-10 03:20:09,753 INFO: Candle não encontrado
2025-07-10 03:20:09,768 INFO: Tendência HMA: FALL (HMA21=2768.23, HMA100=2769.03)
2025-07-10 03:20:09,768 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:20:09,768 INFO: 📈 Análise: EMA9=2768.59, EMA21=2768.95, trend_ema=FALL, trend_final=FALL, RSI=30.87, MACD=-0.31/-0.19, ATR=1.07, body=0.00, confidence=80
2025-07-10 03:20:09,769 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 03:20:09,769 INFO: Inserindo candle: Candle(2025-07-10 06:20:00, DOJI, O:2768.28, H:2768.28, L:2768.28, C:2768.28)
2025-07-10 03:20:09,771 INFO: Candle inserido com ID: 686f5b991d9c27c6b2f10c3a
2025-07-10 03:20:10,598 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WQ65CCO3'}, update: {'$set': {'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 20, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:20:10,601 INFO: Número de candles atualizados: 1
2025-07-10 03:20:10,601 INFO: ✅ Mensagem enviada ao Telegram (ID: WQ65CCO3).
2025-07-10 03:21:09,835 INFO: 🔔 Novo candle detectado em 2025-07-10 06:21:00 UTC
2025-07-10 03:21:09,835 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:21:09,838 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:21:09,838 INFO: 🔔 Candle 1752128460 é menor ou igual ao entry_time 2025-07-10 03:21:00
2025-07-10 03:22:09,758 INFO: 🔔 Novo candle detectado em 2025-07-10 06:22:00 UTC
2025-07-10 03:22:09,758 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:22:09,761 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:22:09,762 INFO: 🔔 Candle 1752128520 é maior que o entry_time 2025-07-10 03:21:00
2025-07-10 03:22:09,762 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:22:09,762 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:22:09,764 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:22:09,765 INFO: 🔄 Candle 1752128400 já existe no banco, atualizando...
2025-07-10 03:22:09,765 INFO: 🔄 Candle 1752128400 não tem gale_items
2025-07-10 03:22:09,765 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:22:09,768 INFO: Número de candles atualizados: 1
2025-07-10 03:22:09,768 INFO: ✅ Candle 1752128400 atualizado com sucesso
2025-07-10 03:22:09,768 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:22:09,768 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:22:09,768 INFO: Funcao validate_signals_for_candle iniciada para o sinal WQ65CCO3
2025-07-10 03:22:09,769 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:22:09,770 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:22:09,770 INFO: Funcao validate_signal iniciada para o signal WQ65CCO3
2025-07-10 03:22:09,771 INFO: Funcao validate_signal finalizada para o signal WQ65CCO3
2025-07-10 03:22:09,771 INFO: Validando sinal WQ65CCO3 sem gale items
2025-07-10 03:22:09,771 INFO: Sinal WQ65CCO3 adicionado à fila para G1
2025-07-10 03:22:09,771 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128520, 'open_price': 2769.83, 'high': 2769.83, 'low': 2769.83, 'close_price': 2769.83, 'time': datetime.datetime(2025, 7, 10, 3, 22, 9, 771514), 'result': None}]}}
2025-07-10 03:22:09,773 INFO: Número de candles atualizados: 1
2025-07-10 03:22:09,774 INFO: Candle completo com gales atualizado para WQ65CCO3
2025-07-10 03:22:10,593 INFO: ✅ Resposta de resultado enviada para o sinal WQ65CCO3
2025-07-10 03:22:10,593 INFO: Sinal WQ65CCO3 validado como LOSS e notificação enviada
2025-07-10 03:22:10,593 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WQ65CCO3
2025-07-10 03:22:10,594 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:23:09,776 INFO: 🔔 Novo candle detectado em 2025-07-10 06:23:00 UTC
2025-07-10 03:23:09,776 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:23:09,779 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:23:09,779 INFO: 🔔 Candle 1752128580 é maior que o entry_time 2025-07-10 03:21:00
2025-07-10 03:23:09,779 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:23:09,779 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:23:09,782 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:23:09,783 INFO: 🔄 Candle 1752128520 já existe no banco, atualizando...
2025-07-10 03:23:09,783 INFO: 🔄 Atualizando último gale item do candle 1752128520
2025-07-10 03:23:09,783 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128520, 'open_price': 2769.83, 'high': 2770.302, 'low': 2769.278, 'close_price': 2770.104, 'time': datetime.datetime(2025, 7, 10, 3, 22, 9, 771000), 'result': None}]}}
2025-07-10 03:23:09,786 INFO: Número de candles atualizados: 1
2025-07-10 03:23:09,786 INFO: ✅ Candle 1752128400 atualizado com sucesso
2025-07-10 03:23:09,786 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:23:09,786 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:23:09,786 INFO: Funcao validate_signals_for_candle iniciada para o sinal WQ65CCO3
2025-07-10 03:23:09,786 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:23:09,788 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:23:09,788 INFO: Funcao validate_signal iniciada para o signal WQ65CCO3
2025-07-10 03:23:09,788 INFO: Validando sinal WQ65CCO3 com gale items
2025-07-10 03:23:09,789 INFO: Gale G1 para o sinal WQ65CCO3 resultou em LOSS
2025-07-10 03:23:09,789 INFO: Sinal WQ65CCO3 adicionado à fila para G2
2025-07-10 03:23:09,789 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128520, 'open_price': 2769.83, 'high': 2770.302, 'low': 2769.278, 'close_price': 2770.104, 'time': datetime.datetime(2025, 7, 10, 3, 22, 9, 771000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128580, 'open_price': 2770.404, 'high': 2770.404, 'low': 2770.404, 'close_price': 2770.404, 'time': datetime.datetime(2025, 7, 10, 3, 23, 9, 789487), 'result': None}]}}
2025-07-10 03:23:09,791 INFO: Número de candles atualizados: 1
2025-07-10 03:23:09,792 INFO: Candle completo com gales atualizado para WQ65CCO3
2025-07-10 03:23:10,605 INFO: ✅ Resposta de resultado enviada para o sinal WQ65CCO3
2025-07-10 03:23:10,605 INFO: Sinal WQ65CCO3 validado como LOSS e notificação enviada
2025-07-10 03:23:10,606 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WQ65CCO3
2025-07-10 03:23:10,606 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:24:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 06:24:00 UTC
2025-07-10 03:24:09,763 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:24:09,766 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:24:09,766 INFO: 🔔 Candle 1752128640 é maior que o entry_time 2025-07-10 03:21:00
2025-07-10 03:24:09,766 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:24:09,766 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:24:09,769 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:24:09,769 INFO: 🔄 Candle 1752128580 já existe no banco, atualizando...
2025-07-10 03:24:09,769 INFO: 🔄 Atualizando último gale item do candle 1752128580
2025-07-10 03:24:09,769 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128520, 'open_price': 2769.83, 'high': 2770.302, 'low': 2769.278, 'close_price': 2770.104, 'time': datetime.datetime(2025, 7, 10, 3, 22, 9, 771000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128580, 'open_price': 2770.404, 'high': 2770.781, 'low': 2769.812, 'close_price': 2769.812, 'time': datetime.datetime(2025, 7, 10, 3, 23, 9, 789000), 'result': None}]}}
2025-07-10 03:24:09,771 INFO: Número de candles atualizados: 1
2025-07-10 03:24:09,772 INFO: ✅ Candle 1752128400 atualizado com sucesso
2025-07-10 03:24:09,772 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:24:09,772 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:24:09,772 INFO: Funcao validate_signals_for_candle iniciada para o sinal WQ65CCO3
2025-07-10 03:24:09,772 INFO: Buscando candle com signal_id: WQ65CCO3
2025-07-10 03:24:09,774 INFO: Candle encontrado para o signal_id: WQ65CCO3
2025-07-10 03:24:09,775 INFO: Funcao validate_signal iniciada para o signal WQ65CCO3
2025-07-10 03:24:09,775 INFO: Validando sinal WQ65CCO3 com gale items
2025-07-10 03:24:09,775 INFO: Atualizando candle com filtro: {'epoch': 1752128400}, update: {'$set': {'epoch': 1752128400, 'open': 2768.282, 'high': 2769.412, 'low': 2767.707, 'close': 2769.296, 'time': datetime.datetime(2025, 7, 10, 6, 20), 'signal': {'signal_id': 'WQ65CCO3', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 20), 'entry_time': datetime.datetime(2025, 7, 10, 3, 21), 'open_candle_timestamp': 1752128400, 'message_id': 10093, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128520, 'open_price': 2769.83, 'high': 2770.302, 'low': 2769.278, 'close_price': 2770.104, 'time': datetime.datetime(2025, 7, 10, 3, 22, 9, 771000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128580, 'open_price': 2770.404, 'high': 2770.781, 'low': 2769.812, 'close_price': 2769.812, 'time': datetime.datetime(2025, 7, 10, 3, 23, 9, 789000), 'result': 'WIN'}]}}
2025-07-10 03:24:09,777 INFO: Número de candles atualizados: 1
2025-07-10 03:24:09,777 INFO: Candle completo com gales atualizado para WQ65CCO3
2025-07-10 03:24:10,587 INFO: ✅ Resposta de resultado enviada para o sinal WQ65CCO3
2025-07-10 03:24:10,587 INFO: Sinal WQ65CCO3 validado como LOSS e notificação enviada
2025-07-10 03:24:10,587 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WQ65CCO3
2025-07-10 03:24:10,587 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:25:09,732 INFO: 🔔 Novo candle detectado em 2025-07-10 06:25:00 UTC
2025-07-10 03:25:09,732 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:25:09,741 INFO: Buscando candle com filtro: {'epoch': 1752128700}
2025-07-10 03:25:09,744 INFO: Candle não encontrado
2025-07-10 03:25:09,758 INFO: Tendência HMA: FALL (HMA21=2768.51, HMA100=2768.36)
2025-07-10 03:25:09,759 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:25:09,759 INFO: 📈 Análise: EMA9=2768.42, EMA21=2768.52, trend_ema=FALL, trend_final=FALL, RSI=44.19, MACD=-0.18/-0.27, ATR=1.24, body=0.00, confidence=20
2025-07-10 03:25:09,759 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 03:25:09,759 INFO: Inserindo candle: Candle(2025-07-10 06:25:00, DOJI, O:2768.45, H:2768.45, L:2768.45, C:2768.45)
2025-07-10 03:25:09,762 INFO: Candle inserido com ID: 686f5cc51d9c27c6b2f10c3b
2025-07-10 03:25:10,620 INFO: Atualizando candle com filtro: {'signal.signal_id': 'ATF9TPTB'}, update: {'$set': {'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 25, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:25:10,624 INFO: Número de candles atualizados: 1
2025-07-10 03:25:10,624 INFO: ✅ Mensagem enviada ao Telegram (ID: ATF9TPTB).
2025-07-10 03:26:09,757 INFO: 🔔 Novo candle detectado em 2025-07-10 06:26:00 UTC
2025-07-10 03:26:09,757 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:26:09,760 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:26:09,760 INFO: 🔔 Candle 1752128760 é menor ou igual ao entry_time 2025-07-10 03:26:00
2025-07-10 03:27:09,777 INFO: 🔔 Novo candle detectado em 2025-07-10 06:27:00 UTC
2025-07-10 03:27:09,778 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:27:09,781 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:27:09,781 INFO: 🔔 Candle 1752128820 é maior que o entry_time 2025-07-10 03:26:00
2025-07-10 03:27:09,781 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:27:09,782 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:27:09,784 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:27:09,784 INFO: 🔄 Candle 1752128700 já existe no banco, atualizando...
2025-07-10 03:27:09,785 INFO: 🔄 Candle 1752128700 não tem gale_items
2025-07-10 03:27:09,785 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:27:09,787 INFO: Número de candles atualizados: 1
2025-07-10 03:27:09,787 INFO: ✅ Candle 1752128700 atualizado com sucesso
2025-07-10 03:27:09,787 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:27:09,788 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:27:09,788 INFO: Funcao validate_signals_for_candle iniciada para o sinal ATF9TPTB
2025-07-10 03:27:09,788 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:27:09,790 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:27:09,790 INFO: Funcao validate_signal iniciada para o signal ATF9TPTB
2025-07-10 03:27:09,790 INFO: Funcao validate_signal finalizada para o signal ATF9TPTB
2025-07-10 03:27:09,790 INFO: Validando sinal ATF9TPTB sem gale items
2025-07-10 03:27:09,790 INFO: Sinal ATF9TPTB adicionado à fila para G1
2025-07-10 03:27:09,791 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128820, 'open_price': 2769.312, 'high': 2769.312, 'low': 2769.312, 'close_price': 2769.312, 'time': datetime.datetime(2025, 7, 10, 3, 27, 9, 790988), 'result': None}]}}
2025-07-10 03:27:09,793 INFO: Número de candles atualizados: 1
2025-07-10 03:27:09,793 INFO: Candle completo com gales atualizado para ATF9TPTB
2025-07-10 03:27:10,614 INFO: ✅ Resposta de resultado enviada para o sinal ATF9TPTB
2025-07-10 03:27:10,614 INFO: Sinal ATF9TPTB validado como LOSS e notificação enviada
2025-07-10 03:27:10,614 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ATF9TPTB
2025-07-10 03:27:10,615 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:28:09,789 INFO: 🔔 Novo candle detectado em 2025-07-10 06:28:00 UTC
2025-07-10 03:28:09,789 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:28:09,792 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:28:09,792 INFO: 🔔 Candle 1752128880 é maior que o entry_time 2025-07-10 03:26:00
2025-07-10 03:28:09,793 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:28:09,793 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:28:09,795 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:28:09,795 INFO: 🔄 Candle 1752128820 já existe no banco, atualizando...
2025-07-10 03:28:09,795 INFO: 🔄 Atualizando último gale item do candle 1752128820
2025-07-10 03:28:09,796 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128820, 'open_price': 2769.312, 'high': 2770.258, 'low': 2768.431, 'close_price': 2769.744, 'time': datetime.datetime(2025, 7, 10, 3, 27, 9, 790000), 'result': None}]}}
2025-07-10 03:28:09,798 INFO: Número de candles atualizados: 1
2025-07-10 03:28:09,798 INFO: ✅ Candle 1752128700 atualizado com sucesso
2025-07-10 03:28:09,798 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:28:09,798 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:28:09,799 INFO: Funcao validate_signals_for_candle iniciada para o sinal ATF9TPTB
2025-07-10 03:28:09,799 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:28:09,801 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:28:09,801 INFO: Funcao validate_signal iniciada para o signal ATF9TPTB
2025-07-10 03:28:09,801 INFO: Validando sinal ATF9TPTB com gale items
2025-07-10 03:28:09,801 INFO: Gale G1 para o sinal ATF9TPTB resultou em LOSS
2025-07-10 03:28:09,801 INFO: Sinal ATF9TPTB adicionado à fila para G2
2025-07-10 03:28:09,802 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128820, 'open_price': 2769.312, 'high': 2770.258, 'low': 2768.431, 'close_price': 2769.744, 'time': datetime.datetime(2025, 7, 10, 3, 27, 9, 790000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128880, 'open_price': 2769.757, 'high': 2769.757, 'low': 2769.757, 'close_price': 2769.757, 'time': datetime.datetime(2025, 7, 10, 3, 28, 9, 801704), 'result': None}]}}
2025-07-10 03:28:09,803 INFO: Número de candles atualizados: 1
2025-07-10 03:28:09,804 INFO: Candle completo com gales atualizado para ATF9TPTB
2025-07-10 03:28:10,610 INFO: ✅ Resposta de resultado enviada para o sinal ATF9TPTB
2025-07-10 03:28:10,610 INFO: Sinal ATF9TPTB validado como LOSS e notificação enviada
2025-07-10 03:28:10,611 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ATF9TPTB
2025-07-10 03:28:10,611 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:29:09,766 INFO: 🔔 Novo candle detectado em 2025-07-10 06:29:00 UTC
2025-07-10 03:29:09,766 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:29:09,769 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:29:09,769 INFO: 🔔 Candle 1752128940 é maior que o entry_time 2025-07-10 03:26:00
2025-07-10 03:29:09,769 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:29:09,770 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:29:09,772 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:29:09,772 INFO: 🔄 Candle 1752128880 já existe no banco, atualizando...
2025-07-10 03:29:09,773 INFO: 🔄 Atualizando último gale item do candle 1752128880
2025-07-10 03:29:09,773 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128820, 'open_price': 2769.312, 'high': 2770.258, 'low': 2768.431, 'close_price': 2769.744, 'time': datetime.datetime(2025, 7, 10, 3, 27, 9, 790000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128880, 'open_price': 2769.757, 'high': 2769.784, 'low': 2768.664, 'close_price': 2768.845, 'time': datetime.datetime(2025, 7, 10, 3, 28, 9, 801000), 'result': None}]}}
2025-07-10 03:29:09,775 INFO: Número de candles atualizados: 1
2025-07-10 03:29:09,776 INFO: ✅ Candle 1752128700 atualizado com sucesso
2025-07-10 03:29:09,776 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:29:09,776 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:29:09,777 INFO: Funcao validate_signals_for_candle iniciada para o sinal ATF9TPTB
2025-07-10 03:29:09,777 INFO: Buscando candle com signal_id: ATF9TPTB
2025-07-10 03:29:09,779 INFO: Candle encontrado para o signal_id: ATF9TPTB
2025-07-10 03:29:09,779 INFO: Funcao validate_signal iniciada para o signal ATF9TPTB
2025-07-10 03:29:09,779 INFO: Validando sinal ATF9TPTB com gale items
2025-07-10 03:29:09,779 INFO: Atualizando candle com filtro: {'epoch': 1752128700}, update: {'$set': {'epoch': 1752128700, 'open': 2768.454, 'high': 2769.395, 'low': 2768.262, 'close': 2768.609, 'time': datetime.datetime(2025, 7, 10, 6, 25), 'signal': {'signal_id': 'ATF9TPTB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 25), 'entry_time': datetime.datetime(2025, 7, 10, 3, 26), 'open_candle_timestamp': 1752128700, 'message_id': 10098, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752128820, 'open_price': 2769.312, 'high': 2770.258, 'low': 2768.431, 'close_price': 2769.744, 'time': datetime.datetime(2025, 7, 10, 3, 27, 9, 790000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752128880, 'open_price': 2769.757, 'high': 2769.784, 'low': 2768.664, 'close_price': 2768.845, 'time': datetime.datetime(2025, 7, 10, 3, 28, 9, 801000), 'result': 'WIN'}]}}
2025-07-10 03:29:09,781 INFO: Número de candles atualizados: 1
2025-07-10 03:29:09,781 INFO: Candle completo com gales atualizado para ATF9TPTB
2025-07-10 03:29:10,613 INFO: ✅ Resposta de resultado enviada para o sinal ATF9TPTB
2025-07-10 03:29:10,613 INFO: Sinal ATF9TPTB validado como LOSS e notificação enviada
2025-07-10 03:29:10,614 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ATF9TPTB
2025-07-10 03:29:10,614 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:30:09,765 INFO: 🔔 Novo candle detectado em 2025-07-10 06:30:00 UTC
2025-07-10 03:30:09,765 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:30:09,773 INFO: Buscando candle com filtro: {'epoch': 1752129000}
2025-07-10 03:30:09,776 INFO: Candle não encontrado
2025-07-10 03:30:09,791 INFO: Tendência HMA: FALL (HMA21=2768.05, HMA100=2767.69)
2025-07-10 03:30:09,791 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:30:09,791 INFO: 📈 Análise: EMA9=2768.02, EMA21=2768.03, trend_ema=FALL, trend_final=FALL, RSI=55.95, MACD=-0.08/-0.16, ATR=0.92, body=0.00, confidence=20
2025-07-10 03:30:09,791 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 03:30:09,792 INFO: Inserindo candle: Candle(2025-07-10 06:30:00, DOJI, O:2768.31, H:2768.31, L:2768.31, C:2768.31)
2025-07-10 03:30:09,795 INFO: Candle inserido com ID: 686f5df11d9c27c6b2f10c3c
2025-07-10 03:30:10,603 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WZAWT8F0'}, update: {'$set': {'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 30, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:30:10,606 INFO: Número de candles atualizados: 1
2025-07-10 03:30:10,606 INFO: ✅ Mensagem enviada ao Telegram (ID: WZAWT8F0).
2025-07-10 03:31:09,764 INFO: 🔔 Novo candle detectado em 2025-07-10 06:31:00 UTC
2025-07-10 03:31:09,764 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:31:09,767 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:31:09,767 INFO: 🔔 Candle 1752129060 é menor ou igual ao entry_time 2025-07-10 03:31:00
2025-07-10 03:32:09,750 INFO: 🔔 Novo candle detectado em 2025-07-10 06:32:00 UTC
2025-07-10 03:32:09,750 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:32:09,753 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:32:09,753 INFO: 🔔 Candle 1752129120 é maior que o entry_time 2025-07-10 03:31:00
2025-07-10 03:32:09,753 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:32:09,754 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:32:09,756 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:32:09,756 INFO: 🔄 Candle 1752129000 já existe no banco, atualizando...
2025-07-10 03:32:09,756 INFO: 🔄 Candle 1752129000 não tem gale_items
2025-07-10 03:32:09,757 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:32:09,759 INFO: Número de candles atualizados: 1
2025-07-10 03:32:09,759 INFO: ✅ Candle 1752129000 atualizado com sucesso
2025-07-10 03:32:09,760 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:32:09,760 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:32:09,760 INFO: Funcao validate_signals_for_candle iniciada para o sinal WZAWT8F0
2025-07-10 03:32:09,760 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:32:09,762 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:32:09,762 INFO: Funcao validate_signal iniciada para o signal WZAWT8F0
2025-07-10 03:32:09,762 INFO: Funcao validate_signal finalizada para o signal WZAWT8F0
2025-07-10 03:32:09,762 INFO: Validando sinal WZAWT8F0 sem gale items
2025-07-10 03:32:09,763 INFO: Sinal WZAWT8F0 adicionado à fila para G1
2025-07-10 03:32:09,763 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129120, 'open_price': 2768.918, 'high': 2768.918, 'low': 2768.918, 'close_price': 2768.918, 'time': datetime.datetime(2025, 7, 10, 3, 32, 9, 763361), 'result': None}]}}
2025-07-10 03:32:09,765 INFO: Número de candles atualizados: 1
2025-07-10 03:32:09,765 INFO: Candle completo com gales atualizado para WZAWT8F0
2025-07-10 03:32:10,600 INFO: ✅ Resposta de resultado enviada para o sinal WZAWT8F0
2025-07-10 03:32:10,601 INFO: Sinal WZAWT8F0 validado como LOSS e notificação enviada
2025-07-10 03:32:10,601 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WZAWT8F0
2025-07-10 03:32:10,601 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:33:09,790 INFO: 🔔 Novo candle detectado em 2025-07-10 06:33:00 UTC
2025-07-10 03:33:09,790 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:33:09,793 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:33:09,793 INFO: 🔔 Candle 1752129180 é maior que o entry_time 2025-07-10 03:31:00
2025-07-10 03:33:09,793 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:33:09,794 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:33:09,796 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:33:09,796 INFO: 🔄 Candle 1752129120 já existe no banco, atualizando...
2025-07-10 03:33:09,796 INFO: 🔄 Atualizando último gale item do candle 1752129120
2025-07-10 03:33:09,796 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129120, 'open_price': 2768.918, 'high': 2769.461, 'low': 2767.992, 'close_price': 2769.353, 'time': datetime.datetime(2025, 7, 10, 3, 32, 9, 763000), 'result': None}]}}
2025-07-10 03:33:09,799 INFO: Número de candles atualizados: 1
2025-07-10 03:33:09,799 INFO: ✅ Candle 1752129000 atualizado com sucesso
2025-07-10 03:33:09,799 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:33:09,799 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:33:09,799 INFO: Funcao validate_signals_for_candle iniciada para o sinal WZAWT8F0
2025-07-10 03:33:09,799 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:33:09,801 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:33:09,801 INFO: Funcao validate_signal iniciada para o signal WZAWT8F0
2025-07-10 03:33:09,801 INFO: Validando sinal WZAWT8F0 com gale items
2025-07-10 03:33:09,801 INFO: Gale G1 para o sinal WZAWT8F0 resultou em LOSS
2025-07-10 03:33:09,801 INFO: Sinal WZAWT8F0 adicionado à fila para G2
2025-07-10 03:33:09,802 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129120, 'open_price': 2768.918, 'high': 2769.461, 'low': 2767.992, 'close_price': 2769.353, 'time': datetime.datetime(2025, 7, 10, 3, 32, 9, 763000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129180, 'open_price': 2769.047, 'high': 2769.047, 'low': 2769.047, 'close_price': 2769.047, 'time': datetime.datetime(2025, 7, 10, 3, 33, 9, 801832), 'result': None}]}}
2025-07-10 03:33:09,803 INFO: Número de candles atualizados: 1
2025-07-10 03:33:09,804 INFO: Candle completo com gales atualizado para WZAWT8F0
2025-07-10 03:33:10,604 INFO: ✅ Resposta de resultado enviada para o sinal WZAWT8F0
2025-07-10 03:33:10,605 INFO: Sinal WZAWT8F0 validado como LOSS e notificação enviada
2025-07-10 03:33:10,605 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WZAWT8F0
2025-07-10 03:33:10,605 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:34:09,814 INFO: 🔔 Novo candle detectado em 2025-07-10 06:34:00 UTC
2025-07-10 03:34:09,815 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:34:09,817 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:34:09,818 INFO: 🔔 Candle 1752129240 é maior que o entry_time 2025-07-10 03:31:00
2025-07-10 03:34:09,818 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:34:09,818 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:34:09,820 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:34:09,821 INFO: 🔄 Candle 1752129180 já existe no banco, atualizando...
2025-07-10 03:34:09,821 INFO: 🔄 Atualizando último gale item do candle 1752129180
2025-07-10 03:34:09,821 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129120, 'open_price': 2768.918, 'high': 2769.461, 'low': 2767.992, 'close_price': 2769.353, 'time': datetime.datetime(2025, 7, 10, 3, 32, 9, 763000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129180, 'open_price': 2769.047, 'high': 2769.047, 'low': 2768.205, 'close_price': 2768.926, 'time': datetime.datetime(2025, 7, 10, 3, 33, 9, 801000), 'result': None}]}}
2025-07-10 03:34:09,823 INFO: Número de candles atualizados: 1
2025-07-10 03:34:09,823 INFO: ✅ Candle 1752129000 atualizado com sucesso
2025-07-10 03:34:09,824 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:34:09,824 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:34:09,825 INFO: Funcao validate_signals_for_candle iniciada para o sinal WZAWT8F0
2025-07-10 03:34:09,825 INFO: Buscando candle com signal_id: WZAWT8F0
2025-07-10 03:34:09,827 INFO: Candle encontrado para o signal_id: WZAWT8F0
2025-07-10 03:34:09,827 INFO: Funcao validate_signal iniciada para o signal WZAWT8F0
2025-07-10 03:34:09,827 INFO: Validando sinal WZAWT8F0 com gale items
2025-07-10 03:34:09,827 INFO: Atualizando candle com filtro: {'epoch': 1752129000}, update: {'$set': {'epoch': 1752129000, 'open': 2768.309, 'high': 2769.11, 'low': 2767.722, 'close': 2768.971, 'time': datetime.datetime(2025, 7, 10, 6, 30), 'signal': {'signal_id': 'WZAWT8F0', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 30), 'entry_time': datetime.datetime(2025, 7, 10, 3, 31), 'open_candle_timestamp': 1752129000, 'message_id': 10102, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129120, 'open_price': 2768.918, 'high': 2769.461, 'low': 2767.992, 'close_price': 2769.353, 'time': datetime.datetime(2025, 7, 10, 3, 32, 9, 763000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129180, 'open_price': 2769.047, 'high': 2769.047, 'low': 2768.205, 'close_price': 2768.926, 'time': datetime.datetime(2025, 7, 10, 3, 33, 9, 801000), 'result': 'WIN'}]}}
2025-07-10 03:34:09,829 INFO: Número de candles atualizados: 1
2025-07-10 03:34:09,829 INFO: Candle completo com gales atualizado para WZAWT8F0
2025-07-10 03:34:10,626 INFO: ✅ Resposta de resultado enviada para o sinal WZAWT8F0
2025-07-10 03:34:10,627 INFO: Sinal WZAWT8F0 validado como LOSS e notificação enviada
2025-07-10 03:34:10,627 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WZAWT8F0
2025-07-10 03:34:10,627 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:35:09,764 INFO: 🔔 Novo candle detectado em 2025-07-10 06:35:00 UTC
2025-07-10 03:35:09,765 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:35:09,773 INFO: Buscando candle com filtro: {'epoch': 1752129300}
2025-07-10 03:35:09,776 INFO: Candle não encontrado
2025-07-10 03:35:09,789 INFO: Tendência HMA: FALL (HMA21=2769.37, HMA100=2769.30)
2025-07-10 03:35:09,791 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:35:09,791 INFO: 📈 Análise: EMA9=2769.35, EMA21=2769.29, trend_ema=RISE, trend_final=FALL, RSI=51.42, MACD=0.09/0.11, ATR=0.71, body=0.00, confidence=20
2025-07-10 03:35:09,792 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 03:35:09,792 INFO: Inserindo candle: Candle(2025-07-10 06:35:00, DOJI, O:2769.29, H:2769.29, L:2769.29, C:2769.29)
2025-07-10 03:35:09,794 INFO: Candle inserido com ID: 686f5f1d1d9c27c6b2f10c3d
2025-07-10 03:35:10,609 INFO: Atualizando candle com filtro: {'signal.signal_id': 'ZS4U7SJH'}, update: {'$set': {'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 35, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:35:10,612 INFO: Número de candles atualizados: 1
2025-07-10 03:35:10,612 INFO: ✅ Mensagem enviada ao Telegram (ID: ZS4U7SJH).
2025-07-10 03:36:09,775 INFO: 🔔 Novo candle detectado em 2025-07-10 06:36:00 UTC
2025-07-10 03:36:09,776 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:36:09,778 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:36:09,779 INFO: 🔔 Candle 1752129360 é menor ou igual ao entry_time 2025-07-10 03:36:00
2025-07-10 03:37:09,786 INFO: 🔔 Novo candle detectado em 2025-07-10 06:37:00 UTC
2025-07-10 03:37:09,786 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:37:09,789 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:37:09,790 INFO: 🔔 Candle 1752129420 é maior que o entry_time 2025-07-10 03:36:00
2025-07-10 03:37:09,790 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:37:09,790 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:37:09,793 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:37:09,793 INFO: 🔄 Candle 1752129300 já existe no banco, atualizando...
2025-07-10 03:37:09,793 INFO: 🔄 Candle 1752129300 não tem gale_items
2025-07-10 03:37:09,793 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:37:09,796 INFO: Número de candles atualizados: 1
2025-07-10 03:37:09,796 INFO: ✅ Candle 1752129300 atualizado com sucesso
2025-07-10 03:37:09,796 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:37:09,796 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:37:09,797 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZS4U7SJH
2025-07-10 03:37:09,797 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:37:09,798 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:37:09,799 INFO: Funcao validate_signal iniciada para o signal ZS4U7SJH
2025-07-10 03:37:09,799 INFO: Funcao validate_signal finalizada para o signal ZS4U7SJH
2025-07-10 03:37:09,799 INFO: Validando sinal ZS4U7SJH sem gale items
2025-07-10 03:37:09,800 INFO: Sinal ZS4U7SJH adicionado à fila para G1
2025-07-10 03:37:09,800 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129420, 'open_price': 2772.22, 'high': 2772.22, 'low': 2772.22, 'close_price': 2772.22, 'time': datetime.datetime(2025, 7, 10, 3, 37, 9, 800071), 'result': None}]}}
2025-07-10 03:37:09,802 INFO: Número de candles atualizados: 1
2025-07-10 03:37:09,802 INFO: Candle completo com gales atualizado para ZS4U7SJH
2025-07-10 03:37:10,604 INFO: ✅ Resposta de resultado enviada para o sinal ZS4U7SJH
2025-07-10 03:37:10,604 INFO: Sinal ZS4U7SJH validado como LOSS e notificação enviada
2025-07-10 03:37:10,604 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZS4U7SJH
2025-07-10 03:37:10,605 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:38:09,794 INFO: 🔔 Novo candle detectado em 2025-07-10 06:38:00 UTC
2025-07-10 03:38:09,794 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:38:09,797 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:38:09,797 INFO: 🔔 Candle 1752129480 é maior que o entry_time 2025-07-10 03:36:00
2025-07-10 03:38:09,797 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:38:09,798 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:38:09,800 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:38:09,800 INFO: 🔄 Candle 1752129420 já existe no banco, atualizando...
2025-07-10 03:38:09,800 INFO: 🔄 Atualizando último gale item do candle 1752129420
2025-07-10 03:38:09,800 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129420, 'open_price': 2772.22, 'high': 2773.882, 'low': 2772.22, 'close_price': 2772.82, 'time': datetime.datetime(2025, 7, 10, 3, 37, 9, 800000), 'result': None}]}}
2025-07-10 03:38:09,803 INFO: Número de candles atualizados: 1
2025-07-10 03:38:09,803 INFO: ✅ Candle 1752129300 atualizado com sucesso
2025-07-10 03:38:09,803 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:38:09,803 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:38:09,804 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZS4U7SJH
2025-07-10 03:38:09,804 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:38:09,805 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:38:09,805 INFO: Funcao validate_signal iniciada para o signal ZS4U7SJH
2025-07-10 03:38:09,805 INFO: Validando sinal ZS4U7SJH com gale items
2025-07-10 03:38:09,806 INFO: Gale G1 para o sinal ZS4U7SJH resultou em LOSS
2025-07-10 03:38:09,806 INFO: Sinal ZS4U7SJH adicionado à fila para G2
2025-07-10 03:38:09,806 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129420, 'open_price': 2772.22, 'high': 2773.882, 'low': 2772.22, 'close_price': 2772.82, 'time': datetime.datetime(2025, 7, 10, 3, 37, 9, 800000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129480, 'open_price': 2772.534, 'high': 2772.534, 'low': 2772.534, 'close_price': 2772.534, 'time': datetime.datetime(2025, 7, 10, 3, 38, 9, 806383), 'result': None}]}}
2025-07-10 03:38:09,809 INFO: Número de candles atualizados: 1
2025-07-10 03:38:09,809 INFO: Candle completo com gales atualizado para ZS4U7SJH
2025-07-10 03:38:10,614 INFO: ✅ Resposta de resultado enviada para o sinal ZS4U7SJH
2025-07-10 03:38:10,616 INFO: Sinal ZS4U7SJH validado como LOSS e notificação enviada
2025-07-10 03:38:10,616 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZS4U7SJH
2025-07-10 03:38:10,616 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:39:09,787 INFO: 🔔 Novo candle detectado em 2025-07-10 06:39:00 UTC
2025-07-10 03:39:09,787 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:39:09,790 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:39:09,790 INFO: 🔔 Candle 1752129540 é maior que o entry_time 2025-07-10 03:36:00
2025-07-10 03:39:09,790 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:39:09,791 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:39:09,793 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:39:09,793 INFO: 🔄 Candle 1752129480 já existe no banco, atualizando...
2025-07-10 03:39:09,793 INFO: 🔄 Atualizando último gale item do candle 1752129480
2025-07-10 03:39:09,794 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129420, 'open_price': 2772.22, 'high': 2773.882, 'low': 2772.22, 'close_price': 2772.82, 'time': datetime.datetime(2025, 7, 10, 3, 37, 9, 800000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129480, 'open_price': 2772.534, 'high': 2773.277, 'low': 2771.367, 'close_price': 2771.816, 'time': datetime.datetime(2025, 7, 10, 3, 38, 9, 806000), 'result': None}]}}
2025-07-10 03:39:09,796 INFO: Número de candles atualizados: 1
2025-07-10 03:39:09,796 INFO: ✅ Candle 1752129300 atualizado com sucesso
2025-07-10 03:39:09,796 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:39:09,797 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:39:09,797 INFO: Funcao validate_signals_for_candle iniciada para o sinal ZS4U7SJH
2025-07-10 03:39:09,797 INFO: Buscando candle com signal_id: ZS4U7SJH
2025-07-10 03:39:09,799 INFO: Candle encontrado para o signal_id: ZS4U7SJH
2025-07-10 03:39:09,799 INFO: Funcao validate_signal iniciada para o signal ZS4U7SJH
2025-07-10 03:39:09,799 INFO: Validando sinal ZS4U7SJH com gale items
2025-07-10 03:39:09,800 INFO: Atualizando candle com filtro: {'epoch': 1752129300}, update: {'$set': {'epoch': 1752129300, 'open': 2769.291, 'high': 2771.26, 'low': 2769.291, 'close': 2770.856, 'time': datetime.datetime(2025, 7, 10, 6, 35), 'signal': {'signal_id': 'ZS4U7SJH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 35), 'entry_time': datetime.datetime(2025, 7, 10, 3, 36), 'open_candle_timestamp': 1752129300, 'message_id': 10106, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129420, 'open_price': 2772.22, 'high': 2773.882, 'low': 2772.22, 'close_price': 2772.82, 'time': datetime.datetime(2025, 7, 10, 3, 37, 9, 800000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752129480, 'open_price': 2772.534, 'high': 2773.277, 'low': 2771.367, 'close_price': 2771.816, 'time': datetime.datetime(2025, 7, 10, 3, 38, 9, 806000), 'result': 'WIN'}]}}
2025-07-10 03:39:09,802 INFO: Número de candles atualizados: 1
2025-07-10 03:39:09,803 INFO: Candle completo com gales atualizado para ZS4U7SJH
2025-07-10 03:39:10,635 INFO: ✅ Resposta de resultado enviada para o sinal ZS4U7SJH
2025-07-10 03:39:10,635 INFO: Sinal ZS4U7SJH validado como LOSS e notificação enviada
2025-07-10 03:39:10,636 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ZS4U7SJH
2025-07-10 03:39:10,636 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:40:09,755 INFO: 🔔 Novo candle detectado em 2025-07-10 06:40:00 UTC
2025-07-10 03:40:09,755 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:40:09,764 INFO: Buscando candle com filtro: {'epoch': 1752129600}
2025-07-10 03:40:09,766 INFO: Candle não encontrado
2025-07-10 03:40:09,782 INFO: Tendência HMA: FALL (HMA21=2772.18, HMA100=2771.76)
2025-07-10 03:40:09,782 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:40:09,783 INFO: 📈 Análise: EMA9=2772.30, EMA21=2772.17, trend_ema=RISE, trend_final=FALL, RSI=65.52, MACD=0.09/0.01, ATR=0.98, body=0.00, confidence=60
2025-07-10 03:40:09,783 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 03:40:09,783 INFO: Inserindo candle: Candle(2025-07-10 06:40:00, DOJI, O:2772.85, H:2772.85, L:2772.85, C:2772.85)
2025-07-10 03:40:09,786 INFO: Candle inserido com ID: 686f60491d9c27c6b2f10c3e
2025-07-10 03:40:10,602 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HLK85GUP'}, update: {'$set': {'signal': {'signal_id': 'HLK85GUP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 40, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 41), 'open_candle_timestamp': 1752129600, 'message_id': 10111, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:40:10,604 INFO: Número de candles atualizados: 1
2025-07-10 03:40:10,604 INFO: ✅ Mensagem enviada ao Telegram (ID: HLK85GUP).
2025-07-10 03:41:09,768 INFO: 🔔 Novo candle detectado em 2025-07-10 06:41:00 UTC
2025-07-10 03:41:09,768 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:41:09,771 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:41:09,771 INFO: 🔔 Candle 1752129660 é menor ou igual ao entry_time 2025-07-10 03:41:00
2025-07-10 03:42:09,783 INFO: 🔔 Novo candle detectado em 2025-07-10 06:42:00 UTC
2025-07-10 03:42:09,784 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:42:09,786 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:42:09,787 INFO: 🔔 Candle 1752129720 é maior que o entry_time 2025-07-10 03:41:00
2025-07-10 03:42:09,787 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:42:09,787 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:42:09,790 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:42:09,790 INFO: 🔄 Candle 1752129600 já existe no banco, atualizando...
2025-07-10 03:42:09,790 INFO: 🔄 Candle 1752129600 não tem gale_items
2025-07-10 03:42:09,790 INFO: Atualizando candle com filtro: {'epoch': 1752129600}, update: {'$set': {'epoch': 1752129600, 'open': 2772.846, 'high': 2773.837, 'low': 2772.586, 'close': 2773.727, 'time': datetime.datetime(2025, 7, 10, 6, 40), 'signal': {'signal_id': 'HLK85GUP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 40), 'entry_time': datetime.datetime(2025, 7, 10, 3, 41), 'open_candle_timestamp': 1752129600, 'message_id': 10111, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:42:09,793 INFO: Número de candles atualizados: 1
2025-07-10 03:42:09,794 INFO: ✅ Candle 1752129600 atualizado com sucesso
2025-07-10 03:42:09,794 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:42:09,794 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:42:09,794 INFO: Funcao validate_signals_for_candle iniciada para o sinal HLK85GUP
2025-07-10 03:42:09,794 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:42:09,796 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:42:09,796 INFO: Funcao validate_signal iniciada para o signal HLK85GUP
2025-07-10 03:42:09,797 INFO: Funcao validate_signal finalizada para o signal HLK85GUP
2025-07-10 03:42:09,797 INFO: Validando sinal HLK85GUP sem gale items
2025-07-10 03:42:09,797 INFO: Sinal HLK85GUP adicionado à fila para G1
2025-07-10 03:42:09,797 INFO: Atualizando candle com filtro: {'epoch': 1752129600}, update: {'$set': {'epoch': 1752129600, 'open': 2772.846, 'high': 2773.837, 'low': 2772.586, 'close': 2773.727, 'time': datetime.datetime(2025, 7, 10, 6, 40), 'signal': {'signal_id': 'HLK85GUP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 40), 'entry_time': datetime.datetime(2025, 7, 10, 3, 41), 'open_candle_timestamp': 1752129600, 'message_id': 10111, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129720, 'open_price': 2772.001, 'high': 2772.001, 'low': 2772.001, 'close_price': 2772.001, 'time': datetime.datetime(2025, 7, 10, 3, 42, 9, 797067), 'result': None}]}}
2025-07-10 03:42:09,799 INFO: Número de candles atualizados: 1
2025-07-10 03:42:09,799 INFO: Candle completo com gales atualizado para HLK85GUP
2025-07-10 03:42:10,607 INFO: ✅ Resposta de resultado enviada para o sinal HLK85GUP
2025-07-10 03:42:10,607 INFO: Sinal HLK85GUP validado como LOSS e notificação enviada
2025-07-10 03:42:10,608 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HLK85GUP
2025-07-10 03:42:10,608 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:43:09,744 INFO: 🔔 Novo candle detectado em 2025-07-10 06:43:00 UTC
2025-07-10 03:43:09,744 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:43:09,747 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:43:09,748 INFO: 🔔 Candle 1752129780 é maior que o entry_time 2025-07-10 03:41:00
2025-07-10 03:43:09,748 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:43:09,748 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:43:09,750 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:43:09,751 INFO: 🔄 Candle 1752129720 já existe no banco, atualizando...
2025-07-10 03:43:09,751 INFO: 🔄 Atualizando último gale item do candle 1752129720
2025-07-10 03:43:09,751 INFO: Atualizando candle com filtro: {'epoch': 1752129600}, update: {'$set': {'epoch': 1752129600, 'open': 2772.846, 'high': 2773.837, 'low': 2772.586, 'close': 2773.727, 'time': datetime.datetime(2025, 7, 10, 6, 40), 'signal': {'signal_id': 'HLK85GUP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 40), 'entry_time': datetime.datetime(2025, 7, 10, 3, 41), 'open_candle_timestamp': 1752129600, 'message_id': 10111, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129720, 'open_price': 2772.001, 'high': 2772.116, 'low': 2771.162, 'close_price': 2771.79, 'time': datetime.datetime(2025, 7, 10, 3, 42, 9, 797000), 'result': None}]}}
2025-07-10 03:43:09,753 INFO: Número de candles atualizados: 1
2025-07-10 03:43:09,754 INFO: ✅ Candle 1752129600 atualizado com sucesso
2025-07-10 03:43:09,754 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:43:09,754 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:43:09,754 INFO: Funcao validate_signals_for_candle iniciada para o sinal HLK85GUP
2025-07-10 03:43:09,754 INFO: Buscando candle com signal_id: HLK85GUP
2025-07-10 03:43:09,756 INFO: Candle encontrado para o signal_id: HLK85GUP
2025-07-10 03:43:09,757 INFO: Funcao validate_signal iniciada para o signal HLK85GUP
2025-07-10 03:43:09,757 INFO: Validando sinal HLK85GUP com gale items
2025-07-10 03:43:09,757 INFO: Atualizando candle com filtro: {'epoch': 1752129600}, update: {'$set': {'epoch': 1752129600, 'open': 2772.846, 'high': 2773.837, 'low': 2772.586, 'close': 2773.727, 'time': datetime.datetime(2025, 7, 10, 6, 40), 'signal': {'signal_id': 'HLK85GUP', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 40), 'entry_time': datetime.datetime(2025, 7, 10, 3, 41), 'open_candle_timestamp': 1752129600, 'message_id': 10111, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129720, 'open_price': 2772.001, 'high': 2772.116, 'low': 2771.162, 'close_price': 2771.79, 'time': datetime.datetime(2025, 7, 10, 3, 42, 9, 797000), 'result': 'WIN'}]}}
2025-07-10 03:43:09,759 INFO: Número de candles atualizados: 1
2025-07-10 03:43:09,759 INFO: Candle completo com gales atualizado para HLK85GUP
2025-07-10 03:43:10,569 INFO: ✅ Resposta de resultado enviada para o sinal HLK85GUP
2025-07-10 03:43:10,569 INFO: Sinal HLK85GUP validado como LOSS e notificação enviada
2025-07-10 03:43:10,570 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HLK85GUP
2025-07-10 03:43:10,570 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:44:09,737 INFO: 🔔 Novo candle detectado em 2025-07-10 06:44:00 UTC
2025-07-10 03:44:09,737 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:44:09,747 INFO: Buscando candle com filtro: {'epoch': 1752129840}
2025-07-10 03:44:09,749 INFO: Candle não encontrado
2025-07-10 03:44:09,765 INFO: Tendência HMA: FALL (HMA21=2770.26, HMA100=2770.80)
2025-07-10 03:44:09,765 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:44:09,765 INFO: 📈 Análise: EMA9=2770.45, EMA21=2770.73, trend_ema=FALL, trend_final=FALL, RSI=30.63, MACD=-0.31/-0.31, ATR=1.14, body=0.00, confidence=80
2025-07-10 03:44:09,765 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 03:44:09,766 INFO: Inserindo candle: Candle(2025-07-10 06:44:00, DOJI, O:2770.28, H:2770.28, L:2770.28, C:2770.28)
2025-07-10 03:44:09,769 INFO: Candle inserido com ID: 686f61391d9c27c6b2f10c3f
2025-07-10 03:44:10,575 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Y48ANYJ2'}, update: {'$set': {'signal': {'signal_id': 'Y48ANYJ2', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 44, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 45), 'open_candle_timestamp': 1752129840, 'message_id': 10115, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:44:10,578 INFO: Número de candles atualizados: 1
2025-07-10 03:44:10,578 INFO: ✅ Mensagem enviada ao Telegram (ID: Y48ANYJ2).
2025-07-10 03:45:09,778 INFO: 🔔 Novo candle detectado em 2025-07-10 06:45:00 UTC
2025-07-10 03:45:09,778 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:45:09,782 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:45:09,782 INFO: 🔔 Candle 1752129900 é menor ou igual ao entry_time 2025-07-10 03:45:00
2025-07-10 03:46:09,754 INFO: 🔔 Novo candle detectado em 2025-07-10 06:46:00 UTC
2025-07-10 03:46:09,754 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:46:09,757 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:46:09,758 INFO: 🔔 Candle 1752129960 é maior que o entry_time 2025-07-10 03:45:00
2025-07-10 03:46:09,758 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:46:09,758 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:46:09,761 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:46:09,761 INFO: 🔄 Candle 1752129840 já existe no banco, atualizando...
2025-07-10 03:46:09,761 INFO: 🔄 Candle 1752129840 não tem gale_items
2025-07-10 03:46:09,761 INFO: Atualizando candle com filtro: {'epoch': 1752129840}, update: {'$set': {'epoch': 1752129840, 'open': 2770.281, 'high': 2770.699, 'low': 2769.82, 'close': 2770.441, 'time': datetime.datetime(2025, 7, 10, 6, 44), 'signal': {'signal_id': 'Y48ANYJ2', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 44), 'entry_time': datetime.datetime(2025, 7, 10, 3, 45), 'open_candle_timestamp': 1752129840, 'message_id': 10115, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:46:09,763 INFO: Número de candles atualizados: 1
2025-07-10 03:46:09,764 INFO: ✅ Candle 1752129840 atualizado com sucesso
2025-07-10 03:46:09,764 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:46:09,764 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:46:09,764 INFO: Funcao validate_signals_for_candle iniciada para o sinal Y48ANYJ2
2025-07-10 03:46:09,765 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:46:09,766 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:46:09,766 INFO: Funcao validate_signal iniciada para o signal Y48ANYJ2
2025-07-10 03:46:09,767 INFO: Funcao validate_signal finalizada para o signal Y48ANYJ2
2025-07-10 03:46:09,767 INFO: Validando sinal Y48ANYJ2 sem gale items
2025-07-10 03:46:09,767 INFO: Sinal Y48ANYJ2 adicionado à fila para G1
2025-07-10 03:46:09,767 INFO: Atualizando candle com filtro: {'epoch': 1752129840}, update: {'$set': {'epoch': 1752129840, 'open': 2770.281, 'high': 2770.699, 'low': 2769.82, 'close': 2770.441, 'time': datetime.datetime(2025, 7, 10, 6, 44), 'signal': {'signal_id': 'Y48ANYJ2', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 44), 'entry_time': datetime.datetime(2025, 7, 10, 3, 45), 'open_candle_timestamp': 1752129840, 'message_id': 10115, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129960, 'open_price': 2768.604, 'high': 2768.604, 'low': 2768.604, 'close_price': 2768.604, 'time': datetime.datetime(2025, 7, 10, 3, 46, 9, 767491), 'result': None}]}}
2025-07-10 03:46:09,770 INFO: Número de candles atualizados: 1
2025-07-10 03:46:09,770 INFO: Candle completo com gales atualizado para Y48ANYJ2
2025-07-10 03:46:10,633 INFO: ✅ Resposta de resultado enviada para o sinal Y48ANYJ2
2025-07-10 03:46:10,634 INFO: Sinal Y48ANYJ2 validado como LOSS e notificação enviada
2025-07-10 03:46:10,634 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Y48ANYJ2
2025-07-10 03:46:10,634 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:47:09,769 INFO: 🔔 Novo candle detectado em 2025-07-10 06:47:00 UTC
2025-07-10 03:47:09,769 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:47:09,773 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:47:09,774 INFO: 🔔 Candle 1752130020 é maior que o entry_time 2025-07-10 03:45:00
2025-07-10 03:47:09,774 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:47:09,774 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:47:09,776 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:47:09,777 INFO: 🔄 Candle 1752129960 já existe no banco, atualizando...
2025-07-10 03:47:09,777 INFO: 🔄 Atualizando último gale item do candle 1752129960
2025-07-10 03:47:09,777 INFO: Atualizando candle com filtro: {'epoch': 1752129840}, update: {'$set': {'epoch': 1752129840, 'open': 2770.281, 'high': 2770.699, 'low': 2769.82, 'close': 2770.441, 'time': datetime.datetime(2025, 7, 10, 6, 44), 'signal': {'signal_id': 'Y48ANYJ2', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 44), 'entry_time': datetime.datetime(2025, 7, 10, 3, 45), 'open_candle_timestamp': 1752129840, 'message_id': 10115, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129960, 'open_price': 2768.604, 'high': 2768.787, 'low': 2766.523, 'close_price': 2767.163, 'time': datetime.datetime(2025, 7, 10, 3, 46, 9, 767000), 'result': None}]}}
2025-07-10 03:47:09,779 INFO: Número de candles atualizados: 1
2025-07-10 03:47:09,779 INFO: ✅ Candle 1752129840 atualizado com sucesso
2025-07-10 03:47:09,780 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:47:09,780 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:47:09,780 INFO: Funcao validate_signals_for_candle iniciada para o sinal Y48ANYJ2
2025-07-10 03:47:09,780 INFO: Buscando candle com signal_id: Y48ANYJ2
2025-07-10 03:47:09,782 INFO: Candle encontrado para o signal_id: Y48ANYJ2
2025-07-10 03:47:09,782 INFO: Funcao validate_signal iniciada para o signal Y48ANYJ2
2025-07-10 03:47:09,782 INFO: Validando sinal Y48ANYJ2 com gale items
2025-07-10 03:47:09,782 INFO: Atualizando candle com filtro: {'epoch': 1752129840}, update: {'$set': {'epoch': 1752129840, 'open': 2770.281, 'high': 2770.699, 'low': 2769.82, 'close': 2770.441, 'time': datetime.datetime(2025, 7, 10, 6, 44), 'signal': {'signal_id': 'Y48ANYJ2', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 44), 'entry_time': datetime.datetime(2025, 7, 10, 3, 45), 'open_candle_timestamp': 1752129840, 'message_id': 10115, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752129960, 'open_price': 2768.604, 'high': 2768.787, 'low': 2766.523, 'close_price': 2767.163, 'time': datetime.datetime(2025, 7, 10, 3, 46, 9, 767000), 'result': 'WIN'}]}}
2025-07-10 03:47:09,784 INFO: Número de candles atualizados: 1
2025-07-10 03:47:09,785 INFO: Candle completo com gales atualizado para Y48ANYJ2
2025-07-10 03:47:10,611 INFO: ✅ Resposta de resultado enviada para o sinal Y48ANYJ2
2025-07-10 03:47:10,612 INFO: Sinal Y48ANYJ2 validado como LOSS e notificação enviada
2025-07-10 03:47:10,612 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Y48ANYJ2
2025-07-10 03:47:10,612 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:48:09,755 INFO: 🔔 Novo candle detectado em 2025-07-10 06:48:00 UTC
2025-07-10 03:48:09,755 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:48:09,765 INFO: Buscando candle com filtro: {'epoch': 1752130080}
2025-07-10 03:48:09,767 INFO: Candle não encontrado
2025-07-10 03:48:09,784 INFO: Tendência HMA: FALL (HMA21=2767.51, HMA100=2766.78)
2025-07-10 03:48:09,785 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:48:09,785 INFO: 📈 Análise: EMA9=2767.38, EMA21=2767.38, trend_ema=RISE, trend_final=FALL, RSI=46.49, MACD=-0.01/-0.00, ATR=0.67, body=0.00, confidence=20
2025-07-10 03:48:09,785 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 03:48:09,786 INFO: Inserindo candle: Candle(2025-07-10 06:48:00, DOJI, O:2767.25, H:2767.25, L:2767.25, C:2767.25)
2025-07-10 03:48:09,789 INFO: Candle inserido com ID: 686f62291d9c27c6b2f10c40
2025-07-10 03:48:10,608 INFO: Atualizando candle com filtro: {'signal.signal_id': 'ATN29PLE'}, update: {'$set': {'signal': {'signal_id': 'ATN29PLE', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 48, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 49), 'open_candle_timestamp': 1752130080, 'message_id': 10118, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:48:10,611 INFO: Número de candles atualizados: 1
2025-07-10 03:48:10,611 INFO: ✅ Mensagem enviada ao Telegram (ID: ATN29PLE).
2025-07-10 03:49:09,758 INFO: 🔔 Novo candle detectado em 2025-07-10 06:49:00 UTC
2025-07-10 03:49:09,758 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:49:09,762 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:49:09,762 INFO: 🔔 Candle 1752130140 é menor ou igual ao entry_time 2025-07-10 03:49:00
2025-07-10 03:50:09,750 INFO: 🔔 Novo candle detectado em 2025-07-10 06:50:00 UTC
2025-07-10 03:50:09,750 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:50:09,752 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:50:09,753 INFO: 🔔 Candle 1752130200 é maior que o entry_time 2025-07-10 03:49:00
2025-07-10 03:50:09,753 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:50:09,753 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:50:09,755 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:50:09,755 INFO: 🔄 Candle 1752130080 já existe no banco, atualizando...
2025-07-10 03:50:09,755 INFO: 🔄 Candle 1752130080 não tem gale_items
2025-07-10 03:50:09,755 INFO: Atualizando candle com filtro: {'epoch': 1752130080}, update: {'$set': {'epoch': 1752130080, 'open': 2767.249, 'high': 2768.313, 'low': 2767.245, 'close': 2768.218, 'time': datetime.datetime(2025, 7, 10, 6, 48), 'signal': {'signal_id': 'ATN29PLE', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 48), 'entry_time': datetime.datetime(2025, 7, 10, 3, 49), 'open_candle_timestamp': 1752130080, 'message_id': 10118, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:50:09,757 INFO: Número de candles atualizados: 1
2025-07-10 03:50:09,758 INFO: ✅ Candle 1752130080 atualizado com sucesso
2025-07-10 03:50:09,758 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:50:09,758 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:50:09,759 INFO: Funcao validate_signals_for_candle iniciada para o sinal ATN29PLE
2025-07-10 03:50:09,759 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:50:09,760 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:50:09,761 INFO: Funcao validate_signal iniciada para o signal ATN29PLE
2025-07-10 03:50:09,761 INFO: Funcao validate_signal finalizada para o signal ATN29PLE
2025-07-10 03:50:09,761 INFO: Validando sinal ATN29PLE sem gale items
2025-07-10 03:50:09,761 INFO: Sinal ATN29PLE adicionado à fila para G1
2025-07-10 03:50:09,762 INFO: Atualizando candle com filtro: {'epoch': 1752130080}, update: {'$set': {'epoch': 1752130080, 'open': 2767.249, 'high': 2768.313, 'low': 2767.245, 'close': 2768.218, 'time': datetime.datetime(2025, 7, 10, 6, 48), 'signal': {'signal_id': 'ATN29PLE', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 48), 'entry_time': datetime.datetime(2025, 7, 10, 3, 49), 'open_candle_timestamp': 1752130080, 'message_id': 10118, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752130200, 'open_price': 2766.377, 'high': 2766.377, 'low': 2766.377, 'close_price': 2766.377, 'time': datetime.datetime(2025, 7, 10, 3, 50, 9, 761793), 'result': None}]}}
2025-07-10 03:50:09,764 INFO: Número de candles atualizados: 1
2025-07-10 03:50:09,764 INFO: Candle completo com gales atualizado para ATN29PLE
2025-07-10 03:50:10,567 INFO: ✅ Resposta de resultado enviada para o sinal ATN29PLE
2025-07-10 03:50:10,568 INFO: Sinal ATN29PLE validado como LOSS e notificação enviada
2025-07-10 03:50:10,568 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ATN29PLE
2025-07-10 03:50:10,568 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 03:51:09,750 INFO: 🔔 Novo candle detectado em 2025-07-10 06:51:00 UTC
2025-07-10 03:51:09,750 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:51:09,753 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:51:09,753 INFO: 🔔 Candle 1752130260 é maior que o entry_time 2025-07-10 03:49:00
2025-07-10 03:51:09,753 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:51:09,754 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:51:09,756 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:51:09,757 INFO: 🔄 Candle 1752130200 já existe no banco, atualizando...
2025-07-10 03:51:09,757 INFO: 🔄 Atualizando último gale item do candle 1752130200
2025-07-10 03:51:09,757 INFO: Atualizando candle com filtro: {'epoch': 1752130080}, update: {'$set': {'epoch': 1752130080, 'open': 2767.249, 'high': 2768.313, 'low': 2767.245, 'close': 2768.218, 'time': datetime.datetime(2025, 7, 10, 6, 48), 'signal': {'signal_id': 'ATN29PLE', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 48), 'entry_time': datetime.datetime(2025, 7, 10, 3, 49), 'open_candle_timestamp': 1752130080, 'message_id': 10118, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752130200, 'open_price': 2766.377, 'high': 2766.569, 'low': 2764.876, 'close_price': 2765.855, 'time': datetime.datetime(2025, 7, 10, 3, 50, 9, 761000), 'result': None}]}}
2025-07-10 03:51:09,759 INFO: Número de candles atualizados: 1
2025-07-10 03:51:09,759 INFO: ✅ Candle 1752130080 atualizado com sucesso
2025-07-10 03:51:09,760 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:51:09,760 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:51:09,760 INFO: Funcao validate_signals_for_candle iniciada para o sinal ATN29PLE
2025-07-10 03:51:09,760 INFO: Buscando candle com signal_id: ATN29PLE
2025-07-10 03:51:09,763 INFO: Candle encontrado para o signal_id: ATN29PLE
2025-07-10 03:51:09,763 INFO: Funcao validate_signal iniciada para o signal ATN29PLE
2025-07-10 03:51:09,763 INFO: Validando sinal ATN29PLE com gale items
2025-07-10 03:51:09,763 INFO: Atualizando candle com filtro: {'epoch': 1752130080}, update: {'$set': {'epoch': 1752130080, 'open': 2767.249, 'high': 2768.313, 'low': 2767.245, 'close': 2768.218, 'time': datetime.datetime(2025, 7, 10, 6, 48), 'signal': {'signal_id': 'ATN29PLE', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 48), 'entry_time': datetime.datetime(2025, 7, 10, 3, 49), 'open_candle_timestamp': 1752130080, 'message_id': 10118, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752130200, 'open_price': 2766.377, 'high': 2766.569, 'low': 2764.876, 'close_price': 2765.855, 'time': datetime.datetime(2025, 7, 10, 3, 50, 9, 761000), 'result': 'WIN'}]}}
2025-07-10 03:51:09,766 INFO: Número de candles atualizados: 1
2025-07-10 03:51:09,766 INFO: Candle completo com gales atualizado para ATN29PLE
2025-07-10 03:51:10,565 INFO: ✅ Resposta de resultado enviada para o sinal ATN29PLE
2025-07-10 03:51:10,566 INFO: Sinal ATN29PLE validado como LOSS e notificação enviada
2025-07-10 03:51:10,566 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal ATN29PLE
2025-07-10 03:51:10,566 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:52:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 06:52:00 UTC
2025-07-10 03:52:09,763 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:52:09,772 INFO: Buscando candle com filtro: {'epoch': 1752130320}
2025-07-10 03:52:09,775 INFO: Candle não encontrado
2025-07-10 03:52:09,789 INFO: Tendência HMA: FALL (HMA21=2766.05, HMA100=2766.01)
2025-07-10 03:52:09,790 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:52:09,790 INFO: 📈 Análise: EMA9=2766.12, EMA21=2766.18, trend_ema=FALL, trend_final=FALL, RSI=38.18, MACD=-0.02/0.06, ATR=0.78, body=0.00, confidence=80
2025-07-10 03:52:09,790 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 03:52:09,790 INFO: Inserindo candle: Candle(2025-07-10 06:52:00, DOJI, O:2765.74, H:2765.74, L:2765.74, C:2765.74)
2025-07-10 03:52:09,794 INFO: Candle inserido com ID: 686f63191d9c27c6b2f10c41
2025-07-10 03:52:10,658 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HT1S2KSE'}, update: {'$set': {'signal': {'signal_id': 'HT1S2KSE', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 52, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 53), 'open_candle_timestamp': 1752130320, 'message_id': 10121, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:52:10,660 INFO: Número de candles atualizados: 1
2025-07-10 03:52:10,661 INFO: ✅ Mensagem enviada ao Telegram (ID: HT1S2KSE).
2025-07-10 03:53:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 06:53:00 UTC
2025-07-10 03:53:09,764 INFO: Buscando candle com signal_id: HT1S2KSE
2025-07-10 03:53:09,766 INFO: Candle encontrado para o signal_id: HT1S2KSE
2025-07-10 03:53:09,766 INFO: 🔔 Candle 1752130380 é menor ou igual ao entry_time 2025-07-10 03:53:00
2025-07-10 03:54:09,778 INFO: 🔔 Novo candle detectado em 2025-07-10 06:54:00 UTC
2025-07-10 03:54:09,778 INFO: Buscando candle com signal_id: HT1S2KSE
2025-07-10 03:54:09,781 INFO: Candle encontrado para o signal_id: HT1S2KSE
2025-07-10 03:54:09,781 INFO: 🔔 Candle 1752130440 é maior que o entry_time 2025-07-10 03:53:00
2025-07-10 03:54:09,781 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:54:09,782 INFO: Buscando candle com signal_id: HT1S2KSE
2025-07-10 03:54:09,784 INFO: Candle encontrado para o signal_id: HT1S2KSE
2025-07-10 03:54:09,784 INFO: 🔄 Candle 1752130320 já existe no banco, atualizando...
2025-07-10 03:54:09,784 INFO: 🔄 Candle 1752130320 não tem gale_items
2025-07-10 03:54:09,785 INFO: Atualizando candle com filtro: {'epoch': 1752130320}, update: {'$set': {'epoch': 1752130320, 'open': 2765.736, 'high': 2765.985, 'low': 2764.982, 'close': 2765.047, 'time': datetime.datetime(2025, 7, 10, 6, 52), 'signal': {'signal_id': 'HT1S2KSE', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 52), 'entry_time': datetime.datetime(2025, 7, 10, 3, 53), 'open_candle_timestamp': 1752130320, 'message_id': 10121, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:54:09,787 INFO: Número de candles atualizados: 1
2025-07-10 03:54:09,787 INFO: ✅ Candle 1752130320 atualizado com sucesso
2025-07-10 03:54:09,787 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:54:09,788 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:54:09,788 INFO: Funcao validate_signals_for_candle iniciada para o sinal HT1S2KSE
2025-07-10 03:54:09,788 INFO: Buscando candle com signal_id: HT1S2KSE
2025-07-10 03:54:09,790 INFO: Candle encontrado para o signal_id: HT1S2KSE
2025-07-10 03:54:09,790 INFO: Funcao validate_signal iniciada para o signal HT1S2KSE
2025-07-10 03:54:09,790 INFO: Funcao validate_signal finalizada para o signal HT1S2KSE
2025-07-10 03:54:09,790 INFO: Validando sinal HT1S2KSE sem gale items
2025-07-10 03:54:09,791 INFO: Atualizando candle com filtro: {'signal.signal_id': 'HT1S2KSE'}, update: {'$set': {'signal': {'signal_id': 'HT1S2KSE', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 52), 'entry_time': datetime.datetime(2025, 7, 10, 3, 53), 'open_candle_timestamp': 1752130320, 'message_id': 10121, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 03:54:09,793 INFO: Número de candles atualizados: 1
2025-07-10 03:54:09,793 INFO: Sinal atualizado no repositório para HT1S2KSE
2025-07-10 03:54:10,745 INFO: ✅ Resposta de resultado enviada para o sinal HT1S2KSE
2025-07-10 03:54:10,746 INFO: Sinal HT1S2KSE validado como WIN e notificação enviada
2025-07-10 03:54:10,746 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal HT1S2KSE
2025-07-10 03:54:10,746 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:55:09,778 INFO: 🔔 Novo candle detectado em 2025-07-10 06:55:00 UTC
2025-07-10 03:55:09,778 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:55:09,786 INFO: Buscando candle com filtro: {'epoch': 1752130500}
2025-07-10 03:55:09,789 INFO: Candle não encontrado
2025-07-10 03:55:09,804 INFO: Tendência HMA: FALL (HMA21=2766.55, HMA100=2766.66)
2025-07-10 03:55:09,805 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:55:09,805 INFO: 📈 Análise: EMA9=2766.51, EMA21=2766.46, trend_ema=RISE, trend_final=FALL, RSI=49.25, MACD=0.08/0.10, ATR=0.66, body=0.00, confidence=20
2025-07-10 03:55:09,805 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 03:55:09,805 INFO: Inserindo candle: Candle(2025-07-10 06:55:00, DOJI, O:2766.40, H:2766.40, L:2766.40, C:2766.40)
2025-07-10 03:55:09,808 INFO: Candle inserido com ID: 686f63cd1d9c27c6b2f10c42
2025-07-10 03:55:10,605 INFO: Atualizando candle com filtro: {'signal.signal_id': '7QYBVRZB'}, update: {'$set': {'signal': {'signal_id': '7QYBVRZB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 55, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 56), 'open_candle_timestamp': 1752130500, 'message_id': 10124, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:55:10,607 INFO: Número de candles atualizados: 1
2025-07-10 03:55:10,607 INFO: ✅ Mensagem enviada ao Telegram (ID: 7QYBVRZB).
2025-07-10 03:56:09,739 INFO: 🔔 Novo candle detectado em 2025-07-10 06:56:00 UTC
2025-07-10 03:56:09,739 INFO: Buscando candle com signal_id: 7QYBVRZB
2025-07-10 03:56:09,742 INFO: Candle encontrado para o signal_id: 7QYBVRZB
2025-07-10 03:56:09,742 INFO: 🔔 Candle 1752130560 é menor ou igual ao entry_time 2025-07-10 03:56:00
2025-07-10 03:57:09,748 INFO: 🔔 Novo candle detectado em 2025-07-10 06:57:00 UTC
2025-07-10 03:57:09,748 INFO: Buscando candle com signal_id: 7QYBVRZB
2025-07-10 03:57:09,752 INFO: Candle encontrado para o signal_id: 7QYBVRZB
2025-07-10 03:57:09,752 INFO: 🔔 Candle 1752130620 é maior que o entry_time 2025-07-10 03:56:00
2025-07-10 03:57:09,752 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 03:57:09,752 INFO: Buscando candle com signal_id: 7QYBVRZB
2025-07-10 03:57:09,755 INFO: Candle encontrado para o signal_id: 7QYBVRZB
2025-07-10 03:57:09,755 INFO: 🔄 Candle 1752130500 já existe no banco, atualizando...
2025-07-10 03:57:09,756 INFO: 🔄 Candle 1752130500 não tem gale_items
2025-07-10 03:57:09,756 INFO: Atualizando candle com filtro: {'epoch': 1752130500}, update: {'$set': {'epoch': 1752130500, 'open': 2766.396, 'high': 2766.828, 'low': 2765.644, 'close': 2765.694, 'time': datetime.datetime(2025, 7, 10, 6, 55), 'signal': {'signal_id': '7QYBVRZB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 55), 'entry_time': datetime.datetime(2025, 7, 10, 3, 56), 'open_candle_timestamp': 1752130500, 'message_id': 10124, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 03:57:09,758 INFO: Número de candles atualizados: 1
2025-07-10 03:57:09,759 INFO: ✅ Candle 1752130500 atualizado com sucesso
2025-07-10 03:57:09,759 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 03:57:09,759 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 03:57:09,759 INFO: Funcao validate_signals_for_candle iniciada para o sinal 7QYBVRZB
2025-07-10 03:57:09,759 INFO: Buscando candle com signal_id: 7QYBVRZB
2025-07-10 03:57:09,761 INFO: Candle encontrado para o signal_id: 7QYBVRZB
2025-07-10 03:57:09,762 INFO: Funcao validate_signal iniciada para o signal 7QYBVRZB
2025-07-10 03:57:09,762 INFO: Funcao validate_signal finalizada para o signal 7QYBVRZB
2025-07-10 03:57:09,762 INFO: Validando sinal 7QYBVRZB sem gale items
2025-07-10 03:57:09,762 INFO: Atualizando candle com filtro: {'signal.signal_id': '7QYBVRZB'}, update: {'$set': {'signal': {'signal_id': '7QYBVRZB', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 55), 'entry_time': datetime.datetime(2025, 7, 10, 3, 56), 'open_candle_timestamp': 1752130500, 'message_id': 10124, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 03:57:09,764 INFO: Número de candles atualizados: 1
2025-07-10 03:57:09,764 INFO: Sinal atualizado no repositório para 7QYBVRZB
2025-07-10 03:57:10,636 INFO: ✅ Resposta de resultado enviada para o sinal 7QYBVRZB
2025-07-10 03:57:10,637 INFO: Sinal 7QYBVRZB validado como WIN e notificação enviada
2025-07-10 03:57:10,637 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 7QYBVRZB
2025-07-10 03:57:10,637 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 03:58:09,786 INFO: 🔔 Novo candle detectado em 2025-07-10 06:58:00 UTC
2025-07-10 03:58:09,787 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 03:58:09,795 INFO: Buscando candle com filtro: {'epoch': 1752130680}
2025-07-10 03:58:09,798 INFO: Candle não encontrado
2025-07-10 03:58:09,812 INFO: Tendência HMA: FALL (HMA21=2767.02, HMA100=2767.31)
2025-07-10 03:58:09,813 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 03:58:09,813 INFO: 📈 Análise: EMA9=2767.21, EMA21=2767.11, trend_ema=RISE, trend_final=FALL, RSI=64.53, MACD=0.08/0.03, ATR=0.91, body=0.00, confidence=60
2025-07-10 03:58:09,813 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 03:58:09,813 INFO: Inserindo candle: Candle(2025-07-10 06:58:00, DOJI, O:2767.72, H:2767.72, L:2767.72, C:2767.72)
2025-07-10 03:58:09,817 INFO: Candle inserido com ID: 686f64811d9c27c6b2f10c43
2025-07-10 03:58:10,631 INFO: Atualizando candle com filtro: {'signal.signal_id': '2S3N6W6J'}, update: {'$set': {'signal': {'signal_id': '2S3N6W6J', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 0, 58, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 3, 59), 'open_candle_timestamp': 1752130680, 'message_id': 10127, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 03:58:10,633 INFO: Número de candles atualizados: 1
2025-07-10 03:58:10,634 INFO: ✅ Mensagem enviada ao Telegram (ID: 2S3N6W6J).
2025-07-10 03:59:09,768 INFO: 🔔 Novo candle detectado em 2025-07-10 06:59:00 UTC
2025-07-10 03:59:09,768 INFO: Buscando candle com signal_id: 2S3N6W6J
2025-07-10 03:59:09,772 INFO: Candle encontrado para o signal_id: 2S3N6W6J
2025-07-10 03:59:09,772 INFO: 🔔 Candle 1752130740 é menor ou igual ao entry_time 2025-07-10 03:59:00
2025-07-10 04:00:09,833 INFO: 🔔 Novo candle detectado em 2025-07-10 07:00:00 UTC
2025-07-10 04:00:09,834 INFO: Buscando candle com signal_id: 2S3N6W6J
2025-07-10 04:00:09,836 INFO: Candle encontrado para o signal_id: 2S3N6W6J
2025-07-10 04:00:09,836 INFO: 🔔 Candle 1752130800 é maior que o entry_time 2025-07-10 03:59:00
2025-07-10 04:00:09,836 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:00:09,837 INFO: Buscando candle com signal_id: 2S3N6W6J
2025-07-10 04:00:09,839 INFO: Candle encontrado para o signal_id: 2S3N6W6J
2025-07-10 04:00:09,840 INFO: 🔄 Candle 1752130680 já existe no banco, atualizando...
2025-07-10 04:00:09,840 INFO: 🔄 Candle 1752130680 não tem gale_items
2025-07-10 04:00:09,841 INFO: Atualizando candle com filtro: {'epoch': 1752130680}, update: {'$set': {'epoch': 1752130680, 'open': 2767.725, 'high': 2768.583, 'low': 2766.994, 'close': 2766.994, 'time': datetime.datetime(2025, 7, 10, 6, 58), 'signal': {'signal_id': '2S3N6W6J', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 58), 'entry_time': datetime.datetime(2025, 7, 10, 3, 59), 'open_candle_timestamp': 1752130680, 'message_id': 10127, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:00:09,842 INFO: Número de candles atualizados: 1
2025-07-10 04:00:09,843 INFO: ✅ Candle 1752130680 atualizado com sucesso
2025-07-10 04:00:09,843 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:00:09,843 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:00:09,843 INFO: Funcao validate_signals_for_candle iniciada para o sinal 2S3N6W6J
2025-07-10 04:00:09,843 INFO: Buscando candle com signal_id: 2S3N6W6J
2025-07-10 04:00:09,846 INFO: Candle encontrado para o signal_id: 2S3N6W6J
2025-07-10 04:00:09,846 INFO: Funcao validate_signal iniciada para o signal 2S3N6W6J
2025-07-10 04:00:09,846 INFO: Funcao validate_signal finalizada para o signal 2S3N6W6J
2025-07-10 04:00:09,846 INFO: Validando sinal 2S3N6W6J sem gale items
2025-07-10 04:00:09,847 INFO: Atualizando candle com filtro: {'signal.signal_id': '2S3N6W6J'}, update: {'$set': {'signal': {'signal_id': '2S3N6W6J', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 3, 58), 'entry_time': datetime.datetime(2025, 7, 10, 3, 59), 'open_candle_timestamp': 1752130680, 'message_id': 10127, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:00:09,849 INFO: Número de candles atualizados: 1
2025-07-10 04:00:09,849 INFO: Sinal atualizado no repositório para 2S3N6W6J
2025-07-10 04:00:10,659 INFO: ✅ Resposta de resultado enviada para o sinal 2S3N6W6J
2025-07-10 04:00:10,660 INFO: Sinal 2S3N6W6J validado como WIN e notificação enviada
2025-07-10 04:00:10,660 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 2S3N6W6J
2025-07-10 04:00:10,660 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:01:09,814 INFO: 🔔 Novo candle detectado em 2025-07-10 07:01:00 UTC
2025-07-10 04:01:09,814 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:01:09,822 INFO: Buscando candle com filtro: {'epoch': 1752130860}
2025-07-10 04:01:09,825 INFO: Candle não encontrado
2025-07-10 04:01:09,840 INFO: Tendência HMA: FALL (HMA21=2766.64, HMA100=2766.65)
2025-07-10 04:01:09,840 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:01:09,841 INFO: 📈 Análise: EMA9=2766.65, EMA21=2766.73, trend_ema=FALL, trend_final=FALL, RSI=43.84, MACD=-0.10/-0.10, ATR=1.05, body=0.00, confidence=20
2025-07-10 04:01:09,841 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 04:01:09,841 INFO: Inserindo candle: Candle(2025-07-10 07:01:00, DOJI, O:2766.50, H:2766.50, L:2766.50, C:2766.50)
2025-07-10 04:01:09,845 INFO: Candle inserido com ID: 686f65351d9c27c6b2f10c44
2025-07-10 04:01:10,661 INFO: Atualizando candle com filtro: {'signal.signal_id': '01AOV7XH'}, update: {'$set': {'signal': {'signal_id': '01AOV7XH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 1, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 2), 'open_candle_timestamp': 1752130860, 'message_id': 10129, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:01:10,664 INFO: Número de candles atualizados: 1
2025-07-10 04:01:10,665 INFO: ✅ Mensagem enviada ao Telegram (ID: 01AOV7XH).
2025-07-10 04:02:09,775 INFO: 🔔 Novo candle detectado em 2025-07-10 07:02:00 UTC
2025-07-10 04:02:09,776 INFO: Buscando candle com signal_id: 01AOV7XH
2025-07-10 04:02:09,779 INFO: Candle encontrado para o signal_id: 01AOV7XH
2025-07-10 04:02:09,780 INFO: 🔔 Candle 1752130920 é menor ou igual ao entry_time 2025-07-10 04:02:00
2025-07-10 04:03:09,786 INFO: 🔔 Novo candle detectado em 2025-07-10 07:03:00 UTC
2025-07-10 04:03:09,786 INFO: Buscando candle com signal_id: 01AOV7XH
2025-07-10 04:03:09,789 INFO: Candle encontrado para o signal_id: 01AOV7XH
2025-07-10 04:03:09,789 INFO: 🔔 Candle 1752130980 é maior que o entry_time 2025-07-10 04:02:00
2025-07-10 04:03:09,789 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:03:09,789 INFO: Buscando candle com signal_id: 01AOV7XH
2025-07-10 04:03:09,792 INFO: Candle encontrado para o signal_id: 01AOV7XH
2025-07-10 04:03:09,793 INFO: 🔄 Candle 1752130860 já existe no banco, atualizando...
2025-07-10 04:03:09,793 INFO: 🔄 Candle 1752130860 não tem gale_items
2025-07-10 04:03:09,793 INFO: Atualizando candle com filtro: {'epoch': 1752130860}, update: {'$set': {'epoch': 1752130860, 'open': 2766.503, 'high': 2766.503, 'low': 2765.459, 'close': 2765.768, 'time': datetime.datetime(2025, 7, 10, 7, 1), 'signal': {'signal_id': '01AOV7XH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 1), 'entry_time': datetime.datetime(2025, 7, 10, 4, 2), 'open_candle_timestamp': 1752130860, 'message_id': 10129, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:03:09,795 INFO: Número de candles atualizados: 1
2025-07-10 04:03:09,795 INFO: ✅ Candle 1752130860 atualizado com sucesso
2025-07-10 04:03:09,795 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:03:09,795 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:03:09,796 INFO: Funcao validate_signals_for_candle iniciada para o sinal 01AOV7XH
2025-07-10 04:03:09,796 INFO: Buscando candle com signal_id: 01AOV7XH
2025-07-10 04:03:09,798 INFO: Candle encontrado para o signal_id: 01AOV7XH
2025-07-10 04:03:09,798 INFO: Funcao validate_signal iniciada para o signal 01AOV7XH
2025-07-10 04:03:09,798 INFO: Funcao validate_signal finalizada para o signal 01AOV7XH
2025-07-10 04:03:09,798 INFO: Validando sinal 01AOV7XH sem gale items
2025-07-10 04:03:09,799 INFO: Atualizando candle com filtro: {'signal.signal_id': '01AOV7XH'}, update: {'$set': {'signal': {'signal_id': '01AOV7XH', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 1), 'entry_time': datetime.datetime(2025, 7, 10, 4, 2), 'open_candle_timestamp': 1752130860, 'message_id': 10129, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:03:09,800 INFO: Número de candles atualizados: 1
2025-07-10 04:03:09,801 INFO: Sinal atualizado no repositório para 01AOV7XH
2025-07-10 04:03:10,616 INFO: ✅ Resposta de resultado enviada para o sinal 01AOV7XH
2025-07-10 04:03:10,617 INFO: Sinal 01AOV7XH validado como WIN e notificação enviada
2025-07-10 04:03:10,617 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 01AOV7XH
2025-07-10 04:03:10,617 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:04:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 07:04:00 UTC
2025-07-10 04:04:09,764 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:04:09,772 INFO: Buscando candle com filtro: {'epoch': 1752131040}
2025-07-10 04:04:09,775 INFO: Candle não encontrado
2025-07-10 04:04:09,790 INFO: Tendência HMA: FALL (HMA21=2765.24, HMA100=2766.00)
2025-07-10 04:04:09,790 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:04:09,791 INFO: 📈 Análise: EMA9=2765.51, EMA21=2765.78, trend_ema=FALL, trend_final=FALL, RSI=34.77, MACD=-0.24/-0.16, ATR=0.81, body=0.00, confidence=60
2025-07-10 04:04:09,791 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 04:04:09,791 INFO: Inserindo candle: Candle(2025-07-10 07:04:00, DOJI, O:2765.32, H:2765.32, L:2765.32, C:2765.32)
2025-07-10 04:04:09,794 INFO: Candle inserido com ID: 686f65e91d9c27c6b2f10c45
2025-07-10 04:04:10,611 INFO: Atualizando candle com filtro: {'signal.signal_id': 'TDAJQ035'}, update: {'$set': {'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 4, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:04:10,615 INFO: Número de candles atualizados: 1
2025-07-10 04:04:10,615 INFO: ✅ Mensagem enviada ao Telegram (ID: TDAJQ035).
2025-07-10 04:05:09,785 INFO: 🔔 Novo candle detectado em 2025-07-10 07:05:00 UTC
2025-07-10 04:05:09,786 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:05:09,788 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:05:09,789 INFO: 🔔 Candle 1752131100 é menor ou igual ao entry_time 2025-07-10 04:05:00
2025-07-10 04:06:09,816 INFO: 🔔 Novo candle detectado em 2025-07-10 07:06:00 UTC
2025-07-10 04:06:09,816 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:06:09,819 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:06:09,820 INFO: 🔔 Candle 1752131160 é maior que o entry_time 2025-07-10 04:05:00
2025-07-10 04:06:09,820 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:06:09,820 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:06:09,822 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:06:09,822 INFO: 🔄 Candle 1752131040 já existe no banco, atualizando...
2025-07-10 04:06:09,822 INFO: 🔄 Candle 1752131040 não tem gale_items
2025-07-10 04:06:09,822 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:06:09,825 INFO: Número de candles atualizados: 1
2025-07-10 04:06:09,825 INFO: ✅ Candle 1752131040 atualizado com sucesso
2025-07-10 04:06:09,825 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:06:09,825 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:06:09,825 INFO: Funcao validate_signals_for_candle iniciada para o sinal TDAJQ035
2025-07-10 04:06:09,826 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:06:09,828 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:06:09,828 INFO: Funcao validate_signal iniciada para o signal TDAJQ035
2025-07-10 04:06:09,828 INFO: Funcao validate_signal finalizada para o signal TDAJQ035
2025-07-10 04:06:09,828 INFO: Validando sinal TDAJQ035 sem gale items
2025-07-10 04:06:09,829 INFO: Sinal TDAJQ035 adicionado à fila para G1
2025-07-10 04:06:09,829 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131160, 'open_price': 2767.119, 'high': 2767.119, 'low': 2767.119, 'close_price': 2767.119, 'time': datetime.datetime(2025, 7, 10, 4, 6, 9, 829061), 'result': None}]}}
2025-07-10 04:06:09,831 INFO: Número de candles atualizados: 1
2025-07-10 04:06:09,831 INFO: Candle completo com gales atualizado para TDAJQ035
2025-07-10 04:06:10,650 INFO: ✅ Resposta de resultado enviada para o sinal TDAJQ035
2025-07-10 04:06:10,650 INFO: Sinal TDAJQ035 validado como LOSS e notificação enviada
2025-07-10 04:06:10,650 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TDAJQ035
2025-07-10 04:06:10,651 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:07:09,820 INFO: 🔔 Novo candle detectado em 2025-07-10 07:07:00 UTC
2025-07-10 04:07:09,821 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:07:09,824 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:07:09,824 INFO: 🔔 Candle 1752131220 é maior que o entry_time 2025-07-10 04:05:00
2025-07-10 04:07:09,825 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:07:09,825 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:07:09,827 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:07:09,828 INFO: 🔄 Candle 1752131160 já existe no banco, atualizando...
2025-07-10 04:07:09,828 INFO: 🔄 Atualizando último gale item do candle 1752131160
2025-07-10 04:07:09,828 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131160, 'open_price': 2767.119, 'high': 2767.918, 'low': 2767.119, 'close_price': 2767.684, 'time': datetime.datetime(2025, 7, 10, 4, 6, 9, 829000), 'result': None}]}}
2025-07-10 04:07:09,831 INFO: Número de candles atualizados: 1
2025-07-10 04:07:09,831 INFO: ✅ Candle 1752131040 atualizado com sucesso
2025-07-10 04:07:09,831 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:07:09,831 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:07:09,831 INFO: Funcao validate_signals_for_candle iniciada para o sinal TDAJQ035
2025-07-10 04:07:09,832 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:07:09,833 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:07:09,834 INFO: Funcao validate_signal iniciada para o signal TDAJQ035
2025-07-10 04:07:09,834 INFO: Validando sinal TDAJQ035 com gale items
2025-07-10 04:07:09,834 INFO: Gale G1 para o sinal TDAJQ035 resultou em LOSS
2025-07-10 04:07:09,834 INFO: Sinal TDAJQ035 adicionado à fila para G2
2025-07-10 04:07:09,834 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131160, 'open_price': 2767.119, 'high': 2767.918, 'low': 2767.119, 'close_price': 2767.684, 'time': datetime.datetime(2025, 7, 10, 4, 6, 9, 829000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752131220, 'open_price': 2767.917, 'high': 2767.917, 'low': 2767.917, 'close_price': 2767.917, 'time': datetime.datetime(2025, 7, 10, 4, 7, 9, 834487), 'result': None}]}}
2025-07-10 04:07:09,837 INFO: Número de candles atualizados: 1
2025-07-10 04:07:09,837 INFO: Candle completo com gales atualizado para TDAJQ035
2025-07-10 04:07:10,640 INFO: ✅ Resposta de resultado enviada para o sinal TDAJQ035
2025-07-10 04:07:10,641 INFO: Sinal TDAJQ035 validado como LOSS e notificação enviada
2025-07-10 04:07:10,641 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TDAJQ035
2025-07-10 04:07:10,641 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:08:09,776 INFO: 🔔 Novo candle detectado em 2025-07-10 07:08:00 UTC
2025-07-10 04:08:09,776 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:08:09,779 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:08:09,779 INFO: 🔔 Candle 1752131280 é maior que o entry_time 2025-07-10 04:05:00
2025-07-10 04:08:09,779 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:08:09,780 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:08:09,781 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:08:09,782 INFO: 🔄 Candle 1752131220 já existe no banco, atualizando...
2025-07-10 04:08:09,783 INFO: 🔄 Atualizando último gale item do candle 1752131220
2025-07-10 04:08:09,783 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131160, 'open_price': 2767.119, 'high': 2767.918, 'low': 2767.119, 'close_price': 2767.684, 'time': datetime.datetime(2025, 7, 10, 4, 6, 9, 829000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752131220, 'open_price': 2767.917, 'high': 2768.158, 'low': 2766.808, 'close_price': 2767.205, 'time': datetime.datetime(2025, 7, 10, 4, 7, 9, 834000), 'result': None}]}}
2025-07-10 04:08:09,785 INFO: Número de candles atualizados: 1
2025-07-10 04:08:09,786 INFO: ✅ Candle 1752131040 atualizado com sucesso
2025-07-10 04:08:09,786 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:08:09,786 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:08:09,787 INFO: Funcao validate_signals_for_candle iniciada para o sinal TDAJQ035
2025-07-10 04:08:09,787 INFO: Buscando candle com signal_id: TDAJQ035
2025-07-10 04:08:09,789 INFO: Candle encontrado para o signal_id: TDAJQ035
2025-07-10 04:08:09,789 INFO: Funcao validate_signal iniciada para o signal TDAJQ035
2025-07-10 04:08:09,789 INFO: Validando sinal TDAJQ035 com gale items
2025-07-10 04:08:09,789 INFO: Atualizando candle com filtro: {'epoch': 1752131040}, update: {'$set': {'epoch': 1752131040, 'open': 2765.324, 'high': 2765.938, 'low': 2765.324, 'close': 2765.713, 'time': datetime.datetime(2025, 7, 10, 7, 4), 'signal': {'signal_id': 'TDAJQ035', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 4), 'entry_time': datetime.datetime(2025, 7, 10, 4, 5), 'open_candle_timestamp': 1752131040, 'message_id': 10132, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131160, 'open_price': 2767.119, 'high': 2767.918, 'low': 2767.119, 'close_price': 2767.684, 'time': datetime.datetime(2025, 7, 10, 4, 6, 9, 829000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752131220, 'open_price': 2767.917, 'high': 2768.158, 'low': 2766.808, 'close_price': 2767.205, 'time': datetime.datetime(2025, 7, 10, 4, 7, 9, 834000), 'result': 'WIN'}]}}
2025-07-10 04:08:09,792 INFO: Número de candles atualizados: 1
2025-07-10 04:08:09,792 INFO: Candle completo com gales atualizado para TDAJQ035
2025-07-10 04:08:10,666 INFO: ✅ Resposta de resultado enviada para o sinal TDAJQ035
2025-07-10 04:08:10,666 INFO: Sinal TDAJQ035 validado como LOSS e notificação enviada
2025-07-10 04:08:10,666 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TDAJQ035
2025-07-10 04:08:10,666 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:09:09,781 INFO: 🔔 Novo candle detectado em 2025-07-10 07:09:00 UTC
2025-07-10 04:09:09,781 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:09:09,789 INFO: Buscando candle com filtro: {'epoch': 1752131340}
2025-07-10 04:09:09,792 INFO: Candle não encontrado
2025-07-10 04:09:09,808 INFO: Tendência HMA: FALL (HMA21=2768.72, HMA100=2767.72)
2025-07-10 04:09:09,808 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:09:09,808 INFO: 📈 Análise: EMA9=2768.38, EMA21=2768.07, trend_ema=RISE, trend_final=FALL, RSI=63.43, MACD=0.30/0.24, ATR=0.98, body=0.00, confidence=40
2025-07-10 04:09:09,809 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 04:09:09,809 INFO: Inserindo candle: Candle(2025-07-10 07:09:00, DOJI, O:2768.41, H:2768.41, L:2768.41, C:2768.41)
2025-07-10 04:09:09,811 INFO: Candle inserido com ID: 686f67151d9c27c6b2f10c46
2025-07-10 04:09:10,603 INFO: Atualizando candle com filtro: {'signal.signal_id': '9580MOR2'}, update: {'$set': {'signal': {'signal_id': '9580MOR2', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 9, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 10), 'open_candle_timestamp': 1752131340, 'message_id': 10137, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:09:10,606 INFO: Número de candles atualizados: 1
2025-07-10 04:09:10,606 INFO: ✅ Mensagem enviada ao Telegram (ID: 9580MOR2).
2025-07-10 04:10:09,760 INFO: 🔔 Novo candle detectado em 2025-07-10 07:10:00 UTC
2025-07-10 04:10:09,760 INFO: Buscando candle com signal_id: 9580MOR2
2025-07-10 04:10:09,763 INFO: Candle encontrado para o signal_id: 9580MOR2
2025-07-10 04:10:09,763 INFO: 🔔 Candle 1752131400 é menor ou igual ao entry_time 2025-07-10 04:10:00
2025-07-10 04:11:09,770 INFO: 🔔 Novo candle detectado em 2025-07-10 07:11:00 UTC
2025-07-10 04:11:09,770 INFO: Buscando candle com signal_id: 9580MOR2
2025-07-10 04:11:09,774 INFO: Candle encontrado para o signal_id: 9580MOR2
2025-07-10 04:11:09,774 INFO: 🔔 Candle 1752131460 é maior que o entry_time 2025-07-10 04:10:00
2025-07-10 04:11:09,774 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:11:09,775 INFO: Buscando candle com signal_id: 9580MOR2
2025-07-10 04:11:09,777 INFO: Candle encontrado para o signal_id: 9580MOR2
2025-07-10 04:11:09,778 INFO: 🔄 Candle 1752131340 já existe no banco, atualizando...
2025-07-10 04:11:09,778 INFO: 🔄 Candle 1752131340 não tem gale_items
2025-07-10 04:11:09,778 INFO: Atualizando candle com filtro: {'epoch': 1752131340}, update: {'$set': {'epoch': 1752131340, 'open': 2768.41, 'high': 2768.41, 'low': 2766.294, 'close': 2766.834, 'time': datetime.datetime(2025, 7, 10, 7, 9), 'signal': {'signal_id': '9580MOR2', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 9), 'entry_time': datetime.datetime(2025, 7, 10, 4, 10), 'open_candle_timestamp': 1752131340, 'message_id': 10137, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:11:09,780 INFO: Número de candles atualizados: 1
2025-07-10 04:11:09,780 INFO: ✅ Candle 1752131340 atualizado com sucesso
2025-07-10 04:11:09,781 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:11:09,781 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:11:09,781 INFO: Funcao validate_signals_for_candle iniciada para o sinal 9580MOR2
2025-07-10 04:11:09,781 INFO: Buscando candle com signal_id: 9580MOR2
2025-07-10 04:11:09,783 INFO: Candle encontrado para o signal_id: 9580MOR2
2025-07-10 04:11:09,783 INFO: Funcao validate_signal iniciada para o signal 9580MOR2
2025-07-10 04:11:09,783 INFO: Funcao validate_signal finalizada para o signal 9580MOR2
2025-07-10 04:11:09,784 INFO: Validando sinal 9580MOR2 sem gale items
2025-07-10 04:11:09,784 INFO: Atualizando candle com filtro: {'signal.signal_id': '9580MOR2'}, update: {'$set': {'signal': {'signal_id': '9580MOR2', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 9), 'entry_time': datetime.datetime(2025, 7, 10, 4, 10), 'open_candle_timestamp': 1752131340, 'message_id': 10137, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:11:09,786 INFO: Número de candles atualizados: 1
2025-07-10 04:11:09,786 INFO: Sinal atualizado no repositório para 9580MOR2
2025-07-10 04:11:10,586 INFO: ✅ Resposta de resultado enviada para o sinal 9580MOR2
2025-07-10 04:11:10,587 INFO: Sinal 9580MOR2 validado como WIN e notificação enviada
2025-07-10 04:11:10,587 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 9580MOR2
2025-07-10 04:11:10,587 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:12:09,769 INFO: 🔔 Novo candle detectado em 2025-07-10 07:12:00 UTC
2025-07-10 04:12:09,769 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:12:09,778 INFO: Buscando candle com filtro: {'epoch': 1752131520}
2025-07-10 04:12:09,781 INFO: Candle não encontrado
2025-07-10 04:12:09,796 INFO: Tendência HMA: FALL (HMA21=2767.37, HMA100=2767.60)
2025-07-10 04:12:09,797 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:12:09,797 INFO: 📈 Análise: EMA9=2767.31, EMA21=2767.38, trend_ema=FALL, trend_final=FALL, RSI=38.98, MACD=-0.05/0.01, ATR=0.56, body=0.00, confidence=80
2025-07-10 04:12:09,797 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 04:12:09,797 INFO: Inserindo candle: Candle(2025-07-10 07:12:00, DOJI, O:2766.95, H:2766.95, L:2766.95, C:2766.95)
2025-07-10 04:12:09,800 INFO: Candle inserido com ID: 686f67c91d9c27c6b2f10c47
2025-07-10 04:12:10,613 INFO: Atualizando candle com filtro: {'signal.signal_id': 'JTWIHSET'}, update: {'$set': {'signal': {'signal_id': 'JTWIHSET', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 12, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 13), 'open_candle_timestamp': 1752131520, 'message_id': 10139, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:12:10,616 INFO: Número de candles atualizados: 1
2025-07-10 04:12:10,616 INFO: ✅ Mensagem enviada ao Telegram (ID: JTWIHSET).
2025-07-10 04:13:09,758 INFO: 🔔 Novo candle detectado em 2025-07-10 07:13:00 UTC
2025-07-10 04:13:09,759 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:13:09,762 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:13:09,762 INFO: 🔔 Candle 1752131580 é menor ou igual ao entry_time 2025-07-10 04:13:00
2025-07-10 04:14:09,810 INFO: 🔔 Novo candle detectado em 2025-07-10 07:14:00 UTC
2025-07-10 04:14:09,811 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:14:09,814 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:14:09,815 INFO: 🔔 Candle 1752131640 é maior que o entry_time 2025-07-10 04:13:00
2025-07-10 04:14:09,815 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:14:09,815 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:14:09,818 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:14:09,818 INFO: 🔄 Candle 1752131520 já existe no banco, atualizando...
2025-07-10 04:14:09,818 INFO: 🔄 Candle 1752131520 não tem gale_items
2025-07-10 04:14:09,818 INFO: Atualizando candle com filtro: {'epoch': 1752131520}, update: {'$set': {'epoch': 1752131520, 'open': 2766.95, 'high': 2767.722, 'low': 2766.918, 'close': 2767.722, 'time': datetime.datetime(2025, 7, 10, 7, 12), 'signal': {'signal_id': 'JTWIHSET', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 12), 'entry_time': datetime.datetime(2025, 7, 10, 4, 13), 'open_candle_timestamp': 1752131520, 'message_id': 10139, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:14:09,821 INFO: Número de candles atualizados: 1
2025-07-10 04:14:09,821 INFO: ✅ Candle 1752131520 atualizado com sucesso
2025-07-10 04:14:09,821 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:14:09,821 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:14:09,822 INFO: Funcao validate_signals_for_candle iniciada para o sinal JTWIHSET
2025-07-10 04:14:09,822 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:14:09,824 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:14:09,824 INFO: Funcao validate_signal iniciada para o signal JTWIHSET
2025-07-10 04:14:09,824 INFO: Funcao validate_signal finalizada para o signal JTWIHSET
2025-07-10 04:14:09,824 INFO: Validando sinal JTWIHSET sem gale items
2025-07-10 04:14:09,825 INFO: Sinal JTWIHSET adicionado à fila para G1
2025-07-10 04:14:09,825 INFO: Atualizando candle com filtro: {'epoch': 1752131520}, update: {'$set': {'epoch': 1752131520, 'open': 2766.95, 'high': 2767.722, 'low': 2766.918, 'close': 2767.722, 'time': datetime.datetime(2025, 7, 10, 7, 12), 'signal': {'signal_id': 'JTWIHSET', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 12), 'entry_time': datetime.datetime(2025, 7, 10, 4, 13), 'open_candle_timestamp': 1752131520, 'message_id': 10139, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131640, 'open_price': 2768.142, 'high': 2768.142, 'low': 2768.142, 'close_price': 2768.142, 'time': datetime.datetime(2025, 7, 10, 4, 14, 9, 825059), 'result': None}]}}
2025-07-10 04:14:09,827 INFO: Número de candles atualizados: 1
2025-07-10 04:14:09,827 INFO: Candle completo com gales atualizado para JTWIHSET
2025-07-10 04:14:10,728 INFO: ✅ Resposta de resultado enviada para o sinal JTWIHSET
2025-07-10 04:14:10,728 INFO: Sinal JTWIHSET validado como LOSS e notificação enviada
2025-07-10 04:14:10,729 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal JTWIHSET
2025-07-10 04:14:10,729 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:15:09,790 INFO: 🔔 Novo candle detectado em 2025-07-10 07:15:00 UTC
2025-07-10 04:15:09,790 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:15:09,794 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:15:09,794 INFO: 🔔 Candle 1752131700 é maior que o entry_time 2025-07-10 04:13:00
2025-07-10 04:15:09,794 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:15:09,794 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:15:09,797 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:15:09,797 INFO: 🔄 Candle 1752131640 já existe no banco, atualizando...
2025-07-10 04:15:09,797 INFO: 🔄 Atualizando último gale item do candle 1752131640
2025-07-10 04:15:09,797 INFO: Atualizando candle com filtro: {'epoch': 1752131520}, update: {'$set': {'epoch': 1752131520, 'open': 2766.95, 'high': 2767.722, 'low': 2766.918, 'close': 2767.722, 'time': datetime.datetime(2025, 7, 10, 7, 12), 'signal': {'signal_id': 'JTWIHSET', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 12), 'entry_time': datetime.datetime(2025, 7, 10, 4, 13), 'open_candle_timestamp': 1752131520, 'message_id': 10139, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131640, 'open_price': 2768.142, 'high': 2768.625, 'low': 2767.421, 'close_price': 2767.421, 'time': datetime.datetime(2025, 7, 10, 4, 14, 9, 825000), 'result': None}]}}
2025-07-10 04:15:09,800 INFO: Número de candles atualizados: 1
2025-07-10 04:15:09,800 INFO: ✅ Candle 1752131520 atualizado com sucesso
2025-07-10 04:15:09,800 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:15:09,800 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:15:09,801 INFO: Funcao validate_signals_for_candle iniciada para o sinal JTWIHSET
2025-07-10 04:15:09,801 INFO: Buscando candle com signal_id: JTWIHSET
2025-07-10 04:15:09,802 INFO: Candle encontrado para o signal_id: JTWIHSET
2025-07-10 04:15:09,803 INFO: Funcao validate_signal iniciada para o signal JTWIHSET
2025-07-10 04:15:09,803 INFO: Validando sinal JTWIHSET com gale items
2025-07-10 04:15:09,804 INFO: Atualizando candle com filtro: {'epoch': 1752131520}, update: {'$set': {'epoch': 1752131520, 'open': 2766.95, 'high': 2767.722, 'low': 2766.918, 'close': 2767.722, 'time': datetime.datetime(2025, 7, 10, 7, 12), 'signal': {'signal_id': 'JTWIHSET', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 12), 'entry_time': datetime.datetime(2025, 7, 10, 4, 13), 'open_candle_timestamp': 1752131520, 'message_id': 10139, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752131640, 'open_price': 2768.142, 'high': 2768.625, 'low': 2767.421, 'close_price': 2767.421, 'time': datetime.datetime(2025, 7, 10, 4, 14, 9, 825000), 'result': 'WIN'}]}}
2025-07-10 04:15:09,805 INFO: Número de candles atualizados: 1
2025-07-10 04:15:09,806 INFO: Candle completo com gales atualizado para JTWIHSET
2025-07-10 04:15:10,629 INFO: ✅ Resposta de resultado enviada para o sinal JTWIHSET
2025-07-10 04:15:10,630 INFO: Sinal JTWIHSET validado como LOSS e notificação enviada
2025-07-10 04:15:10,630 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal JTWIHSET
2025-07-10 04:15:10,630 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:16:09,793 INFO: 🔔 Novo candle detectado em 2025-07-10 07:16:00 UTC
2025-07-10 04:16:09,793 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:16:09,801 INFO: Buscando candle com filtro: {'epoch': 1752131760}
2025-07-10 04:16:09,804 INFO: Candle não encontrado
2025-07-10 04:16:09,819 INFO: Tendência HMA: FALL (HMA21=2766.64, HMA100=2766.50)
2025-07-10 04:16:09,820 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:16:09,820 INFO: 📈 Análise: EMA9=2766.61, EMA21=2766.68, trend_ema=FALL, trend_final=FALL, RSI=46.36, MACD=-0.12/-0.15, ATR=0.94, body=0.00, confidence=20
2025-07-10 04:16:09,820 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 04:16:09,821 INFO: Inserindo candle: Candle(2025-07-10 07:16:00, DOJI, O:2766.61, H:2766.61, L:2766.61, C:2766.61)
2025-07-10 04:16:09,823 INFO: Candle inserido com ID: 686f68b91d9c27c6b2f10c48
2025-07-10 04:16:10,624 INFO: Atualizando candle com filtro: {'signal.signal_id': '1HEONBP1'}, update: {'$set': {'signal': {'signal_id': '1HEONBP1', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 16, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 17), 'open_candle_timestamp': 1752131760, 'message_id': 10143, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:16:10,627 INFO: Número de candles atualizados: 1
2025-07-10 04:16:10,628 INFO: ✅ Mensagem enviada ao Telegram (ID: 1HEONBP1).
2025-07-10 04:17:09,816 INFO: 🔔 Novo candle detectado em 2025-07-10 07:17:00 UTC
2025-07-10 04:17:09,816 INFO: Buscando candle com signal_id: 1HEONBP1
2025-07-10 04:17:09,819 INFO: Candle encontrado para o signal_id: 1HEONBP1
2025-07-10 04:17:09,819 INFO: 🔔 Candle 1752131820 é menor ou igual ao entry_time 2025-07-10 04:17:00
2025-07-10 04:18:09,763 INFO: 🔔 Novo candle detectado em 2025-07-10 07:18:00 UTC
2025-07-10 04:18:09,764 INFO: Buscando candle com signal_id: 1HEONBP1
2025-07-10 04:18:09,767 INFO: Candle encontrado para o signal_id: 1HEONBP1
2025-07-10 04:18:09,767 INFO: 🔔 Candle 1752131880 é maior que o entry_time 2025-07-10 04:17:00
2025-07-10 04:18:09,768 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:18:09,768 INFO: Buscando candle com signal_id: 1HEONBP1
2025-07-10 04:18:09,770 INFO: Candle encontrado para o signal_id: 1HEONBP1
2025-07-10 04:18:09,770 INFO: 🔄 Candle 1752131760 já existe no banco, atualizando...
2025-07-10 04:18:09,770 INFO: 🔄 Candle 1752131760 não tem gale_items
2025-07-10 04:18:09,770 INFO: Atualizando candle com filtro: {'epoch': 1752131760}, update: {'$set': {'epoch': 1752131760, 'open': 2766.614, 'high': 2766.677, 'low': 2765.433, 'close': 2766.318, 'time': datetime.datetime(2025, 7, 10, 7, 16), 'signal': {'signal_id': '1HEONBP1', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 16), 'entry_time': datetime.datetime(2025, 7, 10, 4, 17), 'open_candle_timestamp': 1752131760, 'message_id': 10143, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:18:09,773 INFO: Número de candles atualizados: 1
2025-07-10 04:18:09,773 INFO: ✅ Candle 1752131760 atualizado com sucesso
2025-07-10 04:18:09,773 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:18:09,774 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:18:09,774 INFO: Funcao validate_signals_for_candle iniciada para o sinal 1HEONBP1
2025-07-10 04:18:09,774 INFO: Buscando candle com signal_id: 1HEONBP1
2025-07-10 04:18:09,776 INFO: Candle encontrado para o signal_id: 1HEONBP1
2025-07-10 04:18:09,776 INFO: Funcao validate_signal iniciada para o signal 1HEONBP1
2025-07-10 04:18:09,776 INFO: Funcao validate_signal finalizada para o signal 1HEONBP1
2025-07-10 04:18:09,776 INFO: Validando sinal 1HEONBP1 sem gale items
2025-07-10 04:18:09,776 INFO: Atualizando candle com filtro: {'signal.signal_id': '1HEONBP1'}, update: {'$set': {'signal': {'signal_id': '1HEONBP1', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 16), 'entry_time': datetime.datetime(2025, 7, 10, 4, 17), 'open_candle_timestamp': 1752131760, 'message_id': 10143, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:18:09,779 INFO: Número de candles atualizados: 1
2025-07-10 04:18:09,779 INFO: Sinal atualizado no repositório para 1HEONBP1
2025-07-10 04:18:10,583 INFO: ✅ Resposta de resultado enviada para o sinal 1HEONBP1
2025-07-10 04:18:10,584 INFO: Sinal 1HEONBP1 validado como WIN e notificação enviada
2025-07-10 04:18:10,584 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 1HEONBP1
2025-07-10 04:18:10,584 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:19:09,803 INFO: 🔔 Novo candle detectado em 2025-07-10 07:19:00 UTC
2025-07-10 04:19:09,803 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:19:09,811 INFO: Buscando candle com filtro: {'epoch': 1752131940}
2025-07-10 04:19:09,815 INFO: Candle não encontrado
2025-07-10 04:19:09,830 INFO: Tendência HMA: FALL (HMA21=2766.07, HMA100=2765.81)
2025-07-10 04:19:09,830 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:19:09,830 INFO: 📈 Análise: EMA9=2765.89, EMA21=2765.87, trend_ema=RISE, trend_final=FALL, RSI=47.11, MACD=-0.01/-0.05, ATR=0.96, body=0.00, confidence=40
2025-07-10 04:19:09,831 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 04:19:09,831 INFO: Inserindo candle: Candle(2025-07-10 07:19:00, DOJI, O:2765.77, H:2765.77, L:2765.77, C:2765.77)
2025-07-10 04:19:09,834 INFO: Candle inserido com ID: 686f696d1d9c27c6b2f10c49
2025-07-10 04:19:10,717 INFO: Atualizando candle com filtro: {'signal.signal_id': 'T25MSQGS'}, update: {'$set': {'signal': {'signal_id': 'T25MSQGS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 19, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 20), 'open_candle_timestamp': 1752131940, 'message_id': 10146, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:19:10,721 INFO: Número de candles atualizados: 1
2025-07-10 04:19:10,721 INFO: ✅ Mensagem enviada ao Telegram (ID: T25MSQGS).
2025-07-10 04:20:09,843 INFO: 🔔 Novo candle detectado em 2025-07-10 07:20:00 UTC
2025-07-10 04:20:09,843 INFO: Buscando candle com signal_id: T25MSQGS
2025-07-10 04:20:09,846 INFO: Candle encontrado para o signal_id: T25MSQGS
2025-07-10 04:20:09,847 INFO: 🔔 Candle 1752132000 é menor ou igual ao entry_time 2025-07-10 04:20:00
2025-07-10 04:21:09,760 INFO: 🔔 Novo candle detectado em 2025-07-10 07:21:00 UTC
2025-07-10 04:21:09,760 INFO: Buscando candle com signal_id: T25MSQGS
2025-07-10 04:21:09,763 INFO: Candle encontrado para o signal_id: T25MSQGS
2025-07-10 04:21:09,763 INFO: 🔔 Candle 1752132060 é maior que o entry_time 2025-07-10 04:20:00
2025-07-10 04:21:09,763 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:21:09,764 INFO: Buscando candle com signal_id: T25MSQGS
2025-07-10 04:21:09,766 INFO: Candle encontrado para o signal_id: T25MSQGS
2025-07-10 04:21:09,766 INFO: 🔄 Candle 1752131940 já existe no banco, atualizando...
2025-07-10 04:21:09,767 INFO: 🔄 Candle 1752131940 não tem gale_items
2025-07-10 04:21:09,767 INFO: Atualizando candle com filtro: {'epoch': 1752131940}, update: {'$set': {'epoch': 1752131940, 'open': 2765.768, 'high': 2765.893, 'low': 2764.986, 'close': 2765.44, 'time': datetime.datetime(2025, 7, 10, 7, 19), 'signal': {'signal_id': 'T25MSQGS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 19), 'entry_time': datetime.datetime(2025, 7, 10, 4, 20), 'open_candle_timestamp': 1752131940, 'message_id': 10146, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:21:09,769 INFO: Número de candles atualizados: 1
2025-07-10 04:21:09,769 INFO: ✅ Candle 1752131940 atualizado com sucesso
2025-07-10 04:21:09,769 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:21:09,770 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:21:09,770 INFO: Funcao validate_signals_for_candle iniciada para o sinal T25MSQGS
2025-07-10 04:21:09,770 INFO: Buscando candle com signal_id: T25MSQGS
2025-07-10 04:21:09,772 INFO: Candle encontrado para o signal_id: T25MSQGS
2025-07-10 04:21:09,772 INFO: Funcao validate_signal iniciada para o signal T25MSQGS
2025-07-10 04:21:09,773 INFO: Funcao validate_signal finalizada para o signal T25MSQGS
2025-07-10 04:21:09,773 INFO: Validando sinal T25MSQGS sem gale items
2025-07-10 04:21:09,773 INFO: Atualizando candle com filtro: {'signal.signal_id': 'T25MSQGS'}, update: {'$set': {'signal': {'signal_id': 'T25MSQGS', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 19), 'entry_time': datetime.datetime(2025, 7, 10, 4, 20), 'open_candle_timestamp': 1752131940, 'message_id': 10146, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:21:09,775 INFO: Número de candles atualizados: 1
2025-07-10 04:21:09,775 INFO: Sinal atualizado no repositório para T25MSQGS
2025-07-10 04:21:10,608 INFO: ✅ Resposta de resultado enviada para o sinal T25MSQGS
2025-07-10 04:21:10,608 INFO: Sinal T25MSQGS validado como WIN e notificação enviada
2025-07-10 04:21:10,609 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal T25MSQGS
2025-07-10 04:21:10,609 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:22:09,815 INFO: 🔔 Novo candle detectado em 2025-07-10 07:22:00 UTC
2025-07-10 04:22:09,816 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:22:09,824 INFO: Buscando candle com filtro: {'epoch': 1752132120}
2025-07-10 04:22:09,827 INFO: Candle não encontrado
2025-07-10 04:22:09,841 INFO: Tendência HMA: FALL (HMA21=2767.37, HMA100=2765.99)
2025-07-10 04:22:09,841 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:22:09,842 INFO: 📈 Análise: EMA9=2766.94, EMA21=2766.44, trend_ema=RISE, trend_final=FALL, RSI=78.78, MACD=0.47/0.34, ATR=1.15, body=0.00, confidence=80
2025-07-10 04:22:09,842 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 04:22:09,842 INFO: Inserindo candle: Candle(2025-07-10 07:22:00, DOJI, O:2767.46, H:2767.46, L:2767.46, C:2767.46)
2025-07-10 04:22:09,845 INFO: Candle inserido com ID: 686f6a211d9c27c6b2f10c4a
2025-07-10 04:22:10,653 INFO: Atualizando candle com filtro: {'signal.signal_id': 'RUJXG6YA'}, update: {'$set': {'signal': {'signal_id': 'RUJXG6YA', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 22, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 23), 'open_candle_timestamp': 1752132120, 'message_id': 10148, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:22:10,656 INFO: Número de candles atualizados: 1
2025-07-10 04:22:10,656 INFO: ✅ Mensagem enviada ao Telegram (ID: RUJXG6YA).
2025-07-10 04:23:09,815 INFO: 🔔 Novo candle detectado em 2025-07-10 07:23:00 UTC
2025-07-10 04:23:09,816 INFO: Buscando candle com signal_id: RUJXG6YA
2025-07-10 04:23:09,818 INFO: Candle encontrado para o signal_id: RUJXG6YA
2025-07-10 04:23:09,818 INFO: 🔔 Candle 1752132180 é menor ou igual ao entry_time 2025-07-10 04:23:00
2025-07-10 04:24:09,819 INFO: 🔔 Novo candle detectado em 2025-07-10 07:24:00 UTC
2025-07-10 04:24:09,819 INFO: Buscando candle com signal_id: RUJXG6YA
2025-07-10 04:24:09,822 INFO: Candle encontrado para o signal_id: RUJXG6YA
2025-07-10 04:24:09,822 INFO: 🔔 Candle 1752132240 é maior que o entry_time 2025-07-10 04:23:00
2025-07-10 04:24:09,822 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:24:09,822 INFO: Buscando candle com signal_id: RUJXG6YA
2025-07-10 04:24:09,826 INFO: Candle encontrado para o signal_id: RUJXG6YA
2025-07-10 04:24:09,826 INFO: 🔄 Candle 1752132120 já existe no banco, atualizando...
2025-07-10 04:24:09,826 INFO: 🔄 Candle 1752132120 não tem gale_items
2025-07-10 04:24:09,827 INFO: Atualizando candle com filtro: {'epoch': 1752132120}, update: {'$set': {'epoch': 1752132120, 'open': 2767.458, 'high': 2767.458, 'low': 2766.204, 'close': 2766.652, 'time': datetime.datetime(2025, 7, 10, 7, 22), 'signal': {'signal_id': 'RUJXG6YA', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 22), 'entry_time': datetime.datetime(2025, 7, 10, 4, 23), 'open_candle_timestamp': 1752132120, 'message_id': 10148, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:24:09,829 INFO: Número de candles atualizados: 1
2025-07-10 04:24:09,829 INFO: ✅ Candle 1752132120 atualizado com sucesso
2025-07-10 04:24:09,829 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:24:09,829 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:24:09,829 INFO: Funcao validate_signals_for_candle iniciada para o sinal RUJXG6YA
2025-07-10 04:24:09,829 INFO: Buscando candle com signal_id: RUJXG6YA
2025-07-10 04:24:09,831 INFO: Candle encontrado para o signal_id: RUJXG6YA
2025-07-10 04:24:09,832 INFO: Funcao validate_signal iniciada para o signal RUJXG6YA
2025-07-10 04:24:09,832 INFO: Funcao validate_signal finalizada para o signal RUJXG6YA
2025-07-10 04:24:09,832 INFO: Validando sinal RUJXG6YA sem gale items
2025-07-10 04:24:09,832 INFO: Atualizando candle com filtro: {'signal.signal_id': 'RUJXG6YA'}, update: {'$set': {'signal': {'signal_id': 'RUJXG6YA', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 22), 'entry_time': datetime.datetime(2025, 7, 10, 4, 23), 'open_candle_timestamp': 1752132120, 'message_id': 10148, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:24:09,834 INFO: Número de candles atualizados: 1
2025-07-10 04:24:09,834 INFO: Sinal atualizado no repositório para RUJXG6YA
2025-07-10 04:24:10,650 INFO: ✅ Resposta de resultado enviada para o sinal RUJXG6YA
2025-07-10 04:24:10,651 INFO: Sinal RUJXG6YA validado como WIN e notificação enviada
2025-07-10 04:24:10,651 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal RUJXG6YA
2025-07-10 04:24:10,651 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:25:09,821 INFO: 🔔 Novo candle detectado em 2025-07-10 07:25:00 UTC
2025-07-10 04:25:09,822 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:25:09,830 INFO: Buscando candle com filtro: {'epoch': 1752132300}
2025-07-10 04:25:09,833 INFO: Candle não encontrado
2025-07-10 04:25:09,848 INFO: Tendência HMA: FALL (HMA21=2766.73, HMA100=2766.31)
2025-07-10 04:25:09,849 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:25:09,849 INFO: 📈 Análise: EMA9=2766.75, EMA21=2766.58, trend_ema=RISE, trend_final=FALL, RSI=65.92, MACD=0.18/0.15, ATR=0.89, body=0.00, confidence=60
2025-07-10 04:25:09,849 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 04:25:09,849 INFO: Inserindo candle: Candle(2025-07-10 07:25:00, DOJI, O:2767.10, H:2767.10, L:2767.10, C:2767.10)
2025-07-10 04:25:09,852 INFO: Candle inserido com ID: 686f6ad51d9c27c6b2f10c4b
2025-07-10 04:25:10,668 INFO: Atualizando candle com filtro: {'signal.signal_id': 'TKF51KN7'}, update: {'$set': {'signal': {'signal_id': 'TKF51KN7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 25, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 26), 'open_candle_timestamp': 1752132300, 'message_id': 10150, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:25:10,671 INFO: Número de candles atualizados: 1
2025-07-10 04:25:10,672 INFO: ✅ Mensagem enviada ao Telegram (ID: TKF51KN7).
2025-07-10 04:26:09,857 INFO: 🔔 Novo candle detectado em 2025-07-10 07:26:00 UTC
2025-07-10 04:26:09,857 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:26:09,860 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:26:09,861 INFO: 🔔 Candle 1752132360 é menor ou igual ao entry_time 2025-07-10 04:26:00
2025-07-10 04:27:09,773 INFO: 🔔 Novo candle detectado em 2025-07-10 07:27:00 UTC
2025-07-10 04:27:09,773 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:27:09,776 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:27:09,777 INFO: 🔔 Candle 1752132420 é maior que o entry_time 2025-07-10 04:26:00
2025-07-10 04:27:09,777 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:27:09,777 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:27:09,780 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:27:09,780 INFO: 🔄 Candle 1752132300 já existe no banco, atualizando...
2025-07-10 04:27:09,780 INFO: 🔄 Candle 1752132300 não tem gale_items
2025-07-10 04:27:09,781 INFO: Atualizando candle com filtro: {'epoch': 1752132300}, update: {'$set': {'epoch': 1752132300, 'open': 2767.097, 'high': 2767.492, 'low': 2766.333, 'close': 2767.492, 'time': datetime.datetime(2025, 7, 10, 7, 25), 'signal': {'signal_id': 'TKF51KN7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 25), 'entry_time': datetime.datetime(2025, 7, 10, 4, 26), 'open_candle_timestamp': 1752132300, 'message_id': 10150, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:27:09,783 INFO: Número de candles atualizados: 1
2025-07-10 04:27:09,783 INFO: ✅ Candle 1752132300 atualizado com sucesso
2025-07-10 04:27:09,783 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:27:09,784 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:27:09,784 INFO: Funcao validate_signals_for_candle iniciada para o sinal TKF51KN7
2025-07-10 04:27:09,784 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:27:09,786 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:27:09,786 INFO: Funcao validate_signal iniciada para o signal TKF51KN7
2025-07-10 04:27:09,787 INFO: Funcao validate_signal finalizada para o signal TKF51KN7
2025-07-10 04:27:09,787 INFO: Validando sinal TKF51KN7 sem gale items
2025-07-10 04:27:09,787 INFO: Sinal TKF51KN7 adicionado à fila para G1
2025-07-10 04:27:09,787 INFO: Atualizando candle com filtro: {'epoch': 1752132300}, update: {'$set': {'epoch': 1752132300, 'open': 2767.097, 'high': 2767.492, 'low': 2766.333, 'close': 2767.492, 'time': datetime.datetime(2025, 7, 10, 7, 25), 'signal': {'signal_id': 'TKF51KN7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 25), 'entry_time': datetime.datetime(2025, 7, 10, 4, 26), 'open_candle_timestamp': 1752132300, 'message_id': 10150, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132420, 'open_price': 2767.05, 'high': 2767.05, 'low': 2767.05, 'close_price': 2767.05, 'time': datetime.datetime(2025, 7, 10, 4, 27, 9, 787283), 'result': None}]}}
2025-07-10 04:27:09,789 INFO: Número de candles atualizados: 1
2025-07-10 04:27:09,789 INFO: Candle completo com gales atualizado para TKF51KN7
2025-07-10 04:27:10,666 INFO: ✅ Resposta de resultado enviada para o sinal TKF51KN7
2025-07-10 04:27:10,666 INFO: Sinal TKF51KN7 validado como LOSS e notificação enviada
2025-07-10 04:27:10,666 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TKF51KN7
2025-07-10 04:27:10,667 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:28:09,824 INFO: 🔔 Novo candle detectado em 2025-07-10 07:28:00 UTC
2025-07-10 04:28:09,825 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:28:09,828 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:28:09,828 INFO: 🔔 Candle 1752132480 é maior que o entry_time 2025-07-10 04:26:00
2025-07-10 04:28:09,828 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:28:09,829 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:28:09,831 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:28:09,831 INFO: 🔄 Candle 1752132420 já existe no banco, atualizando...
2025-07-10 04:28:09,831 INFO: 🔄 Atualizando último gale item do candle 1752132420
2025-07-10 04:28:09,831 INFO: Atualizando candle com filtro: {'epoch': 1752132300}, update: {'$set': {'epoch': 1752132300, 'open': 2767.097, 'high': 2767.492, 'low': 2766.333, 'close': 2767.492, 'time': datetime.datetime(2025, 7, 10, 7, 25), 'signal': {'signal_id': 'TKF51KN7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 25), 'entry_time': datetime.datetime(2025, 7, 10, 4, 26), 'open_candle_timestamp': 1752132300, 'message_id': 10150, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132420, 'open_price': 2767.05, 'high': 2767.314, 'low': 2765.698, 'close_price': 2765.754, 'time': datetime.datetime(2025, 7, 10, 4, 27, 9, 787000), 'result': None}]}}
2025-07-10 04:28:09,833 INFO: Número de candles atualizados: 1
2025-07-10 04:28:09,835 INFO: ✅ Candle 1752132300 atualizado com sucesso
2025-07-10 04:28:09,835 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:28:09,835 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:28:09,835 INFO: Funcao validate_signals_for_candle iniciada para o sinal TKF51KN7
2025-07-10 04:28:09,835 INFO: Buscando candle com signal_id: TKF51KN7
2025-07-10 04:28:09,837 INFO: Candle encontrado para o signal_id: TKF51KN7
2025-07-10 04:28:09,837 INFO: Funcao validate_signal iniciada para o signal TKF51KN7
2025-07-10 04:28:09,837 INFO: Validando sinal TKF51KN7 com gale items
2025-07-10 04:28:09,838 INFO: Atualizando candle com filtro: {'epoch': 1752132300}, update: {'$set': {'epoch': 1752132300, 'open': 2767.097, 'high': 2767.492, 'low': 2766.333, 'close': 2767.492, 'time': datetime.datetime(2025, 7, 10, 7, 25), 'signal': {'signal_id': 'TKF51KN7', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 25), 'entry_time': datetime.datetime(2025, 7, 10, 4, 26), 'open_candle_timestamp': 1752132300, 'message_id': 10150, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132420, 'open_price': 2767.05, 'high': 2767.314, 'low': 2765.698, 'close_price': 2765.754, 'time': datetime.datetime(2025, 7, 10, 4, 27, 9, 787000), 'result': 'WIN'}]}}
2025-07-10 04:28:09,840 INFO: Número de candles atualizados: 1
2025-07-10 04:28:09,840 INFO: Candle completo com gales atualizado para TKF51KN7
2025-07-10 04:28:10,656 INFO: ✅ Resposta de resultado enviada para o sinal TKF51KN7
2025-07-10 04:28:10,656 INFO: Sinal TKF51KN7 validado como LOSS e notificação enviada
2025-07-10 04:28:10,656 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal TKF51KN7
2025-07-10 04:28:10,657 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:29:09,790 INFO: 🔔 Novo candle detectado em 2025-07-10 07:29:00 UTC
2025-07-10 04:29:09,791 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:29:09,799 INFO: Buscando candle com filtro: {'epoch': 1752132540}
2025-07-10 04:29:09,802 INFO: Candle não encontrado
2025-07-10 04:29:09,817 INFO: Tendência HMA: FALL (HMA21=2766.45, HMA100=2765.96)
2025-07-10 04:29:09,817 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:29:09,818 INFO: 📈 Análise: EMA9=2766.39, EMA21=2766.29, trend_ema=RISE, trend_final=FALL, RSI=59.15, MACD=0.07/0.01, ATR=0.65, body=0.00, confidence=60
2025-07-10 04:29:09,818 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 04:29:09,818 INFO: Inserindo candle: Candle(2025-07-10 07:29:00, DOJI, O:2766.51, H:2766.51, L:2766.51, C:2766.51)
2025-07-10 04:29:09,821 INFO: Candle inserido com ID: 686f6bc51d9c27c6b2f10c4c
2025-07-10 04:29:10,638 INFO: Atualizando candle com filtro: {'signal.signal_id': '3SZNXSUE'}, update: {'$set': {'signal': {'signal_id': '3SZNXSUE', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 29, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 30), 'open_candle_timestamp': 1752132540, 'message_id': 10154, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:29:10,641 INFO: Número de candles atualizados: 1
2025-07-10 04:29:10,641 INFO: ✅ Mensagem enviada ao Telegram (ID: 3SZNXSUE).
2025-07-10 04:30:09,822 INFO: 🔔 Novo candle detectado em 2025-07-10 07:30:00 UTC
2025-07-10 04:30:09,822 INFO: Buscando candle com signal_id: 3SZNXSUE
2025-07-10 04:30:09,825 INFO: Candle encontrado para o signal_id: 3SZNXSUE
2025-07-10 04:30:09,825 INFO: 🔔 Candle 1752132600 é menor ou igual ao entry_time 2025-07-10 04:30:00
2025-07-10 04:31:09,784 INFO: 🔔 Novo candle detectado em 2025-07-10 07:31:00 UTC
2025-07-10 04:31:09,784 INFO: Buscando candle com signal_id: 3SZNXSUE
2025-07-10 04:31:09,787 INFO: Candle encontrado para o signal_id: 3SZNXSUE
2025-07-10 04:31:09,788 INFO: 🔔 Candle 1752132660 é maior que o entry_time 2025-07-10 04:30:00
2025-07-10 04:31:09,788 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:31:09,788 INFO: Buscando candle com signal_id: 3SZNXSUE
2025-07-10 04:31:09,790 INFO: Candle encontrado para o signal_id: 3SZNXSUE
2025-07-10 04:31:09,791 INFO: 🔄 Candle 1752132540 já existe no banco, atualizando...
2025-07-10 04:31:09,791 INFO: 🔄 Candle 1752132540 não tem gale_items
2025-07-10 04:31:09,791 INFO: Atualizando candle com filtro: {'epoch': 1752132540}, update: {'$set': {'epoch': 1752132540, 'open': 2766.515, 'high': 2766.747, 'low': 2764.984, 'close': 2765.142, 'time': datetime.datetime(2025, 7, 10, 7, 29), 'signal': {'signal_id': '3SZNXSUE', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 29), 'entry_time': datetime.datetime(2025, 7, 10, 4, 30), 'open_candle_timestamp': 1752132540, 'message_id': 10154, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:31:09,793 INFO: Número de candles atualizados: 1
2025-07-10 04:31:09,793 INFO: ✅ Candle 1752132540 atualizado com sucesso
2025-07-10 04:31:09,793 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:31:09,794 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:31:09,794 INFO: Funcao validate_signals_for_candle iniciada para o sinal 3SZNXSUE
2025-07-10 04:31:09,794 INFO: Buscando candle com signal_id: 3SZNXSUE
2025-07-10 04:31:09,796 INFO: Candle encontrado para o signal_id: 3SZNXSUE
2025-07-10 04:31:09,796 INFO: Funcao validate_signal iniciada para o signal 3SZNXSUE
2025-07-10 04:31:09,796 INFO: Funcao validate_signal finalizada para o signal 3SZNXSUE
2025-07-10 04:31:09,796 INFO: Validando sinal 3SZNXSUE sem gale items
2025-07-10 04:31:09,797 INFO: Atualizando candle com filtro: {'signal.signal_id': '3SZNXSUE'}, update: {'$set': {'signal': {'signal_id': '3SZNXSUE', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 29), 'entry_time': datetime.datetime(2025, 7, 10, 4, 30), 'open_candle_timestamp': 1752132540, 'message_id': 10154, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:31:09,798 INFO: Número de candles atualizados: 1
2025-07-10 04:31:09,799 INFO: Sinal atualizado no repositório para 3SZNXSUE
2025-07-10 04:31:10,592 INFO: ✅ Resposta de resultado enviada para o sinal 3SZNXSUE
2025-07-10 04:31:10,592 INFO: Sinal 3SZNXSUE validado como WIN e notificação enviada
2025-07-10 04:31:10,593 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 3SZNXSUE
2025-07-10 04:31:10,593 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:32:09,819 INFO: 🔔 Novo candle detectado em 2025-07-10 07:32:00 UTC
2025-07-10 04:32:09,820 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:32:09,827 INFO: Buscando candle com filtro: {'epoch': 1752132720}
2025-07-10 04:32:09,831 INFO: Candle não encontrado
2025-07-10 04:32:09,845 INFO: Tendência HMA: FALL (HMA21=2765.88, HMA100=2765.37)
2025-07-10 04:32:09,846 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:32:09,846 INFO: 📈 Análise: EMA9=2765.74, EMA21=2765.60, trend_ema=RISE, trend_final=FALL, RSI=58.73, MACD=0.14/0.11, ATR=0.88, body=0.00, confidence=60
2025-07-10 04:32:09,846 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 04:32:09,847 INFO: Inserindo candle: Candle(2025-07-10 07:32:00, DOJI, O:2765.93, H:2765.93, L:2765.93, C:2765.93)
2025-07-10 04:32:09,849 INFO: Candle inserido com ID: 686f6c791d9c27c6b2f10c4d
2025-07-10 04:32:10,662 INFO: Atualizando candle com filtro: {'signal.signal_id': 'PTY2UBFG'}, update: {'$set': {'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 32, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:32:10,665 INFO: Número de candles atualizados: 1
2025-07-10 04:32:10,665 INFO: ✅ Mensagem enviada ao Telegram (ID: PTY2UBFG).
2025-07-10 04:33:09,826 INFO: 🔔 Novo candle detectado em 2025-07-10 07:33:00 UTC
2025-07-10 04:33:09,826 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:33:09,829 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:33:09,830 INFO: 🔔 Candle 1752132780 é menor ou igual ao entry_time 2025-07-10 04:33:00
2025-07-10 04:34:09,819 INFO: 🔔 Novo candle detectado em 2025-07-10 07:34:00 UTC
2025-07-10 04:34:09,819 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:34:09,822 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:34:09,822 INFO: 🔔 Candle 1752132840 é maior que o entry_time 2025-07-10 04:33:00
2025-07-10 04:34:09,823 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:34:09,823 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:34:09,825 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:34:09,825 INFO: 🔄 Candle 1752132720 já existe no banco, atualizando...
2025-07-10 04:34:09,825 INFO: 🔄 Candle 1752132720 não tem gale_items
2025-07-10 04:34:09,826 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:34:09,828 INFO: Número de candles atualizados: 1
2025-07-10 04:34:09,828 INFO: ✅ Candle 1752132720 atualizado com sucesso
2025-07-10 04:34:09,829 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:34:09,829 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:34:09,829 INFO: Funcao validate_signals_for_candle iniciada para o sinal PTY2UBFG
2025-07-10 04:34:09,829 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:34:09,831 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:34:09,831 INFO: Funcao validate_signal iniciada para o signal PTY2UBFG
2025-07-10 04:34:09,832 INFO: Funcao validate_signal finalizada para o signal PTY2UBFG
2025-07-10 04:34:09,832 INFO: Validando sinal PTY2UBFG sem gale items
2025-07-10 04:34:09,832 INFO: Sinal PTY2UBFG adicionado à fila para G1
2025-07-10 04:34:09,832 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132840, 'open_price': 2766.989, 'high': 2766.989, 'low': 2766.989, 'close_price': 2766.989, 'time': datetime.datetime(2025, 7, 10, 4, 34, 9, 832058), 'result': None}]}}
2025-07-10 04:34:09,834 INFO: Número de candles atualizados: 1
2025-07-10 04:34:09,834 INFO: Candle completo com gales atualizado para PTY2UBFG
2025-07-10 04:34:10,649 INFO: ✅ Resposta de resultado enviada para o sinal PTY2UBFG
2025-07-10 04:34:10,649 INFO: Sinal PTY2UBFG validado como LOSS e notificação enviada
2025-07-10 04:34:10,649 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PTY2UBFG
2025-07-10 04:34:10,650 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:35:09,809 INFO: 🔔 Novo candle detectado em 2025-07-10 07:35:00 UTC
2025-07-10 04:35:09,809 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:35:09,812 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:35:09,812 INFO: 🔔 Candle 1752132900 é maior que o entry_time 2025-07-10 04:33:00
2025-07-10 04:35:09,812 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:35:09,813 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:35:09,815 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:35:09,816 INFO: 🔄 Candle 1752132840 já existe no banco, atualizando...
2025-07-10 04:35:09,816 INFO: 🔄 Atualizando último gale item do candle 1752132840
2025-07-10 04:35:09,816 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132840, 'open_price': 2766.989, 'high': 2767.45, 'low': 2766.704, 'close_price': 2767.167, 'time': datetime.datetime(2025, 7, 10, 4, 34, 9, 832000), 'result': None}]}}
2025-07-10 04:35:09,818 INFO: Número de candles atualizados: 1
2025-07-10 04:35:09,819 INFO: ✅ Candle 1752132720 atualizado com sucesso
2025-07-10 04:35:09,819 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:35:09,819 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:35:09,819 INFO: Funcao validate_signals_for_candle iniciada para o sinal PTY2UBFG
2025-07-10 04:35:09,819 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:35:09,821 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:35:09,821 INFO: Funcao validate_signal iniciada para o signal PTY2UBFG
2025-07-10 04:35:09,822 INFO: Validando sinal PTY2UBFG com gale items
2025-07-10 04:35:09,822 INFO: Gale G1 para o sinal PTY2UBFG resultou em LOSS
2025-07-10 04:35:09,823 INFO: Sinal PTY2UBFG adicionado à fila para G2
2025-07-10 04:35:09,823 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132840, 'open_price': 2766.989, 'high': 2767.45, 'low': 2766.704, 'close_price': 2767.167, 'time': datetime.datetime(2025, 7, 10, 4, 34, 9, 832000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752132900, 'open_price': 2767.025, 'high': 2767.025, 'low': 2767.025, 'close_price': 2767.025, 'time': datetime.datetime(2025, 7, 10, 4, 35, 9, 822523), 'result': None}]}}
2025-07-10 04:35:09,825 INFO: Número de candles atualizados: 1
2025-07-10 04:35:09,825 INFO: Candle completo com gales atualizado para PTY2UBFG
2025-07-10 04:35:10,632 INFO: ✅ Resposta de resultado enviada para o sinal PTY2UBFG
2025-07-10 04:35:10,632 INFO: Sinal PTY2UBFG validado como LOSS e notificação enviada
2025-07-10 04:35:10,632 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PTY2UBFG
2025-07-10 04:35:10,633 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:36:09,819 INFO: 🔔 Novo candle detectado em 2025-07-10 07:36:00 UTC
2025-07-10 04:36:09,819 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:36:09,821 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:36:09,822 INFO: 🔔 Candle 1752132960 é maior que o entry_time 2025-07-10 04:33:00
2025-07-10 04:36:09,822 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:36:09,822 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:36:09,824 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:36:09,825 INFO: 🔄 Candle 1752132900 já existe no banco, atualizando...
2025-07-10 04:36:09,825 INFO: 🔄 Atualizando último gale item do candle 1752132900
2025-07-10 04:36:09,825 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132840, 'open_price': 2766.989, 'high': 2767.45, 'low': 2766.704, 'close_price': 2767.167, 'time': datetime.datetime(2025, 7, 10, 4, 34, 9, 832000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752132900, 'open_price': 2767.025, 'high': 2767.142, 'low': 2766.135, 'close_price': 2766.135, 'time': datetime.datetime(2025, 7, 10, 4, 35, 9, 822000), 'result': None}]}}
2025-07-10 04:36:09,827 INFO: Número de candles atualizados: 1
2025-07-10 04:36:09,827 INFO: ✅ Candle 1752132720 atualizado com sucesso
2025-07-10 04:36:09,827 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:36:09,828 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:36:09,828 INFO: Funcao validate_signals_for_candle iniciada para o sinal PTY2UBFG
2025-07-10 04:36:09,828 INFO: Buscando candle com signal_id: PTY2UBFG
2025-07-10 04:36:09,829 INFO: Candle encontrado para o signal_id: PTY2UBFG
2025-07-10 04:36:09,830 INFO: Funcao validate_signal iniciada para o signal PTY2UBFG
2025-07-10 04:36:09,830 INFO: Validando sinal PTY2UBFG com gale items
2025-07-10 04:36:09,830 INFO: Atualizando candle com filtro: {'epoch': 1752132720}, update: {'$set': {'epoch': 1752132720, 'open': 2765.932, 'high': 2767.538, 'low': 2765.932, 'close': 2767.538, 'time': datetime.datetime(2025, 7, 10, 7, 32), 'signal': {'signal_id': 'PTY2UBFG', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 32), 'entry_time': datetime.datetime(2025, 7, 10, 4, 33), 'open_candle_timestamp': 1752132720, 'message_id': 10157, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752132840, 'open_price': 2766.989, 'high': 2767.45, 'low': 2766.704, 'close_price': 2767.167, 'time': datetime.datetime(2025, 7, 10, 4, 34, 9, 832000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752132900, 'open_price': 2767.025, 'high': 2767.142, 'low': 2766.135, 'close_price': 2766.135, 'time': datetime.datetime(2025, 7, 10, 4, 35, 9, 822000), 'result': 'WIN'}]}}
2025-07-10 04:36:09,832 INFO: Número de candles atualizados: 1
2025-07-10 04:36:09,832 INFO: Candle completo com gales atualizado para PTY2UBFG
2025-07-10 04:36:10,700 INFO: ✅ Resposta de resultado enviada para o sinal PTY2UBFG
2025-07-10 04:36:10,700 INFO: Sinal PTY2UBFG validado como LOSS e notificação enviada
2025-07-10 04:36:10,700 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal PTY2UBFG
2025-07-10 04:36:10,701 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:37:09,825 INFO: 🔔 Novo candle detectado em 2025-07-10 07:37:00 UTC
2025-07-10 04:37:09,825 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:37:09,833 INFO: Buscando candle com filtro: {'epoch': 1752133020}
2025-07-10 04:37:09,837 INFO: Candle não encontrado
2025-07-10 04:37:09,856 INFO: Tendência HMA: FALL (HMA21=2765.23, HMA100=2766.22)
2025-07-10 04:37:09,856 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:37:09,856 INFO: 📈 Análise: EMA9=2765.57, EMA21=2765.99, trend_ema=FALL, trend_final=FALL, RSI=30.28, MACD=-0.37/-0.22, ATR=0.99, body=0.00, confidence=80
2025-07-10 04:37:09,857 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 04:37:09,857 INFO: Inserindo candle: Candle(2025-07-10 07:37:00, DOJI, O:2765.16, H:2765.16, L:2765.16, C:2765.16)
2025-07-10 04:37:09,860 INFO: Candle inserido com ID: 686f6da51d9c27c6b2f10c4e
2025-07-10 04:37:10,661 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WFCO12AV'}, update: {'$set': {'signal': {'signal_id': 'WFCO12AV', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 37, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 38), 'open_candle_timestamp': 1752133020, 'message_id': 10161, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:37:10,664 INFO: Número de candles atualizados: 1
2025-07-10 04:37:10,664 INFO: ✅ Mensagem enviada ao Telegram (ID: WFCO12AV).
2025-07-10 04:38:09,818 INFO: 🔔 Novo candle detectado em 2025-07-10 07:38:00 UTC
2025-07-10 04:38:09,818 INFO: Buscando candle com signal_id: WFCO12AV
2025-07-10 04:38:09,821 INFO: Candle encontrado para o signal_id: WFCO12AV
2025-07-10 04:38:09,821 INFO: 🔔 Candle 1752133080 é menor ou igual ao entry_time 2025-07-10 04:38:00
2025-07-10 04:39:09,805 INFO: 🔔 Novo candle detectado em 2025-07-10 07:39:00 UTC
2025-07-10 04:39:09,805 INFO: Buscando candle com signal_id: WFCO12AV
2025-07-10 04:39:09,808 INFO: Candle encontrado para o signal_id: WFCO12AV
2025-07-10 04:39:09,808 INFO: 🔔 Candle 1752133140 é maior que o entry_time 2025-07-10 04:38:00
2025-07-10 04:39:09,808 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:39:09,809 INFO: Buscando candle com signal_id: WFCO12AV
2025-07-10 04:39:09,811 INFO: Candle encontrado para o signal_id: WFCO12AV
2025-07-10 04:39:09,812 INFO: 🔄 Candle 1752133020 já existe no banco, atualizando...
2025-07-10 04:39:09,812 INFO: 🔄 Candle 1752133020 não tem gale_items
2025-07-10 04:39:09,812 INFO: Atualizando candle com filtro: {'epoch': 1752133020}, update: {'$set': {'epoch': 1752133020, 'open': 2765.163, 'high': 2765.163, 'low': 2764.035, 'close': 2764.545, 'time': datetime.datetime(2025, 7, 10, 7, 37), 'signal': {'signal_id': 'WFCO12AV', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 37), 'entry_time': datetime.datetime(2025, 7, 10, 4, 38), 'open_candle_timestamp': 1752133020, 'message_id': 10161, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:39:09,814 INFO: Número de candles atualizados: 1
2025-07-10 04:39:09,815 INFO: ✅ Candle 1752133020 atualizado com sucesso
2025-07-10 04:39:09,815 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:39:09,815 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:39:09,816 INFO: Funcao validate_signals_for_candle iniciada para o sinal WFCO12AV
2025-07-10 04:39:09,816 INFO: Buscando candle com signal_id: WFCO12AV
2025-07-10 04:39:09,817 INFO: Candle encontrado para o signal_id: WFCO12AV
2025-07-10 04:39:09,818 INFO: Funcao validate_signal iniciada para o signal WFCO12AV
2025-07-10 04:39:09,818 INFO: Funcao validate_signal finalizada para o signal WFCO12AV
2025-07-10 04:39:09,818 INFO: Validando sinal WFCO12AV sem gale items
2025-07-10 04:39:09,818 INFO: Atualizando candle com filtro: {'signal.signal_id': 'WFCO12AV'}, update: {'$set': {'signal': {'signal_id': 'WFCO12AV', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 37), 'entry_time': datetime.datetime(2025, 7, 10, 4, 38), 'open_candle_timestamp': 1752133020, 'message_id': 10161, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:39:09,820 INFO: Número de candles atualizados: 1
2025-07-10 04:39:09,820 INFO: Sinal atualizado no repositório para WFCO12AV
2025-07-10 04:39:10,645 INFO: ✅ Resposta de resultado enviada para o sinal WFCO12AV
2025-07-10 04:39:10,645 INFO: Sinal WFCO12AV validado como WIN e notificação enviada
2025-07-10 04:39:10,646 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal WFCO12AV
2025-07-10 04:39:10,646 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:40:09,804 INFO: 🔔 Novo candle detectado em 2025-07-10 07:40:00 UTC
2025-07-10 04:40:09,805 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:40:09,813 INFO: Buscando candle com filtro: {'epoch': 1752133200}
2025-07-10 04:40:09,816 INFO: Candle não encontrado
2025-07-10 04:40:09,830 INFO: Tendência HMA: FALL (HMA21=2766.09, HMA100=2766.44)
2025-07-10 04:40:09,830 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:40:09,831 INFO: 📈 Análise: EMA9=2766.14, EMA21=2766.11, trend_ema=RISE, trend_final=FALL, RSI=53.72, MACD=0.11/0.18, ATR=1.44, body=0.00, confidence=20
2025-07-10 04:40:09,831 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 04:40:09,831 INFO: Inserindo candle: Candle(2025-07-10 07:40:00, DOJI, O:2766.19, H:2766.19, L:2766.19, C:2766.19)
2025-07-10 04:40:09,834 INFO: Candle inserido com ID: 686f6e591d9c27c6b2f10c4f
2025-07-10 04:40:10,635 INFO: Atualizando candle com filtro: {'signal.signal_id': '3U7PQLRY'}, update: {'$set': {'signal': {'signal_id': '3U7PQLRY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 40, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 41), 'open_candle_timestamp': 1752133200, 'message_id': 10163, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:40:10,639 INFO: Número de candles atualizados: 1
2025-07-10 04:40:10,639 INFO: ✅ Mensagem enviada ao Telegram (ID: 3U7PQLRY).
2025-07-10 04:41:09,797 INFO: 🔔 Novo candle detectado em 2025-07-10 07:41:00 UTC
2025-07-10 04:41:09,798 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:41:09,800 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:41:09,801 INFO: 🔔 Candle 1752133260 é menor ou igual ao entry_time 2025-07-10 04:41:00
2025-07-10 04:42:09,822 INFO: 🔔 Novo candle detectado em 2025-07-10 07:42:00 UTC
2025-07-10 04:42:09,822 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:42:09,825 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:42:09,825 INFO: 🔔 Candle 1752133320 é maior que o entry_time 2025-07-10 04:41:00
2025-07-10 04:42:09,825 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:42:09,826 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:42:09,828 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:42:09,828 INFO: 🔄 Candle 1752133200 já existe no banco, atualizando...
2025-07-10 04:42:09,828 INFO: 🔄 Candle 1752133200 não tem gale_items
2025-07-10 04:42:09,828 INFO: Atualizando candle com filtro: {'epoch': 1752133200}, update: {'$set': {'epoch': 1752133200, 'open': 2766.189, 'high': 2767.315, 'low': 2765.974, 'close': 2766.302, 'time': datetime.datetime(2025, 7, 10, 7, 40), 'signal': {'signal_id': '3U7PQLRY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 40), 'entry_time': datetime.datetime(2025, 7, 10, 4, 41), 'open_candle_timestamp': 1752133200, 'message_id': 10163, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:42:09,831 INFO: Número de candles atualizados: 1
2025-07-10 04:42:09,832 INFO: ✅ Candle 1752133200 atualizado com sucesso
2025-07-10 04:42:09,832 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:42:09,832 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:42:09,832 INFO: Funcao validate_signals_for_candle iniciada para o sinal 3U7PQLRY
2025-07-10 04:42:09,832 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:42:09,834 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:42:09,834 INFO: Funcao validate_signal iniciada para o signal 3U7PQLRY
2025-07-10 04:42:09,834 INFO: Funcao validate_signal finalizada para o signal 3U7PQLRY
2025-07-10 04:42:09,835 INFO: Validando sinal 3U7PQLRY sem gale items
2025-07-10 04:42:09,835 INFO: Sinal 3U7PQLRY adicionado à fila para G1
2025-07-10 04:42:09,835 INFO: Atualizando candle com filtro: {'epoch': 1752133200}, update: {'$set': {'epoch': 1752133200, 'open': 2766.189, 'high': 2767.315, 'low': 2765.974, 'close': 2766.302, 'time': datetime.datetime(2025, 7, 10, 7, 40), 'signal': {'signal_id': '3U7PQLRY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 40), 'entry_time': datetime.datetime(2025, 7, 10, 4, 41), 'open_candle_timestamp': 1752133200, 'message_id': 10163, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133320, 'open_price': 2766.251, 'high': 2766.251, 'low': 2766.251, 'close_price': 2766.251, 'time': datetime.datetime(2025, 7, 10, 4, 42, 9, 835529), 'result': None}]}}
2025-07-10 04:42:09,837 INFO: Número de candles atualizados: 1
2025-07-10 04:42:09,837 INFO: Candle completo com gales atualizado para 3U7PQLRY
2025-07-10 04:42:10,650 INFO: ✅ Resposta de resultado enviada para o sinal 3U7PQLRY
2025-07-10 04:42:10,651 INFO: Sinal 3U7PQLRY validado como LOSS e notificação enviada
2025-07-10 04:42:10,651 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 3U7PQLRY
2025-07-10 04:42:10,652 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:43:09,811 INFO: 🔔 Novo candle detectado em 2025-07-10 07:43:00 UTC
2025-07-10 04:43:09,811 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:43:09,815 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:43:09,815 INFO: 🔔 Candle 1752133380 é maior que o entry_time 2025-07-10 04:41:00
2025-07-10 04:43:09,815 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:43:09,816 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:43:09,818 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:43:09,819 INFO: 🔄 Candle 1752133320 já existe no banco, atualizando...
2025-07-10 04:43:09,819 INFO: 🔄 Atualizando último gale item do candle 1752133320
2025-07-10 04:43:09,819 INFO: Atualizando candle com filtro: {'epoch': 1752133200}, update: {'$set': {'epoch': 1752133200, 'open': 2766.189, 'high': 2767.315, 'low': 2765.974, 'close': 2766.302, 'time': datetime.datetime(2025, 7, 10, 7, 40), 'signal': {'signal_id': '3U7PQLRY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 40), 'entry_time': datetime.datetime(2025, 7, 10, 4, 41), 'open_candle_timestamp': 1752133200, 'message_id': 10163, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133320, 'open_price': 2766.251, 'high': 2766.564, 'low': 2764.644, 'close_price': 2764.644, 'time': datetime.datetime(2025, 7, 10, 4, 42, 9, 835000), 'result': None}]}}
2025-07-10 04:43:09,821 INFO: Número de candles atualizados: 1
2025-07-10 04:43:09,821 INFO: ✅ Candle 1752133200 atualizado com sucesso
2025-07-10 04:43:09,822 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:43:09,822 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:43:09,822 INFO: Funcao validate_signals_for_candle iniciada para o sinal 3U7PQLRY
2025-07-10 04:43:09,822 INFO: Buscando candle com signal_id: 3U7PQLRY
2025-07-10 04:43:09,825 INFO: Candle encontrado para o signal_id: 3U7PQLRY
2025-07-10 04:43:09,825 INFO: Funcao validate_signal iniciada para o signal 3U7PQLRY
2025-07-10 04:43:09,825 INFO: Validando sinal 3U7PQLRY com gale items
2025-07-10 04:43:09,825 INFO: Atualizando candle com filtro: {'epoch': 1752133200}, update: {'$set': {'epoch': 1752133200, 'open': 2766.189, 'high': 2767.315, 'low': 2765.974, 'close': 2766.302, 'time': datetime.datetime(2025, 7, 10, 7, 40), 'signal': {'signal_id': '3U7PQLRY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 40), 'entry_time': datetime.datetime(2025, 7, 10, 4, 41), 'open_candle_timestamp': 1752133200, 'message_id': 10163, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133320, 'open_price': 2766.251, 'high': 2766.564, 'low': 2764.644, 'close_price': 2764.644, 'time': datetime.datetime(2025, 7, 10, 4, 42, 9, 835000), 'result': 'WIN'}]}}
2025-07-10 04:43:09,828 INFO: Número de candles atualizados: 1
2025-07-10 04:43:09,828 INFO: Candle completo com gales atualizado para 3U7PQLRY
2025-07-10 04:43:10,634 INFO: ✅ Resposta de resultado enviada para o sinal 3U7PQLRY
2025-07-10 04:43:10,635 INFO: Sinal 3U7PQLRY validado como LOSS e notificação enviada
2025-07-10 04:43:10,635 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 3U7PQLRY
2025-07-10 04:43:10,635 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:44:09,807 INFO: 🔔 Novo candle detectado em 2025-07-10 07:44:00 UTC
2025-07-10 04:44:09,808 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:44:09,815 INFO: Buscando candle com filtro: {'epoch': 1752133440}
2025-07-10 04:44:09,818 INFO: Candle não encontrado
2025-07-10 04:44:09,833 INFO: Tendência HMA: FALL (HMA21=2763.46, HMA100=2763.68)
2025-07-10 04:44:09,834 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:44:09,834 INFO: 📈 Análise: EMA9=2763.60, EMA21=2763.88, trend_ema=FALL, trend_final=FALL, RSI=35.45, MACD=-0.34/-0.37, ATR=1.26, body=0.00, confidence=40
2025-07-10 04:44:09,834 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 04:44:09,835 INFO: Inserindo candle: Candle(2025-07-10 07:44:00, DOJI, O:2763.43, H:2763.43, L:2763.43, C:2763.43)
2025-07-10 04:44:09,837 INFO: Candle inserido com ID: 686f6f491d9c27c6b2f10c50
2025-07-10 04:44:10,652 INFO: Atualizando candle com filtro: {'signal.signal_id': 'YGRHEQ3Y'}, update: {'$set': {'signal': {'signal_id': 'YGRHEQ3Y', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 44, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 45), 'open_candle_timestamp': 1752133440, 'message_id': 10167, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:44:10,654 INFO: Número de candles atualizados: 1
2025-07-10 04:44:10,655 INFO: ✅ Mensagem enviada ao Telegram (ID: YGRHEQ3Y).
2025-07-10 04:45:09,820 INFO: 🔔 Novo candle detectado em 2025-07-10 07:45:00 UTC
2025-07-10 04:45:09,821 INFO: Buscando candle com signal_id: YGRHEQ3Y
2025-07-10 04:45:09,823 INFO: Candle encontrado para o signal_id: YGRHEQ3Y
2025-07-10 04:45:09,823 INFO: 🔔 Candle 1752133500 é menor ou igual ao entry_time 2025-07-10 04:45:00
2025-07-10 04:46:09,844 INFO: 🔔 Novo candle detectado em 2025-07-10 07:46:00 UTC
2025-07-10 04:46:09,844 INFO: Buscando candle com signal_id: YGRHEQ3Y
2025-07-10 04:46:09,847 INFO: Candle encontrado para o signal_id: YGRHEQ3Y
2025-07-10 04:46:09,848 INFO: 🔔 Candle 1752133560 é maior que o entry_time 2025-07-10 04:45:00
2025-07-10 04:46:09,848 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:46:09,848 INFO: Buscando candle com signal_id: YGRHEQ3Y
2025-07-10 04:46:09,850 INFO: Candle encontrado para o signal_id: YGRHEQ3Y
2025-07-10 04:46:09,851 INFO: 🔄 Candle 1752133440 já existe no banco, atualizando...
2025-07-10 04:46:09,851 INFO: 🔄 Candle 1752133440 não tem gale_items
2025-07-10 04:46:09,852 INFO: Atualizando candle com filtro: {'epoch': 1752133440}, update: {'$set': {'epoch': 1752133440, 'open': 2763.43, 'high': 2763.691, 'low': 2762.508, 'close': 2762.933, 'time': datetime.datetime(2025, 7, 10, 7, 44), 'signal': {'signal_id': 'YGRHEQ3Y', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 44), 'entry_time': datetime.datetime(2025, 7, 10, 4, 45), 'open_candle_timestamp': 1752133440, 'message_id': 10167, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:46:09,854 INFO: Número de candles atualizados: 1
2025-07-10 04:46:09,854 INFO: ✅ Candle 1752133440 atualizado com sucesso
2025-07-10 04:46:09,854 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:46:09,854 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:46:09,855 INFO: Funcao validate_signals_for_candle iniciada para o sinal YGRHEQ3Y
2025-07-10 04:46:09,855 INFO: Buscando candle com signal_id: YGRHEQ3Y
2025-07-10 04:46:09,857 INFO: Candle encontrado para o signal_id: YGRHEQ3Y
2025-07-10 04:46:09,857 INFO: Funcao validate_signal iniciada para o signal YGRHEQ3Y
2025-07-10 04:46:09,857 INFO: Funcao validate_signal finalizada para o signal YGRHEQ3Y
2025-07-10 04:46:09,857 INFO: Validando sinal YGRHEQ3Y sem gale items
2025-07-10 04:46:09,858 INFO: Atualizando candle com filtro: {'signal.signal_id': 'YGRHEQ3Y'}, update: {'$set': {'signal': {'signal_id': 'YGRHEQ3Y', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 44), 'entry_time': datetime.datetime(2025, 7, 10, 4, 45), 'open_candle_timestamp': 1752133440, 'message_id': 10167, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:46:09,859 INFO: Número de candles atualizados: 1
2025-07-10 04:46:09,860 INFO: Sinal atualizado no repositório para YGRHEQ3Y
2025-07-10 04:46:10,671 INFO: ✅ Resposta de resultado enviada para o sinal YGRHEQ3Y
2025-07-10 04:46:10,671 INFO: Sinal YGRHEQ3Y validado como WIN e notificação enviada
2025-07-10 04:46:10,671 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal YGRHEQ3Y
2025-07-10 04:46:10,671 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:47:09,859 INFO: 🔔 Novo candle detectado em 2025-07-10 07:47:00 UTC
2025-07-10 04:47:09,859 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:47:09,868 INFO: Buscando candle com filtro: {'epoch': 1752133620}
2025-07-10 04:47:09,871 INFO: Candle não encontrado
2025-07-10 04:47:09,885 INFO: Tendência HMA: FALL (HMA21=2760.89, HMA100=2761.16)
2025-07-10 04:47:09,886 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:47:09,886 INFO: 📈 Análise: EMA9=2761.05, EMA21=2761.29, trend_ema=FALL, trend_final=FALL, RSI=31.16, MACD=-0.26/-0.22, ATR=0.83, body=0.00, confidence=80
2025-07-10 04:47:09,887 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 04:47:09,887 INFO: Inserindo candle: Candle(2025-07-10 07:47:00, DOJI, O:2760.70, H:2760.70, L:2760.70, C:2760.70)
2025-07-10 04:47:09,890 INFO: Candle inserido com ID: 686f6ffd1d9c27c6b2f10c51
2025-07-10 04:47:10,742 INFO: Atualizando candle com filtro: {'signal.signal_id': 'KA5INHH1'}, update: {'$set': {'signal': {'signal_id': 'KA5INHH1', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 47, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 48), 'open_candle_timestamp': 1752133620, 'message_id': 10170, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:47:10,745 INFO: Número de candles atualizados: 1
2025-07-10 04:47:10,745 INFO: ✅ Mensagem enviada ao Telegram (ID: KA5INHH1).
2025-07-10 04:48:09,812 INFO: 🔔 Novo candle detectado em 2025-07-10 07:48:00 UTC
2025-07-10 04:48:09,812 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:48:09,815 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:48:09,815 INFO: 🔔 Candle 1752133680 é menor ou igual ao entry_time 2025-07-10 04:48:00
2025-07-10 04:49:09,828 INFO: 🔔 Novo candle detectado em 2025-07-10 07:49:00 UTC
2025-07-10 04:49:09,829 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:49:09,832 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:49:09,832 INFO: 🔔 Candle 1752133740 é maior que o entry_time 2025-07-10 04:48:00
2025-07-10 04:49:09,832 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:49:09,832 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:49:09,835 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:49:09,835 INFO: 🔄 Candle 1752133620 já existe no banco, atualizando...
2025-07-10 04:49:09,835 INFO: 🔄 Candle 1752133620 não tem gale_items
2025-07-10 04:49:09,836 INFO: Atualizando candle com filtro: {'epoch': 1752133620}, update: {'$set': {'epoch': 1752133620, 'open': 2760.701, 'high': 2762.649, 'low': 2760.701, 'close': 2761.605, 'time': datetime.datetime(2025, 7, 10, 7, 47), 'signal': {'signal_id': 'KA5INHH1', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 47), 'entry_time': datetime.datetime(2025, 7, 10, 4, 48), 'open_candle_timestamp': 1752133620, 'message_id': 10170, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:49:09,838 INFO: Número de candles atualizados: 1
2025-07-10 04:49:09,838 INFO: ✅ Candle 1752133620 atualizado com sucesso
2025-07-10 04:49:09,838 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:49:09,839 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:49:09,839 INFO: Funcao validate_signals_for_candle iniciada para o sinal KA5INHH1
2025-07-10 04:49:09,839 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:49:09,840 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:49:09,841 INFO: Funcao validate_signal iniciada para o signal KA5INHH1
2025-07-10 04:49:09,841 INFO: Funcao validate_signal finalizada para o signal KA5INHH1
2025-07-10 04:49:09,841 INFO: Validando sinal KA5INHH1 sem gale items
2025-07-10 04:49:09,841 INFO: Sinal KA5INHH1 adicionado à fila para G1
2025-07-10 04:49:09,842 INFO: Atualizando candle com filtro: {'epoch': 1752133620}, update: {'$set': {'epoch': 1752133620, 'open': 2760.701, 'high': 2762.649, 'low': 2760.701, 'close': 2761.605, 'time': datetime.datetime(2025, 7, 10, 7, 47), 'signal': {'signal_id': 'KA5INHH1', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 47), 'entry_time': datetime.datetime(2025, 7, 10, 4, 48), 'open_candle_timestamp': 1752133620, 'message_id': 10170, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133740, 'open_price': 2761.422, 'high': 2761.422, 'low': 2761.422, 'close_price': 2761.422, 'time': datetime.datetime(2025, 7, 10, 4, 49, 9, 841582), 'result': None}]}}
2025-07-10 04:49:09,843 INFO: Número de candles atualizados: 1
2025-07-10 04:49:09,843 INFO: Candle completo com gales atualizado para KA5INHH1
2025-07-10 04:49:10,656 INFO: ✅ Resposta de resultado enviada para o sinal KA5INHH1
2025-07-10 04:49:10,656 INFO: Sinal KA5INHH1 validado como LOSS e notificação enviada
2025-07-10 04:49:10,656 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal KA5INHH1
2025-07-10 04:49:10,657 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:50:09,812 INFO: 🔔 Novo candle detectado em 2025-07-10 07:50:00 UTC
2025-07-10 04:50:09,812 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:50:09,816 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:50:09,816 INFO: 🔔 Candle 1752133800 é maior que o entry_time 2025-07-10 04:48:00
2025-07-10 04:50:09,816 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:50:09,816 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:50:09,819 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:50:09,819 INFO: 🔄 Candle 1752133740 já existe no banco, atualizando...
2025-07-10 04:50:09,819 INFO: 🔄 Atualizando último gale item do candle 1752133740
2025-07-10 04:50:09,820 INFO: Atualizando candle com filtro: {'epoch': 1752133620}, update: {'$set': {'epoch': 1752133620, 'open': 2760.701, 'high': 2762.649, 'low': 2760.701, 'close': 2761.605, 'time': datetime.datetime(2025, 7, 10, 7, 47), 'signal': {'signal_id': 'KA5INHH1', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 47), 'entry_time': datetime.datetime(2025, 7, 10, 4, 48), 'open_candle_timestamp': 1752133620, 'message_id': 10170, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133740, 'open_price': 2761.422, 'high': 2761.422, 'low': 2760.52, 'close_price': 2760.601, 'time': datetime.datetime(2025, 7, 10, 4, 49, 9, 841000), 'result': None}]}}
2025-07-10 04:50:09,822 INFO: Número de candles atualizados: 1
2025-07-10 04:50:09,822 INFO: ✅ Candle 1752133620 atualizado com sucesso
2025-07-10 04:50:09,822 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:50:09,823 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:50:09,823 INFO: Funcao validate_signals_for_candle iniciada para o sinal KA5INHH1
2025-07-10 04:50:09,823 INFO: Buscando candle com signal_id: KA5INHH1
2025-07-10 04:50:09,825 INFO: Candle encontrado para o signal_id: KA5INHH1
2025-07-10 04:50:09,825 INFO: Funcao validate_signal iniciada para o signal KA5INHH1
2025-07-10 04:50:09,825 INFO: Validando sinal KA5INHH1 com gale items
2025-07-10 04:50:09,826 INFO: Atualizando candle com filtro: {'epoch': 1752133620}, update: {'$set': {'epoch': 1752133620, 'open': 2760.701, 'high': 2762.649, 'low': 2760.701, 'close': 2761.605, 'time': datetime.datetime(2025, 7, 10, 7, 47), 'signal': {'signal_id': 'KA5INHH1', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 47), 'entry_time': datetime.datetime(2025, 7, 10, 4, 48), 'open_candle_timestamp': 1752133620, 'message_id': 10170, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752133740, 'open_price': 2761.422, 'high': 2761.422, 'low': 2760.52, 'close_price': 2760.601, 'time': datetime.datetime(2025, 7, 10, 4, 49, 9, 841000), 'result': 'WIN'}]}}
2025-07-10 04:50:09,828 INFO: Número de candles atualizados: 1
2025-07-10 04:50:09,828 INFO: Candle completo com gales atualizado para KA5INHH1
2025-07-10 04:50:10,647 INFO: ✅ Resposta de resultado enviada para o sinal KA5INHH1
2025-07-10 04:50:10,647 INFO: Sinal KA5INHH1 validado como LOSS e notificação enviada
2025-07-10 04:50:10,647 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal KA5INHH1
2025-07-10 04:50:10,647 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:51:09,853 INFO: 🔔 Novo candle detectado em 2025-07-10 07:51:00 UTC
2025-07-10 04:51:09,854 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:51:09,862 INFO: Buscando candle com filtro: {'epoch': 1752133860}
2025-07-10 04:51:09,865 INFO: Candle não encontrado
2025-07-10 04:51:09,879 INFO: Tendência HMA: FALL (HMA21=2759.43, HMA100=2759.51)
2025-07-10 04:51:09,880 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:51:09,880 INFO: 📈 Análise: EMA9=2759.51, EMA21=2759.69, trend_ema=FALL, trend_final=FALL, RSI=43.75, MACD=-0.22/-0.23, ATR=0.90, body=0.00, confidence=20
2025-07-10 04:51:09,880 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 04:51:09,880 INFO: Inserindo candle: Candle(2025-07-10 07:51:00, DOJI, O:2759.56, H:2759.56, L:2759.56, C:2759.56)
2025-07-10 04:51:09,883 INFO: Candle inserido com ID: 686f70ed1d9c27c6b2f10c52
2025-07-10 04:51:10,684 INFO: Atualizando candle com filtro: {'signal.signal_id': 'M702EJLY'}, update: {'$set': {'signal': {'signal_id': 'M702EJLY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 51, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 52), 'open_candle_timestamp': 1752133860, 'message_id': 10173, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:51:10,687 INFO: Número de candles atualizados: 1
2025-07-10 04:51:10,688 INFO: ✅ Mensagem enviada ao Telegram (ID: M702EJLY).
2025-07-10 04:52:09,831 INFO: 🔔 Novo candle detectado em 2025-07-10 07:52:00 UTC
2025-07-10 04:52:09,831 INFO: Buscando candle com signal_id: M702EJLY
2025-07-10 04:52:09,834 INFO: Candle encontrado para o signal_id: M702EJLY
2025-07-10 04:52:09,835 INFO: 🔔 Candle 1752133920 é menor ou igual ao entry_time 2025-07-10 04:52:00
2025-07-10 04:53:09,826 INFO: 🔔 Novo candle detectado em 2025-07-10 07:53:00 UTC
2025-07-10 04:53:09,826 INFO: Buscando candle com signal_id: M702EJLY
2025-07-10 04:53:09,828 INFO: Candle encontrado para o signal_id: M702EJLY
2025-07-10 04:53:09,829 INFO: 🔔 Candle 1752133980 é maior que o entry_time 2025-07-10 04:52:00
2025-07-10 04:53:09,829 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:53:09,829 INFO: Buscando candle com signal_id: M702EJLY
2025-07-10 04:53:09,831 INFO: Candle encontrado para o signal_id: M702EJLY
2025-07-10 04:53:09,831 INFO: 🔄 Candle 1752133860 já existe no banco, atualizando...
2025-07-10 04:53:09,831 INFO: 🔄 Candle 1752133860 não tem gale_items
2025-07-10 04:53:09,832 INFO: Atualizando candle com filtro: {'epoch': 1752133860}, update: {'$set': {'epoch': 1752133860, 'open': 2759.559, 'high': 2760.909, 'low': 2759.186, 'close': 2759.53, 'time': datetime.datetime(2025, 7, 10, 7, 51), 'signal': {'signal_id': 'M702EJLY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 51), 'entry_time': datetime.datetime(2025, 7, 10, 4, 52), 'open_candle_timestamp': 1752133860, 'message_id': 10173, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:53:09,834 INFO: Número de candles atualizados: 1
2025-07-10 04:53:09,834 INFO: ✅ Candle 1752133860 atualizado com sucesso
2025-07-10 04:53:09,834 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:53:09,835 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:53:09,835 INFO: Funcao validate_signals_for_candle iniciada para o sinal M702EJLY
2025-07-10 04:53:09,835 INFO: Buscando candle com signal_id: M702EJLY
2025-07-10 04:53:09,837 INFO: Candle encontrado para o signal_id: M702EJLY
2025-07-10 04:53:09,837 INFO: Funcao validate_signal iniciada para o signal M702EJLY
2025-07-10 04:53:09,837 INFO: Funcao validate_signal finalizada para o signal M702EJLY
2025-07-10 04:53:09,837 INFO: Validando sinal M702EJLY sem gale items
2025-07-10 04:53:09,837 INFO: Atualizando candle com filtro: {'signal.signal_id': 'M702EJLY'}, update: {'$set': {'signal': {'signal_id': 'M702EJLY', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 51), 'entry_time': datetime.datetime(2025, 7, 10, 4, 52), 'open_candle_timestamp': 1752133860, 'message_id': 10173, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 04:53:09,840 INFO: Número de candles atualizados: 1
2025-07-10 04:53:09,840 INFO: Sinal atualizado no repositório para M702EJLY
2025-07-10 04:53:10,652 INFO: ✅ Resposta de resultado enviada para o sinal M702EJLY
2025-07-10 04:53:10,655 INFO: Sinal M702EJLY validado como WIN e notificação enviada
2025-07-10 04:53:10,655 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal M702EJLY
2025-07-10 04:53:10,655 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:54:09,804 INFO: 🔔 Novo candle detectado em 2025-07-10 07:54:00 UTC
2025-07-10 04:54:09,804 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:54:09,812 INFO: Buscando candle com filtro: {'epoch': 1752134040}
2025-07-10 04:54:09,816 INFO: Candle não encontrado
2025-07-10 04:54:09,830 INFO: Tendência HMA: FALL (HMA21=2759.93, HMA100=2759.85)
2025-07-10 04:54:09,831 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:54:09,831 INFO: 📈 Análise: EMA9=2759.92, EMA21=2759.92, trend_ema=FALL, trend_final=FALL, RSI=44.98, MACD=0.04/0.10, ATR=0.97, body=0.00, confidence=60
2025-07-10 04:54:09,832 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 04:54:09,832 INFO: Inserindo candle: Candle(2025-07-10 07:54:00, DOJI, O:2759.69, H:2759.69, L:2759.69, C:2759.69)
2025-07-10 04:54:09,834 INFO: Candle inserido com ID: 686f71a11d9c27c6b2f10c53
2025-07-10 04:54:10,636 INFO: Atualizando candle com filtro: {'signal.signal_id': '3VF9768V'}, update: {'$set': {'signal': {'signal_id': '3VF9768V', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 54, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 55), 'open_candle_timestamp': 1752134040, 'message_id': 10175, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:54:10,639 INFO: Número de candles atualizados: 1
2025-07-10 04:54:10,639 INFO: ✅ Mensagem enviada ao Telegram (ID: 3VF9768V).
2025-07-10 04:55:09,804 INFO: 🔔 Novo candle detectado em 2025-07-10 07:55:00 UTC
2025-07-10 04:55:09,804 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:55:09,807 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:55:09,808 INFO: 🔔 Candle 1752134100 é menor ou igual ao entry_time 2025-07-10 04:55:00
2025-07-10 04:56:09,831 INFO: 🔔 Novo candle detectado em 2025-07-10 07:56:00 UTC
2025-07-10 04:56:09,832 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:56:09,834 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:56:09,835 INFO: 🔔 Candle 1752134160 é maior que o entry_time 2025-07-10 04:55:00
2025-07-10 04:56:09,835 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:56:09,835 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:56:09,837 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:56:09,837 INFO: 🔄 Candle 1752134040 já existe no banco, atualizando...
2025-07-10 04:56:09,837 INFO: 🔄 Candle 1752134040 não tem gale_items
2025-07-10 04:56:09,838 INFO: Atualizando candle com filtro: {'epoch': 1752134040}, update: {'$set': {'epoch': 1752134040, 'open': 2759.69, 'high': 2761.246, 'low': 2759.69, 'close': 2760.938, 'time': datetime.datetime(2025, 7, 10, 7, 54), 'signal': {'signal_id': '3VF9768V', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 54), 'entry_time': datetime.datetime(2025, 7, 10, 4, 55), 'open_candle_timestamp': 1752134040, 'message_id': 10175, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 04:56:09,840 INFO: Número de candles atualizados: 1
2025-07-10 04:56:09,841 INFO: ✅ Candle 1752134040 atualizado com sucesso
2025-07-10 04:56:09,841 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:56:09,841 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:56:09,841 INFO: Funcao validate_signals_for_candle iniciada para o sinal 3VF9768V
2025-07-10 04:56:09,841 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:56:09,843 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:56:09,843 INFO: Funcao validate_signal iniciada para o signal 3VF9768V
2025-07-10 04:56:09,843 INFO: Funcao validate_signal finalizada para o signal 3VF9768V
2025-07-10 04:56:09,843 INFO: Validando sinal 3VF9768V sem gale items
2025-07-10 04:56:09,844 INFO: Sinal 3VF9768V adicionado à fila para G1
2025-07-10 04:56:09,844 INFO: Atualizando candle com filtro: {'epoch': 1752134040}, update: {'$set': {'epoch': 1752134040, 'open': 2759.69, 'high': 2761.246, 'low': 2759.69, 'close': 2760.938, 'time': datetime.datetime(2025, 7, 10, 7, 54), 'signal': {'signal_id': '3VF9768V', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 54), 'entry_time': datetime.datetime(2025, 7, 10, 4, 55), 'open_candle_timestamp': 1752134040, 'message_id': 10175, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134160, 'open_price': 2759.837, 'high': 2759.837, 'low': 2759.837, 'close_price': 2759.837, 'time': datetime.datetime(2025, 7, 10, 4, 56, 9, 844314), 'result': None}]}}
2025-07-10 04:56:09,846 INFO: Número de candles atualizados: 1
2025-07-10 04:56:09,846 INFO: Candle completo com gales atualizado para 3VF9768V
2025-07-10 04:56:10,647 INFO: ✅ Resposta de resultado enviada para o sinal 3VF9768V
2025-07-10 04:56:10,647 INFO: Sinal 3VF9768V validado como LOSS e notificação enviada
2025-07-10 04:56:10,648 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 3VF9768V
2025-07-10 04:56:10,648 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 04:57:09,802 INFO: 🔔 Novo candle detectado em 2025-07-10 07:57:00 UTC
2025-07-10 04:57:09,802 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:57:09,805 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:57:09,806 INFO: 🔔 Candle 1752134220 é maior que o entry_time 2025-07-10 04:55:00
2025-07-10 04:57:09,806 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 04:57:09,806 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:57:09,809 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:57:09,809 INFO: 🔄 Candle 1752134160 já existe no banco, atualizando...
2025-07-10 04:57:09,809 INFO: 🔄 Atualizando último gale item do candle 1752134160
2025-07-10 04:57:09,810 INFO: Atualizando candle com filtro: {'epoch': 1752134040}, update: {'$set': {'epoch': 1752134040, 'open': 2759.69, 'high': 2761.246, 'low': 2759.69, 'close': 2760.938, 'time': datetime.datetime(2025, 7, 10, 7, 54), 'signal': {'signal_id': '3VF9768V', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 54), 'entry_time': datetime.datetime(2025, 7, 10, 4, 55), 'open_candle_timestamp': 1752134040, 'message_id': 10175, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134160, 'open_price': 2759.837, 'high': 2760.385, 'low': 2759.008, 'close_price': 2759.518, 'time': datetime.datetime(2025, 7, 10, 4, 56, 9, 844000), 'result': None}]}}
2025-07-10 04:57:09,812 INFO: Número de candles atualizados: 1
2025-07-10 04:57:09,812 INFO: ✅ Candle 1752134040 atualizado com sucesso
2025-07-10 04:57:09,812 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 04:57:09,813 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 04:57:09,813 INFO: Funcao validate_signals_for_candle iniciada para o sinal 3VF9768V
2025-07-10 04:57:09,813 INFO: Buscando candle com signal_id: 3VF9768V
2025-07-10 04:57:09,815 INFO: Candle encontrado para o signal_id: 3VF9768V
2025-07-10 04:57:09,815 INFO: Funcao validate_signal iniciada para o signal 3VF9768V
2025-07-10 04:57:09,815 INFO: Validando sinal 3VF9768V com gale items
2025-07-10 04:57:09,816 INFO: Atualizando candle com filtro: {'epoch': 1752134040}, update: {'$set': {'epoch': 1752134040, 'open': 2759.69, 'high': 2761.246, 'low': 2759.69, 'close': 2760.938, 'time': datetime.datetime(2025, 7, 10, 7, 54), 'signal': {'signal_id': '3VF9768V', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 54), 'entry_time': datetime.datetime(2025, 7, 10, 4, 55), 'open_candle_timestamp': 1752134040, 'message_id': 10175, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134160, 'open_price': 2759.837, 'high': 2760.385, 'low': 2759.008, 'close_price': 2759.518, 'time': datetime.datetime(2025, 7, 10, 4, 56, 9, 844000), 'result': 'WIN'}]}}
2025-07-10 04:57:09,818 INFO: Número de candles atualizados: 1
2025-07-10 04:57:09,818 INFO: Candle completo com gales atualizado para 3VF9768V
2025-07-10 04:57:10,637 INFO: ✅ Resposta de resultado enviada para o sinal 3VF9768V
2025-07-10 04:57:10,637 INFO: Sinal 3VF9768V validado como LOSS e notificação enviada
2025-07-10 04:57:10,638 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 3VF9768V
2025-07-10 04:57:10,638 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 04:58:09,831 INFO: 🔔 Novo candle detectado em 2025-07-10 07:58:00 UTC
2025-07-10 04:58:09,832 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 04:58:09,840 INFO: Buscando candle com filtro: {'epoch': 1752134280}
2025-07-10 04:58:09,843 INFO: Candle não encontrado
2025-07-10 04:58:09,859 INFO: Tendência HMA: FALL (HMA21=2759.57, HMA100=2759.42)
2025-07-10 04:58:09,859 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 04:58:09,859 INFO: 📈 Análise: EMA9=2759.60, EMA21=2759.58, trend_ema=RISE, trend_final=FALL, RSI=48.23, MACD=0.02/0.03, ATR=0.72, body=0.00, confidence=20
2025-07-10 04:58:09,859 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 04:58:09,860 INFO: Inserindo candle: Candle(2025-07-10 07:58:00, DOJI, O:2759.50, H:2759.50, L:2759.50, C:2759.50)
2025-07-10 04:58:09,862 INFO: Candle inserido com ID: 686f72911d9c27c6b2f10c54
2025-07-10 04:58:10,717 INFO: Atualizando candle com filtro: {'signal.signal_id': '0GNI0XCP'}, update: {'$set': {'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 1, 58, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 04:58:10,719 INFO: Número de candles atualizados: 1
2025-07-10 04:58:10,720 INFO: ✅ Mensagem enviada ao Telegram (ID: 0GNI0XCP).
2025-07-10 04:59:09,830 INFO: 🔔 Novo candle detectado em 2025-07-10 07:59:00 UTC
2025-07-10 04:59:09,830 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 04:59:09,832 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 04:59:09,833 INFO: 🔔 Candle 1752134340 é menor ou igual ao entry_time 2025-07-10 04:59:00
2025-07-10 05:00:09,860 INFO: 🔔 Novo candle detectado em 2025-07-10 08:00:00 UTC
2025-07-10 05:00:09,861 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:00:09,864 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:00:09,864 INFO: 🔔 Candle 1752134400 é maior que o entry_time 2025-07-10 04:59:00
2025-07-10 05:00:09,865 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:00:09,865 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:00:09,867 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:00:09,868 INFO: 🔄 Candle 1752134280 já existe no banco, atualizando...
2025-07-10 05:00:09,868 INFO: 🔄 Candle 1752134280 não tem gale_items
2025-07-10 05:00:09,868 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:00:09,871 INFO: Número de candles atualizados: 1
2025-07-10 05:00:09,871 INFO: ✅ Candle 1752134280 atualizado com sucesso
2025-07-10 05:00:09,871 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:00:09,871 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:00:09,871 INFO: Funcao validate_signals_for_candle iniciada para o sinal 0GNI0XCP
2025-07-10 05:00:09,871 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:00:09,873 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:00:09,873 INFO: Funcao validate_signal iniciada para o signal 0GNI0XCP
2025-07-10 05:00:09,873 INFO: Funcao validate_signal finalizada para o signal 0GNI0XCP
2025-07-10 05:00:09,873 INFO: Validando sinal 0GNI0XCP sem gale items
2025-07-10 05:00:09,874 INFO: Sinal 0GNI0XCP adicionado à fila para G1
2025-07-10 05:00:09,874 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134400, 'open_price': 2759.905, 'high': 2759.905, 'low': 2759.905, 'close_price': 2759.905, 'time': datetime.datetime(2025, 7, 10, 5, 0, 9, 874459), 'result': None}]}}
2025-07-10 05:00:09,876 INFO: Número de candles atualizados: 1
2025-07-10 05:00:09,876 INFO: Candle completo com gales atualizado para 0GNI0XCP
2025-07-10 05:00:10,692 INFO: ✅ Resposta de resultado enviada para o sinal 0GNI0XCP
2025-07-10 05:00:10,693 INFO: Sinal 0GNI0XCP validado como LOSS e notificação enviada
2025-07-10 05:00:10,693 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 0GNI0XCP
2025-07-10 05:00:10,693 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:01:09,830 INFO: 🔔 Novo candle detectado em 2025-07-10 08:01:00 UTC
2025-07-10 05:01:09,830 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:01:09,833 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:01:09,833 INFO: 🔔 Candle 1752134460 é maior que o entry_time 2025-07-10 04:59:00
2025-07-10 05:01:09,833 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:01:09,834 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:01:09,836 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:01:09,836 INFO: 🔄 Candle 1752134400 já existe no banco, atualizando...
2025-07-10 05:01:09,836 INFO: 🔄 Atualizando último gale item do candle 1752134400
2025-07-10 05:01:09,837 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134400, 'open_price': 2759.905, 'high': 2761.104, 'low': 2759.678, 'close_price': 2760.798, 'time': datetime.datetime(2025, 7, 10, 5, 0, 9, 874000), 'result': None}]}}
2025-07-10 05:01:09,839 INFO: Número de candles atualizados: 1
2025-07-10 05:01:09,839 INFO: ✅ Candle 1752134280 atualizado com sucesso
2025-07-10 05:01:09,840 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:01:09,840 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:01:09,840 INFO: Funcao validate_signals_for_candle iniciada para o sinal 0GNI0XCP
2025-07-10 05:01:09,840 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:01:09,842 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:01:09,842 INFO: Funcao validate_signal iniciada para o signal 0GNI0XCP
2025-07-10 05:01:09,842 INFO: Validando sinal 0GNI0XCP com gale items
2025-07-10 05:01:09,843 INFO: Gale G1 para o sinal 0GNI0XCP resultou em LOSS
2025-07-10 05:01:09,843 INFO: Sinal 0GNI0XCP adicionado à fila para G2
2025-07-10 05:01:09,843 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134400, 'open_price': 2759.905, 'high': 2761.104, 'low': 2759.678, 'close_price': 2760.798, 'time': datetime.datetime(2025, 7, 10, 5, 0, 9, 874000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752134460, 'open_price': 2761.066, 'high': 2761.066, 'low': 2761.066, 'close_price': 2761.066, 'time': datetime.datetime(2025, 7, 10, 5, 1, 9, 843245), 'result': None}]}}
2025-07-10 05:01:09,845 INFO: Número de candles atualizados: 1
2025-07-10 05:01:09,846 INFO: Candle completo com gales atualizado para 0GNI0XCP
2025-07-10 05:01:10,650 INFO: ✅ Resposta de resultado enviada para o sinal 0GNI0XCP
2025-07-10 05:01:10,651 INFO: Sinal 0GNI0XCP validado como LOSS e notificação enviada
2025-07-10 05:01:10,651 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 0GNI0XCP
2025-07-10 05:01:10,651 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:02:09,816 INFO: 🔔 Novo candle detectado em 2025-07-10 08:02:00 UTC
2025-07-10 05:02:09,816 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:02:09,819 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:02:09,820 INFO: 🔔 Candle 1752134520 é maior que o entry_time 2025-07-10 04:59:00
2025-07-10 05:02:09,820 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:02:09,820 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:02:09,822 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:02:09,823 INFO: 🔄 Candle 1752134460 já existe no banco, atualizando...
2025-07-10 05:02:09,823 INFO: 🔄 Atualizando último gale item do candle 1752134460
2025-07-10 05:02:09,823 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134400, 'open_price': 2759.905, 'high': 2761.104, 'low': 2759.678, 'close_price': 2760.798, 'time': datetime.datetime(2025, 7, 10, 5, 0, 9, 874000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752134460, 'open_price': 2761.066, 'high': 2761.786, 'low': 2761.038, 'close_price': 2761.552, 'time': datetime.datetime(2025, 7, 10, 5, 1, 9, 843000), 'result': None}]}}
2025-07-10 05:02:09,825 INFO: Número de candles atualizados: 1
2025-07-10 05:02:09,826 INFO: ✅ Candle 1752134280 atualizado com sucesso
2025-07-10 05:02:09,826 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:02:09,826 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:02:09,826 INFO: Funcao validate_signals_for_candle iniciada para o sinal 0GNI0XCP
2025-07-10 05:02:09,827 INFO: Buscando candle com signal_id: 0GNI0XCP
2025-07-10 05:02:09,829 INFO: Candle encontrado para o signal_id: 0GNI0XCP
2025-07-10 05:02:09,829 INFO: Funcao validate_signal iniciada para o signal 0GNI0XCP
2025-07-10 05:02:09,829 INFO: Validando sinal 0GNI0XCP com gale items
2025-07-10 05:02:09,830 INFO: Gale G2 para o sinal 0GNI0XCP resultou em LOSS
2025-07-10 05:02:09,830 INFO: Atualizando candle com filtro: {'epoch': 1752134280}, update: {'$set': {'epoch': 1752134280, 'open': 2759.497, 'high': 2760.259, 'low': 2759.113, 'close': 2759.901, 'time': datetime.datetime(2025, 7, 10, 7, 58), 'signal': {'signal_id': '0GNI0XCP', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 4, 58), 'entry_time': datetime.datetime(2025, 7, 10, 4, 59), 'open_candle_timestamp': 1752134280, 'message_id': 10178, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752134400, 'open_price': 2759.905, 'high': 2761.104, 'low': 2759.678, 'close_price': 2760.798, 'time': datetime.datetime(2025, 7, 10, 5, 0, 9, 874000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752134460, 'open_price': 2761.066, 'high': 2761.786, 'low': 2761.038, 'close_price': 2761.552, 'time': datetime.datetime(2025, 7, 10, 5, 1, 9, 843000), 'result': 'LOSS'}]}}
2025-07-10 05:02:09,832 INFO: Número de candles atualizados: 1
2025-07-10 05:02:09,832 INFO: Candle completo com gales atualizado para 0GNI0XCP
2025-07-10 05:02:10,638 INFO: ✅ Resposta de resultado enviada para o sinal 0GNI0XCP
2025-07-10 05:02:10,638 INFO: Sinal 0GNI0XCP validado como LOSS e notificação enviada
2025-07-10 05:02:10,639 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 0GNI0XCP
2025-07-10 05:02:10,639 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:03:09,848 INFO: 🔔 Novo candle detectado em 2025-07-10 08:03:00 UTC
2025-07-10 05:03:09,849 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:03:09,857 INFO: Buscando candle com filtro: {'epoch': 1752134580}
2025-07-10 05:03:09,860 INFO: Candle não encontrado
2025-07-10 05:03:09,874 INFO: Tendência HMA: FALL (HMA21=2759.25, HMA100=2759.88)
2025-07-10 05:03:09,875 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:03:09,875 INFO: 📈 Análise: EMA9=2759.41, EMA21=2759.66, trend_ema=FALL, trend_final=FALL, RSI=41.96, MACD=-0.33/-0.38, ATR=2.00, body=0.00, confidence=20
2025-07-10 05:03:09,876 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 05:03:09,876 INFO: Inserindo candle: Candle(2025-07-10 08:03:00, DOJI, O:2759.49, H:2759.49, L:2759.49, C:2759.49)
2025-07-10 05:03:09,878 INFO: Candle inserido com ID: 686f73bd1d9c27c6b2f10c55
2025-07-10 05:03:10,678 INFO: Atualizando candle com filtro: {'signal.signal_id': '7I3MIIA6'}, update: {'$set': {'signal': {'signal_id': '7I3MIIA6', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 3, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 4), 'open_candle_timestamp': 1752134580, 'message_id': 10182, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:03:10,682 INFO: Número de candles atualizados: 1
2025-07-10 05:03:10,682 INFO: ✅ Mensagem enviada ao Telegram (ID: 7I3MIIA6).
2025-07-10 05:04:09,848 INFO: 🔔 Novo candle detectado em 2025-07-10 08:04:00 UTC
2025-07-10 05:04:09,848 INFO: Buscando candle com signal_id: 7I3MIIA6
2025-07-10 05:04:09,851 INFO: Candle encontrado para o signal_id: 7I3MIIA6
2025-07-10 05:04:09,852 INFO: 🔔 Candle 1752134640 é menor ou igual ao entry_time 2025-07-10 05:04:00
2025-07-10 05:05:09,827 INFO: 🔔 Novo candle detectado em 2025-07-10 08:05:00 UTC
2025-07-10 05:05:09,827 INFO: Buscando candle com signal_id: 7I3MIIA6
2025-07-10 05:05:09,830 INFO: Candle encontrado para o signal_id: 7I3MIIA6
2025-07-10 05:05:09,830 INFO: 🔔 Candle 1752134700 é maior que o entry_time 2025-07-10 05:04:00
2025-07-10 05:05:09,830 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:05:09,831 INFO: Buscando candle com signal_id: 7I3MIIA6
2025-07-10 05:05:09,834 INFO: Candle encontrado para o signal_id: 7I3MIIA6
2025-07-10 05:05:09,834 INFO: 🔄 Candle 1752134580 já existe no banco, atualizando...
2025-07-10 05:05:09,834 INFO: 🔄 Candle 1752134580 não tem gale_items
2025-07-10 05:05:09,835 INFO: Atualizando candle com filtro: {'epoch': 1752134580}, update: {'$set': {'epoch': 1752134580, 'open': 2759.486, 'high': 2759.572, 'low': 2758.573, 'close': 2759.481, 'time': datetime.datetime(2025, 7, 10, 8, 3), 'signal': {'signal_id': '7I3MIIA6', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 3), 'entry_time': datetime.datetime(2025, 7, 10, 5, 4), 'open_candle_timestamp': 1752134580, 'message_id': 10182, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:05:09,837 INFO: Número de candles atualizados: 1
2025-07-10 05:05:09,837 INFO: ✅ Candle 1752134580 atualizado com sucesso
2025-07-10 05:05:09,837 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:05:09,838 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:05:09,838 INFO: Funcao validate_signals_for_candle iniciada para o sinal 7I3MIIA6
2025-07-10 05:05:09,838 INFO: Buscando candle com signal_id: 7I3MIIA6
2025-07-10 05:05:09,840 INFO: Candle encontrado para o signal_id: 7I3MIIA6
2025-07-10 05:05:09,840 INFO: Funcao validate_signal iniciada para o signal 7I3MIIA6
2025-07-10 05:05:09,840 INFO: Funcao validate_signal finalizada para o signal 7I3MIIA6
2025-07-10 05:05:09,840 INFO: Validando sinal 7I3MIIA6 sem gale items
2025-07-10 05:05:09,840 INFO: Atualizando candle com filtro: {'signal.signal_id': '7I3MIIA6'}, update: {'$set': {'signal': {'signal_id': '7I3MIIA6', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 3), 'entry_time': datetime.datetime(2025, 7, 10, 5, 4), 'open_candle_timestamp': 1752134580, 'message_id': 10182, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:05:09,843 INFO: Número de candles atualizados: 1
2025-07-10 05:05:09,843 INFO: Sinal atualizado no repositório para 7I3MIIA6
2025-07-10 05:05:10,658 INFO: ✅ Resposta de resultado enviada para o sinal 7I3MIIA6
2025-07-10 05:05:10,658 INFO: Sinal 7I3MIIA6 validado como WIN e notificação enviada
2025-07-10 05:05:10,658 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 7I3MIIA6
2025-07-10 05:05:10,659 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:06:09,829 INFO: 🔔 Novo candle detectado em 2025-07-10 08:06:00 UTC
2025-07-10 05:06:09,830 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:06:09,838 INFO: Buscando candle com filtro: {'epoch': 1752134760}
2025-07-10 05:06:09,840 INFO: Candle não encontrado
2025-07-10 05:06:09,855 INFO: Tendência HMA: FALL (HMA21=2755.76, HMA100=2755.18)
2025-07-10 05:06:09,856 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:06:09,856 INFO: 📈 Análise: EMA9=2755.86, EMA21=2755.92, trend_ema=FALL, trend_final=FALL, RSI=52.08, MACD=-0.18/-0.30, ATR=1.00, body=0.00, confidence=20
2025-07-10 05:06:09,856 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 05:06:09,857 INFO: Inserindo candle: Candle(2025-07-10 08:06:00, DOJI, O:2756.11, H:2756.11, L:2756.11, C:2756.11)
2025-07-10 05:06:09,859 INFO: Candle inserido com ID: 686f74711d9c27c6b2f10c56
2025-07-10 05:06:10,670 INFO: Atualizando candle com filtro: {'signal.signal_id': 'S1URYM6Q'}, update: {'$set': {'signal': {'signal_id': 'S1URYM6Q', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 6, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 7), 'open_candle_timestamp': 1752134760, 'message_id': 10185, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:06:10,673 INFO: Número de candles atualizados: 1
2025-07-10 05:06:10,674 INFO: ✅ Mensagem enviada ao Telegram (ID: S1URYM6Q).
2025-07-10 05:07:09,855 INFO: 🔔 Novo candle detectado em 2025-07-10 08:07:00 UTC
2025-07-10 05:07:09,855 INFO: Buscando candle com signal_id: S1URYM6Q
2025-07-10 05:07:09,858 INFO: Candle encontrado para o signal_id: S1URYM6Q
2025-07-10 05:07:09,859 INFO: 🔔 Candle 1752134820 é menor ou igual ao entry_time 2025-07-10 05:07:00
2025-07-10 05:08:09,831 INFO: 🔔 Novo candle detectado em 2025-07-10 08:08:00 UTC
2025-07-10 05:08:09,831 INFO: Buscando candle com signal_id: S1URYM6Q
2025-07-10 05:08:09,834 INFO: Candle encontrado para o signal_id: S1URYM6Q
2025-07-10 05:08:09,835 INFO: 🔔 Candle 1752134880 é maior que o entry_time 2025-07-10 05:07:00
2025-07-10 05:08:09,835 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:08:09,835 INFO: Buscando candle com signal_id: S1URYM6Q
2025-07-10 05:08:09,837 INFO: Candle encontrado para o signal_id: S1URYM6Q
2025-07-10 05:08:09,838 INFO: 🔄 Candle 1752134760 já existe no banco, atualizando...
2025-07-10 05:08:09,838 INFO: 🔄 Candle 1752134760 não tem gale_items
2025-07-10 05:08:09,838 INFO: Atualizando candle com filtro: {'epoch': 1752134760}, update: {'$set': {'epoch': 1752134760, 'open': 2756.108, 'high': 2756.108, 'low': 2754.684, 'close': 2754.85, 'time': datetime.datetime(2025, 7, 10, 8, 6), 'signal': {'signal_id': 'S1URYM6Q', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 6), 'entry_time': datetime.datetime(2025, 7, 10, 5, 7), 'open_candle_timestamp': 1752134760, 'message_id': 10185, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:08:09,841 INFO: Número de candles atualizados: 1
2025-07-10 05:08:09,841 INFO: ✅ Candle 1752134760 atualizado com sucesso
2025-07-10 05:08:09,841 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:08:09,841 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:08:09,842 INFO: Funcao validate_signals_for_candle iniciada para o sinal S1URYM6Q
2025-07-10 05:08:09,842 INFO: Buscando candle com signal_id: S1URYM6Q
2025-07-10 05:08:09,843 INFO: Candle encontrado para o signal_id: S1URYM6Q
2025-07-10 05:08:09,844 INFO: Funcao validate_signal iniciada para o signal S1URYM6Q
2025-07-10 05:08:09,844 INFO: Funcao validate_signal finalizada para o signal S1URYM6Q
2025-07-10 05:08:09,844 INFO: Validando sinal S1URYM6Q sem gale items
2025-07-10 05:08:09,845 INFO: Atualizando candle com filtro: {'signal.signal_id': 'S1URYM6Q'}, update: {'$set': {'signal': {'signal_id': 'S1URYM6Q', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 6), 'entry_time': datetime.datetime(2025, 7, 10, 5, 7), 'open_candle_timestamp': 1752134760, 'message_id': 10185, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:08:09,846 INFO: Número de candles atualizados: 1
2025-07-10 05:08:09,847 INFO: Sinal atualizado no repositório para S1URYM6Q
2025-07-10 05:08:10,642 INFO: ✅ Resposta de resultado enviada para o sinal S1URYM6Q
2025-07-10 05:08:10,644 INFO: Sinal S1URYM6Q validado como WIN e notificação enviada
2025-07-10 05:08:10,644 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal S1URYM6Q
2025-07-10 05:08:10,644 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:09:09,834 INFO: 🔔 Novo candle detectado em 2025-07-10 08:09:00 UTC
2025-07-10 05:09:09,835 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:09:09,843 INFO: Buscando candle com filtro: {'epoch': 1752134940}
2025-07-10 05:09:09,846 INFO: Candle não encontrado
2025-07-10 05:09:09,861 INFO: Tendência HMA: FALL (HMA21=2754.20, HMA100=2753.61)
2025-07-10 05:09:09,862 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:09:09,862 INFO: 📈 Análise: EMA9=2754.11, EMA21=2754.01, trend_ema=RISE, trend_final=FALL, RSI=59.12, MACD=0.07/0.03, ATR=0.72, body=0.00, confidence=60
2025-07-10 05:09:09,862 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 05:09:09,862 INFO: Inserindo candle: Candle(2025-07-10 08:09:00, DOJI, O:2754.32, H:2754.32, L:2754.32, C:2754.32)
2025-07-10 05:09:09,865 INFO: Candle inserido com ID: 686f75251d9c27c6b2f10c57
2025-07-10 05:09:10,723 INFO: Atualizando candle com filtro: {'signal.signal_id': 'Y7V9V0S9'}, update: {'$set': {'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 9, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:09:10,726 INFO: Número de candles atualizados: 1
2025-07-10 05:09:10,727 INFO: ✅ Mensagem enviada ao Telegram (ID: Y7V9V0S9).
2025-07-10 05:10:09,844 INFO: 🔔 Novo candle detectado em 2025-07-10 08:10:00 UTC
2025-07-10 05:10:09,844 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:10:09,847 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:10:09,847 INFO: 🔔 Candle 1752135000 é menor ou igual ao entry_time 2025-07-10 05:10:00
2025-07-10 05:11:09,839 INFO: 🔔 Novo candle detectado em 2025-07-10 08:11:00 UTC
2025-07-10 05:11:09,840 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:11:09,842 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:11:09,843 INFO: 🔔 Candle 1752135060 é maior que o entry_time 2025-07-10 05:10:00
2025-07-10 05:11:09,843 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:11:09,844 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:11:09,846 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:11:09,846 INFO: 🔄 Candle 1752134940 já existe no banco, atualizando...
2025-07-10 05:11:09,847 INFO: 🔄 Candle 1752134940 não tem gale_items
2025-07-10 05:11:09,847 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:11:09,849 INFO: Número de candles atualizados: 1
2025-07-10 05:11:09,849 INFO: ✅ Candle 1752134940 atualizado com sucesso
2025-07-10 05:11:09,849 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:11:09,850 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:11:09,850 INFO: Funcao validate_signals_for_candle iniciada para o sinal Y7V9V0S9
2025-07-10 05:11:09,850 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:11:09,852 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:11:09,852 INFO: Funcao validate_signal iniciada para o signal Y7V9V0S9
2025-07-10 05:11:09,852 INFO: Funcao validate_signal finalizada para o signal Y7V9V0S9
2025-07-10 05:11:09,852 INFO: Validando sinal Y7V9V0S9 sem gale items
2025-07-10 05:11:09,853 INFO: Sinal Y7V9V0S9 adicionado à fila para G1
2025-07-10 05:11:09,853 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135060, 'open_price': 2753.558, 'high': 2753.558, 'low': 2753.558, 'close_price': 2753.558, 'time': datetime.datetime(2025, 7, 10, 5, 11, 9, 853427), 'result': None}]}}
2025-07-10 05:11:09,855 INFO: Número de candles atualizados: 1
2025-07-10 05:11:09,855 INFO: Candle completo com gales atualizado para Y7V9V0S9
2025-07-10 05:11:10,655 INFO: ✅ Resposta de resultado enviada para o sinal Y7V9V0S9
2025-07-10 05:11:10,655 INFO: Sinal Y7V9V0S9 validado como LOSS e notificação enviada
2025-07-10 05:11:10,655 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Y7V9V0S9
2025-07-10 05:11:10,656 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:12:09,838 INFO: 🔔 Novo candle detectado em 2025-07-10 08:12:00 UTC
2025-07-10 05:12:09,838 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:12:09,841 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:12:09,842 INFO: 🔔 Candle 1752135120 é maior que o entry_time 2025-07-10 05:10:00
2025-07-10 05:12:09,842 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:12:09,842 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:12:09,844 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:12:09,844 INFO: 🔄 Candle 1752135060 já existe no banco, atualizando...
2025-07-10 05:12:09,845 INFO: 🔄 Atualizando último gale item do candle 1752135060
2025-07-10 05:12:09,845 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135060, 'open_price': 2753.558, 'high': 2755.019, 'low': 2753.558, 'close_price': 2754.866, 'time': datetime.datetime(2025, 7, 10, 5, 11, 9, 853000), 'result': None}]}}
2025-07-10 05:12:09,848 INFO: Número de candles atualizados: 1
2025-07-10 05:12:09,848 INFO: ✅ Candle 1752134940 atualizado com sucesso
2025-07-10 05:12:09,848 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:12:09,848 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:12:09,848 INFO: Funcao validate_signals_for_candle iniciada para o sinal Y7V9V0S9
2025-07-10 05:12:09,848 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:12:09,850 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:12:09,850 INFO: Funcao validate_signal iniciada para o signal Y7V9V0S9
2025-07-10 05:12:09,850 INFO: Validando sinal Y7V9V0S9 com gale items
2025-07-10 05:12:09,851 INFO: Gale G1 para o sinal Y7V9V0S9 resultou em LOSS
2025-07-10 05:12:09,851 INFO: Sinal Y7V9V0S9 adicionado à fila para G2
2025-07-10 05:12:09,851 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135060, 'open_price': 2753.558, 'high': 2755.019, 'low': 2753.558, 'close_price': 2754.866, 'time': datetime.datetime(2025, 7, 10, 5, 11, 9, 853000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752135120, 'open_price': 2754.803, 'high': 2754.803, 'low': 2754.803, 'close_price': 2754.803, 'time': datetime.datetime(2025, 7, 10, 5, 12, 9, 851162), 'result': None}]}}
2025-07-10 05:12:09,853 INFO: Número de candles atualizados: 1
2025-07-10 05:12:09,853 INFO: Candle completo com gales atualizado para Y7V9V0S9
2025-07-10 05:12:10,651 INFO: ✅ Resposta de resultado enviada para o sinal Y7V9V0S9
2025-07-10 05:12:10,652 INFO: Sinal Y7V9V0S9 validado como LOSS e notificação enviada
2025-07-10 05:12:10,652 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Y7V9V0S9
2025-07-10 05:12:10,653 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:13:09,843 INFO: 🔔 Novo candle detectado em 2025-07-10 08:13:00 UTC
2025-07-10 05:13:09,844 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:13:09,847 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:13:09,847 INFO: 🔔 Candle 1752135180 é maior que o entry_time 2025-07-10 05:10:00
2025-07-10 05:13:09,848 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:13:09,848 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:13:09,850 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:13:09,851 INFO: 🔄 Candle 1752135120 já existe no banco, atualizando...
2025-07-10 05:13:09,851 INFO: 🔄 Atualizando último gale item do candle 1752135120
2025-07-10 05:13:09,851 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135060, 'open_price': 2753.558, 'high': 2755.019, 'low': 2753.558, 'close_price': 2754.866, 'time': datetime.datetime(2025, 7, 10, 5, 11, 9, 853000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752135120, 'open_price': 2754.803, 'high': 2755.76, 'low': 2753.805, 'close_price': 2753.953, 'time': datetime.datetime(2025, 7, 10, 5, 12, 9, 851000), 'result': None}]}}
2025-07-10 05:13:09,853 INFO: Número de candles atualizados: 1
2025-07-10 05:13:09,854 INFO: ✅ Candle 1752134940 atualizado com sucesso
2025-07-10 05:13:09,854 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:13:09,854 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:13:09,854 INFO: Funcao validate_signals_for_candle iniciada para o sinal Y7V9V0S9
2025-07-10 05:13:09,854 INFO: Buscando candle com signal_id: Y7V9V0S9
2025-07-10 05:13:09,856 INFO: Candle encontrado para o signal_id: Y7V9V0S9
2025-07-10 05:13:09,856 INFO: Funcao validate_signal iniciada para o signal Y7V9V0S9
2025-07-10 05:13:09,857 INFO: Validando sinal Y7V9V0S9 com gale items
2025-07-10 05:13:09,857 INFO: Atualizando candle com filtro: {'epoch': 1752134940}, update: {'$set': {'epoch': 1752134940, 'open': 2754.322, 'high': 2755.776, 'low': 2754.322, 'close': 2755.51, 'time': datetime.datetime(2025, 7, 10, 8, 9), 'signal': {'signal_id': 'Y7V9V0S9', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 9), 'entry_time': datetime.datetime(2025, 7, 10, 5, 10), 'open_candle_timestamp': 1752134940, 'message_id': 10188, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135060, 'open_price': 2753.558, 'high': 2755.019, 'low': 2753.558, 'close_price': 2754.866, 'time': datetime.datetime(2025, 7, 10, 5, 11, 9, 853000), 'result': 'LOSS'}, {'gale_type': 'G2', 'epoch': 1752135120, 'open_price': 2754.803, 'high': 2755.76, 'low': 2753.805, 'close_price': 2753.953, 'time': datetime.datetime(2025, 7, 10, 5, 12, 9, 851000), 'result': 'WIN'}]}}
2025-07-10 05:13:09,859 INFO: Número de candles atualizados: 1
2025-07-10 05:13:09,859 INFO: Candle completo com gales atualizado para Y7V9V0S9
2025-07-10 05:13:10,650 INFO: ✅ Resposta de resultado enviada para o sinal Y7V9V0S9
2025-07-10 05:13:10,651 INFO: Sinal Y7V9V0S9 validado como LOSS e notificação enviada
2025-07-10 05:13:10,651 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal Y7V9V0S9
2025-07-10 05:13:10,651 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:14:09,829 INFO: 🔔 Novo candle detectado em 2025-07-10 08:14:00 UTC
2025-07-10 05:14:09,829 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:14:09,837 INFO: Buscando candle com filtro: {'epoch': 1752135240}
2025-07-10 05:14:09,840 INFO: Candle não encontrado
2025-07-10 05:14:09,856 INFO: Tendência HMA: FALL (HMA21=2754.27, HMA100=2753.69)
2025-07-10 05:14:09,856 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:14:09,856 INFO: 📈 Análise: EMA9=2754.14, EMA21=2754.06, trend_ema=RISE, trend_final=FALL, RSI=52.58, MACD=0.06/0.04, ATR=1.03, body=0.00, confidence=40
2025-07-10 05:14:09,857 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 05:14:09,857 INFO: Inserindo candle: Candle(2025-07-10 08:14:00, DOJI, O:2754.14, H:2754.14, L:2754.14, C:2754.14)
2025-07-10 05:14:09,860 INFO: Candle inserido com ID: 686f76511d9c27c6b2f10c58
2025-07-10 05:14:10,670 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XTY9YKVY'}, update: {'$set': {'signal': {'signal_id': 'XTY9YKVY', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 14, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 15), 'open_candle_timestamp': 1752135240, 'message_id': 10192, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:14:10,673 INFO: Número de candles atualizados: 1
2025-07-10 05:14:10,673 INFO: ✅ Mensagem enviada ao Telegram (ID: XTY9YKVY).
2025-07-10 05:15:09,867 INFO: 🔔 Novo candle detectado em 2025-07-10 08:15:00 UTC
2025-07-10 05:15:09,867 INFO: Buscando candle com signal_id: XTY9YKVY
2025-07-10 05:15:09,870 INFO: Candle encontrado para o signal_id: XTY9YKVY
2025-07-10 05:15:09,870 INFO: 🔔 Candle 1752135300 é menor ou igual ao entry_time 2025-07-10 05:15:00
2025-07-10 05:16:09,847 INFO: 🔔 Novo candle detectado em 2025-07-10 08:16:00 UTC
2025-07-10 05:16:09,848 INFO: Buscando candle com signal_id: XTY9YKVY
2025-07-10 05:16:09,851 INFO: Candle encontrado para o signal_id: XTY9YKVY
2025-07-10 05:16:09,851 INFO: 🔔 Candle 1752135360 é maior que o entry_time 2025-07-10 05:15:00
2025-07-10 05:16:09,851 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:16:09,852 INFO: Buscando candle com signal_id: XTY9YKVY
2025-07-10 05:16:09,854 INFO: Candle encontrado para o signal_id: XTY9YKVY
2025-07-10 05:16:09,855 INFO: 🔄 Candle 1752135240 já existe no banco, atualizando...
2025-07-10 05:16:09,855 INFO: 🔄 Candle 1752135240 não tem gale_items
2025-07-10 05:16:09,855 INFO: Atualizando candle com filtro: {'epoch': 1752135240}, update: {'$set': {'epoch': 1752135240, 'open': 2754.135, 'high': 2754.529, 'low': 2753.486, 'close': 2753.814, 'time': datetime.datetime(2025, 7, 10, 8, 14), 'signal': {'signal_id': 'XTY9YKVY', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 14), 'entry_time': datetime.datetime(2025, 7, 10, 5, 15), 'open_candle_timestamp': 1752135240, 'message_id': 10192, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:16:09,857 INFO: Número de candles atualizados: 1
2025-07-10 05:16:09,858 INFO: ✅ Candle 1752135240 atualizado com sucesso
2025-07-10 05:16:09,858 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:16:09,858 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:16:09,858 INFO: Funcao validate_signals_for_candle iniciada para o sinal XTY9YKVY
2025-07-10 05:16:09,859 INFO: Buscando candle com signal_id: XTY9YKVY
2025-07-10 05:16:09,861 INFO: Candle encontrado para o signal_id: XTY9YKVY
2025-07-10 05:16:09,861 INFO: Funcao validate_signal iniciada para o signal XTY9YKVY
2025-07-10 05:16:09,861 INFO: Funcao validate_signal finalizada para o signal XTY9YKVY
2025-07-10 05:16:09,861 INFO: Validando sinal XTY9YKVY sem gale items
2025-07-10 05:16:09,861 INFO: Atualizando candle com filtro: {'signal.signal_id': 'XTY9YKVY'}, update: {'$set': {'signal': {'signal_id': 'XTY9YKVY', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 14), 'entry_time': datetime.datetime(2025, 7, 10, 5, 15), 'open_candle_timestamp': 1752135240, 'message_id': 10192, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:16:09,863 INFO: Número de candles atualizados: 1
2025-07-10 05:16:09,863 INFO: Sinal atualizado no repositório para XTY9YKVY
2025-07-10 05:16:10,730 INFO: ✅ Resposta de resultado enviada para o sinal XTY9YKVY
2025-07-10 05:16:10,730 INFO: Sinal XTY9YKVY validado como WIN e notificação enviada
2025-07-10 05:16:10,731 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal XTY9YKVY
2025-07-10 05:16:10,731 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:17:09,836 INFO: 🔔 Novo candle detectado em 2025-07-10 08:17:00 UTC
2025-07-10 05:17:09,837 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:17:09,846 INFO: Buscando candle com filtro: {'epoch': 1752135420}
2025-07-10 05:17:09,849 INFO: Candle não encontrado
2025-07-10 05:17:09,865 INFO: Tendência HMA: FALL (HMA21=2753.34, HMA100=2753.30)
2025-07-10 05:17:09,865 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:17:09,865 INFO: 📈 Análise: EMA9=2753.29, EMA21=2753.37, trend_ema=FALL, trend_final=FALL, RSI=41.13, MACD=-0.08/-0.05, ATR=0.56, body=0.00, confidence=60
2025-07-10 05:17:09,866 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 05:17:09,866 INFO: Inserindo candle: Candle(2025-07-10 08:17:00, DOJI, O:2753.15, H:2753.15, L:2753.15, C:2753.15)
2025-07-10 05:17:09,868 INFO: Candle inserido com ID: 686f77051d9c27c6b2f10c59
2025-07-10 05:17:10,671 INFO: Atualizando candle com filtro: {'signal.signal_id': 'VNK77H3N'}, update: {'$set': {'signal': {'signal_id': 'VNK77H3N', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 17, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 18), 'open_candle_timestamp': 1752135420, 'message_id': 10195, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:17:10,673 INFO: Número de candles atualizados: 1
2025-07-10 05:17:10,674 INFO: ✅ Mensagem enviada ao Telegram (ID: VNK77H3N).
2025-07-10 05:18:09,870 INFO: 🔔 Novo candle detectado em 2025-07-10 08:18:00 UTC
2025-07-10 05:18:09,870 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:18:09,873 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:18:09,873 INFO: 🔔 Candle 1752135480 é menor ou igual ao entry_time 2025-07-10 05:18:00
2025-07-10 05:19:09,851 INFO: 🔔 Novo candle detectado em 2025-07-10 08:19:00 UTC
2025-07-10 05:19:09,851 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:19:09,854 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:19:09,855 INFO: 🔔 Candle 1752135540 é maior que o entry_time 2025-07-10 05:18:00
2025-07-10 05:19:09,855 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:19:09,855 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:19:09,858 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:19:09,858 INFO: 🔄 Candle 1752135420 já existe no banco, atualizando...
2025-07-10 05:19:09,858 INFO: 🔄 Candle 1752135420 não tem gale_items
2025-07-10 05:19:09,858 INFO: Atualizando candle com filtro: {'epoch': 1752135420}, update: {'$set': {'epoch': 1752135420, 'open': 2753.15, 'high': 2754.97, 'low': 2752.976, 'close': 2754.64, 'time': datetime.datetime(2025, 7, 10, 8, 17), 'signal': {'signal_id': 'VNK77H3N', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 17), 'entry_time': datetime.datetime(2025, 7, 10, 5, 18), 'open_candle_timestamp': 1752135420, 'message_id': 10195, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:19:09,861 INFO: Número de candles atualizados: 1
2025-07-10 05:19:09,861 INFO: ✅ Candle 1752135420 atualizado com sucesso
2025-07-10 05:19:09,861 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:19:09,862 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:19:09,862 INFO: Funcao validate_signals_for_candle iniciada para o sinal VNK77H3N
2025-07-10 05:19:09,862 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:19:09,864 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:19:09,864 INFO: Funcao validate_signal iniciada para o signal VNK77H3N
2025-07-10 05:19:09,864 INFO: Funcao validate_signal finalizada para o signal VNK77H3N
2025-07-10 05:19:09,864 INFO: Validando sinal VNK77H3N sem gale items
2025-07-10 05:19:09,864 INFO: Sinal VNK77H3N adicionado à fila para G1
2025-07-10 05:19:09,864 INFO: Atualizando candle com filtro: {'epoch': 1752135420}, update: {'$set': {'epoch': 1752135420, 'open': 2753.15, 'high': 2754.97, 'low': 2752.976, 'close': 2754.64, 'time': datetime.datetime(2025, 7, 10, 8, 17), 'signal': {'signal_id': 'VNK77H3N', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 17), 'entry_time': datetime.datetime(2025, 7, 10, 5, 18), 'open_candle_timestamp': 1752135420, 'message_id': 10195, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135540, 'open_price': 2756.073, 'high': 2756.073, 'low': 2756.073, 'close_price': 2756.073, 'time': datetime.datetime(2025, 7, 10, 5, 19, 9, 864680), 'result': None}]}}
2025-07-10 05:19:09,867 INFO: Número de candles atualizados: 1
2025-07-10 05:19:09,867 INFO: Candle completo com gales atualizado para VNK77H3N
2025-07-10 05:19:10,656 INFO: ✅ Resposta de resultado enviada para o sinal VNK77H3N
2025-07-10 05:19:10,657 INFO: Sinal VNK77H3N validado como LOSS e notificação enviada
2025-07-10 05:19:10,657 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal VNK77H3N
2025-07-10 05:19:10,657 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:20:09,861 INFO: 🔔 Novo candle detectado em 2025-07-10 08:20:00 UTC
2025-07-10 05:20:09,862 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:20:09,864 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:20:09,865 INFO: 🔔 Candle 1752135600 é maior que o entry_time 2025-07-10 05:18:00
2025-07-10 05:20:09,865 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:20:09,865 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:20:09,868 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:20:09,869 INFO: 🔄 Candle 1752135540 já existe no banco, atualizando...
2025-07-10 05:20:09,869 INFO: 🔄 Atualizando último gale item do candle 1752135540
2025-07-10 05:20:09,869 INFO: Atualizando candle com filtro: {'epoch': 1752135420}, update: {'$set': {'epoch': 1752135420, 'open': 2753.15, 'high': 2754.97, 'low': 2752.976, 'close': 2754.64, 'time': datetime.datetime(2025, 7, 10, 8, 17), 'signal': {'signal_id': 'VNK77H3N', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 17), 'entry_time': datetime.datetime(2025, 7, 10, 5, 18), 'open_candle_timestamp': 1752135420, 'message_id': 10195, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135540, 'open_price': 2756.073, 'high': 2756.345, 'low': 2755.055, 'close_price': 2755.972, 'time': datetime.datetime(2025, 7, 10, 5, 19, 9, 864000), 'result': None}]}}
2025-07-10 05:20:09,871 INFO: Número de candles atualizados: 1
2025-07-10 05:20:09,871 INFO: ✅ Candle 1752135420 atualizado com sucesso
2025-07-10 05:20:09,872 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:20:09,872 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:20:09,873 INFO: Funcao validate_signals_for_candle iniciada para o sinal VNK77H3N
2025-07-10 05:20:09,873 INFO: Buscando candle com signal_id: VNK77H3N
2025-07-10 05:20:09,874 INFO: Candle encontrado para o signal_id: VNK77H3N
2025-07-10 05:20:09,875 INFO: Funcao validate_signal iniciada para o signal VNK77H3N
2025-07-10 05:20:09,875 INFO: Validando sinal VNK77H3N com gale items
2025-07-10 05:20:09,875 INFO: Atualizando candle com filtro: {'epoch': 1752135420}, update: {'$set': {'epoch': 1752135420, 'open': 2753.15, 'high': 2754.97, 'low': 2752.976, 'close': 2754.64, 'time': datetime.datetime(2025, 7, 10, 8, 17), 'signal': {'signal_id': 'VNK77H3N', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 17), 'entry_time': datetime.datetime(2025, 7, 10, 5, 18), 'open_candle_timestamp': 1752135420, 'message_id': 10195, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135540, 'open_price': 2756.073, 'high': 2756.345, 'low': 2755.055, 'close_price': 2755.972, 'time': datetime.datetime(2025, 7, 10, 5, 19, 9, 864000), 'result': 'WIN'}]}}
2025-07-10 05:20:09,877 INFO: Número de candles atualizados: 1
2025-07-10 05:20:09,878 INFO: Candle completo com gales atualizado para VNK77H3N
2025-07-10 05:20:10,689 INFO: ✅ Resposta de resultado enviada para o sinal VNK77H3N
2025-07-10 05:20:10,690 INFO: Sinal VNK77H3N validado como LOSS e notificação enviada
2025-07-10 05:20:10,690 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal VNK77H3N
2025-07-10 05:20:10,691 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:21:09,853 INFO: 🔔 Novo candle detectado em 2025-07-10 08:21:00 UTC
2025-07-10 05:21:09,853 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:21:09,861 INFO: Buscando candle com filtro: {'epoch': 1752135660}
2025-07-10 05:21:09,864 INFO: Candle não encontrado
2025-07-10 05:21:09,879 INFO: Tendência HMA: FALL (HMA21=2755.86, HMA100=2755.61)
2025-07-10 05:21:09,880 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:21:09,880 INFO: 📈 Análise: EMA9=2755.77, EMA21=2755.64, trend_ema=RISE, trend_final=FALL, RSI=59.77, MACD=0.09/0.03, ATR=0.74, body=0.00, confidence=60
2025-07-10 05:21:09,880 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 05:21:09,880 INFO: Inserindo candle: Candle(2025-07-10 08:21:00, DOJI, O:2756.09, H:2756.09, L:2756.09, C:2756.09)
2025-07-10 05:21:09,883 INFO: Candle inserido com ID: 686f77f51d9c27c6b2f10c5a
2025-07-10 05:21:10,692 INFO: Atualizando candle com filtro: {'signal.signal_id': '309UME9X'}, update: {'$set': {'signal': {'signal_id': '309UME9X', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 21, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 22), 'open_candle_timestamp': 1752135660, 'message_id': 10199, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:21:10,695 INFO: Número de candles atualizados: 1
2025-07-10 05:21:10,695 INFO: ✅ Mensagem enviada ao Telegram (ID: 309UME9X).
2025-07-10 05:22:09,843 INFO: 🔔 Novo candle detectado em 2025-07-10 08:22:00 UTC
2025-07-10 05:22:09,843 INFO: Buscando candle com signal_id: 309UME9X
2025-07-10 05:22:09,846 INFO: Candle encontrado para o signal_id: 309UME9X
2025-07-10 05:22:09,846 INFO: 🔔 Candle 1752135720 é menor ou igual ao entry_time 2025-07-10 05:22:00
2025-07-10 05:23:09,870 INFO: 🔔 Novo candle detectado em 2025-07-10 08:23:00 UTC
2025-07-10 05:23:09,870 INFO: Buscando candle com signal_id: 309UME9X
2025-07-10 05:23:09,873 INFO: Candle encontrado para o signal_id: 309UME9X
2025-07-10 05:23:09,873 INFO: 🔔 Candle 1752135780 é maior que o entry_time 2025-07-10 05:22:00
2025-07-10 05:23:09,873 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:23:09,874 INFO: Buscando candle com signal_id: 309UME9X
2025-07-10 05:23:09,876 INFO: Candle encontrado para o signal_id: 309UME9X
2025-07-10 05:23:09,877 INFO: 🔄 Candle 1752135660 já existe no banco, atualizando...
2025-07-10 05:23:09,877 INFO: 🔄 Candle 1752135660 não tem gale_items
2025-07-10 05:23:09,877 INFO: Atualizando candle com filtro: {'epoch': 1752135660}, update: {'$set': {'epoch': 1752135660, 'open': 2756.095, 'high': 2756.623, 'low': 2755.34, 'close': 2755.951, 'time': datetime.datetime(2025, 7, 10, 8, 21), 'signal': {'signal_id': '309UME9X', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 21), 'entry_time': datetime.datetime(2025, 7, 10, 5, 22), 'open_candle_timestamp': 1752135660, 'message_id': 10199, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:23:09,879 INFO: Número de candles atualizados: 1
2025-07-10 05:23:09,880 INFO: ✅ Candle 1752135660 atualizado com sucesso
2025-07-10 05:23:09,880 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:23:09,881 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:23:09,881 INFO: Funcao validate_signals_for_candle iniciada para o sinal 309UME9X
2025-07-10 05:23:09,881 INFO: Buscando candle com signal_id: 309UME9X
2025-07-10 05:23:09,883 INFO: Candle encontrado para o signal_id: 309UME9X
2025-07-10 05:23:09,883 INFO: Funcao validate_signal iniciada para o signal 309UME9X
2025-07-10 05:23:09,883 INFO: Funcao validate_signal finalizada para o signal 309UME9X
2025-07-10 05:23:09,883 INFO: Validando sinal 309UME9X sem gale items
2025-07-10 05:23:09,884 INFO: Atualizando candle com filtro: {'signal.signal_id': '309UME9X'}, update: {'$set': {'signal': {'signal_id': '309UME9X', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 21), 'entry_time': datetime.datetime(2025, 7, 10, 5, 22), 'open_candle_timestamp': 1752135660, 'message_id': 10199, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:23:09,886 INFO: Número de candles atualizados: 1
2025-07-10 05:23:09,886 INFO: Sinal atualizado no repositório para 309UME9X
2025-07-10 05:23:10,677 INFO: ✅ Resposta de resultado enviada para o sinal 309UME9X
2025-07-10 05:23:10,677 INFO: Sinal 309UME9X validado como WIN e notificação enviada
2025-07-10 05:23:10,678 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 309UME9X
2025-07-10 05:23:10,678 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:24:09,823 INFO: 🔔 Novo candle detectado em 2025-07-10 08:24:00 UTC
2025-07-10 05:24:09,823 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:24:09,833 INFO: Buscando candle com filtro: {'epoch': 1752135840}
2025-07-10 05:24:09,836 INFO: Candle não encontrado
2025-07-10 05:24:09,850 INFO: Tendência HMA: FALL (HMA21=2754.04, HMA100=2754.24)
2025-07-10 05:24:09,850 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:24:09,851 INFO: 📈 Análise: EMA9=2754.09, EMA21=2754.31, trend_ema=FALL, trend_final=FALL, RSI=29.68, MACD=-0.25/-0.25, ATR=0.88, body=0.00, confidence=80
2025-07-10 05:24:09,851 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 80%
2025-07-10 05:24:09,851 INFO: Inserindo candle: Candle(2025-07-10 08:24:00, DOJI, O:2753.67, H:2753.67, L:2753.67, C:2753.67)
2025-07-10 05:24:09,854 INFO: Candle inserido com ID: 686f78a91d9c27c6b2f10c5b
2025-07-10 05:24:10,656 INFO: Atualizando candle com filtro: {'signal.signal_id': 'K8V2L98I'}, update: {'$set': {'signal': {'signal_id': 'K8V2L98I', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 24, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 25), 'open_candle_timestamp': 1752135840, 'message_id': 10201, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:24:10,660 INFO: Número de candles atualizados: 1
2025-07-10 05:24:10,660 INFO: ✅ Mensagem enviada ao Telegram (ID: K8V2L98I).
2025-07-10 05:25:09,838 INFO: 🔔 Novo candle detectado em 2025-07-10 08:25:00 UTC
2025-07-10 05:25:09,838 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:25:09,842 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:25:09,842 INFO: 🔔 Candle 1752135900 é menor ou igual ao entry_time 2025-07-10 05:25:00
2025-07-10 05:26:09,822 INFO: 🔔 Novo candle detectado em 2025-07-10 08:26:00 UTC
2025-07-10 05:26:09,822 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:26:09,825 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:26:09,826 INFO: 🔔 Candle 1752135960 é maior que o entry_time 2025-07-10 05:25:00
2025-07-10 05:26:09,826 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:26:09,827 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:26:09,829 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:26:09,829 INFO: 🔄 Candle 1752135840 já existe no banco, atualizando...
2025-07-10 05:26:09,829 INFO: 🔄 Candle 1752135840 não tem gale_items
2025-07-10 05:26:09,829 INFO: Atualizando candle com filtro: {'epoch': 1752135840}, update: {'$set': {'epoch': 1752135840, 'open': 2753.673, 'high': 2754.321, 'low': 2753.673, 'close': 2754.015, 'time': datetime.datetime(2025, 7, 10, 8, 24), 'signal': {'signal_id': 'K8V2L98I', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 24), 'entry_time': datetime.datetime(2025, 7, 10, 5, 25), 'open_candle_timestamp': 1752135840, 'message_id': 10201, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:26:09,832 INFO: Número de candles atualizados: 1
2025-07-10 05:26:09,832 INFO: ✅ Candle 1752135840 atualizado com sucesso
2025-07-10 05:26:09,833 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:26:09,833 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:26:09,833 INFO: Funcao validate_signals_for_candle iniciada para o sinal K8V2L98I
2025-07-10 05:26:09,833 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:26:09,835 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:26:09,836 INFO: Funcao validate_signal iniciada para o signal K8V2L98I
2025-07-10 05:26:09,836 INFO: Funcao validate_signal finalizada para o signal K8V2L98I
2025-07-10 05:26:09,836 INFO: Validando sinal K8V2L98I sem gale items
2025-07-10 05:26:09,836 INFO: Sinal K8V2L98I adicionado à fila para G1
2025-07-10 05:26:09,836 INFO: Atualizando candle com filtro: {'epoch': 1752135840}, update: {'$set': {'epoch': 1752135840, 'open': 2753.673, 'high': 2754.321, 'low': 2753.673, 'close': 2754.015, 'time': datetime.datetime(2025, 7, 10, 8, 24), 'signal': {'signal_id': 'K8V2L98I', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 24), 'entry_time': datetime.datetime(2025, 7, 10, 5, 25), 'open_candle_timestamp': 1752135840, 'message_id': 10201, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135960, 'open_price': 2753.68, 'high': 2753.68, 'low': 2753.68, 'close_price': 2753.68, 'time': datetime.datetime(2025, 7, 10, 5, 26, 9, 836914), 'result': None}]}}
2025-07-10 05:26:09,839 INFO: Número de candles atualizados: 1
2025-07-10 05:26:09,839 INFO: Candle completo com gales atualizado para K8V2L98I
2025-07-10 05:26:10,657 INFO: ✅ Resposta de resultado enviada para o sinal K8V2L98I
2025-07-10 05:26:10,658 INFO: Sinal K8V2L98I validado como LOSS e notificação enviada
2025-07-10 05:26:10,658 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal K8V2L98I
2025-07-10 05:26:10,658 INFO: Validação concluída. Sinais pendentes restantes: 1
2025-07-10 05:27:09,852 INFO: 🔔 Novo candle detectado em 2025-07-10 08:27:00 UTC
2025-07-10 05:27:09,852 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:27:09,855 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:27:09,856 INFO: 🔔 Candle 1752136020 é maior que o entry_time 2025-07-10 05:25:00
2025-07-10 05:27:09,856 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:27:09,856 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:27:09,859 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:27:09,859 INFO: 🔄 Candle 1752135960 já existe no banco, atualizando...
2025-07-10 05:27:09,859 INFO: 🔄 Atualizando último gale item do candle 1752135960
2025-07-10 05:27:09,860 INFO: Atualizando candle com filtro: {'epoch': 1752135840}, update: {'$set': {'epoch': 1752135840, 'open': 2753.673, 'high': 2754.321, 'low': 2753.673, 'close': 2754.015, 'time': datetime.datetime(2025, 7, 10, 8, 24), 'signal': {'signal_id': 'K8V2L98I', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 24), 'entry_time': datetime.datetime(2025, 7, 10, 5, 25), 'open_candle_timestamp': 1752135840, 'message_id': 10201, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135960, 'open_price': 2753.68, 'high': 2753.781, 'low': 2752.915, 'close_price': 2752.976, 'time': datetime.datetime(2025, 7, 10, 5, 26, 9, 836000), 'result': None}]}}
2025-07-10 05:27:09,862 INFO: Número de candles atualizados: 1
2025-07-10 05:27:09,863 INFO: ✅ Candle 1752135840 atualizado com sucesso
2025-07-10 05:27:09,863 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:27:09,863 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:27:09,863 INFO: Funcao validate_signals_for_candle iniciada para o sinal K8V2L98I
2025-07-10 05:27:09,863 INFO: Buscando candle com signal_id: K8V2L98I
2025-07-10 05:27:09,865 INFO: Candle encontrado para o signal_id: K8V2L98I
2025-07-10 05:27:09,865 INFO: Funcao validate_signal iniciada para o signal K8V2L98I
2025-07-10 05:27:09,865 INFO: Validando sinal K8V2L98I com gale items
2025-07-10 05:27:09,866 INFO: Atualizando candle com filtro: {'epoch': 1752135840}, update: {'$set': {'epoch': 1752135840, 'open': 2753.673, 'high': 2754.321, 'low': 2753.673, 'close': 2754.015, 'time': datetime.datetime(2025, 7, 10, 8, 24), 'signal': {'signal_id': 'K8V2L98I', 'signal': 'FALL', 'confidence': 80, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 24), 'entry_time': datetime.datetime(2025, 7, 10, 5, 25), 'open_candle_timestamp': 1752135840, 'message_id': 10201, 'chat_id': -4767147054, 'result': 'LOSS'}, 'gale_items': [{'gale_type': 'G1', 'epoch': 1752135960, 'open_price': 2753.68, 'high': 2753.781, 'low': 2752.915, 'close_price': 2752.976, 'time': datetime.datetime(2025, 7, 10, 5, 26, 9, 836000), 'result': 'WIN'}]}}
2025-07-10 05:27:09,869 INFO: Número de candles atualizados: 1
2025-07-10 05:27:09,869 INFO: Candle completo com gales atualizado para K8V2L98I
2025-07-10 05:27:10,676 INFO: ✅ Resposta de resultado enviada para o sinal K8V2L98I
2025-07-10 05:27:10,676 INFO: Sinal K8V2L98I validado como LOSS e notificação enviada
2025-07-10 05:27:10,676 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal K8V2L98I
2025-07-10 05:27:10,677 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:28:09,855 INFO: 🔔 Novo candle detectado em 2025-07-10 08:28:00 UTC
2025-07-10 05:28:09,856 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:28:09,864 INFO: Buscando candle com filtro: {'epoch': 1752136080}
2025-07-10 05:28:09,868 INFO: Candle não encontrado
2025-07-10 05:28:09,883 INFO: Tendência HMA: FALL (HMA21=2752.33, HMA100=2752.44)
2025-07-10 05:28:09,884 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:28:09,884 INFO: 📈 Análise: EMA9=2752.40, EMA21=2752.54, trend_ema=FALL, trend_final=FALL, RSI=41.17, MACD=-0.16/-0.15, ATR=0.56, body=0.00, confidence=40
2025-07-10 05:28:09,885 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 40%
2025-07-10 05:28:09,885 INFO: Inserindo candle: Candle(2025-07-10 08:28:00, DOJI, O:2752.35, H:2752.35, L:2752.35, C:2752.35)
2025-07-10 05:28:09,887 INFO: Candle inserido com ID: 686f79991d9c27c6b2f10c5c
2025-07-10 05:28:10,689 INFO: Atualizando candle com filtro: {'signal.signal_id': '8S5PNWTW'}, update: {'$set': {'signal': {'signal_id': '8S5PNWTW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 28, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 29), 'open_candle_timestamp': 1752136080, 'message_id': 10205, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:28:10,692 INFO: Número de candles atualizados: 1
2025-07-10 05:28:10,693 INFO: ✅ Mensagem enviada ao Telegram (ID: 8S5PNWTW).
2025-07-10 05:29:09,827 INFO: 🔔 Novo candle detectado em 2025-07-10 08:29:00 UTC
2025-07-10 05:29:09,827 INFO: Buscando candle com signal_id: 8S5PNWTW
2025-07-10 05:29:09,830 INFO: Candle encontrado para o signal_id: 8S5PNWTW
2025-07-10 05:29:09,830 INFO: 🔔 Candle 1752136140 é menor ou igual ao entry_time 2025-07-10 05:29:00
2025-07-10 05:30:09,828 INFO: 🔔 Novo candle detectado em 2025-07-10 08:30:00 UTC
2025-07-10 05:30:09,828 INFO: Buscando candle com signal_id: 8S5PNWTW
2025-07-10 05:30:09,831 INFO: Candle encontrado para o signal_id: 8S5PNWTW
2025-07-10 05:30:09,831 INFO: 🔔 Candle 1752136200 é maior que o entry_time 2025-07-10 05:29:00
2025-07-10 05:30:09,831 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:30:09,832 INFO: Buscando candle com signal_id: 8S5PNWTW
2025-07-10 05:30:09,833 INFO: Candle encontrado para o signal_id: 8S5PNWTW
2025-07-10 05:30:09,834 INFO: 🔄 Candle 1752136080 já existe no banco, atualizando...
2025-07-10 05:30:09,834 INFO: 🔄 Candle 1752136080 não tem gale_items
2025-07-10 05:30:09,835 INFO: Atualizando candle com filtro: {'epoch': 1752136080}, update: {'$set': {'epoch': 1752136080, 'open': 2752.346, 'high': 2752.77, 'low': 2751.794, 'close': 2751.812, 'time': datetime.datetime(2025, 7, 10, 8, 28), 'signal': {'signal_id': '8S5PNWTW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 28), 'entry_time': datetime.datetime(2025, 7, 10, 5, 29), 'open_candle_timestamp': 1752136080, 'message_id': 10205, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:30:09,837 INFO: Número de candles atualizados: 1
2025-07-10 05:30:09,837 INFO: ✅ Candle 1752136080 atualizado com sucesso
2025-07-10 05:30:09,837 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:30:09,837 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:30:09,838 INFO: Funcao validate_signals_for_candle iniciada para o sinal 8S5PNWTW
2025-07-10 05:30:09,838 INFO: Buscando candle com signal_id: 8S5PNWTW
2025-07-10 05:30:09,840 INFO: Candle encontrado para o signal_id: 8S5PNWTW
2025-07-10 05:30:09,841 INFO: Funcao validate_signal iniciada para o signal 8S5PNWTW
2025-07-10 05:30:09,841 INFO: Funcao validate_signal finalizada para o signal 8S5PNWTW
2025-07-10 05:30:09,841 INFO: Validando sinal 8S5PNWTW sem gale items
2025-07-10 05:30:09,841 INFO: Atualizando candle com filtro: {'signal.signal_id': '8S5PNWTW'}, update: {'$set': {'signal': {'signal_id': '8S5PNWTW', 'signal': 'FALL', 'confidence': 40, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 28), 'entry_time': datetime.datetime(2025, 7, 10, 5, 29), 'open_candle_timestamp': 1752136080, 'message_id': 10205, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:30:09,843 INFO: Número de candles atualizados: 1
2025-07-10 05:30:09,843 INFO: Sinal atualizado no repositório para 8S5PNWTW
2025-07-10 05:30:10,675 INFO: ✅ Resposta de resultado enviada para o sinal 8S5PNWTW
2025-07-10 05:30:10,675 INFO: Sinal 8S5PNWTW validado como WIN e notificação enviada
2025-07-10 05:30:10,675 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal 8S5PNWTW
2025-07-10 05:30:10,676 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:31:09,868 INFO: 🔔 Novo candle detectado em 2025-07-10 08:31:00 UTC
2025-07-10 05:31:09,869 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:31:09,878 INFO: Buscando candle com filtro: {'epoch': 1752136260}
2025-07-10 05:31:09,881 INFO: Candle não encontrado
2025-07-10 05:31:09,896 INFO: Tendência HMA: FALL (HMA21=2750.25, HMA100=2750.45)
2025-07-10 05:31:09,896 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:31:09,897 INFO: 📈 Análise: EMA9=2750.34, EMA21=2750.54, trend_ema=FALL, trend_final=FALL, RSI=35.24, MACD=-0.24/-0.26, ATR=0.96, body=0.00, confidence=60
2025-07-10 05:31:09,897 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 60%
2025-07-10 05:31:09,897 INFO: Inserindo candle: Candle(2025-07-10 08:31:00, DOJI, O:2750.16, H:2750.16, L:2750.16, C:2750.16)
2025-07-10 05:31:09,900 INFO: Candle inserido com ID: 686f7a4d1d9c27c6b2f10c5d
2025-07-10 05:31:10,762 INFO: Atualizando candle com filtro: {'signal.signal_id': 'EYC2BL5I'}, update: {'$set': {'signal': {'signal_id': 'EYC2BL5I', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 31, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 32), 'open_candle_timestamp': 1752136260, 'message_id': 10208, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:31:10,766 INFO: Número de candles atualizados: 1
2025-07-10 05:31:10,766 INFO: ✅ Mensagem enviada ao Telegram (ID: EYC2BL5I).
2025-07-10 05:32:09,858 INFO: 🔔 Novo candle detectado em 2025-07-10 08:32:00 UTC
2025-07-10 05:32:09,858 INFO: Buscando candle com signal_id: EYC2BL5I
2025-07-10 05:32:09,861 INFO: Candle encontrado para o signal_id: EYC2BL5I
2025-07-10 05:32:09,861 INFO: 🔔 Candle 1752136320 é menor ou igual ao entry_time 2025-07-10 05:32:00
2025-07-10 05:33:09,872 INFO: 🔔 Novo candle detectado em 2025-07-10 08:33:00 UTC
2025-07-10 05:33:09,873 INFO: Buscando candle com signal_id: EYC2BL5I
2025-07-10 05:33:09,876 INFO: Candle encontrado para o signal_id: EYC2BL5I
2025-07-10 05:33:09,877 INFO: 🔔 Candle 1752136380 é maior que o entry_time 2025-07-10 05:32:00
2025-07-10 05:33:09,877 INFO: Funcao save_previous_candle_on_transition iniciada.
2025-07-10 05:33:09,877 INFO: Buscando candle com signal_id: EYC2BL5I
2025-07-10 05:33:09,879 INFO: Candle encontrado para o signal_id: EYC2BL5I
2025-07-10 05:33:09,879 INFO: 🔄 Candle 1752136260 já existe no banco, atualizando...
2025-07-10 05:33:09,879 INFO: 🔄 Candle 1752136260 não tem gale_items
2025-07-10 05:33:09,880 INFO: Atualizando candle com filtro: {'epoch': 1752136260}, update: {'$set': {'epoch': 1752136260, 'open': 2750.164, 'high': 2750.164, 'low': 2748.327, 'close': 2748.394, 'time': datetime.datetime(2025, 7, 10, 8, 31), 'signal': {'signal_id': 'EYC2BL5I', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 31), 'entry_time': datetime.datetime(2025, 7, 10, 5, 32), 'open_candle_timestamp': 1752136260, 'message_id': 10208, 'chat_id': -4767147054, 'result': None}, 'gale_items': []}}
2025-07-10 05:33:09,882 INFO: Número de candles atualizados: 1
2025-07-10 05:33:09,882 INFO: ✅ Candle 1752136260 atualizado com sucesso
2025-07-10 05:33:09,882 INFO: Funcao save_previous_candle_on_transition concluída com sucesso.
2025-07-10 05:33:09,883 INFO: Iniciando validação de sinais pendentes. Total: 1
2025-07-10 05:33:09,883 INFO: Funcao validate_signals_for_candle iniciada para o sinal EYC2BL5I
2025-07-10 05:33:09,883 INFO: Buscando candle com signal_id: EYC2BL5I
2025-07-10 05:33:09,884 INFO: Candle encontrado para o signal_id: EYC2BL5I
2025-07-10 05:33:09,885 INFO: Funcao validate_signal iniciada para o signal EYC2BL5I
2025-07-10 05:33:09,885 INFO: Funcao validate_signal finalizada para o signal EYC2BL5I
2025-07-10 05:33:09,885 INFO: Validando sinal EYC2BL5I sem gale items
2025-07-10 05:33:09,885 INFO: Atualizando candle com filtro: {'signal.signal_id': 'EYC2BL5I'}, update: {'$set': {'signal': {'signal_id': 'EYC2BL5I', 'signal': 'FALL', 'confidence': 60, 'analyze_time': datetime.datetime(2025, 7, 10, 5, 31), 'entry_time': datetime.datetime(2025, 7, 10, 5, 32), 'open_candle_timestamp': 1752136260, 'message_id': 10208, 'chat_id': -4767147054, 'result': 'WIN'}}}
2025-07-10 05:33:09,888 INFO: Número de candles atualizados: 1
2025-07-10 05:33:09,888 INFO: Sinal atualizado no repositório para EYC2BL5I
2025-07-10 05:33:10,691 INFO: ✅ Resposta de resultado enviada para o sinal EYC2BL5I
2025-07-10 05:33:10,692 INFO: Sinal EYC2BL5I validado como WIN e notificação enviada
2025-07-10 05:33:10,692 INFO: Funcao validate_signals_for_candle finalizada com sucesso para o sinal EYC2BL5I
2025-07-10 05:33:10,692 INFO: Validação concluída. Sinais pendentes restantes: 0
2025-07-10 05:34:09,819 INFO: 🔔 Novo candle detectado em 2025-07-10 08:34:00 UTC
2025-07-10 05:34:09,820 INFO: 📊 Iniciando processamento de 200 candles
2025-07-10 05:34:09,829 INFO: Buscando candle com filtro: {'epoch': 1752136440}
2025-07-10 05:34:09,830 INFO: Candle não encontrado
2025-07-10 05:34:09,848 INFO: Tendência HMA: FALL (HMA21=2749.94, HMA100=2749.03)
2025-07-10 05:34:09,848 INFO: ✅ Tendências HMA, EMA e BB concordam: FALL
2025-07-10 05:34:09,849 INFO: 📈 Análise: EMA9=2749.64, EMA21=2749.36, trend_ema=RISE, trend_final=FALL, RSI=58.86, MACD=0.33/0.34, ATR=1.48, body=0.00, confidence=20
2025-07-10 05:34:09,849 INFO: 🚨 SINAL DETECTADO: FALL | Confiança: 20%
2025-07-10 05:34:09,849 INFO: Inserindo candle: Candle(2025-07-10 08:34:00, DOJI, O:2749.58, H:2749.58, L:2749.58, C:2749.58)
2025-07-10 05:34:09,852 INFO: Candle inserido com ID: 686f7b011d9c27c6b2f10c5e
2025-07-10 05:34:10,670 INFO: Atualizando candle com filtro: {'signal.signal_id': 'V8T248HI'}, update: {'$set': {'signal': {'signal_id': 'V8T248HI', 'signal': 'FALL', 'confidence': 20, 'analyze_time': datetime.datetime(2025, 7, 10, 2, 34, tzinfo=<DstTzInfo 'America/Sao_Paulo' -03-1 day, 21:00:00 STD>), 'entry_time': datetime.datetime(2025, 7, 10, 5, 35), 'open_candle_timestamp': 1752136440, 'message_id': 10210, 'chat_id': -4767147054, 'result': None}}}
2025-07-10 05:34:10,673 INFO: Número de candles atualizados: 1
2025-07-10 05:34:10,673 INFO: ✅ Mensagem enviada ao Telegram (ID: V8T248HI).
2025-07-10 05:35:09,853 INFO: 🔔 Novo candle detectado em 2025-07-10 08:35:00 UTC
2025-07-10 05:35:09,853 INFO: Buscando candle com signal_id: V8T248HI
2025-07-10 05:35:09,856 INFO: Candle encontrado para o signal_id: V8T248HI
2025-07-10 05:35:09,857 INFO: 🔔 Candle 1752136500 é menor ou igual ao entry_time 2025-07-10 05:35:00
